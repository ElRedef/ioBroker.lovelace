"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkhome_assistant_frontend"] = self["webpackChunkhome_assistant_frontend"] || []).push([["src_data_energy_ts"],{

/***/ "./src/common/util/group-by.ts":
/*!*************************************!*\
  !*** ./src/common/util/group-by.ts ***!
  \*************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   groupBy: function() { return /* binding */ groupBy; }\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/createForOfIteratorHelper */ \"./node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\");\n\nvar groupBy = function groupBy(list, keySelector) {\n  var result = {};\n  var _iterator = (0,_babel_runtime_helpers_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(list),\n    _step;\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var _item = _step.value;\n      var _key = keySelector(_item);\n      if (_key in result) {\n        result[_key].push(_item);\n      } else {\n        result[_key] = [_item];\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n  return result;\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tbW9uL3V0aWwvZ3JvdXAtYnkudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFJQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaG9tZS1hc3Npc3RhbnQtZnJvbnRlbmQvLi9zcmMvY29tbW9uL3V0aWwvZ3JvdXAtYnkudHM/Mzg4NyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgZ3JvdXBCeSA9IDxUPihcbiAgbGlzdDogVFtdLFxuICBrZXlTZWxlY3RvcjogKGl0ZW06IFQpID0+IHN0cmluZ1xuKTogeyBba2V5OiBzdHJpbmddOiBUW10gfSA9PiB7XG4gIGNvbnN0IHJlc3VsdCA9IHt9O1xuICBmb3IgKGNvbnN0IGl0ZW0gb2YgbGlzdCkge1xuICAgIGNvbnN0IGtleSA9IGtleVNlbGVjdG9yKGl0ZW0pO1xuICAgIGlmIChrZXkgaW4gcmVzdWx0KSB7XG4gICAgICByZXN1bHRba2V5XS5wdXNoKGl0ZW0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXN1bHRba2V5XSA9IFtpdGVtXTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/common/util/group-by.ts\n");

/***/ }),

/***/ "./src/data/config_entries.ts":
/*!************************************!*\
  !*** ./src/data/config_entries.ts ***!
  \************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ERROR_STATES: function() { return /* binding */ ERROR_STATES; },\n/* harmony export */   RECOVERABLE_STATES: function() { return /* binding */ RECOVERABLE_STATES; },\n/* harmony export */   deleteConfigEntry: function() { return /* binding */ deleteConfigEntry; },\n/* harmony export */   disableConfigEntry: function() { return /* binding */ disableConfigEntry; },\n/* harmony export */   enableConfigEntry: function() { return /* binding */ enableConfigEntry; },\n/* harmony export */   getConfigEntries: function() { return /* binding */ getConfigEntries; },\n/* harmony export */   getConfigEntry: function() { return /* binding */ getConfigEntry; },\n/* harmony export */   reloadConfigEntry: function() { return /* binding */ reloadConfigEntry; },\n/* harmony export */   subscribeConfigEntries: function() { return /* binding */ subscribeConfigEntries; },\n/* harmony export */   updateConfigEntry: function() { return /* binding */ updateConfigEntry; }\n/* harmony export */ });\n// https://github.com/home-assistant/core/blob/2286dea636fda001f03433ba14d7adbda43979e5/homeassistant/config_entries.py#L81\nvar ERROR_STATES = [\"migration_error\", \"setup_error\", \"setup_retry\"];\n\n// https://github.com/home-assistant/core/blob/2286dea636fda001f03433ba14d7adbda43979e5/homeassistant/config_entries.py#L81\nvar RECOVERABLE_STATES = [\"not_loaded\", \"loaded\", \"setup_error\", \"setup_retry\"];\nvar subscribeConfigEntries = function subscribeConfigEntries(hass, callbackFunction, filters) {\n  var params = {\n    type: \"config_entries/subscribe\"\n  };\n  if (filters && filters.type) {\n    params.type_filter = filters.type;\n  }\n  return hass.connection.subscribeMessage(function (message) {\n    return callbackFunction(message);\n  }, params);\n};\nvar getConfigEntries = function getConfigEntries(hass, filters) {\n  var params = {};\n  if (filters) {\n    if (filters.type) {\n      params.type_filter = filters.type;\n    }\n    if (filters.domain) {\n      params.domain = filters.domain;\n    }\n  }\n  return hass.callWS(Object.assign({\n    type: \"config_entries/get\"\n  }, params));\n};\nvar getConfigEntry = function getConfigEntry(hass, configEntryId) {\n  return hass.callWS({\n    type: \"config_entries/get_single\",\n    entry_id: configEntryId\n  });\n};\nvar updateConfigEntry = function updateConfigEntry(hass, configEntryId, updatedValues) {\n  return hass.callWS(Object.assign({\n    type: \"config_entries/update\",\n    entry_id: configEntryId\n  }, updatedValues));\n};\nvar deleteConfigEntry = function deleteConfigEntry(hass, configEntryId) {\n  return hass.callApi(\"DELETE\", \"config/config_entries/entry/\".concat(configEntryId));\n};\nvar reloadConfigEntry = function reloadConfigEntry(hass, configEntryId) {\n  return hass.callApi(\"POST\", \"config/config_entries/entry/\".concat(configEntryId, \"/reload\"));\n};\nvar disableConfigEntry = function disableConfigEntry(hass, configEntryId) {\n  return hass.callWS({\n    type: \"config_entries/disable\",\n    entry_id: configEntryId,\n    disabled_by: \"user\"\n  });\n};\nvar enableConfigEntry = function enableConfigEntry(hass, configEntryId) {\n  return hass.callWS({\n    type: \"config_entries/disable\",\n    entry_id: configEntryId,\n    disabled_by: null\n  });\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZGF0YS9jb25maWdfZW50cmllcy50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBaUNBO0FBQ0E7O0FBTUE7QUFDQTtBQWFBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBR0E7QUFFQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUdBO0FBRUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFHQTtBQUdBO0FBQ0E7QUFBQTtBQUVBO0FBRUE7QUFBQTtBQUdBO0FBRUE7QUFBQTtBQUdBO0FBTUE7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUFBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFBQSIsInNvdXJjZXMiOlsid2VicGFjazovL2hvbWUtYXNzaXN0YW50LWZyb250ZW5kLy4vc3JjL2RhdGEvY29uZmlnX2VudHJpZXMudHM/NGZkMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBVbnN1YnNjcmliZUZ1bmMgfSBmcm9tIFwiaG9tZS1hc3Npc3RhbnQtanMtd2Vic29ja2V0XCI7XG5pbXBvcnQgeyBIb21lQXNzaXN0YW50IH0gZnJvbSBcIi4uL3R5cGVzXCI7XG5pbXBvcnQgeyBJbnRlZ3JhdGlvblR5cGUgfSBmcm9tIFwiLi9pbnRlZ3JhdGlvblwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIENvbmZpZ0VudHJ5IHtcbiAgZW50cnlfaWQ6IHN0cmluZztcbiAgZG9tYWluOiBzdHJpbmc7XG4gIHRpdGxlOiBzdHJpbmc7XG4gIHNvdXJjZTogc3RyaW5nO1xuICBzdGF0ZTpcbiAgICB8IFwibG9hZGVkXCJcbiAgICB8IFwic2V0dXBfZXJyb3JcIlxuICAgIHwgXCJtaWdyYXRpb25fZXJyb3JcIlxuICAgIHwgXCJzZXR1cF9yZXRyeVwiXG4gICAgfCBcIm5vdF9sb2FkZWRcIlxuICAgIHwgXCJmYWlsZWRfdW5sb2FkXCJcbiAgICB8IFwic2V0dXBfaW5fcHJvZ3Jlc3NcIjtcbiAgc3VwcG9ydHNfb3B0aW9uczogYm9vbGVhbjtcbiAgc3VwcG9ydHNfcmVtb3ZlX2RldmljZTogYm9vbGVhbjtcbiAgc3VwcG9ydHNfdW5sb2FkOiBib29sZWFuO1xuICBwcmVmX2Rpc2FibGVfbmV3X2VudGl0aWVzOiBib29sZWFuO1xuICBwcmVmX2Rpc2FibGVfcG9sbGluZzogYm9vbGVhbjtcbiAgZGlzYWJsZWRfYnk6IFwidXNlclwiIHwgbnVsbDtcbiAgcmVhc29uOiBzdHJpbmcgfCBudWxsO1xufVxuXG5leHBvcnQgdHlwZSBDb25maWdFbnRyeU11dGFibGVQYXJhbXMgPSBQYXJ0aWFsPFxuICBQaWNrPFxuICAgIENvbmZpZ0VudHJ5LFxuICAgIFwidGl0bGVcIiB8IFwicHJlZl9kaXNhYmxlX25ld19lbnRpdGllc1wiIHwgXCJwcmVmX2Rpc2FibGVfcG9sbGluZ1wiXG4gID5cbj47XG5cbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9ob21lLWFzc2lzdGFudC9jb3JlL2Jsb2IvMjI4NmRlYTYzNmZkYTAwMWYwMzQzM2JhMTRkN2FkYmRhNDM5NzllNS9ob21lYXNzaXN0YW50L2NvbmZpZ19lbnRyaWVzLnB5I0w4MVxuZXhwb3J0IGNvbnN0IEVSUk9SX1NUQVRFUzogQ29uZmlnRW50cnlbXCJzdGF0ZVwiXVtdID0gW1xuICBcIm1pZ3JhdGlvbl9lcnJvclwiLFxuICBcInNldHVwX2Vycm9yXCIsXG4gIFwic2V0dXBfcmV0cnlcIixcbl07XG5cbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9ob21lLWFzc2lzdGFudC9jb3JlL2Jsb2IvMjI4NmRlYTYzNmZkYTAwMWYwMzQzM2JhMTRkN2FkYmRhNDM5NzllNS9ob21lYXNzaXN0YW50L2NvbmZpZ19lbnRyaWVzLnB5I0w4MVxuZXhwb3J0IGNvbnN0IFJFQ09WRVJBQkxFX1NUQVRFUzogQ29uZmlnRW50cnlbXCJzdGF0ZVwiXVtdID0gW1xuICBcIm5vdF9sb2FkZWRcIixcbiAgXCJsb2FkZWRcIixcbiAgXCJzZXR1cF9lcnJvclwiLFxuICBcInNldHVwX3JldHJ5XCIsXG5dO1xuXG5leHBvcnQgaW50ZXJmYWNlIENvbmZpZ0VudHJ5VXBkYXRlIHtcbiAgLy8gbnVsbCBtZWFucyBubyB1cGRhdGUgYXMgaXMgdGhlIGN1cnJlbnQgc3RhdGVcbiAgdHlwZTogbnVsbCB8IFwiYWRkZWRcIiB8IFwicmVtb3ZlZFwiIHwgXCJ1cGRhdGVkXCI7XG4gIGVudHJ5OiBDb25maWdFbnRyeTtcbn1cblxuZXhwb3J0IGNvbnN0IHN1YnNjcmliZUNvbmZpZ0VudHJpZXMgPSAoXG4gIGhhc3M6IEhvbWVBc3Npc3RhbnQsXG4gIGNhbGxiYWNrRnVuY3Rpb246IChtZXNzYWdlOiBDb25maWdFbnRyeVVwZGF0ZVtdKSA9PiB2b2lkLFxuICBmaWx0ZXJzPzoge1xuICAgIHR5cGU/OiBJbnRlZ3JhdGlvblR5cGVbXTtcbiAgICBkb21haW4/OiBzdHJpbmc7XG4gIH1cbik6IFByb21pc2U8VW5zdWJzY3JpYmVGdW5jPiA9PiB7XG4gIGNvbnN0IHBhcmFtczogYW55ID0ge1xuICAgIHR5cGU6IFwiY29uZmlnX2VudHJpZXMvc3Vic2NyaWJlXCIsXG4gIH07XG4gIGlmIChmaWx0ZXJzICYmIGZpbHRlcnMudHlwZSkge1xuICAgIHBhcmFtcy50eXBlX2ZpbHRlciA9IGZpbHRlcnMudHlwZTtcbiAgfVxuICByZXR1cm4gaGFzcy5jb25uZWN0aW9uLnN1YnNjcmliZU1lc3NhZ2U8Q29uZmlnRW50cnlVcGRhdGVbXT4oXG4gICAgKG1lc3NhZ2UpID0+IGNhbGxiYWNrRnVuY3Rpb24obWVzc2FnZSksXG4gICAgcGFyYW1zXG4gICk7XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0Q29uZmlnRW50cmllcyA9IChcbiAgaGFzczogSG9tZUFzc2lzdGFudCxcbiAgZmlsdGVycz86IHtcbiAgICB0eXBlPzogSW50ZWdyYXRpb25UeXBlW107XG4gICAgZG9tYWluPzogc3RyaW5nO1xuICB9XG4pOiBQcm9taXNlPENvbmZpZ0VudHJ5W10+ID0+IHtcbiAgY29uc3QgcGFyYW1zOiBhbnkgPSB7fTtcbiAgaWYgKGZpbHRlcnMpIHtcbiAgICBpZiAoZmlsdGVycy50eXBlKSB7XG4gICAgICBwYXJhbXMudHlwZV9maWx0ZXIgPSBmaWx0ZXJzLnR5cGU7XG4gICAgfVxuICAgIGlmIChmaWx0ZXJzLmRvbWFpbikge1xuICAgICAgcGFyYW1zLmRvbWFpbiA9IGZpbHRlcnMuZG9tYWluO1xuICAgIH1cbiAgfVxuICByZXR1cm4gaGFzcy5jYWxsV1M8Q29uZmlnRW50cnlbXT4oe1xuICAgIHR5cGU6IFwiY29uZmlnX2VudHJpZXMvZ2V0XCIsXG4gICAgLi4ucGFyYW1zLFxuICB9KTtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRDb25maWdFbnRyeSA9IChoYXNzOiBIb21lQXNzaXN0YW50LCBjb25maWdFbnRyeUlkOiBzdHJpbmcpID0+XG4gIGhhc3MuY2FsbFdTPHsgY29uZmlnX2VudHJ5OiBDb25maWdFbnRyeSB9Pih7XG4gICAgdHlwZTogXCJjb25maWdfZW50cmllcy9nZXRfc2luZ2xlXCIsXG4gICAgZW50cnlfaWQ6IGNvbmZpZ0VudHJ5SWQsXG4gIH0pO1xuXG5leHBvcnQgY29uc3QgdXBkYXRlQ29uZmlnRW50cnkgPSAoXG4gIGhhc3M6IEhvbWVBc3Npc3RhbnQsXG4gIGNvbmZpZ0VudHJ5SWQ6IHN0cmluZyxcbiAgdXBkYXRlZFZhbHVlczogQ29uZmlnRW50cnlNdXRhYmxlUGFyYW1zXG4pID0+XG4gIGhhc3MuY2FsbFdTPHsgcmVxdWlyZV9yZXN0YXJ0OiBib29sZWFuOyBjb25maWdfZW50cnk6IENvbmZpZ0VudHJ5IH0+KHtcbiAgICB0eXBlOiBcImNvbmZpZ19lbnRyaWVzL3VwZGF0ZVwiLFxuICAgIGVudHJ5X2lkOiBjb25maWdFbnRyeUlkLFxuICAgIC4uLnVwZGF0ZWRWYWx1ZXMsXG4gIH0pO1xuXG5leHBvcnQgY29uc3QgZGVsZXRlQ29uZmlnRW50cnkgPSAoaGFzczogSG9tZUFzc2lzdGFudCwgY29uZmlnRW50cnlJZDogc3RyaW5nKSA9PlxuICBoYXNzLmNhbGxBcGk8e1xuICAgIHJlcXVpcmVfcmVzdGFydDogYm9vbGVhbjtcbiAgfT4oXCJERUxFVEVcIiwgYGNvbmZpZy9jb25maWdfZW50cmllcy9lbnRyeS8ke2NvbmZpZ0VudHJ5SWR9YCk7XG5cbmV4cG9ydCBjb25zdCByZWxvYWRDb25maWdFbnRyeSA9IChoYXNzOiBIb21lQXNzaXN0YW50LCBjb25maWdFbnRyeUlkOiBzdHJpbmcpID0+XG4gIGhhc3MuY2FsbEFwaTx7XG4gICAgcmVxdWlyZV9yZXN0YXJ0OiBib29sZWFuO1xuICB9PihcIlBPU1RcIiwgYGNvbmZpZy9jb25maWdfZW50cmllcy9lbnRyeS8ke2NvbmZpZ0VudHJ5SWR9L3JlbG9hZGApO1xuXG5leHBvcnQgaW50ZXJmYWNlIERpc2FibGVDb25maWdFbnRyeVJlc3VsdCB7XG4gIHJlcXVpcmVfcmVzdGFydDogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGNvbnN0IGRpc2FibGVDb25maWdFbnRyeSA9IChcbiAgaGFzczogSG9tZUFzc2lzdGFudCxcbiAgY29uZmlnRW50cnlJZDogc3RyaW5nXG4pID0+XG4gIGhhc3MuY2FsbFdTPERpc2FibGVDb25maWdFbnRyeVJlc3VsdD4oe1xuICAgIHR5cGU6IFwiY29uZmlnX2VudHJpZXMvZGlzYWJsZVwiLFxuICAgIGVudHJ5X2lkOiBjb25maWdFbnRyeUlkLFxuICAgIGRpc2FibGVkX2J5OiBcInVzZXJcIixcbiAgfSk7XG5cbmV4cG9ydCBjb25zdCBlbmFibGVDb25maWdFbnRyeSA9IChoYXNzOiBIb21lQXNzaXN0YW50LCBjb25maWdFbnRyeUlkOiBzdHJpbmcpID0+XG4gIGhhc3MuY2FsbFdTPHtcbiAgICByZXF1aXJlX3Jlc3RhcnQ6IGJvb2xlYW47XG4gIH0+KHtcbiAgICB0eXBlOiBcImNvbmZpZ19lbnRyaWVzL2Rpc2FibGVcIixcbiAgICBlbnRyeV9pZDogY29uZmlnRW50cnlJZCxcbiAgICBkaXNhYmxlZF9ieTogbnVsbCxcbiAgfSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/data/config_entries.ts\n");

/***/ }),

/***/ "./src/data/energy.ts":
/*!****************************!*\
  !*** ./src/data/energy.ts ***!
  \****************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   emptyBatteryEnergyPreference: function() { return /* binding */ emptyBatteryEnergyPreference; },\n/* harmony export */   emptyFlowFromGridSourceEnergyPreference: function() { return /* binding */ emptyFlowFromGridSourceEnergyPreference; },\n/* harmony export */   emptyFlowToGridSourceEnergyPreference: function() { return /* binding */ emptyFlowToGridSourceEnergyPreference; },\n/* harmony export */   emptyGasEnergyPreference: function() { return /* binding */ emptyGasEnergyPreference; },\n/* harmony export */   emptyGridSourceEnergyPreference: function() { return /* binding */ emptyGridSourceEnergyPreference; },\n/* harmony export */   emptySolarEnergyPreference: function() { return /* binding */ emptySolarEnergyPreference; },\n/* harmony export */   emptyWaterEnergyPreference: function() { return /* binding */ emptyWaterEnergyPreference; },\n/* harmony export */   energySourcesByType: function() { return /* binding */ energySourcesByType; },\n/* harmony export */   getEnergyDataCollection: function() { return /* binding */ getEnergyDataCollection; },\n/* harmony export */   getEnergyGasUnit: function() { return /* binding */ getEnergyGasUnit; },\n/* harmony export */   getEnergyGasUnitClass: function() { return /* binding */ getEnergyGasUnitClass; },\n/* harmony export */   getEnergyInfo: function() { return /* binding */ getEnergyInfo; },\n/* harmony export */   getEnergyPreferenceValidation: function() { return /* binding */ getEnergyPreferenceValidation; },\n/* harmony export */   getEnergyPreferences: function() { return /* binding */ getEnergyPreferences; },\n/* harmony export */   getEnergySolarForecasts: function() { return /* binding */ getEnergySolarForecasts; },\n/* harmony export */   getEnergyWaterUnit: function() { return /* binding */ getEnergyWaterUnit; },\n/* harmony export */   getFossilEnergyConsumption: function() { return /* binding */ getFossilEnergyConsumption; },\n/* harmony export */   getReferencedStatisticIds: function() { return /* binding */ getReferencedStatisticIds; },\n/* harmony export */   saveEnergyPreferences: function() { return /* binding */ saveEnergyPreferences; }\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/toConsumableArray */ \"./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ \"./node_modules/@babel/runtime/helpers/esm/slicedToArray.js\");\n/* harmony import */ var _babel_runtime_helpers_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/createForOfIteratorHelper */ \"./node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\");\n/* harmony import */ var _babel_runtime_helpers_regeneratorRuntime__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/regeneratorRuntime */ \"./node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ \"./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\");\n/* harmony import */ var date_fns_esm__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! date-fns/esm */ \"./node_modules/date-fns/esm/differenceInDays/index.js\");\n/* harmony import */ var date_fns_esm__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! date-fns/esm */ \"./node_modules/date-fns/esm/addMonths/index.js\");\n/* harmony import */ var date_fns_esm__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! date-fns/esm */ \"./node_modules/date-fns/esm/addDays/index.js\");\n/* harmony import */ var date_fns_esm__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! date-fns/esm */ \"./node_modules/date-fns/esm/addMilliseconds/index.js\");\n/* harmony import */ var date_fns_esm__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! date-fns/esm */ \"./node_modules/date-fns/esm/startOfToday/index.js\");\n/* harmony import */ var date_fns_esm__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! date-fns/esm */ \"./node_modules/date-fns/esm/startOfYesterday/index.js\");\n/* harmony import */ var date_fns_esm__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! date-fns/esm */ \"./node_modules/date-fns/esm/endOfToday/index.js\");\n/* harmony import */ var date_fns_esm__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! date-fns/esm */ \"./node_modules/date-fns/esm/endOfYesterday/index.js\");\n/* harmony import */ var date_fns_esm__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! date-fns/esm */ \"./node_modules/date-fns/esm/addHours/index.js\");\n/* harmony import */ var home_assistant_js_websocket__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! home-assistant-js-websocket */ \"./node_modules/home-assistant-js-websocket/dist/collection.js\");\n/* harmony import */ var _common_util_group_by__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../common/util/group-by */ \"./src/common/util/group-by.ts\");\n/* harmony import */ var _config_entries__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./config_entries */ \"./src/data/config_entries.ts\");\n/* harmony import */ var _recorder__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./recorder */ \"./src/data/recorder.ts\");\n\n\n\n\n\n\n\n\n\n\nvar energyCollectionKeys = [];\nvar emptyFlowFromGridSourceEnergyPreference = function emptyFlowFromGridSourceEnergyPreference() {\n  return {\n    stat_energy_from: \"\",\n    stat_cost: null,\n    entity_energy_price: null,\n    number_energy_price: null\n  };\n};\nvar emptyFlowToGridSourceEnergyPreference = function emptyFlowToGridSourceEnergyPreference() {\n  return {\n    stat_energy_to: \"\",\n    stat_compensation: null,\n    entity_energy_price: null,\n    number_energy_price: null\n  };\n};\nvar emptyGridSourceEnergyPreference = function emptyGridSourceEnergyPreference() {\n  return {\n    type: \"grid\",\n    flow_from: [],\n    flow_to: [],\n    cost_adjustment_day: 0\n  };\n};\nvar emptySolarEnergyPreference = function emptySolarEnergyPreference() {\n  return {\n    type: \"solar\",\n    stat_energy_from: \"\",\n    config_entry_solar_forecast: null\n  };\n};\nvar emptyBatteryEnergyPreference = function emptyBatteryEnergyPreference() {\n  return {\n    type: \"battery\",\n    stat_energy_from: \"\",\n    stat_energy_to: \"\"\n  };\n};\nvar emptyGasEnergyPreference = function emptyGasEnergyPreference() {\n  return {\n    type: \"gas\",\n    stat_energy_from: \"\",\n    stat_cost: null,\n    entity_energy_price: null,\n    number_energy_price: null\n  };\n};\nvar emptyWaterEnergyPreference = function emptyWaterEnergyPreference() {\n  return {\n    type: \"water\",\n    stat_energy_from: \"\",\n    stat_cost: null,\n    entity_energy_price: null,\n    number_energy_price: null\n  };\n};\nvar getEnergyInfo = function getEnergyInfo(hass) {\n  return hass.callWS({\n    type: \"energy/info\"\n  });\n};\nvar getEnergyPreferenceValidation = /*#__PURE__*/function () {\n  var _ref = (0,_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4__[\"default\"])( /*#__PURE__*/(0,_babel_runtime_helpers_regeneratorRuntime__WEBPACK_IMPORTED_MODULE_3__[\"default\"])().mark(function _callee(hass) {\n    return (0,_babel_runtime_helpers_regeneratorRuntime__WEBPACK_IMPORTED_MODULE_3__[\"default\"])().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return hass.loadBackendTranslation(\"issues\", \"energy\");\n        case 2:\n          return _context.abrupt(\"return\", hass.callWS({\n            type: \"energy/validate\"\n          }));\n        case 3:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function getEnergyPreferenceValidation(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar getEnergyPreferences = function getEnergyPreferences(hass) {\n  return hass.callWS({\n    type: \"energy/get_prefs\"\n  });\n};\nvar saveEnergyPreferences = /*#__PURE__*/function () {\n  var _ref2 = (0,_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4__[\"default\"])( /*#__PURE__*/(0,_babel_runtime_helpers_regeneratorRuntime__WEBPACK_IMPORTED_MODULE_3__[\"default\"])().mark(function _callee2(hass, prefs) {\n    var newPrefs;\n    return (0,_babel_runtime_helpers_regeneratorRuntime__WEBPACK_IMPORTED_MODULE_3__[\"default\"])().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          newPrefs = hass.callWS(Object.assign({\n            type: \"energy/save_prefs\"\n          }, prefs));\n          clearEnergyCollectionPreferences(hass);\n          return _context2.abrupt(\"return\", newPrefs);\n        case 3:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2);\n  }));\n  return function saveEnergyPreferences(_x2, _x3) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nvar getFossilEnergyConsumption = /*#__PURE__*/function () {\n  var _ref3 = (0,_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4__[\"default\"])( /*#__PURE__*/(0,_babel_runtime_helpers_regeneratorRuntime__WEBPACK_IMPORTED_MODULE_3__[\"default\"])().mark(function _callee3(hass, startTime, energy_statistic_ids, co2_statistic_id, endTime) {\n    var period,\n      _args3 = arguments;\n    return (0,_babel_runtime_helpers_regeneratorRuntime__WEBPACK_IMPORTED_MODULE_3__[\"default\"])().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          period = _args3.length > 5 && _args3[5] !== undefined ? _args3[5] : \"hour\";\n          return _context3.abrupt(\"return\", hass.callWS({\n            type: \"energy/fossil_energy_consumption\",\n            start_time: startTime.toISOString(),\n            end_time: endTime === null || endTime === void 0 ? void 0 : endTime.toISOString(),\n            energy_statistic_ids: energy_statistic_ids,\n            co2_statistic_id: co2_statistic_id,\n            period: period\n          }));\n        case 2:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3);\n  }));\n  return function getFossilEnergyConsumption(_x4, _x5, _x6, _x7, _x8) {\n    return _ref3.apply(this, arguments);\n  };\n}();\nvar energySourcesByType = function energySourcesByType(prefs) {\n  return (0,_common_util_group_by__WEBPACK_IMPORTED_MODULE_5__.groupBy)(prefs.energy_sources, function (item) {\n    return item.type;\n  });\n};\nvar getReferencedStatisticIds = function getReferencedStatisticIds(prefs, info, includeTypes) {\n  var statIDs = [];\n  var _iterator = (0,_babel_runtime_helpers_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(prefs.energy_sources),\n    _step;\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var source = _step.value;\n      if (includeTypes && !includeTypes.includes(source.type)) {\n        continue;\n      }\n      if (source.type === \"solar\") {\n        statIDs.push(source.stat_energy_from);\n        continue;\n      }\n      if (source.type === \"gas\" || source.type === \"water\") {\n        statIDs.push(source.stat_energy_from);\n        if (source.stat_cost) {\n          statIDs.push(source.stat_cost);\n        }\n        var costStatId = info.cost_sensors[source.stat_energy_from];\n        if (costStatId) {\n          statIDs.push(costStatId);\n        }\n        continue;\n      }\n      if (source.type === \"battery\") {\n        statIDs.push(source.stat_energy_from);\n        statIDs.push(source.stat_energy_to);\n        continue;\n      }\n\n      // grid source\n      var _iterator2 = (0,_babel_runtime_helpers_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(source.flow_from),\n        _step2;\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var flowFrom = _step2.value;\n          statIDs.push(flowFrom.stat_energy_from);\n          if (flowFrom.stat_cost) {\n            statIDs.push(flowFrom.stat_cost);\n          }\n          var _costStatId = info.cost_sensors[flowFrom.stat_energy_from];\n          if (_costStatId) {\n            statIDs.push(_costStatId);\n          }\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n      var _iterator3 = (0,_babel_runtime_helpers_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(source.flow_to),\n        _step3;\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var flowTo = _step3.value;\n          statIDs.push(flowTo.stat_energy_to);\n          if (flowTo.stat_compensation) {\n            statIDs.push(flowTo.stat_compensation);\n          }\n          var _costStatId2 = info.cost_sensors[flowTo.stat_energy_to];\n          if (_costStatId2) {\n            statIDs.push(_costStatId2);\n          }\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n  return statIDs;\n};\nvar getEnergyData = /*#__PURE__*/function () {\n  var _ref4 = (0,_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4__[\"default\"])( /*#__PURE__*/(0,_babel_runtime_helpers_regeneratorRuntime__WEBPACK_IMPORTED_MODULE_3__[\"default\"])().mark(function _callee4(hass, prefs, start, end, compare) {\n    var _yield$Promise$all, _yield$Promise$all2, configEntries, info, co2SignalConfigEntry, co2SignalEntity, _i, _Object$values, entity, co2State, consumptionStatIDs, _iterator4, _step4, source, _iterator5, _step5, flowFrom, energyStatIds, waterStatIds, allStatIDs, dayDifference, period, lengthUnit, energyUnits, waterUnits, _energyStats, _waterStats, statsCompare, startCompare, endCompare, _energyStatsCompare, _waterStatsCompare, _fossilEnergyConsumption, _fossilEnergyConsumptionCompare, statsMetadata, _getStatisticMetadata, _yield$Promise$all3, _yield$Promise$all4, energyStats, waterStats, energyStatsCompare, waterStatsCompare, statsMetadataArray, fossilEnergyConsumption, fossilEnergyConsumptionCompare, stats, data;\n    return (0,_babel_runtime_helpers_regeneratorRuntime__WEBPACK_IMPORTED_MODULE_3__[\"default\"])().wrap(function _callee4$(_context4) {\n      while (1) switch (_context4.prev = _context4.next) {\n        case 0:\n          _context4.next = 2;\n          return Promise.all([(0,_config_entries__WEBPACK_IMPORTED_MODULE_6__.getConfigEntries)(hass, {\n            domain: \"co2signal\"\n          }), getEnergyInfo(hass)]);\n        case 2:\n          _yield$Promise$all = _context4.sent;\n          _yield$Promise$all2 = (0,_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(_yield$Promise$all, 2);\n          configEntries = _yield$Promise$all2[0];\n          info = _yield$Promise$all2[1];\n          co2SignalConfigEntry = configEntries.length ? configEntries[0] : undefined;\n          if (!co2SignalConfigEntry) {\n            _context4.next = 21;\n            break;\n          }\n          _i = 0, _Object$values = Object.values(hass.entities);\n        case 9:\n          if (!(_i < _Object$values.length)) {\n            _context4.next = 21;\n            break;\n          }\n          entity = _Object$values[_i];\n          if (!(entity.platform !== \"co2signal\")) {\n            _context4.next = 13;\n            break;\n          }\n          return _context4.abrupt(\"continue\", 18);\n        case 13:\n          // The integration offers 2 entities. We want the % one.\n          co2State = hass.states[entity.entity_id];\n          if (!(!co2State || co2State.attributes.unit_of_measurement !== \"%\")) {\n            _context4.next = 16;\n            break;\n          }\n          return _context4.abrupt(\"continue\", 18);\n        case 16:\n          co2SignalEntity = co2State.entity_id;\n          return _context4.abrupt(\"break\", 21);\n        case 18:\n          _i++;\n          _context4.next = 9;\n          break;\n        case 21:\n          consumptionStatIDs = [];\n          _iterator4 = (0,_babel_runtime_helpers_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(prefs.energy_sources);\n          try {\n            for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n              source = _step4.value;\n              // grid source\n              if (source.type === \"grid\") {\n                _iterator5 = (0,_babel_runtime_helpers_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(source.flow_from);\n                try {\n                  for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n                    flowFrom = _step5.value;\n                    consumptionStatIDs.push(flowFrom.stat_energy_from);\n                  }\n                } catch (err) {\n                  _iterator5.e(err);\n                } finally {\n                  _iterator5.f();\n                }\n              }\n            }\n          } catch (err) {\n            _iterator4.e(err);\n          } finally {\n            _iterator4.f();\n          }\n          energyStatIds = getReferencedStatisticIds(prefs, info, [\"grid\", \"solar\", \"battery\", \"gas\"]);\n          waterStatIds = getReferencedStatisticIds(prefs, info, [\"water\"]);\n          allStatIDs = [].concat((0,_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(energyStatIds), (0,_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(waterStatIds));\n          dayDifference = (0,date_fns_esm__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(end || new Date(), start);\n          period = dayDifference > 35 ? \"month\" : dayDifference > 2 ? \"day\" : \"hour\";\n          lengthUnit = hass.config.unit_system.length || \"\";\n          energyUnits = {\n            energy: \"kWh\",\n            volume: lengthUnit === \"km\" ? \"m³\" : \"ft³\"\n          };\n          waterUnits = {\n            volume: lengthUnit === \"km\" ? \"L\" : \"gal\"\n          };\n          _energyStats = energyStatIds.length ? (0,_recorder__WEBPACK_IMPORTED_MODULE_7__.fetchStatistics)(hass, start, end, energyStatIds, period, energyUnits, [\"change\"]) : {};\n          _waterStats = waterStatIds.length ? (0,_recorder__WEBPACK_IMPORTED_MODULE_7__.fetchStatistics)(hass, start, end, waterStatIds, period, waterUnits, [\"change\"]) : {};\n          _energyStatsCompare = {};\n          _waterStatsCompare = {};\n          if (compare) {\n            if (dayDifference > 27 && dayDifference < 32) {\n              // When comparing a month, we want to start at the begining of the month\n              startCompare = (0,date_fns_esm__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(start, -1);\n            } else {\n              startCompare = (0,date_fns_esm__WEBPACK_IMPORTED_MODULE_10__[\"default\"])(start, (dayDifference + 1) * -1);\n            }\n            endCompare = (0,date_fns_esm__WEBPACK_IMPORTED_MODULE_11__[\"default\"])(start, -1);\n            if (energyStatIds.length) {\n              _energyStatsCompare = (0,_recorder__WEBPACK_IMPORTED_MODULE_7__.fetchStatistics)(hass, startCompare, endCompare, energyStatIds, period, energyUnits, [\"change\"]);\n            }\n            if (waterStatIds.length) {\n              _waterStatsCompare = (0,_recorder__WEBPACK_IMPORTED_MODULE_7__.fetchStatistics)(hass, startCompare, endCompare, waterStatIds, period, waterUnits, [\"change\"]);\n            }\n          }\n          if (co2SignalEntity !== undefined) {\n            _fossilEnergyConsumption = getFossilEnergyConsumption(hass, start, consumptionStatIDs, co2SignalEntity, end, dayDifference > 35 ? \"month\" : dayDifference > 2 ? \"day\" : \"hour\");\n            if (compare) {\n              _fossilEnergyConsumptionCompare = getFossilEnergyConsumption(hass, startCompare, consumptionStatIDs, co2SignalEntity, endCompare, dayDifference > 35 ? \"month\" : dayDifference > 2 ? \"day\" : \"hour\");\n            }\n          }\n          statsMetadata = {};\n          _getStatisticMetadata = allStatIDs.length ? (0,_recorder__WEBPACK_IMPORTED_MODULE_7__.getStatisticMetadata)(hass, allStatIDs) : [];\n          _context4.next = 42;\n          return Promise.all([_energyStats, _waterStats, _energyStatsCompare, _waterStatsCompare, _getStatisticMetadata, _fossilEnergyConsumption, _fossilEnergyConsumptionCompare]);\n        case 42:\n          _yield$Promise$all3 = _context4.sent;\n          _yield$Promise$all4 = (0,_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(_yield$Promise$all3, 7);\n          energyStats = _yield$Promise$all4[0];\n          waterStats = _yield$Promise$all4[1];\n          energyStatsCompare = _yield$Promise$all4[2];\n          waterStatsCompare = _yield$Promise$all4[3];\n          statsMetadataArray = _yield$Promise$all4[4];\n          fossilEnergyConsumption = _yield$Promise$all4[5];\n          fossilEnergyConsumptionCompare = _yield$Promise$all4[6];\n          stats = Object.assign(Object.assign({}, energyStats), waterStats);\n          if (compare) {\n            statsCompare = Object.assign(Object.assign({}, energyStatsCompare), waterStatsCompare);\n          }\n          if (allStatIDs.length) {\n            statsMetadataArray.forEach(function (x) {\n              statsMetadata[x.statistic_id] = x;\n            });\n          }\n          data = {\n            start: start,\n            end: end,\n            startCompare: startCompare,\n            endCompare: endCompare,\n            info: info,\n            prefs: prefs,\n            stats: stats,\n            statsMetadata: statsMetadata,\n            statsCompare: statsCompare,\n            co2SignalConfigEntry: co2SignalConfigEntry,\n            co2SignalEntity: co2SignalEntity,\n            fossilEnergyConsumption: fossilEnergyConsumption,\n            fossilEnergyConsumptionCompare: fossilEnergyConsumptionCompare\n          };\n          return _context4.abrupt(\"return\", data);\n        case 56:\n        case \"end\":\n          return _context4.stop();\n      }\n    }, _callee4);\n  }));\n  return function getEnergyData(_x9, _x10, _x11, _x12, _x13) {\n    return _ref4.apply(this, arguments);\n  };\n}();\nvar clearEnergyCollectionPreferences = function clearEnergyCollectionPreferences(hass) {\n  energyCollectionKeys.forEach(function (key) {\n    var energyCollection = getEnergyDataCollection(hass, {\n      key: key\n    });\n    energyCollection.clearPrefs();\n    if (energyCollection._active) {\n      energyCollection.refresh();\n    }\n  });\n};\nvar getEnergyDataCollection = function getEnergyDataCollection(hass) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var key = \"_energy\";\n  if (options.key) {\n    if (!options.key.startsWith(\"energy_\")) {\n      throw new Error(\"Key need to start with energy_\");\n    }\n    key = \"_\".concat(options.key);\n  }\n  if (hass.connection[key]) {\n    return hass.connection[key];\n  }\n  energyCollectionKeys.push(options.key);\n  var collection = (0,home_assistant_js_websocket__WEBPACK_IMPORTED_MODULE_12__.getCollection)(hass.connection, key, /*#__PURE__*/(0,_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4__[\"default\"])( /*#__PURE__*/(0,_babel_runtime_helpers_regeneratorRuntime__WEBPACK_IMPORTED_MODULE_3__[\"default\"])().mark(function _callee5() {\n    var nextFetch;\n    return (0,_babel_runtime_helpers_regeneratorRuntime__WEBPACK_IMPORTED_MODULE_3__[\"default\"])().wrap(function _callee5$(_context5) {\n      while (1) switch (_context5.prev = _context5.next) {\n        case 0:\n          if (collection.prefs) {\n            _context5.next = 4;\n            break;\n          }\n          _context5.next = 3;\n          return getEnergyPreferences(hass);\n        case 3:\n          collection.prefs = _context5.sent;\n        case 4:\n          if (collection._refreshTimeout) {\n            clearTimeout(collection._refreshTimeout);\n          }\n          if (collection._active && (!collection.end || collection.end > new Date())) {\n            // The stats are created every hour\n            // Schedule a refresh for 20 minutes past the hour\n            // If the end is larger than the current time.\n            nextFetch = new Date();\n            if (nextFetch.getMinutes() >= 20) {\n              nextFetch.setHours(nextFetch.getHours() + 1);\n            }\n            nextFetch.setMinutes(20, 0, 0);\n            collection._refreshTimeout = window.setTimeout(function () {\n              return collection.refresh();\n            }, nextFetch.getTime() - Date.now());\n          }\n          return _context5.abrupt(\"return\", getEnergyData(hass, collection.prefs, collection.start, collection.end, collection.compare));\n        case 7:\n        case \"end\":\n          return _context5.stop();\n      }\n    }, _callee5);\n  })));\n  var origSubscribe = collection.subscribe;\n  collection.subscribe = function (subscriber) {\n    var unsub = origSubscribe(subscriber);\n    collection._active++;\n    return function () {\n      collection._active--;\n      if (collection._active < 1) {\n        clearTimeout(collection._refreshTimeout);\n        collection._refreshTimeout = undefined;\n      }\n      unsub();\n    };\n  };\n  collection._active = 0;\n  collection.prefs = options.prefs;\n  var now = new Date();\n  // Set start to start of today if we have data for today, otherwise yesterday\n  collection.start = now.getHours() > 0 ? (0,date_fns_esm__WEBPACK_IMPORTED_MODULE_13__[\"default\"])() : (0,date_fns_esm__WEBPACK_IMPORTED_MODULE_14__[\"default\"])();\n  collection.end = now.getHours() > 0 ? (0,date_fns_esm__WEBPACK_IMPORTED_MODULE_15__[\"default\"])() : (0,date_fns_esm__WEBPACK_IMPORTED_MODULE_16__[\"default\"])();\n  var scheduleUpdatePeriod = function scheduleUpdatePeriod() {\n    collection._updatePeriodTimeout = window.setTimeout(function () {\n      collection.start = (0,date_fns_esm__WEBPACK_IMPORTED_MODULE_13__[\"default\"])();\n      collection.end = (0,date_fns_esm__WEBPACK_IMPORTED_MODULE_15__[\"default\"])();\n      scheduleUpdatePeriod();\n    }, (0,date_fns_esm__WEBPACK_IMPORTED_MODULE_17__[\"default\"])((0,date_fns_esm__WEBPACK_IMPORTED_MODULE_15__[\"default\"])(), 1).getTime() - Date.now() // Switch to next day an hour after the day changed\n    );\n  };\n\n  scheduleUpdatePeriod();\n  collection.clearPrefs = function () {\n    collection.prefs = undefined;\n  };\n  collection.setPeriod = function (newStart, newEnd) {\n    var _collection$end;\n    collection.start = newStart;\n    collection.end = newEnd;\n    if (collection.start.getTime() === (0,date_fns_esm__WEBPACK_IMPORTED_MODULE_13__[\"default\"])().getTime() && ((_collection$end = collection.end) === null || _collection$end === void 0 ? void 0 : _collection$end.getTime()) === (0,date_fns_esm__WEBPACK_IMPORTED_MODULE_15__[\"default\"])().getTime() && !collection._updatePeriodTimeout) {\n      scheduleUpdatePeriod();\n    } else if (collection._updatePeriodTimeout) {\n      clearTimeout(collection._updatePeriodTimeout);\n      collection._updatePeriodTimeout = undefined;\n    }\n  };\n  collection.setCompare = function (compare) {\n    collection.compare = compare;\n  };\n  return collection;\n};\nvar getEnergySolarForecasts = function getEnergySolarForecasts(hass) {\n  return hass.callWS({\n    type: \"energy/solar_forecast\"\n  });\n};\nvar energyGasUnitClass = [\"volume\", \"energy\"];\nvar getEnergyGasUnitClass = function getEnergyGasUnitClass(prefs) {\n  var statisticsMetaData = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var excludeSource = arguments.length > 2 ? arguments[2] : undefined;\n  var _iterator6 = (0,_babel_runtime_helpers_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(prefs.energy_sources),\n    _step6;\n  try {\n    for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n      var source = _step6.value;\n      if (source.type !== \"gas\") {\n        continue;\n      }\n      if (excludeSource && excludeSource === source.stat_energy_from) {\n        continue;\n      }\n      var statisticIdWithMeta = statisticsMetaData[source.stat_energy_from];\n      if (energyGasUnitClass.includes(statisticIdWithMeta === null || statisticIdWithMeta === void 0 ? void 0 : statisticIdWithMeta.unit_class)) {\n        return statisticIdWithMeta.unit_class;\n      }\n    }\n  } catch (err) {\n    _iterator6.e(err);\n  } finally {\n    _iterator6.f();\n  }\n  return undefined;\n};\nvar getEnergyGasUnit = function getEnergyGasUnit(hass, prefs) {\n  var statisticsMetaData = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var unitClass = getEnergyGasUnitClass(prefs, statisticsMetaData);\n  if (unitClass === undefined) {\n    return undefined;\n  }\n  return unitClass === \"energy\" ? \"kWh\" : hass.config.unit_system.length === \"km\" ? \"m³\" : \"ft³\";\n};\nvar getEnergyWaterUnit = function getEnergyWaterUnit(hass) {\n  return hass.config.unit_system.length === \"km\" ? \"L\" : \"gal\";\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZGF0YS9lbmVyZ3kudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFXQTtBQUNBO0FBRUE7QUFDQTtBQVFBO0FBRUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQXFIQTtBQUFBO0FBRUE7QUFDQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBTEE7QUFBQTtBQUFBO0FBT0E7QUFBQTtBQUVBO0FBQ0E7QUFBQTtBQUVBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFBQTtBQUdBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQVZBO0FBQUE7QUFBQTtBQWdCQTtBQUFBO0FBS0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBZkE7QUFBQTtBQUFBO0FBeUJBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFrQkE7QUFLQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFFQTtBQUFBO0FBS0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUhBO0FBQUE7QUFLQTtBQUVBO0FBR0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFJQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBSUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFLQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBTUE7QUFFQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFLQTtBQVNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVNBO0FBQ0E7QUFDQTtBQVNBO0FBQ0E7QUFNQTtBQUNBO0FBUUE7QUFDQTtBQVFBO0FBQ0E7QUFFQTtBQUNBO0FBSUE7QUFBQTtBQWlCQTtBQUFBO0FBQUE7QUFmQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUE5TEE7QUFBQTtBQUFBO0FBNk1BO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBR0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFHQTtBQUFBO0FBUUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBSUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBOztBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBRUE7QUFDQTtBQUFBO0FBRUE7QUFHQTtBQUlBO0FBRkE7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUVBO0FBQUE7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2hvbWUtYXNzaXN0YW50LWZyb250ZW5kLy4vc3JjL2RhdGEvZW5lcmd5LnRzPzIyMTgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgYWRkRGF5cyxcbiAgYWRkSG91cnMsXG4gIGFkZE1pbGxpc2Vjb25kcyxcbiAgYWRkTW9udGhzLFxuICBkaWZmZXJlbmNlSW5EYXlzLFxuICBlbmRPZlRvZGF5LFxuICBlbmRPZlllc3RlcmRheSxcbiAgc3RhcnRPZlRvZGF5LFxuICBzdGFydE9mWWVzdGVyZGF5LFxufSBmcm9tIFwiZGF0ZS1mbnMvZXNtXCI7XG5pbXBvcnQgeyBDb2xsZWN0aW9uLCBnZXRDb2xsZWN0aW9uIH0gZnJvbSBcImhvbWUtYXNzaXN0YW50LWpzLXdlYnNvY2tldFwiO1xuaW1wb3J0IHsgZ3JvdXBCeSB9IGZyb20gXCIuLi9jb21tb24vdXRpbC9ncm91cC1ieVwiO1xuaW1wb3J0IHsgSG9tZUFzc2lzdGFudCB9IGZyb20gXCIuLi90eXBlc1wiO1xuaW1wb3J0IHsgQ29uZmlnRW50cnksIGdldENvbmZpZ0VudHJpZXMgfSBmcm9tIFwiLi9jb25maWdfZW50cmllc1wiO1xuaW1wb3J0IHtcbiAgZmV0Y2hTdGF0aXN0aWNzLFxuICBnZXRTdGF0aXN0aWNNZXRhZGF0YSxcbiAgU3RhdGlzdGljcyxcbiAgU3RhdGlzdGljc01ldGFEYXRhLFxuICBTdGF0aXN0aWNzVW5pdENvbmZpZ3VyYXRpb24sXG59IGZyb20gXCIuL3JlY29yZGVyXCI7XG5cbmNvbnN0IGVuZXJneUNvbGxlY3Rpb25LZXlzOiAoc3RyaW5nIHwgdW5kZWZpbmVkKVtdID0gW107XG5cbmV4cG9ydCBjb25zdCBlbXB0eUZsb3dGcm9tR3JpZFNvdXJjZUVuZXJneVByZWZlcmVuY2UgPVxuICAoKTogRmxvd0Zyb21HcmlkU291cmNlRW5lcmd5UHJlZmVyZW5jZSA9PiAoe1xuICAgIHN0YXRfZW5lcmd5X2Zyb206IFwiXCIsXG4gICAgc3RhdF9jb3N0OiBudWxsLFxuICAgIGVudGl0eV9lbmVyZ3lfcHJpY2U6IG51bGwsXG4gICAgbnVtYmVyX2VuZXJneV9wcmljZTogbnVsbCxcbiAgfSk7XG5cbmV4cG9ydCBjb25zdCBlbXB0eUZsb3dUb0dyaWRTb3VyY2VFbmVyZ3lQcmVmZXJlbmNlID1cbiAgKCk6IEZsb3dUb0dyaWRTb3VyY2VFbmVyZ3lQcmVmZXJlbmNlID0+ICh7XG4gICAgc3RhdF9lbmVyZ3lfdG86IFwiXCIsXG4gICAgc3RhdF9jb21wZW5zYXRpb246IG51bGwsXG4gICAgZW50aXR5X2VuZXJneV9wcmljZTogbnVsbCxcbiAgICBudW1iZXJfZW5lcmd5X3ByaWNlOiBudWxsLFxuICB9KTtcblxuZXhwb3J0IGNvbnN0IGVtcHR5R3JpZFNvdXJjZUVuZXJneVByZWZlcmVuY2UgPVxuICAoKTogR3JpZFNvdXJjZVR5cGVFbmVyZ3lQcmVmZXJlbmNlID0+ICh7XG4gICAgdHlwZTogXCJncmlkXCIsXG4gICAgZmxvd19mcm9tOiBbXSxcbiAgICBmbG93X3RvOiBbXSxcbiAgICBjb3N0X2FkanVzdG1lbnRfZGF5OiAwLFxuICB9KTtcblxuZXhwb3J0IGNvbnN0IGVtcHR5U29sYXJFbmVyZ3lQcmVmZXJlbmNlID1cbiAgKCk6IFNvbGFyU291cmNlVHlwZUVuZXJneVByZWZlcmVuY2UgPT4gKHtcbiAgICB0eXBlOiBcInNvbGFyXCIsXG4gICAgc3RhdF9lbmVyZ3lfZnJvbTogXCJcIixcbiAgICBjb25maWdfZW50cnlfc29sYXJfZm9yZWNhc3Q6IG51bGwsXG4gIH0pO1xuXG5leHBvcnQgY29uc3QgZW1wdHlCYXR0ZXJ5RW5lcmd5UHJlZmVyZW5jZSA9XG4gICgpOiBCYXR0ZXJ5U291cmNlVHlwZUVuZXJneVByZWZlcmVuY2UgPT4gKHtcbiAgICB0eXBlOiBcImJhdHRlcnlcIixcbiAgICBzdGF0X2VuZXJneV9mcm9tOiBcIlwiLFxuICAgIHN0YXRfZW5lcmd5X3RvOiBcIlwiLFxuICB9KTtcblxuZXhwb3J0IGNvbnN0IGVtcHR5R2FzRW5lcmd5UHJlZmVyZW5jZSA9ICgpOiBHYXNTb3VyY2VUeXBlRW5lcmd5UHJlZmVyZW5jZSA9PiAoe1xuICB0eXBlOiBcImdhc1wiLFxuICBzdGF0X2VuZXJneV9mcm9tOiBcIlwiLFxuICBzdGF0X2Nvc3Q6IG51bGwsXG4gIGVudGl0eV9lbmVyZ3lfcHJpY2U6IG51bGwsXG4gIG51bWJlcl9lbmVyZ3lfcHJpY2U6IG51bGwsXG59KTtcblxuZXhwb3J0IGNvbnN0IGVtcHR5V2F0ZXJFbmVyZ3lQcmVmZXJlbmNlID1cbiAgKCk6IFdhdGVyU291cmNlVHlwZUVuZXJneVByZWZlcmVuY2UgPT4gKHtcbiAgICB0eXBlOiBcIndhdGVyXCIsXG4gICAgc3RhdF9lbmVyZ3lfZnJvbTogXCJcIixcbiAgICBzdGF0X2Nvc3Q6IG51bGwsXG4gICAgZW50aXR5X2VuZXJneV9wcmljZTogbnVsbCxcbiAgICBudW1iZXJfZW5lcmd5X3ByaWNlOiBudWxsLFxuICB9KTtcblxuaW50ZXJmYWNlIEVuZXJneVNvbGFyRm9yZWNhc3Qge1xuICB3aF9ob3VyczogUmVjb3JkPHN0cmluZywgbnVtYmVyPjtcbn1cbmV4cG9ydCB0eXBlIEVuZXJneVNvbGFyRm9yZWNhc3RzID0ge1xuICBbY29uZmlnX2VudHJ5X2lkOiBzdHJpbmddOiBFbmVyZ3lTb2xhckZvcmVjYXN0O1xufTtcblxuZXhwb3J0IGludGVyZmFjZSBEZXZpY2VDb25zdW1wdGlvbkVuZXJneVByZWZlcmVuY2Uge1xuICAvLyBUaGlzIGlzIGFuIGV2ZXIgaW5jcmVhc2luZyB2YWx1ZVxuICBzdGF0X2NvbnN1bXB0aW9uOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmxvd0Zyb21HcmlkU291cmNlRW5lcmd5UHJlZmVyZW5jZSB7XG4gIC8vIGtXaCBtZXRlclxuICBzdGF0X2VuZXJneV9mcm9tOiBzdHJpbmc7XG5cbiAgLy8gJCBtZXRlclxuICBzdGF0X2Nvc3Q6IHN0cmluZyB8IG51bGw7XG5cbiAgLy8gQ2FuIGJlIHVzZWQgdG8gZ2VuZXJhdGUgY29zdHMgaWYgc3RhdF9jb3N0IG9taXR0ZWRcbiAgZW50aXR5X2VuZXJneV9wcmljZTogc3RyaW5nIHwgbnVsbDtcbiAgbnVtYmVyX2VuZXJneV9wcmljZTogbnVtYmVyIHwgbnVsbDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBGbG93VG9HcmlkU291cmNlRW5lcmd5UHJlZmVyZW5jZSB7XG4gIC8vIGtXaCBtZXRlclxuICBzdGF0X2VuZXJneV90bzogc3RyaW5nO1xuXG4gIC8vICQgbWV0ZXJcbiAgc3RhdF9jb21wZW5zYXRpb246IHN0cmluZyB8IG51bGw7XG5cbiAgLy8gQ2FuIGJlIHVzZWQgdG8gZ2VuZXJhdGUgY29zdHMgaWYgc3RhdF9jb21wZW5zYXRpb24gb21pdHRlZFxuICBlbnRpdHlfZW5lcmd5X3ByaWNlOiBzdHJpbmcgfCBudWxsO1xuICBudW1iZXJfZW5lcmd5X3ByaWNlOiBudW1iZXIgfCBudWxsO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEdyaWRTb3VyY2VUeXBlRW5lcmd5UHJlZmVyZW5jZSB7XG4gIHR5cGU6IFwiZ3JpZFwiO1xuXG4gIGZsb3dfZnJvbTogRmxvd0Zyb21HcmlkU291cmNlRW5lcmd5UHJlZmVyZW5jZVtdO1xuICBmbG93X3RvOiBGbG93VG9HcmlkU291cmNlRW5lcmd5UHJlZmVyZW5jZVtdO1xuXG4gIGNvc3RfYWRqdXN0bWVudF9kYXk6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTb2xhclNvdXJjZVR5cGVFbmVyZ3lQcmVmZXJlbmNlIHtcbiAgdHlwZTogXCJzb2xhclwiO1xuXG4gIHN0YXRfZW5lcmd5X2Zyb206IHN0cmluZztcbiAgY29uZmlnX2VudHJ5X3NvbGFyX2ZvcmVjYXN0OiBzdHJpbmdbXSB8IG51bGw7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmF0dGVyeVNvdXJjZVR5cGVFbmVyZ3lQcmVmZXJlbmNlIHtcbiAgdHlwZTogXCJiYXR0ZXJ5XCI7XG4gIHN0YXRfZW5lcmd5X2Zyb206IHN0cmluZztcbiAgc3RhdF9lbmVyZ3lfdG86IHN0cmluZztcbn1cbmV4cG9ydCBpbnRlcmZhY2UgR2FzU291cmNlVHlwZUVuZXJneVByZWZlcmVuY2Uge1xuICB0eXBlOiBcImdhc1wiO1xuXG4gIC8vIGtXaC92b2x1bWUgbWV0ZXJcbiAgc3RhdF9lbmVyZ3lfZnJvbTogc3RyaW5nO1xuXG4gIC8vICQgbWV0ZXJcbiAgc3RhdF9jb3N0OiBzdHJpbmcgfCBudWxsO1xuXG4gIC8vIENhbiBiZSB1c2VkIHRvIGdlbmVyYXRlIGNvc3RzIGlmIHN0YXRfY29zdCBvbWl0dGVkXG4gIGVudGl0eV9lbmVyZ3lfcHJpY2U6IHN0cmluZyB8IG51bGw7XG4gIG51bWJlcl9lbmVyZ3lfcHJpY2U6IG51bWJlciB8IG51bGw7XG4gIHVuaXRfb2ZfbWVhc3VyZW1lbnQ/OiBzdHJpbmcgfCBudWxsO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFdhdGVyU291cmNlVHlwZUVuZXJneVByZWZlcmVuY2Uge1xuICB0eXBlOiBcIndhdGVyXCI7XG5cbiAgLy8gdm9sdW1lIG1ldGVyXG4gIHN0YXRfZW5lcmd5X2Zyb206IHN0cmluZztcblxuICAvLyAkIG1ldGVyXG4gIHN0YXRfY29zdDogc3RyaW5nIHwgbnVsbDtcblxuICAvLyBDYW4gYmUgdXNlZCB0byBnZW5lcmF0ZSBjb3N0cyBpZiBzdGF0X2Nvc3Qgb21pdHRlZFxuICBlbnRpdHlfZW5lcmd5X3ByaWNlOiBzdHJpbmcgfCBudWxsO1xuICBudW1iZXJfZW5lcmd5X3ByaWNlOiBudW1iZXIgfCBudWxsO1xuICB1bml0X29mX21lYXN1cmVtZW50Pzogc3RyaW5nIHwgbnVsbDtcbn1cblxudHlwZSBFbmVyZ3lTb3VyY2UgPVxuICB8IFNvbGFyU291cmNlVHlwZUVuZXJneVByZWZlcmVuY2VcbiAgfCBHcmlkU291cmNlVHlwZUVuZXJneVByZWZlcmVuY2VcbiAgfCBCYXR0ZXJ5U291cmNlVHlwZUVuZXJneVByZWZlcmVuY2VcbiAgfCBHYXNTb3VyY2VUeXBlRW5lcmd5UHJlZmVyZW5jZVxuICB8IFdhdGVyU291cmNlVHlwZUVuZXJneVByZWZlcmVuY2U7XG5cbmV4cG9ydCBpbnRlcmZhY2UgRW5lcmd5UHJlZmVyZW5jZXMge1xuICBlbmVyZ3lfc291cmNlczogRW5lcmd5U291cmNlW107XG4gIGRldmljZV9jb25zdW1wdGlvbjogRGV2aWNlQ29uc3VtcHRpb25FbmVyZ3lQcmVmZXJlbmNlW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRW5lcmd5SW5mbyB7XG4gIGNvc3Rfc2Vuc29yczogUmVjb3JkPHN0cmluZywgc3RyaW5nPjtcbiAgc29sYXJfZm9yZWNhc3RfZG9tYWluczogc3RyaW5nW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRW5lcmd5VmFsaWRhdGlvbklzc3VlIHtcbiAgdHlwZTogc3RyaW5nO1xuICBhZmZlY3RlZF9lbnRpdGllczogW3N0cmluZywgdW5rbm93bl1bXTtcbiAgdHJhbnNsYXRpb25fcGxhY2Vob2xkZXJzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEVuZXJneVByZWZlcmVuY2VzVmFsaWRhdGlvbiB7XG4gIGVuZXJneV9zb3VyY2VzOiBFbmVyZ3lWYWxpZGF0aW9uSXNzdWVbXVtdO1xuICBkZXZpY2VfY29uc3VtcHRpb246IEVuZXJneVZhbGlkYXRpb25Jc3N1ZVtdW107XG59XG5cbmV4cG9ydCBjb25zdCBnZXRFbmVyZ3lJbmZvID0gKGhhc3M6IEhvbWVBc3Npc3RhbnQpID0+XG4gIGhhc3MuY2FsbFdTPEVuZXJneUluZm8+KHtcbiAgICB0eXBlOiBcImVuZXJneS9pbmZvXCIsXG4gIH0pO1xuXG5leHBvcnQgY29uc3QgZ2V0RW5lcmd5UHJlZmVyZW5jZVZhbGlkYXRpb24gPSBhc3luYyAoaGFzczogSG9tZUFzc2lzdGFudCkgPT4ge1xuICBhd2FpdCBoYXNzLmxvYWRCYWNrZW5kVHJhbnNsYXRpb24oXCJpc3N1ZXNcIiwgXCJlbmVyZ3lcIik7XG4gIHJldHVybiBoYXNzLmNhbGxXUzxFbmVyZ3lQcmVmZXJlbmNlc1ZhbGlkYXRpb24+KHtcbiAgICB0eXBlOiBcImVuZXJneS92YWxpZGF0ZVwiLFxuICB9KTtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRFbmVyZ3lQcmVmZXJlbmNlcyA9IChoYXNzOiBIb21lQXNzaXN0YW50KSA9PlxuICBoYXNzLmNhbGxXUzxFbmVyZ3lQcmVmZXJlbmNlcz4oe1xuICAgIHR5cGU6IFwiZW5lcmd5L2dldF9wcmVmc1wiLFxuICB9KTtcblxuZXhwb3J0IGNvbnN0IHNhdmVFbmVyZ3lQcmVmZXJlbmNlcyA9IGFzeW5jIChcbiAgaGFzczogSG9tZUFzc2lzdGFudCxcbiAgcHJlZnM6IFBhcnRpYWw8RW5lcmd5UHJlZmVyZW5jZXM+XG4pID0+IHtcbiAgY29uc3QgbmV3UHJlZnMgPSBoYXNzLmNhbGxXUzxFbmVyZ3lQcmVmZXJlbmNlcz4oe1xuICAgIHR5cGU6IFwiZW5lcmd5L3NhdmVfcHJlZnNcIixcbiAgICAuLi5wcmVmcyxcbiAgfSk7XG4gIGNsZWFyRW5lcmd5Q29sbGVjdGlvblByZWZlcmVuY2VzKGhhc3MpO1xuICByZXR1cm4gbmV3UHJlZnM7XG59O1xuXG5leHBvcnQgaW50ZXJmYWNlIEZvc3NpbEVuZXJneUNvbnN1bXB0aW9uIHtcbiAgW2RhdGU6IHN0cmluZ106IG51bWJlcjtcbn1cblxuZXhwb3J0IGNvbnN0IGdldEZvc3NpbEVuZXJneUNvbnN1bXB0aW9uID0gYXN5bmMgKFxuICBoYXNzOiBIb21lQXNzaXN0YW50LFxuICBzdGFydFRpbWU6IERhdGUsXG4gIGVuZXJneV9zdGF0aXN0aWNfaWRzOiBzdHJpbmdbXSxcbiAgY28yX3N0YXRpc3RpY19pZDogc3RyaW5nLFxuICBlbmRUaW1lPzogRGF0ZSxcbiAgcGVyaW9kOiBcIjVtaW51dGVcIiB8IFwiaG91clwiIHwgXCJkYXlcIiB8IFwibW9udGhcIiA9IFwiaG91clwiXG4pID0+XG4gIGhhc3MuY2FsbFdTPEZvc3NpbEVuZXJneUNvbnN1bXB0aW9uPih7XG4gICAgdHlwZTogXCJlbmVyZ3kvZm9zc2lsX2VuZXJneV9jb25zdW1wdGlvblwiLFxuICAgIHN0YXJ0X3RpbWU6IHN0YXJ0VGltZS50b0lTT1N0cmluZygpLFxuICAgIGVuZF90aW1lOiBlbmRUaW1lPy50b0lTT1N0cmluZygpLFxuICAgIGVuZXJneV9zdGF0aXN0aWNfaWRzLFxuICAgIGNvMl9zdGF0aXN0aWNfaWQsXG4gICAgcGVyaW9kLFxuICB9KTtcblxuaW50ZXJmYWNlIEVuZXJneVNvdXJjZUJ5VHlwZSB7XG4gIGdyaWQ/OiBHcmlkU291cmNlVHlwZUVuZXJneVByZWZlcmVuY2VbXTtcbiAgc29sYXI/OiBTb2xhclNvdXJjZVR5cGVFbmVyZ3lQcmVmZXJlbmNlW107XG4gIGJhdHRlcnk/OiBCYXR0ZXJ5U291cmNlVHlwZUVuZXJneVByZWZlcmVuY2VbXTtcbiAgZ2FzPzogR2FzU291cmNlVHlwZUVuZXJneVByZWZlcmVuY2VbXTtcbiAgd2F0ZXI/OiBXYXRlclNvdXJjZVR5cGVFbmVyZ3lQcmVmZXJlbmNlW107XG59XG5cbmV4cG9ydCBjb25zdCBlbmVyZ3lTb3VyY2VzQnlUeXBlID0gKHByZWZzOiBFbmVyZ3lQcmVmZXJlbmNlcykgPT5cbiAgZ3JvdXBCeShwcmVmcy5lbmVyZ3lfc291cmNlcywgKGl0ZW0pID0+IGl0ZW0udHlwZSkgYXMgRW5lcmd5U291cmNlQnlUeXBlO1xuXG5leHBvcnQgaW50ZXJmYWNlIEVuZXJneURhdGEge1xuICBzdGFydDogRGF0ZTtcbiAgZW5kPzogRGF0ZTtcbiAgc3RhcnRDb21wYXJlPzogRGF0ZTtcbiAgZW5kQ29tcGFyZT86IERhdGU7XG4gIHByZWZzOiBFbmVyZ3lQcmVmZXJlbmNlcztcbiAgaW5mbzogRW5lcmd5SW5mbztcbiAgc3RhdHM6IFN0YXRpc3RpY3M7XG4gIHN0YXRzTWV0YWRhdGE6IFJlY29yZDxzdHJpbmcsIFN0YXRpc3RpY3NNZXRhRGF0YT47XG4gIHN0YXRzQ29tcGFyZTogU3RhdGlzdGljcztcbiAgY28yU2lnbmFsQ29uZmlnRW50cnk/OiBDb25maWdFbnRyeTtcbiAgY28yU2lnbmFsRW50aXR5Pzogc3RyaW5nO1xuICBmb3NzaWxFbmVyZ3lDb25zdW1wdGlvbj86IEZvc3NpbEVuZXJneUNvbnN1bXB0aW9uO1xuICBmb3NzaWxFbmVyZ3lDb25zdW1wdGlvbkNvbXBhcmU/OiBGb3NzaWxFbmVyZ3lDb25zdW1wdGlvbjtcbn1cblxuZXhwb3J0IGNvbnN0IGdldFJlZmVyZW5jZWRTdGF0aXN0aWNJZHMgPSAoXG4gIHByZWZzOiBFbmVyZ3lQcmVmZXJlbmNlcyxcbiAgaW5mbzogRW5lcmd5SW5mbyxcbiAgaW5jbHVkZVR5cGVzPzogc3RyaW5nW11cbik6IHN0cmluZ1tdID0+IHtcbiAgY29uc3Qgc3RhdElEczogc3RyaW5nW10gPSBbXTtcblxuICBmb3IgKGNvbnN0IHNvdXJjZSBvZiBwcmVmcy5lbmVyZ3lfc291cmNlcykge1xuICAgIGlmIChpbmNsdWRlVHlwZXMgJiYgIWluY2x1ZGVUeXBlcy5pbmNsdWRlcyhzb3VyY2UudHlwZSkpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGlmIChzb3VyY2UudHlwZSA9PT0gXCJzb2xhclwiKSB7XG4gICAgICBzdGF0SURzLnB1c2goc291cmNlLnN0YXRfZW5lcmd5X2Zyb20pO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgaWYgKHNvdXJjZS50eXBlID09PSBcImdhc1wiIHx8IHNvdXJjZS50eXBlID09PSBcIndhdGVyXCIpIHtcbiAgICAgIHN0YXRJRHMucHVzaChzb3VyY2Uuc3RhdF9lbmVyZ3lfZnJvbSk7XG5cbiAgICAgIGlmIChzb3VyY2Uuc3RhdF9jb3N0KSB7XG4gICAgICAgIHN0YXRJRHMucHVzaChzb3VyY2Uuc3RhdF9jb3N0KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGNvc3RTdGF0SWQgPSBpbmZvLmNvc3Rfc2Vuc29yc1tzb3VyY2Uuc3RhdF9lbmVyZ3lfZnJvbV07XG4gICAgICBpZiAoY29zdFN0YXRJZCkge1xuICAgICAgICBzdGF0SURzLnB1c2goY29zdFN0YXRJZCk7XG4gICAgICB9XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICBpZiAoc291cmNlLnR5cGUgPT09IFwiYmF0dGVyeVwiKSB7XG4gICAgICBzdGF0SURzLnB1c2goc291cmNlLnN0YXRfZW5lcmd5X2Zyb20pO1xuICAgICAgc3RhdElEcy5wdXNoKHNvdXJjZS5zdGF0X2VuZXJneV90byk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICAvLyBncmlkIHNvdXJjZVxuICAgIGZvciAoY29uc3QgZmxvd0Zyb20gb2Ygc291cmNlLmZsb3dfZnJvbSkge1xuICAgICAgc3RhdElEcy5wdXNoKGZsb3dGcm9tLnN0YXRfZW5lcmd5X2Zyb20pO1xuICAgICAgaWYgKGZsb3dGcm9tLnN0YXRfY29zdCkge1xuICAgICAgICBzdGF0SURzLnB1c2goZmxvd0Zyb20uc3RhdF9jb3N0KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGNvc3RTdGF0SWQgPSBpbmZvLmNvc3Rfc2Vuc29yc1tmbG93RnJvbS5zdGF0X2VuZXJneV9mcm9tXTtcbiAgICAgIGlmIChjb3N0U3RhdElkKSB7XG4gICAgICAgIHN0YXRJRHMucHVzaChjb3N0U3RhdElkKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZm9yIChjb25zdCBmbG93VG8gb2Ygc291cmNlLmZsb3dfdG8pIHtcbiAgICAgIHN0YXRJRHMucHVzaChmbG93VG8uc3RhdF9lbmVyZ3lfdG8pO1xuICAgICAgaWYgKGZsb3dUby5zdGF0X2NvbXBlbnNhdGlvbikge1xuICAgICAgICBzdGF0SURzLnB1c2goZmxvd1RvLnN0YXRfY29tcGVuc2F0aW9uKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGNvc3RTdGF0SWQgPSBpbmZvLmNvc3Rfc2Vuc29yc1tmbG93VG8uc3RhdF9lbmVyZ3lfdG9dO1xuICAgICAgaWYgKGNvc3RTdGF0SWQpIHtcbiAgICAgICAgc3RhdElEcy5wdXNoKGNvc3RTdGF0SWQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBzdGF0SURzO1xufTtcblxuY29uc3QgZ2V0RW5lcmd5RGF0YSA9IGFzeW5jIChcbiAgaGFzczogSG9tZUFzc2lzdGFudCxcbiAgcHJlZnM6IEVuZXJneVByZWZlcmVuY2VzLFxuICBzdGFydDogRGF0ZSxcbiAgZW5kPzogRGF0ZSxcbiAgY29tcGFyZT86IGJvb2xlYW5cbik6IFByb21pc2U8RW5lcmd5RGF0YT4gPT4ge1xuICBjb25zdCBbY29uZmlnRW50cmllcywgaW5mb10gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgZ2V0Q29uZmlnRW50cmllcyhoYXNzLCB7IGRvbWFpbjogXCJjbzJzaWduYWxcIiB9KSxcbiAgICBnZXRFbmVyZ3lJbmZvKGhhc3MpLFxuICBdKTtcblxuICBjb25zdCBjbzJTaWduYWxDb25maWdFbnRyeSA9IGNvbmZpZ0VudHJpZXMubGVuZ3RoXG4gICAgPyBjb25maWdFbnRyaWVzWzBdXG4gICAgOiB1bmRlZmluZWQ7XG5cbiAgbGV0IGNvMlNpZ25hbEVudGl0eTogc3RyaW5nIHwgdW5kZWZpbmVkO1xuICBpZiAoY28yU2lnbmFsQ29uZmlnRW50cnkpIHtcbiAgICBmb3IgKGNvbnN0IGVudGl0eSBvZiBPYmplY3QudmFsdWVzKGhhc3MuZW50aXRpZXMpKSB7XG4gICAgICBpZiAoZW50aXR5LnBsYXRmb3JtICE9PSBcImNvMnNpZ25hbFwiKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBUaGUgaW50ZWdyYXRpb24gb2ZmZXJzIDIgZW50aXRpZXMuIFdlIHdhbnQgdGhlICUgb25lLlxuICAgICAgY29uc3QgY28yU3RhdGUgPSBoYXNzLnN0YXRlc1tlbnRpdHkuZW50aXR5X2lkXTtcbiAgICAgIGlmICghY28yU3RhdGUgfHwgY28yU3RhdGUuYXR0cmlidXRlcy51bml0X29mX21lYXN1cmVtZW50ICE9PSBcIiVcIikge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgY28yU2lnbmFsRW50aXR5ID0gY28yU3RhdGUuZW50aXR5X2lkO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgY29uc3VtcHRpb25TdGF0SURzOiBzdHJpbmdbXSA9IFtdO1xuICBmb3IgKGNvbnN0IHNvdXJjZSBvZiBwcmVmcy5lbmVyZ3lfc291cmNlcykge1xuICAgIC8vIGdyaWQgc291cmNlXG4gICAgaWYgKHNvdXJjZS50eXBlID09PSBcImdyaWRcIikge1xuICAgICAgZm9yIChjb25zdCBmbG93RnJvbSBvZiBzb3VyY2UuZmxvd19mcm9tKSB7XG4gICAgICAgIGNvbnN1bXB0aW9uU3RhdElEcy5wdXNoKGZsb3dGcm9tLnN0YXRfZW5lcmd5X2Zyb20pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBjb25zdCBlbmVyZ3lTdGF0SWRzID0gZ2V0UmVmZXJlbmNlZFN0YXRpc3RpY0lkcyhwcmVmcywgaW5mbywgW1xuICAgIFwiZ3JpZFwiLFxuICAgIFwic29sYXJcIixcbiAgICBcImJhdHRlcnlcIixcbiAgICBcImdhc1wiLFxuICBdKTtcbiAgY29uc3Qgd2F0ZXJTdGF0SWRzID0gZ2V0UmVmZXJlbmNlZFN0YXRpc3RpY0lkcyhwcmVmcywgaW5mbywgW1wid2F0ZXJcIl0pO1xuXG4gIGNvbnN0IGFsbFN0YXRJRHMgPSBbLi4uZW5lcmd5U3RhdElkcywgLi4ud2F0ZXJTdGF0SWRzXTtcblxuICBjb25zdCBkYXlEaWZmZXJlbmNlID0gZGlmZmVyZW5jZUluRGF5cyhlbmQgfHwgbmV3IERhdGUoKSwgc3RhcnQpO1xuICBjb25zdCBwZXJpb2QgPVxuICAgIGRheURpZmZlcmVuY2UgPiAzNSA/IFwibW9udGhcIiA6IGRheURpZmZlcmVuY2UgPiAyID8gXCJkYXlcIiA6IFwiaG91clwiO1xuXG4gIGNvbnN0IGxlbmd0aFVuaXQgPSBoYXNzLmNvbmZpZy51bml0X3N5c3RlbS5sZW5ndGggfHwgXCJcIjtcbiAgY29uc3QgZW5lcmd5VW5pdHM6IFN0YXRpc3RpY3NVbml0Q29uZmlndXJhdGlvbiA9IHtcbiAgICBlbmVyZ3k6IFwia1doXCIsXG4gICAgdm9sdW1lOiBsZW5ndGhVbml0ID09PSBcImttXCIgPyBcIm3Cs1wiIDogXCJmdMKzXCIsXG4gIH07XG4gIGNvbnN0IHdhdGVyVW5pdHM6IFN0YXRpc3RpY3NVbml0Q29uZmlndXJhdGlvbiA9IHtcbiAgICB2b2x1bWU6IGxlbmd0aFVuaXQgPT09IFwia21cIiA/IFwiTFwiIDogXCJnYWxcIixcbiAgfTtcblxuICBjb25zdCBfZW5lcmd5U3RhdHM6IFN0YXRpc3RpY3MgfCBQcm9taXNlPFN0YXRpc3RpY3M+ID0gZW5lcmd5U3RhdElkcy5sZW5ndGhcbiAgICA/IGZldGNoU3RhdGlzdGljcyhoYXNzISwgc3RhcnQsIGVuZCwgZW5lcmd5U3RhdElkcywgcGVyaW9kLCBlbmVyZ3lVbml0cywgW1xuICAgICAgICBcImNoYW5nZVwiLFxuICAgICAgXSlcbiAgICA6IHt9O1xuICBjb25zdCBfd2F0ZXJTdGF0czogU3RhdGlzdGljcyB8IFByb21pc2U8U3RhdGlzdGljcz4gPSB3YXRlclN0YXRJZHMubGVuZ3RoXG4gICAgPyBmZXRjaFN0YXRpc3RpY3MoaGFzcyEsIHN0YXJ0LCBlbmQsIHdhdGVyU3RhdElkcywgcGVyaW9kLCB3YXRlclVuaXRzLCBbXG4gICAgICAgIFwiY2hhbmdlXCIsXG4gICAgICBdKVxuICAgIDoge307XG5cbiAgbGV0IHN0YXRzQ29tcGFyZTtcbiAgbGV0IHN0YXJ0Q29tcGFyZTtcbiAgbGV0IGVuZENvbXBhcmU7XG4gIGxldCBfZW5lcmd5U3RhdHNDb21wYXJlOiBTdGF0aXN0aWNzIHwgUHJvbWlzZTxTdGF0aXN0aWNzPiA9IHt9O1xuICBsZXQgX3dhdGVyU3RhdHNDb21wYXJlOiBTdGF0aXN0aWNzIHwgUHJvbWlzZTxTdGF0aXN0aWNzPiA9IHt9O1xuXG4gIGlmIChjb21wYXJlKSB7XG4gICAgaWYgKGRheURpZmZlcmVuY2UgPiAyNyAmJiBkYXlEaWZmZXJlbmNlIDwgMzIpIHtcbiAgICAgIC8vIFdoZW4gY29tcGFyaW5nIGEgbW9udGgsIHdlIHdhbnQgdG8gc3RhcnQgYXQgdGhlIGJlZ2luaW5nIG9mIHRoZSBtb250aFxuICAgICAgc3RhcnRDb21wYXJlID0gYWRkTW9udGhzKHN0YXJ0LCAtMSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0YXJ0Q29tcGFyZSA9IGFkZERheXMoc3RhcnQsIChkYXlEaWZmZXJlbmNlICsgMSkgKiAtMSk7XG4gICAgfVxuICAgIGVuZENvbXBhcmUgPSBhZGRNaWxsaXNlY29uZHMoc3RhcnQsIC0xKTtcbiAgICBpZiAoZW5lcmd5U3RhdElkcy5sZW5ndGgpIHtcbiAgICAgIF9lbmVyZ3lTdGF0c0NvbXBhcmUgPSBmZXRjaFN0YXRpc3RpY3MoXG4gICAgICAgIGhhc3MhLFxuICAgICAgICBzdGFydENvbXBhcmUsXG4gICAgICAgIGVuZENvbXBhcmUsXG4gICAgICAgIGVuZXJneVN0YXRJZHMsXG4gICAgICAgIHBlcmlvZCxcbiAgICAgICAgZW5lcmd5VW5pdHMsXG4gICAgICAgIFtcImNoYW5nZVwiXVxuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKHdhdGVyU3RhdElkcy5sZW5ndGgpIHtcbiAgICAgIF93YXRlclN0YXRzQ29tcGFyZSA9IGZldGNoU3RhdGlzdGljcyhcbiAgICAgICAgaGFzcyEsXG4gICAgICAgIHN0YXJ0Q29tcGFyZSxcbiAgICAgICAgZW5kQ29tcGFyZSxcbiAgICAgICAgd2F0ZXJTdGF0SWRzLFxuICAgICAgICBwZXJpb2QsXG4gICAgICAgIHdhdGVyVW5pdHMsXG4gICAgICAgIFtcImNoYW5nZVwiXVxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBsZXQgX2Zvc3NpbEVuZXJneUNvbnN1bXB0aW9uOiB1bmRlZmluZWQgfCBQcm9taXNlPEZvc3NpbEVuZXJneUNvbnN1bXB0aW9uPjtcbiAgbGV0IF9mb3NzaWxFbmVyZ3lDb25zdW1wdGlvbkNvbXBhcmU6XG4gICAgfCB1bmRlZmluZWRcbiAgICB8IFByb21pc2U8Rm9zc2lsRW5lcmd5Q29uc3VtcHRpb24+O1xuICBpZiAoY28yU2lnbmFsRW50aXR5ICE9PSB1bmRlZmluZWQpIHtcbiAgICBfZm9zc2lsRW5lcmd5Q29uc3VtcHRpb24gPSBnZXRGb3NzaWxFbmVyZ3lDb25zdW1wdGlvbihcbiAgICAgIGhhc3MhLFxuICAgICAgc3RhcnQsXG4gICAgICBjb25zdW1wdGlvblN0YXRJRHMsXG4gICAgICBjbzJTaWduYWxFbnRpdHksXG4gICAgICBlbmQsXG4gICAgICBkYXlEaWZmZXJlbmNlID4gMzUgPyBcIm1vbnRoXCIgOiBkYXlEaWZmZXJlbmNlID4gMiA/IFwiZGF5XCIgOiBcImhvdXJcIlxuICAgICk7XG4gICAgaWYgKGNvbXBhcmUpIHtcbiAgICAgIF9mb3NzaWxFbmVyZ3lDb25zdW1wdGlvbkNvbXBhcmUgPSBnZXRGb3NzaWxFbmVyZ3lDb25zdW1wdGlvbihcbiAgICAgICAgaGFzcyEsXG4gICAgICAgIHN0YXJ0Q29tcGFyZSxcbiAgICAgICAgY29uc3VtcHRpb25TdGF0SURzLFxuICAgICAgICBjbzJTaWduYWxFbnRpdHksXG4gICAgICAgIGVuZENvbXBhcmUsXG4gICAgICAgIGRheURpZmZlcmVuY2UgPiAzNSA/IFwibW9udGhcIiA6IGRheURpZmZlcmVuY2UgPiAyID8gXCJkYXlcIiA6IFwiaG91clwiXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IHN0YXRzTWV0YWRhdGE6IFJlY29yZDxzdHJpbmcsIFN0YXRpc3RpY3NNZXRhRGF0YT4gPSB7fTtcbiAgY29uc3QgX2dldFN0YXRpc3RpY01ldGFkYXRhOlxuICAgIHwgUHJvbWlzZTxTdGF0aXN0aWNzTWV0YURhdGFbXT5cbiAgICB8IFN0YXRpc3RpY3NNZXRhRGF0YVtdID0gYWxsU3RhdElEcy5sZW5ndGhcbiAgICA/IGdldFN0YXRpc3RpY01ldGFkYXRhKGhhc3MsIGFsbFN0YXRJRHMpXG4gICAgOiBbXTtcbiAgY29uc3QgW1xuICAgIGVuZXJneVN0YXRzLFxuICAgIHdhdGVyU3RhdHMsXG4gICAgZW5lcmd5U3RhdHNDb21wYXJlLFxuICAgIHdhdGVyU3RhdHNDb21wYXJlLFxuICAgIHN0YXRzTWV0YWRhdGFBcnJheSxcbiAgICBmb3NzaWxFbmVyZ3lDb25zdW1wdGlvbixcbiAgICBmb3NzaWxFbmVyZ3lDb25zdW1wdGlvbkNvbXBhcmUsXG4gIF0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgX2VuZXJneVN0YXRzLFxuICAgIF93YXRlclN0YXRzLFxuICAgIF9lbmVyZ3lTdGF0c0NvbXBhcmUsXG4gICAgX3dhdGVyU3RhdHNDb21wYXJlLFxuICAgIF9nZXRTdGF0aXN0aWNNZXRhZGF0YSxcbiAgICBfZm9zc2lsRW5lcmd5Q29uc3VtcHRpb24sXG4gICAgX2Zvc3NpbEVuZXJneUNvbnN1bXB0aW9uQ29tcGFyZSxcbiAgXSk7XG4gIGNvbnN0IHN0YXRzID0geyAuLi5lbmVyZ3lTdGF0cywgLi4ud2F0ZXJTdGF0cyB9O1xuICBpZiAoY29tcGFyZSkge1xuICAgIHN0YXRzQ29tcGFyZSA9IHsgLi4uZW5lcmd5U3RhdHNDb21wYXJlLCAuLi53YXRlclN0YXRzQ29tcGFyZSB9O1xuICB9XG4gIGlmIChhbGxTdGF0SURzLmxlbmd0aCkge1xuICAgIHN0YXRzTWV0YWRhdGFBcnJheS5mb3JFYWNoKCh4KSA9PiB7XG4gICAgICBzdGF0c01ldGFkYXRhW3guc3RhdGlzdGljX2lkXSA9IHg7XG4gICAgfSk7XG4gIH1cblxuICBjb25zdCBkYXRhOiBFbmVyZ3lEYXRhID0ge1xuICAgIHN0YXJ0LFxuICAgIGVuZCxcbiAgICBzdGFydENvbXBhcmUsXG4gICAgZW5kQ29tcGFyZSxcbiAgICBpbmZvLFxuICAgIHByZWZzLFxuICAgIHN0YXRzLFxuICAgIHN0YXRzTWV0YWRhdGEsXG4gICAgc3RhdHNDb21wYXJlLFxuICAgIGNvMlNpZ25hbENvbmZpZ0VudHJ5LFxuICAgIGNvMlNpZ25hbEVudGl0eSxcbiAgICBmb3NzaWxFbmVyZ3lDb25zdW1wdGlvbixcbiAgICBmb3NzaWxFbmVyZ3lDb25zdW1wdGlvbkNvbXBhcmUsXG4gIH07XG5cbiAgcmV0dXJuIGRhdGE7XG59O1xuXG5leHBvcnQgaW50ZXJmYWNlIEVuZXJneUNvbGxlY3Rpb24gZXh0ZW5kcyBDb2xsZWN0aW9uPEVuZXJneURhdGE+IHtcbiAgc3RhcnQ6IERhdGU7XG4gIGVuZD86IERhdGU7XG4gIGNvbXBhcmU/OiBib29sZWFuO1xuICBwcmVmcz86IEVuZXJneVByZWZlcmVuY2VzO1xuICBjbGVhclByZWZzKCk6IHZvaWQ7XG4gIHNldFBlcmlvZChuZXdTdGFydDogRGF0ZSwgbmV3RW5kPzogRGF0ZSk6IHZvaWQ7XG4gIHNldENvbXBhcmUoY29tcGFyZTogYm9vbGVhbik6IHZvaWQ7XG4gIF9yZWZyZXNoVGltZW91dD86IG51bWJlcjtcbiAgX3VwZGF0ZVBlcmlvZFRpbWVvdXQ/OiBudW1iZXI7XG4gIF9hY3RpdmU6IG51bWJlcjtcbn1cblxuY29uc3QgY2xlYXJFbmVyZ3lDb2xsZWN0aW9uUHJlZmVyZW5jZXMgPSAoaGFzczogSG9tZUFzc2lzdGFudCkgPT4ge1xuICBlbmVyZ3lDb2xsZWN0aW9uS2V5cy5mb3JFYWNoKChrZXkpID0+IHtcbiAgICBjb25zdCBlbmVyZ3lDb2xsZWN0aW9uID0gZ2V0RW5lcmd5RGF0YUNvbGxlY3Rpb24oaGFzcywgeyBrZXkgfSk7XG4gICAgZW5lcmd5Q29sbGVjdGlvbi5jbGVhclByZWZzKCk7XG4gICAgaWYgKGVuZXJneUNvbGxlY3Rpb24uX2FjdGl2ZSkge1xuICAgICAgZW5lcmd5Q29sbGVjdGlvbi5yZWZyZXNoKCk7XG4gICAgfVxuICB9KTtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRFbmVyZ3lEYXRhQ29sbGVjdGlvbiA9IChcbiAgaGFzczogSG9tZUFzc2lzdGFudCxcbiAgb3B0aW9uczogeyBwcmVmcz86IEVuZXJneVByZWZlcmVuY2VzOyBrZXk/OiBzdHJpbmcgfSA9IHt9XG4pOiBFbmVyZ3lDb2xsZWN0aW9uID0+IHtcbiAgbGV0IGtleSA9IFwiX2VuZXJneVwiO1xuICBpZiAob3B0aW9ucy5rZXkpIHtcbiAgICBpZiAoIW9wdGlvbnMua2V5LnN0YXJ0c1dpdGgoXCJlbmVyZ3lfXCIpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJLZXkgbmVlZCB0byBzdGFydCB3aXRoIGVuZXJneV9cIik7XG4gICAgfVxuICAgIGtleSA9IGBfJHtvcHRpb25zLmtleX1gO1xuICB9XG5cbiAgaWYgKChoYXNzLmNvbm5lY3Rpb24gYXMgYW55KVtrZXldKSB7XG4gICAgcmV0dXJuIChoYXNzLmNvbm5lY3Rpb24gYXMgYW55KVtrZXldO1xuICB9XG5cbiAgZW5lcmd5Q29sbGVjdGlvbktleXMucHVzaChvcHRpb25zLmtleSk7XG5cbiAgY29uc3QgY29sbGVjdGlvbiA9IGdldENvbGxlY3Rpb248RW5lcmd5RGF0YT4oXG4gICAgaGFzcy5jb25uZWN0aW9uLFxuICAgIGtleSxcbiAgICBhc3luYyAoKSA9PiB7XG4gICAgICBpZiAoIWNvbGxlY3Rpb24ucHJlZnMpIHtcbiAgICAgICAgLy8gVGhpcyB3aWxsIHJhaXNlIGlmIG5vdCBmb3VuZC5cbiAgICAgICAgLy8gRGV0ZWN0IGJ5IGNoZWNraW5nIGBlLmNvZGUgPT09IFwibm90X2ZvdW5kXCJcbiAgICAgICAgY29sbGVjdGlvbi5wcmVmcyA9IGF3YWl0IGdldEVuZXJneVByZWZlcmVuY2VzKGhhc3MpO1xuICAgICAgfVxuXG4gICAgICBpZiAoY29sbGVjdGlvbi5fcmVmcmVzaFRpbWVvdXQpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KGNvbGxlY3Rpb24uX3JlZnJlc2hUaW1lb3V0KTtcbiAgICAgIH1cblxuICAgICAgaWYgKFxuICAgICAgICBjb2xsZWN0aW9uLl9hY3RpdmUgJiZcbiAgICAgICAgKCFjb2xsZWN0aW9uLmVuZCB8fCBjb2xsZWN0aW9uLmVuZCA+IG5ldyBEYXRlKCkpXG4gICAgICApIHtcbiAgICAgICAgLy8gVGhlIHN0YXRzIGFyZSBjcmVhdGVkIGV2ZXJ5IGhvdXJcbiAgICAgICAgLy8gU2NoZWR1bGUgYSByZWZyZXNoIGZvciAyMCBtaW51dGVzIHBhc3QgdGhlIGhvdXJcbiAgICAgICAgLy8gSWYgdGhlIGVuZCBpcyBsYXJnZXIgdGhhbiB0aGUgY3VycmVudCB0aW1lLlxuICAgICAgICBjb25zdCBuZXh0RmV0Y2ggPSBuZXcgRGF0ZSgpO1xuICAgICAgICBpZiAobmV4dEZldGNoLmdldE1pbnV0ZXMoKSA+PSAyMCkge1xuICAgICAgICAgIG5leHRGZXRjaC5zZXRIb3VycyhuZXh0RmV0Y2guZ2V0SG91cnMoKSArIDEpO1xuICAgICAgICB9XG4gICAgICAgIG5leHRGZXRjaC5zZXRNaW51dGVzKDIwLCAwLCAwKTtcblxuICAgICAgICBjb2xsZWN0aW9uLl9yZWZyZXNoVGltZW91dCA9IHdpbmRvdy5zZXRUaW1lb3V0KFxuICAgICAgICAgICgpID0+IGNvbGxlY3Rpb24ucmVmcmVzaCgpLFxuICAgICAgICAgIG5leHRGZXRjaC5nZXRUaW1lKCkgLSBEYXRlLm5vdygpXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBnZXRFbmVyZ3lEYXRhKFxuICAgICAgICBoYXNzLFxuICAgICAgICBjb2xsZWN0aW9uLnByZWZzLFxuICAgICAgICBjb2xsZWN0aW9uLnN0YXJ0LFxuICAgICAgICBjb2xsZWN0aW9uLmVuZCxcbiAgICAgICAgY29sbGVjdGlvbi5jb21wYXJlXG4gICAgICApO1xuICAgIH1cbiAgKSBhcyBFbmVyZ3lDb2xsZWN0aW9uO1xuXG4gIGNvbnN0IG9yaWdTdWJzY3JpYmUgPSBjb2xsZWN0aW9uLnN1YnNjcmliZTtcblxuICBjb2xsZWN0aW9uLnN1YnNjcmliZSA9IChzdWJzY3JpYmVyOiAoZGF0YTogRW5lcmd5RGF0YSkgPT4gdm9pZCkgPT4ge1xuICAgIGNvbnN0IHVuc3ViID0gb3JpZ1N1YnNjcmliZShzdWJzY3JpYmVyKTtcbiAgICBjb2xsZWN0aW9uLl9hY3RpdmUrKztcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgY29sbGVjdGlvbi5fYWN0aXZlLS07XG4gICAgICBpZiAoY29sbGVjdGlvbi5fYWN0aXZlIDwgMSkge1xuICAgICAgICBjbGVhclRpbWVvdXQoY29sbGVjdGlvbi5fcmVmcmVzaFRpbWVvdXQpO1xuICAgICAgICBjb2xsZWN0aW9uLl9yZWZyZXNoVGltZW91dCA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICAgIHVuc3ViKCk7XG4gICAgfTtcbiAgfTtcblxuICBjb2xsZWN0aW9uLl9hY3RpdmUgPSAwO1xuICBjb2xsZWN0aW9uLnByZWZzID0gb3B0aW9ucy5wcmVmcztcbiAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgLy8gU2V0IHN0YXJ0IHRvIHN0YXJ0IG9mIHRvZGF5IGlmIHdlIGhhdmUgZGF0YSBmb3IgdG9kYXksIG90aGVyd2lzZSB5ZXN0ZXJkYXlcbiAgY29sbGVjdGlvbi5zdGFydCA9IG5vdy5nZXRIb3VycygpID4gMCA/IHN0YXJ0T2ZUb2RheSgpIDogc3RhcnRPZlllc3RlcmRheSgpO1xuICBjb2xsZWN0aW9uLmVuZCA9IG5vdy5nZXRIb3VycygpID4gMCA/IGVuZE9mVG9kYXkoKSA6IGVuZE9mWWVzdGVyZGF5KCk7XG5cbiAgY29uc3Qgc2NoZWR1bGVVcGRhdGVQZXJpb2QgPSAoKSA9PiB7XG4gICAgY29sbGVjdGlvbi5fdXBkYXRlUGVyaW9kVGltZW91dCA9IHdpbmRvdy5zZXRUaW1lb3V0KFxuICAgICAgKCkgPT4ge1xuICAgICAgICBjb2xsZWN0aW9uLnN0YXJ0ID0gc3RhcnRPZlRvZGF5KCk7XG4gICAgICAgIGNvbGxlY3Rpb24uZW5kID0gZW5kT2ZUb2RheSgpO1xuICAgICAgICBzY2hlZHVsZVVwZGF0ZVBlcmlvZCgpO1xuICAgICAgfSxcbiAgICAgIGFkZEhvdXJzKGVuZE9mVG9kYXkoKSwgMSkuZ2V0VGltZSgpIC0gRGF0ZS5ub3coKSAvLyBTd2l0Y2ggdG8gbmV4dCBkYXkgYW4gaG91ciBhZnRlciB0aGUgZGF5IGNoYW5nZWRcbiAgICApO1xuICB9O1xuICBzY2hlZHVsZVVwZGF0ZVBlcmlvZCgpO1xuXG4gIGNvbGxlY3Rpb24uY2xlYXJQcmVmcyA9ICgpID0+IHtcbiAgICBjb2xsZWN0aW9uLnByZWZzID0gdW5kZWZpbmVkO1xuICB9O1xuICBjb2xsZWN0aW9uLnNldFBlcmlvZCA9IChuZXdTdGFydDogRGF0ZSwgbmV3RW5kPzogRGF0ZSkgPT4ge1xuICAgIGNvbGxlY3Rpb24uc3RhcnQgPSBuZXdTdGFydDtcbiAgICBjb2xsZWN0aW9uLmVuZCA9IG5ld0VuZDtcbiAgICBpZiAoXG4gICAgICBjb2xsZWN0aW9uLnN0YXJ0LmdldFRpbWUoKSA9PT0gc3RhcnRPZlRvZGF5KCkuZ2V0VGltZSgpICYmXG4gICAgICBjb2xsZWN0aW9uLmVuZD8uZ2V0VGltZSgpID09PSBlbmRPZlRvZGF5KCkuZ2V0VGltZSgpICYmXG4gICAgICAhY29sbGVjdGlvbi5fdXBkYXRlUGVyaW9kVGltZW91dFxuICAgICkge1xuICAgICAgc2NoZWR1bGVVcGRhdGVQZXJpb2QoKTtcbiAgICB9IGVsc2UgaWYgKGNvbGxlY3Rpb24uX3VwZGF0ZVBlcmlvZFRpbWVvdXQpIHtcbiAgICAgIGNsZWFyVGltZW91dChjb2xsZWN0aW9uLl91cGRhdGVQZXJpb2RUaW1lb3V0KTtcbiAgICAgIGNvbGxlY3Rpb24uX3VwZGF0ZVBlcmlvZFRpbWVvdXQgPSB1bmRlZmluZWQ7XG4gICAgfVxuICB9O1xuICBjb2xsZWN0aW9uLnNldENvbXBhcmUgPSAoY29tcGFyZTogYm9vbGVhbikgPT4ge1xuICAgIGNvbGxlY3Rpb24uY29tcGFyZSA9IGNvbXBhcmU7XG4gIH07XG4gIHJldHVybiBjb2xsZWN0aW9uO1xufTtcblxuZXhwb3J0IGNvbnN0IGdldEVuZXJneVNvbGFyRm9yZWNhc3RzID0gKGhhc3M6IEhvbWVBc3Npc3RhbnQpID0+XG4gIGhhc3MuY2FsbFdTPEVuZXJneVNvbGFyRm9yZWNhc3RzPih7XG4gICAgdHlwZTogXCJlbmVyZ3kvc29sYXJfZm9yZWNhc3RcIixcbiAgfSk7XG5cbmNvbnN0IGVuZXJneUdhc1VuaXRDbGFzcyA9IFtcInZvbHVtZVwiLCBcImVuZXJneVwiXSBhcyBjb25zdDtcbmV4cG9ydCB0eXBlIEVuZXJneUdhc1VuaXRDbGFzcyA9ICh0eXBlb2YgZW5lcmd5R2FzVW5pdENsYXNzKVtudW1iZXJdO1xuXG5leHBvcnQgY29uc3QgZ2V0RW5lcmd5R2FzVW5pdENsYXNzID0gKFxuICBwcmVmczogRW5lcmd5UHJlZmVyZW5jZXMsXG4gIHN0YXRpc3RpY3NNZXRhRGF0YTogUmVjb3JkPHN0cmluZywgU3RhdGlzdGljc01ldGFEYXRhPiA9IHt9LFxuICBleGNsdWRlU291cmNlPzogc3RyaW5nXG4pOiBFbmVyZ3lHYXNVbml0Q2xhc3MgfCB1bmRlZmluZWQgPT4ge1xuICBmb3IgKGNvbnN0IHNvdXJjZSBvZiBwcmVmcy5lbmVyZ3lfc291cmNlcykge1xuICAgIGlmIChzb3VyY2UudHlwZSAhPT0gXCJnYXNcIikge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGlmIChleGNsdWRlU291cmNlICYmIGV4Y2x1ZGVTb3VyY2UgPT09IHNvdXJjZS5zdGF0X2VuZXJneV9mcm9tKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgY29uc3Qgc3RhdGlzdGljSWRXaXRoTWV0YSA9IHN0YXRpc3RpY3NNZXRhRGF0YVtzb3VyY2Uuc3RhdF9lbmVyZ3lfZnJvbV07XG4gICAgaWYgKFxuICAgICAgZW5lcmd5R2FzVW5pdENsYXNzLmluY2x1ZGVzKFxuICAgICAgICBzdGF0aXN0aWNJZFdpdGhNZXRhPy51bml0X2NsYXNzIGFzIEVuZXJneUdhc1VuaXRDbGFzc1xuICAgICAgKVxuICAgICkge1xuICAgICAgcmV0dXJuIHN0YXRpc3RpY0lkV2l0aE1ldGEudW5pdF9jbGFzcyBhcyBFbmVyZ3lHYXNVbml0Q2xhc3M7XG4gICAgfVxuICB9XG4gIHJldHVybiB1bmRlZmluZWQ7XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0RW5lcmd5R2FzVW5pdCA9IChcbiAgaGFzczogSG9tZUFzc2lzdGFudCxcbiAgcHJlZnM6IEVuZXJneVByZWZlcmVuY2VzLFxuICBzdGF0aXN0aWNzTWV0YURhdGE6IFJlY29yZDxzdHJpbmcsIFN0YXRpc3RpY3NNZXRhRGF0YT4gPSB7fVxuKTogc3RyaW5nIHwgdW5kZWZpbmVkID0+IHtcbiAgY29uc3QgdW5pdENsYXNzID0gZ2V0RW5lcmd5R2FzVW5pdENsYXNzKHByZWZzLCBzdGF0aXN0aWNzTWV0YURhdGEpO1xuICBpZiAodW5pdENsYXNzID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4gIHJldHVybiB1bml0Q2xhc3MgPT09IFwiZW5lcmd5XCJcbiAgICA/IFwia1doXCJcbiAgICA6IGhhc3MuY29uZmlnLnVuaXRfc3lzdGVtLmxlbmd0aCA9PT0gXCJrbVwiXG4gICAgPyBcIm3Cs1wiXG4gICAgOiBcImZ0wrNcIjtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRFbmVyZ3lXYXRlclVuaXQgPSAoaGFzczogSG9tZUFzc2lzdGFudCk6IHN0cmluZyB8IHVuZGVmaW5lZCA9PlxuICBoYXNzLmNvbmZpZy51bml0X3N5c3RlbS5sZW5ndGggPT09IFwia21cIiA/IFwiTFwiIDogXCJnYWxcIjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/data/energy.ts\n");

/***/ })

}]);