"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkhome_assistant_frontend"] = self["webpackChunkhome_assistant_frontend"] || []).push([["src_cast_cast_manager_ts"],{

/***/ "./src/cast/cast_framework.ts":
/*!************************************!*\
  !*** ./src/cast/cast_framework.ts ***!
  \************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   castApiAvailable: function() { return /* binding */ castApiAvailable; }\n/* harmony export */ });\n/* harmony import */ var _common_dom_load_resource__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/dom/load_resource */ \"./src/common/dom/load_resource.ts\");\n\nvar loadedPromise;\nvar castApiAvailable = function castApiAvailable() {\n  if (loadedPromise) {\n    return loadedPromise;\n  }\n  loadedPromise = new Promise(function (resolve) {\n    window.__onGCastApiAvailable = resolve;\n  });\n  // Any element with a specific ID will get set as a JS variable on window\n  // This will override the cast SDK if the iconset is loaded afterwards.\n  // Conflicting IDs will no longer mess with window, so we'll just append one.\n  var el = document.createElement(\"div\");\n  el.id = \"cast\";\n  document.body.append(el);\n  (0,_common_dom_load_resource__WEBPACK_IMPORTED_MODULE_0__.loadJS)(\"https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1\");\n  return loadedPromise;\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY2FzdC9jYXN0X2ZyYW1ld29yay50cy5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2hvbWUtYXNzaXN0YW50LWZyb250ZW5kLy4vc3JjL2Nhc3QvY2FzdF9mcmFtZXdvcmsudHM/NjQyZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBsb2FkSlMgfSBmcm9tIFwiLi4vY29tbW9uL2RvbS9sb2FkX3Jlc291cmNlXCI7XG5cbmxldCBsb2FkZWRQcm9taXNlOiBQcm9taXNlPGJvb2xlYW4+IHwgdW5kZWZpbmVkO1xuXG5leHBvcnQgY29uc3QgY2FzdEFwaUF2YWlsYWJsZSA9ICgpID0+IHtcbiAgaWYgKGxvYWRlZFByb21pc2UpIHtcbiAgICByZXR1cm4gbG9hZGVkUHJvbWlzZTtcbiAgfVxuXG4gIGxvYWRlZFByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICh3aW5kb3cgYXMgYW55KS5fX29uR0Nhc3RBcGlBdmFpbGFibGUgPSByZXNvbHZlO1xuICB9KTtcbiAgLy8gQW55IGVsZW1lbnQgd2l0aCBhIHNwZWNpZmljIElEIHdpbGwgZ2V0IHNldCBhcyBhIEpTIHZhcmlhYmxlIG9uIHdpbmRvd1xuICAvLyBUaGlzIHdpbGwgb3ZlcnJpZGUgdGhlIGNhc3QgU0RLIGlmIHRoZSBpY29uc2V0IGlzIGxvYWRlZCBhZnRlcndhcmRzLlxuICAvLyBDb25mbGljdGluZyBJRHMgd2lsbCBubyBsb25nZXIgbWVzcyB3aXRoIHdpbmRvdywgc28gd2UnbGwganVzdCBhcHBlbmQgb25lLlxuICBjb25zdCBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIGVsLmlkID0gXCJjYXN0XCI7XG4gIGRvY3VtZW50LmJvZHkuYXBwZW5kKGVsKTtcblxuICBsb2FkSlMoXG4gICAgXCJodHRwczovL3d3dy5nc3RhdGljLmNvbS9jdi9qcy9zZW5kZXIvdjEvY2FzdF9zZW5kZXIuanM/bG9hZENhc3RGcmFtZXdvcms9MVwiXG4gICk7XG4gIHJldHVybiBsb2FkZWRQcm9taXNlO1xufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/cast/cast_framework.ts\n");

/***/ }),

/***/ "./src/cast/cast_manager.ts":
/*!**********************************!*\
  !*** ./src/cast/cast_manager.ts ***!
  \**********************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CastManager: function() { return /* binding */ CastManager; },\n/* harmony export */   getCastManager: function() { return /* binding */ getCastManager; }\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/createForOfIteratorHelper */ \"./node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\");\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ \"./node_modules/@babel/runtime/helpers/esm/classCallCheck.js\");\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ \"./node_modules/@babel/runtime/helpers/esm/createClass.js\");\n/* harmony import */ var _cast_framework__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./cast_framework */ \"./src/cast/cast_framework.ts\");\n/* harmony import */ var _const__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./const */ \"./src/cast/const.ts\");\n/* harmony import */ var _dev_const__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./dev_const */ \"./src/cast/dev_const.ts\");\n/* harmony import */ var _receiver_messages__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./receiver_messages */ \"./src/cast/receiver_messages.ts\");\n\n\n\n/* eslint-disable no-console */\n\n\n\n\n\nvar managerProm;\n\n/*\nGeneral flow of Chromecast:\n\nChromecast sessions are started via the Chromecast button. When clicked, session\nstate changes to started. We then send authentication, which will cause the\nreceiver app to send a status update.\n\nIf a session is already active, we query the status to see what it is up to. If\na user presses the cast button we send auth if not connected yet, then send\ncommand as usual.\n*/\n\nvar CastManager = /*#__PURE__*/function () {\n  function CastManager(auth) {\n    var _this = this;\n    (0,_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(this, CastManager);\n    this.auth = void 0;\n    // If the cast connection is connected to our Hass.\n    this.status = void 0;\n    this._eventListeners = {};\n    this._sessionStateChanged = function (ev) {\n      if (true) {\n        console.log(\"Cast session state changed\", ev.sessionState);\n      }\n      // On Android, opening a new session always results in SESSION_RESUMED.\n      // So treat both as the same.\n      if (ev.sessionState === \"SESSION_STARTED\" || ev.sessionState === \"SESSION_RESUMED\") {\n        if (_this.auth) {\n          (0,_receiver_messages__WEBPACK_IMPORTED_MODULE_6__.castSendAuth)(_this, _this.auth);\n        } else {\n          // Only do if no auth, as this is done as part of sendAuth.\n          _this.sendMessage({\n            type: \"get_status\"\n          });\n        }\n        _this._attachMessageListener();\n      } else if (ev.sessionState === \"SESSION_ENDED\") {\n        _this.status = undefined;\n        _this._fireEvent(\"connection-changed\");\n      }\n    };\n    this._castStateChanged = function (ev) {\n      if (true) {\n        console.log(\"Cast state changed\", ev.castState);\n      }\n      _this._fireEvent(\"state-changed\");\n    };\n    this.auth = auth;\n    var context = this.castContext;\n    context.setOptions({\n      receiverApplicationId: _const__WEBPACK_IMPORTED_MODULE_4__.CAST_APP_ID,\n      autoJoinPolicy: chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED\n    });\n    context.addEventListener(cast.framework.CastContextEventType.SESSION_STATE_CHANGED, this._sessionStateChanged);\n    context.addEventListener(cast.framework.CastContextEventType.CAST_STATE_CHANGED, this._castStateChanged);\n  }\n  (0,_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(CastManager, [{\n    key: \"addEventListener\",\n    value: function addEventListener(event, listener) {\n      var _this2 = this;\n      if (!(event in this._eventListeners)) {\n        this._eventListeners[event] = [];\n      }\n      this._eventListeners[event].push(listener);\n      return function () {\n        _this2._eventListeners[event].splice(_this2._eventListeners[event].indexOf(listener));\n      };\n    }\n  }, {\n    key: \"castConnectedToOurHass\",\n    get: function get() {\n      return this.status !== undefined && this.auth !== undefined && this.status.connected && (this.status.hassUrl === this.auth.data.hassUrl || _const__WEBPACK_IMPORTED_MODULE_4__.CAST_DEV && this.status.hassUrl === _dev_const__WEBPACK_IMPORTED_MODULE_5__.CAST_DEV_HASS_URL);\n    }\n  }, {\n    key: \"sendMessage\",\n    value: function sendMessage(msg) {\n      if (true) {\n        console.log(\"Sending cast message\", msg);\n      }\n      this.castSession.sendMessage(_const__WEBPACK_IMPORTED_MODULE_4__.CAST_NS, msg);\n    }\n  }, {\n    key: \"castState\",\n    get: function get() {\n      return this.castContext.getCastState();\n    }\n  }, {\n    key: \"castContext\",\n    get: function get() {\n      // @ts-ignore\n      return cast.framework.CastContext.getInstance();\n    }\n  }, {\n    key: \"castSession\",\n    get: function get() {\n      return this.castContext.getCurrentSession();\n    }\n  }, {\n    key: \"requestSession\",\n    value: function requestSession() {\n      return this.castContext.requestSession();\n    }\n  }, {\n    key: \"_fireEvent\",\n    value: function _fireEvent(event) {\n      var _iterator = (0,_babel_runtime_helpers_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(this._eventListeners[event] || []),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var listener = _step.value;\n          listener();\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    }\n  }, {\n    key: \"_receiveMessage\",\n    value: function _receiveMessage(msg) {\n      if (true) {\n        console.log(\"Received cast message\", msg);\n      }\n      if (msg.type === \"receiver_status\") {\n        this.status = msg;\n        this._fireEvent(\"connection-changed\");\n      }\n    }\n  }, {\n    key: \"_attachMessageListener\",\n    value: function _attachMessageListener() {\n      var _this3 = this;\n      var session = this.castSession;\n      session.addMessageListener(_const__WEBPACK_IMPORTED_MODULE_4__.CAST_NS, function (_ns, msg) {\n        return _this3._receiveMessage(JSON.parse(msg));\n      });\n    }\n  }]);\n  return CastManager;\n}();\nvar getCastManager = function getCastManager(auth) {\n  if (!managerProm) {\n    managerProm = (0,_cast_framework__WEBPACK_IMPORTED_MODULE_3__.castApiAvailable)().then(function (isAvailable) {\n      if (!isAvailable) {\n        throw new Error(\"No Cast API available\");\n      }\n      return new CastManager(auth);\n    });\n  }\n  return managerProm;\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY2FzdC9jYXN0X21hbmFnZXIudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUlBO0FBUUE7QUFBQTtBQUFBO0FBQUE7QUFMQTtBQUFBO0FBQ0E7QUFFQTtBQW1GQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBM0dBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFJQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBT0E7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBZ0NBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ob21lLWFzc2lzdGFudC1mcm9udGVuZC8uL3NyYy9jYXN0L2Nhc3RfbWFuYWdlci50cz8wZGQ1Il0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIG5vLWNvbnNvbGUgKi9cblxuaW1wb3J0IHsgQXV0aCB9IGZyb20gXCJob21lLWFzc2lzdGFudC1qcy13ZWJzb2NrZXRcIjtcbmltcG9ydCB7IGNhc3RBcGlBdmFpbGFibGUgfSBmcm9tIFwiLi9jYXN0X2ZyYW1ld29ya1wiO1xuaW1wb3J0IHsgQ0FTVF9BUFBfSUQsIENBU1RfREVWLCBDQVNUX05TIH0gZnJvbSBcIi4vY29uc3RcIjtcbmltcG9ydCB7IENBU1RfREVWX0hBU1NfVVJMIH0gZnJvbSBcIi4vZGV2X2NvbnN0XCI7XG5pbXBvcnQge1xuICBjYXN0U2VuZEF1dGgsXG4gIEhhc3NNZXNzYWdlIGFzIFJlY2VpdmVyTWVzc2FnZSxcbn0gZnJvbSBcIi4vcmVjZWl2ZXJfbWVzc2FnZXNcIjtcbmltcG9ydCB7IFJlY2VpdmVyU3RhdHVzTWVzc2FnZSwgU2VuZGVyTWVzc2FnZSB9IGZyb20gXCIuL3NlbmRlcl9tZXNzYWdlc1wiO1xuXG5sZXQgbWFuYWdlclByb206IFByb21pc2U8Q2FzdE1hbmFnZXI+IHwgdW5kZWZpbmVkO1xuXG50eXBlIENhc3RFdmVudExpc3RlbmVyID0gKCkgPT4gdm9pZDtcblxuLypcbkdlbmVyYWwgZmxvdyBvZiBDaHJvbWVjYXN0OlxuXG5DaHJvbWVjYXN0IHNlc3Npb25zIGFyZSBzdGFydGVkIHZpYSB0aGUgQ2hyb21lY2FzdCBidXR0b24uIFdoZW4gY2xpY2tlZCwgc2Vzc2lvblxuc3RhdGUgY2hhbmdlcyB0byBzdGFydGVkLiBXZSB0aGVuIHNlbmQgYXV0aGVudGljYXRpb24sIHdoaWNoIHdpbGwgY2F1c2UgdGhlXG5yZWNlaXZlciBhcHAgdG8gc2VuZCBhIHN0YXR1cyB1cGRhdGUuXG5cbklmIGEgc2Vzc2lvbiBpcyBhbHJlYWR5IGFjdGl2ZSwgd2UgcXVlcnkgdGhlIHN0YXR1cyB0byBzZWUgd2hhdCBpdCBpcyB1cCB0by4gSWZcbmEgdXNlciBwcmVzc2VzIHRoZSBjYXN0IGJ1dHRvbiB3ZSBzZW5kIGF1dGggaWYgbm90IGNvbm5lY3RlZCB5ZXQsIHRoZW4gc2VuZFxuY29tbWFuZCBhcyB1c3VhbC5cbiovXG5cbnR5cGUgQ2FzdEV2ZW50ID0gXCJjb25uZWN0aW9uLWNoYW5nZWRcIiB8IFwic3RhdGUtY2hhbmdlZFwiO1xuXG5leHBvcnQgY2xhc3MgQ2FzdE1hbmFnZXIge1xuICBwdWJsaWMgYXV0aD86IEF1dGg7XG5cbiAgLy8gSWYgdGhlIGNhc3QgY29ubmVjdGlvbiBpcyBjb25uZWN0ZWQgdG8gb3VyIEhhc3MuXG4gIHB1YmxpYyBzdGF0dXM/OiBSZWNlaXZlclN0YXR1c01lc3NhZ2U7XG5cbiAgcHJpdmF0ZSBfZXZlbnRMaXN0ZW5lcnM6IHsgW2V2ZW50OiBzdHJpbmddOiBDYXN0RXZlbnRMaXN0ZW5lcltdIH0gPSB7fTtcblxuICBjb25zdHJ1Y3RvcihhdXRoPzogQXV0aCkge1xuICAgIHRoaXMuYXV0aCA9IGF1dGg7XG4gICAgY29uc3QgY29udGV4dCA9IHRoaXMuY2FzdENvbnRleHQ7XG4gICAgY29udGV4dC5zZXRPcHRpb25zKHtcbiAgICAgIHJlY2VpdmVyQXBwbGljYXRpb25JZDogQ0FTVF9BUFBfSUQsXG4gICAgICBhdXRvSm9pblBvbGljeTogY2hyb21lLmNhc3QuQXV0b0pvaW5Qb2xpY3kuT1JJR0lOX1NDT1BFRCxcbiAgICB9KTtcbiAgICBjb250ZXh0LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICBjYXN0LmZyYW1ld29yay5DYXN0Q29udGV4dEV2ZW50VHlwZS5TRVNTSU9OX1NUQVRFX0NIQU5HRUQsXG4gICAgICB0aGlzLl9zZXNzaW9uU3RhdGVDaGFuZ2VkXG4gICAgKTtcbiAgICBjb250ZXh0LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICBjYXN0LmZyYW1ld29yay5DYXN0Q29udGV4dEV2ZW50VHlwZS5DQVNUX1NUQVRFX0NIQU5HRUQsXG4gICAgICB0aGlzLl9jYXN0U3RhdGVDaGFuZ2VkXG4gICAgKTtcbiAgfVxuXG4gIHB1YmxpYyBhZGRFdmVudExpc3RlbmVyKGV2ZW50OiBDYXN0RXZlbnQsIGxpc3RlbmVyOiBDYXN0RXZlbnRMaXN0ZW5lcikge1xuICAgIGlmICghKGV2ZW50IGluIHRoaXMuX2V2ZW50TGlzdGVuZXJzKSkge1xuICAgICAgdGhpcy5fZXZlbnRMaXN0ZW5lcnNbZXZlbnRdID0gW107XG4gICAgfVxuICAgIHRoaXMuX2V2ZW50TGlzdGVuZXJzW2V2ZW50XS5wdXNoKGxpc3RlbmVyKTtcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICB0aGlzLl9ldmVudExpc3RlbmVyc1tldmVudF0uc3BsaWNlKFxuICAgICAgICB0aGlzLl9ldmVudExpc3RlbmVyc1tldmVudF0uaW5kZXhPZihsaXN0ZW5lcilcbiAgICAgICk7XG4gICAgfTtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgY2FzdENvbm5lY3RlZFRvT3VySGFzcygpOiBib29sZWFuIHtcbiAgICByZXR1cm4gKFxuICAgICAgdGhpcy5zdGF0dXMgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgdGhpcy5hdXRoICE9PSB1bmRlZmluZWQgJiZcbiAgICAgIHRoaXMuc3RhdHVzLmNvbm5lY3RlZCAmJlxuICAgICAgKHRoaXMuc3RhdHVzLmhhc3NVcmwgPT09IHRoaXMuYXV0aC5kYXRhLmhhc3NVcmwgfHxcbiAgICAgICAgKENBU1RfREVWICYmIHRoaXMuc3RhdHVzLmhhc3NVcmwgPT09IENBU1RfREVWX0hBU1NfVVJMKSlcbiAgICApO1xuICB9XG5cbiAgcHVibGljIHNlbmRNZXNzYWdlKG1zZzogUmVjZWl2ZXJNZXNzYWdlKSB7XG4gICAgaWYgKF9fREVWX18pIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiU2VuZGluZyBjYXN0IG1lc3NhZ2VcIiwgbXNnKTtcbiAgICB9XG4gICAgdGhpcy5jYXN0U2Vzc2lvbi5zZW5kTWVzc2FnZShDQVNUX05TLCBtc2cpO1xuICB9XG5cbiAgcHVibGljIGdldCBjYXN0U3RhdGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuY2FzdENvbnRleHQuZ2V0Q2FzdFN0YXRlKCk7XG4gIH1cblxuICBwdWJsaWMgZ2V0IGNhc3RDb250ZXh0KCkge1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICByZXR1cm4gY2FzdC5mcmFtZXdvcmsuQ2FzdENvbnRleHQuZ2V0SW5zdGFuY2UoKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgY2FzdFNlc3Npb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuY2FzdENvbnRleHQuZ2V0Q3VycmVudFNlc3Npb24oKSE7XG4gIH1cblxuICBwdWJsaWMgcmVxdWVzdFNlc3Npb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuY2FzdENvbnRleHQucmVxdWVzdFNlc3Npb24oKTtcbiAgfVxuXG4gIHByaXZhdGUgX2ZpcmVFdmVudChldmVudDogQ2FzdEV2ZW50KSB7XG4gICAgZm9yIChjb25zdCBsaXN0ZW5lciBvZiB0aGlzLl9ldmVudExpc3RlbmVyc1tldmVudF0gfHwgW10pIHtcbiAgICAgIGxpc3RlbmVyKCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfcmVjZWl2ZU1lc3NhZ2UobXNnOiBTZW5kZXJNZXNzYWdlKSB7XG4gICAgaWYgKF9fREVWX18pIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiUmVjZWl2ZWQgY2FzdCBtZXNzYWdlXCIsIG1zZyk7XG4gICAgfVxuICAgIGlmIChtc2cudHlwZSA9PT0gXCJyZWNlaXZlcl9zdGF0dXNcIikge1xuICAgICAgdGhpcy5zdGF0dXMgPSBtc2c7XG4gICAgICB0aGlzLl9maXJlRXZlbnQoXCJjb25uZWN0aW9uLWNoYW5nZWRcIik7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfc2Vzc2lvblN0YXRlQ2hhbmdlZCA9IChldjogY2FzdC5mcmFtZXdvcmsuU2Vzc2lvblN0YXRlRXZlbnREYXRhKSA9PiB7XG4gICAgaWYgKF9fREVWX18pIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiQ2FzdCBzZXNzaW9uIHN0YXRlIGNoYW5nZWRcIiwgZXYuc2Vzc2lvblN0YXRlKTtcbiAgICB9XG4gICAgLy8gT24gQW5kcm9pZCwgb3BlbmluZyBhIG5ldyBzZXNzaW9uIGFsd2F5cyByZXN1bHRzIGluIFNFU1NJT05fUkVTVU1FRC5cbiAgICAvLyBTbyB0cmVhdCBib3RoIGFzIHRoZSBzYW1lLlxuICAgIGlmIChcbiAgICAgIGV2LnNlc3Npb25TdGF0ZSA9PT0gXCJTRVNTSU9OX1NUQVJURURcIiB8fFxuICAgICAgZXYuc2Vzc2lvblN0YXRlID09PSBcIlNFU1NJT05fUkVTVU1FRFwiXG4gICAgKSB7XG4gICAgICBpZiAodGhpcy5hdXRoKSB7XG4gICAgICAgIGNhc3RTZW5kQXV0aCh0aGlzLCB0aGlzLmF1dGgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gT25seSBkbyBpZiBubyBhdXRoLCBhcyB0aGlzIGlzIGRvbmUgYXMgcGFydCBvZiBzZW5kQXV0aC5cbiAgICAgICAgdGhpcy5zZW5kTWVzc2FnZSh7IHR5cGU6IFwiZ2V0X3N0YXR1c1wiIH0pO1xuICAgICAgfVxuICAgICAgdGhpcy5fYXR0YWNoTWVzc2FnZUxpc3RlbmVyKCk7XG4gICAgfSBlbHNlIGlmIChldi5zZXNzaW9uU3RhdGUgPT09IFwiU0VTU0lPTl9FTkRFRFwiKSB7XG4gICAgICB0aGlzLnN0YXR1cyA9IHVuZGVmaW5lZDtcbiAgICAgIHRoaXMuX2ZpcmVFdmVudChcImNvbm5lY3Rpb24tY2hhbmdlZFwiKTtcbiAgICB9XG4gIH07XG5cbiAgcHJpdmF0ZSBfY2FzdFN0YXRlQ2hhbmdlZCA9IChldjogY2FzdC5mcmFtZXdvcmsuQ2FzdFN0YXRlRXZlbnREYXRhKSA9PiB7XG4gICAgaWYgKF9fREVWX18pIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiQ2FzdCBzdGF0ZSBjaGFuZ2VkXCIsIGV2LmNhc3RTdGF0ZSk7XG4gICAgfVxuICAgIHRoaXMuX2ZpcmVFdmVudChcInN0YXRlLWNoYW5nZWRcIik7XG4gIH07XG5cbiAgcHJpdmF0ZSBfYXR0YWNoTWVzc2FnZUxpc3RlbmVyKCkge1xuICAgIGNvbnN0IHNlc3Npb24gPSB0aGlzLmNhc3RTZXNzaW9uO1xuICAgIHNlc3Npb24uYWRkTWVzc2FnZUxpc3RlbmVyKENBU1RfTlMsIChfbnMsIG1zZykgPT5cbiAgICAgIHRoaXMuX3JlY2VpdmVNZXNzYWdlKEpTT04ucGFyc2UobXNnKSlcbiAgICApO1xuICB9XG59XG5cbmV4cG9ydCBjb25zdCBnZXRDYXN0TWFuYWdlciA9IChhdXRoPzogQXV0aCkgPT4ge1xuICBpZiAoIW1hbmFnZXJQcm9tKSB7XG4gICAgbWFuYWdlclByb20gPSBjYXN0QXBpQXZhaWxhYmxlKCkudGhlbigoaXNBdmFpbGFibGUpID0+IHtcbiAgICAgIGlmICghaXNBdmFpbGFibGUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gQ2FzdCBBUEkgYXZhaWxhYmxlXCIpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5ldyBDYXN0TWFuYWdlcihhdXRoKTtcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gbWFuYWdlclByb207XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/cast/cast_manager.ts\n");

/***/ }),

/***/ "./src/common/dom/load_resource.ts":
/*!*****************************************!*\
  !*** ./src/common/dom/load_resource.ts ***!
  \*****************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   loadCSS: function() { return /* binding */ loadCSS; },\n/* harmony export */   loadImg: function() { return /* binding */ loadImg; },\n/* harmony export */   loadJS: function() { return /* binding */ loadJS; },\n/* harmony export */   loadModule: function() { return /* binding */ loadModule; }\n/* harmony export */ });\n// Load a resource and get a promise when loading done.\n// From: https://davidwalsh.name/javascript-loader\n\nvar _load = function _load(tag, url, type) {\n  return (\n    // This promise will be used by Promise.all to determine success or failure\n    new Promise(function (resolve, reject) {\n      var element = document.createElement(tag);\n      var attr = \"src\";\n      var parent = \"body\";\n\n      // Important success and error for the promise\n      element.onload = function () {\n        return resolve(url);\n      };\n      element.onerror = function () {\n        return reject(url);\n      };\n\n      // Need to set different attributes depending on tag type\n      switch (tag) {\n        case \"script\":\n          element.async = true;\n          if (type) {\n            element.type = type;\n          }\n          break;\n        case \"link\":\n          element.type = \"text/css\";\n          element.rel = \"stylesheet\";\n          attr = \"href\";\n          parent = \"head\";\n      }\n\n      // Inject into document to kick off loading\n      element[attr] = url;\n      document[parent].appendChild(element);\n    })\n  );\n};\nvar loadCSS = function loadCSS(url) {\n  return _load(\"link\", url);\n};\nvar loadJS = function loadJS(url) {\n  return _load(\"script\", url);\n};\nvar loadImg = function loadImg(url) {\n  return _load(\"img\", url);\n};\nvar loadModule = function loadModule(url) {\n  return _load(\"script\", url, \"module\");\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tbW9uL2RvbS9sb2FkX3Jlc291cmNlLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTtBQUNBOztBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaG9tZS1hc3Npc3RhbnQtZnJvbnRlbmQvLi9zcmMvY29tbW9uL2RvbS9sb2FkX3Jlc291cmNlLnRzPzVjMzYiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gTG9hZCBhIHJlc291cmNlIGFuZCBnZXQgYSBwcm9taXNlIHdoZW4gbG9hZGluZyBkb25lLlxuLy8gRnJvbTogaHR0cHM6Ly9kYXZpZHdhbHNoLm5hbWUvamF2YXNjcmlwdC1sb2FkZXJcblxuY29uc3QgX2xvYWQgPSAodGFnOiBcImxpbmtcIiB8IFwic2NyaXB0XCIgfCBcImltZ1wiLCB1cmw6IHN0cmluZywgdHlwZT86IFwibW9kdWxlXCIpID0+XG4gIC8vIFRoaXMgcHJvbWlzZSB3aWxsIGJlIHVzZWQgYnkgUHJvbWlzZS5hbGwgdG8gZGV0ZXJtaW5lIHN1Y2Nlc3Mgb3IgZmFpbHVyZVxuICBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnKTtcbiAgICBsZXQgYXR0ciA9IFwic3JjXCI7XG4gICAgbGV0IHBhcmVudCA9IFwiYm9keVwiO1xuXG4gICAgLy8gSW1wb3J0YW50IHN1Y2Nlc3MgYW5kIGVycm9yIGZvciB0aGUgcHJvbWlzZVxuICAgIGVsZW1lbnQub25sb2FkID0gKCkgPT4gcmVzb2x2ZSh1cmwpO1xuICAgIGVsZW1lbnQub25lcnJvciA9ICgpID0+IHJlamVjdCh1cmwpO1xuXG4gICAgLy8gTmVlZCB0byBzZXQgZGlmZmVyZW50IGF0dHJpYnV0ZXMgZGVwZW5kaW5nIG9uIHRhZyB0eXBlXG4gICAgc3dpdGNoICh0YWcpIHtcbiAgICAgIGNhc2UgXCJzY3JpcHRcIjpcbiAgICAgICAgKGVsZW1lbnQgYXMgSFRNTFNjcmlwdEVsZW1lbnQpLmFzeW5jID0gdHJ1ZTtcbiAgICAgICAgaWYgKHR5cGUpIHtcbiAgICAgICAgICAoZWxlbWVudCBhcyBIVE1MU2NyaXB0RWxlbWVudCkudHlwZSA9IHR5cGU7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwibGlua1wiOlxuICAgICAgICAoZWxlbWVudCBhcyBIVE1MTGlua0VsZW1lbnQpLnR5cGUgPSBcInRleHQvY3NzXCI7XG4gICAgICAgIChlbGVtZW50IGFzIEhUTUxMaW5rRWxlbWVudCkucmVsID0gXCJzdHlsZXNoZWV0XCI7XG4gICAgICAgIGF0dHIgPSBcImhyZWZcIjtcbiAgICAgICAgcGFyZW50ID0gXCJoZWFkXCI7XG4gICAgfVxuXG4gICAgLy8gSW5qZWN0IGludG8gZG9jdW1lbnQgdG8ga2ljayBvZmYgbG9hZGluZ1xuICAgIGVsZW1lbnRbYXR0cl0gPSB1cmw7XG4gICAgZG9jdW1lbnRbcGFyZW50XS5hcHBlbmRDaGlsZChlbGVtZW50KTtcbiAgfSk7XG5leHBvcnQgY29uc3QgbG9hZENTUyA9ICh1cmw6IHN0cmluZykgPT4gX2xvYWQoXCJsaW5rXCIsIHVybCk7XG5leHBvcnQgY29uc3QgbG9hZEpTID0gKHVybDogc3RyaW5nKSA9PiBfbG9hZChcInNjcmlwdFwiLCB1cmwpO1xuZXhwb3J0IGNvbnN0IGxvYWRJbWcgPSAodXJsOiBzdHJpbmcpID0+IF9sb2FkKFwiaW1nXCIsIHVybCk7XG5leHBvcnQgY29uc3QgbG9hZE1vZHVsZSA9ICh1cmw6IHN0cmluZykgPT4gX2xvYWQoXCJzY3JpcHRcIiwgdXJsLCBcIm1vZHVsZVwiKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/common/dom/load_resource.ts\n");

/***/ })

}]);