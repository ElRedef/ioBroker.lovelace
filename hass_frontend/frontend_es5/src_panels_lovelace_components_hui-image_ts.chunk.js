"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkhome_assistant_frontend"] = self["webpackChunkhome_assistant_frontend"] || []).push([["src_panels_lovelace_components_hui-image_ts"],{

/***/ "./src/common/util/parse-aspect-ratio.ts":
/*!***********************************************!*\
  !*** ./src/common/util/parse-aspect-ratio.ts ***!
  \***********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ parseAspectRatio; }\n/* harmony export */ });\n// Handle 16x9, 16:9, 1.78x1, 1.78:1, 1.78\n// Ignore everything else\nvar parseOrThrow = function parseOrThrow(num) {\n  var parsed = parseFloat(num);\n\n  if (isNaN(parsed)) {\n    throw new Error(\"\".concat(num, \" is not a number\"));\n  }\n\n  return parsed;\n};\n\nfunction parseAspectRatio(input) {\n  if (!input) {\n    return null;\n  }\n\n  try {\n    if (input.endsWith(\"%\")) {\n      return {\n        w: 100,\n        h: parseOrThrow(input.substr(0, input.length - 1))\n      };\n    }\n\n    var arr = input.replace(\":\", \"x\").split(\"x\");\n\n    if (arr.length === 0) {\n      return null;\n    }\n\n    return arr.length === 1 ? {\n      w: parseOrThrow(arr[0]),\n      h: 1\n    } : {\n      w: parseOrThrow(arr[0]),\n      h: parseOrThrow(arr[1])\n    };\n  } catch (err) {// Ignore the error\n  }\n\n  return null;\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tbW9uL3V0aWwvcGFyc2UtYXNwZWN0LXJhdGlvLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTs7QUFFQTs7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUVBOztBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ob21lLWFzc2lzdGFudC1mcm9udGVuZC8uL3NyYy9jb21tb24vdXRpbC9wYXJzZS1hc3BlY3QtcmF0aW8udHM/ODdlYSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBIYW5kbGUgMTZ4OSwgMTY6OSwgMS43OHgxLCAxLjc4OjEsIDEuNzhcbi8vIElnbm9yZSBldmVyeXRoaW5nIGVsc2VcbmNvbnN0IHBhcnNlT3JUaHJvdyA9IChudW0pID0+IHtcbiAgY29uc3QgcGFyc2VkID0gcGFyc2VGbG9hdChudW0pO1xuICBpZiAoaXNOYU4ocGFyc2VkKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgJHtudW19IGlzIG5vdCBhIG51bWJlcmApO1xuICB9XG4gIHJldHVybiBwYXJzZWQ7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBwYXJzZUFzcGVjdFJhdGlvKGlucHV0OiBzdHJpbmcpIHtcbiAgaWYgKCFpbnB1dCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHRyeSB7XG4gICAgaWYgKGlucHV0LmVuZHNXaXRoKFwiJVwiKSkge1xuICAgICAgcmV0dXJuIHsgdzogMTAwLCBoOiBwYXJzZU9yVGhyb3coaW5wdXQuc3Vic3RyKDAsIGlucHV0Lmxlbmd0aCAtIDEpKSB9O1xuICAgIH1cblxuICAgIGNvbnN0IGFyciA9IGlucHV0LnJlcGxhY2UoXCI6XCIsIFwieFwiKS5zcGxpdChcInhcIik7XG4gICAgaWYgKGFyci5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiBhcnIubGVuZ3RoID09PSAxXG4gICAgICA/IHsgdzogcGFyc2VPclRocm93KGFyclswXSksIGg6IDEgfVxuICAgICAgOiB7IHc6IHBhcnNlT3JUaHJvdyhhcnJbMF0pLCBoOiBwYXJzZU9yVGhyb3coYXJyWzFdKSB9O1xuICB9IGNhdGNoIChlcnI6IGFueSkge1xuICAgIC8vIElnbm9yZSB0aGUgZXJyb3JcbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/common/util/parse-aspect-ratio.ts\n");

/***/ }),

/***/ "./src/components/ha-camera-stream.ts":
/*!********************************************!*\
  !*** ./src/components/ha-camera-stream.ts ***!
  \********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lit */ \"./node_modules/lit/index.js\");\n/* harmony import */ var lit_decorators__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit/decorators */ \"./node_modules/lit/decorators.js\");\n/* harmony import */ var _common_config_is_component_loaded__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common/config/is_component_loaded */ \"./src/common/config/is_component_loaded.ts\");\n/* harmony import */ var _common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../common/entity/compute_state_name */ \"./src/common/entity/compute_state_name.ts\");\n/* harmony import */ var _common_entity_supports_feature__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../common/entity/supports-feature */ \"./src/common/entity/supports-feature.ts\");\n/* harmony import */ var _data_camera__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../data/camera */ \"./src/data/camera.ts\");\n/* harmony import */ var _ha_hls_player__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./ha-hls-player */ \"./src/components/ha-hls-player.ts\");\n/* harmony import */ var _ha_web_rtc_player__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./ha-web-rtc-player */ \"./src/components/ha-web-rtc-player.ts\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nvar _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5, _templateObject6, _templateObject7;\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _decorate(decorators, factory, superClass, mixins) { var api = _getDecoratorsApi(); if (mixins) { for (var i = 0; i < mixins.length; i++) { api = mixins[i](api); } } var r = factory(function initialize(O) { api.initializeInstanceElements(O, decorated.elements); }, superClass); var decorated = api.decorateClass(_coalesceClassElements(r.d.map(_createElementDescriptor)), decorators); api.initializeClassElements(r.F, decorated.elements); return api.runClassFinishers(r.F, decorated.finishers); }\n\nfunction _getDecoratorsApi() { _getDecoratorsApi = function _getDecoratorsApi() { return api; }; var api = { elementsDefinitionOrder: [[\"method\"], [\"field\"]], initializeInstanceElements: function initializeInstanceElements(O, elements) { [\"method\", \"field\"].forEach(function (kind) { elements.forEach(function (element) { if (element.kind === kind && element.placement === \"own\") { this.defineClassElement(O, element); } }, this); }, this); }, initializeClassElements: function initializeClassElements(F, elements) { var proto = F.prototype; [\"method\", \"field\"].forEach(function (kind) { elements.forEach(function (element) { var placement = element.placement; if (element.kind === kind && (placement === \"static\" || placement === \"prototype\")) { var receiver = placement === \"static\" ? F : proto; this.defineClassElement(receiver, element); } }, this); }, this); }, defineClassElement: function defineClassElement(receiver, element) { var descriptor = element.descriptor; if (element.kind === \"field\") { var initializer = element.initializer; descriptor = { enumerable: descriptor.enumerable, writable: descriptor.writable, configurable: descriptor.configurable, value: initializer === void 0 ? void 0 : initializer.call(receiver) }; } Object.defineProperty(receiver, element.key, descriptor); }, decorateClass: function decorateClass(elements, decorators) { var newElements = []; var finishers = []; var placements = { \"static\": [], prototype: [], own: [] }; elements.forEach(function (element) { this.addElementPlacement(element, placements); }, this); elements.forEach(function (element) { if (!_hasDecorators(element)) return newElements.push(element); var elementFinishersExtras = this.decorateElement(element, placements); newElements.push(elementFinishersExtras.element); newElements.push.apply(newElements, elementFinishersExtras.extras); finishers.push.apply(finishers, elementFinishersExtras.finishers); }, this); if (!decorators) { return { elements: newElements, finishers: finishers }; } var result = this.decorateConstructor(newElements, decorators); finishers.push.apply(finishers, result.finishers); result.finishers = finishers; return result; }, addElementPlacement: function addElementPlacement(element, placements, silent) { var keys = placements[element.placement]; if (!silent && keys.indexOf(element.key) !== -1) { throw new TypeError(\"Duplicated element (\" + element.key + \")\"); } keys.push(element.key); }, decorateElement: function decorateElement(element, placements) { var extras = []; var finishers = []; for (var decorators = element.decorators, i = decorators.length - 1; i >= 0; i--) { var keys = placements[element.placement]; keys.splice(keys.indexOf(element.key), 1); var elementObject = this.fromElementDescriptor(element); var elementFinisherExtras = this.toElementFinisherExtras((0, decorators[i])(elementObject) || elementObject); element = elementFinisherExtras.element; this.addElementPlacement(element, placements); if (elementFinisherExtras.finisher) { finishers.push(elementFinisherExtras.finisher); } var newExtras = elementFinisherExtras.extras; if (newExtras) { for (var j = 0; j < newExtras.length; j++) { this.addElementPlacement(newExtras[j], placements); } extras.push.apply(extras, newExtras); } } return { element: element, finishers: finishers, extras: extras }; }, decorateConstructor: function decorateConstructor(elements, decorators) { var finishers = []; for (var i = decorators.length - 1; i >= 0; i--) { var obj = this.fromClassDescriptor(elements); var elementsAndFinisher = this.toClassDescriptor((0, decorators[i])(obj) || obj); if (elementsAndFinisher.finisher !== undefined) { finishers.push(elementsAndFinisher.finisher); } if (elementsAndFinisher.elements !== undefined) { elements = elementsAndFinisher.elements; for (var j = 0; j < elements.length - 1; j++) { for (var k = j + 1; k < elements.length; k++) { if (elements[j].key === elements[k].key && elements[j].placement === elements[k].placement) { throw new TypeError(\"Duplicated element (\" + elements[j].key + \")\"); } } } } } return { elements: elements, finishers: finishers }; }, fromElementDescriptor: function fromElementDescriptor(element) { var obj = { kind: element.kind, key: element.key, placement: element.placement, descriptor: element.descriptor }; var desc = { value: \"Descriptor\", configurable: true }; Object.defineProperty(obj, Symbol.toStringTag, desc); if (element.kind === \"field\") obj.initializer = element.initializer; return obj; }, toElementDescriptors: function toElementDescriptors(elementObjects) { if (elementObjects === undefined) return; return _toArray(elementObjects).map(function (elementObject) { var element = this.toElementDescriptor(elementObject); this.disallowProperty(elementObject, \"finisher\", \"An element descriptor\"); this.disallowProperty(elementObject, \"extras\", \"An element descriptor\"); return element; }, this); }, toElementDescriptor: function toElementDescriptor(elementObject) { var kind = String(elementObject.kind); if (kind !== \"method\" && kind !== \"field\") { throw new TypeError('An element descriptor\\'s .kind property must be either \"method\" or' + ' \"field\", but a decorator created an element descriptor with' + ' .kind \"' + kind + '\"'); } var key = _toPropertyKey(elementObject.key); var placement = String(elementObject.placement); if (placement !== \"static\" && placement !== \"prototype\" && placement !== \"own\") { throw new TypeError('An element descriptor\\'s .placement property must be one of \"static\",' + ' \"prototype\" or \"own\", but a decorator created an element descriptor' + ' with .placement \"' + placement + '\"'); } var descriptor = elementObject.descriptor; this.disallowProperty(elementObject, \"elements\", \"An element descriptor\"); var element = { kind: kind, key: key, placement: placement, descriptor: Object.assign({}, descriptor) }; if (kind !== \"field\") { this.disallowProperty(elementObject, \"initializer\", \"A method descriptor\"); } else { this.disallowProperty(descriptor, \"get\", \"The property descriptor of a field descriptor\"); this.disallowProperty(descriptor, \"set\", \"The property descriptor of a field descriptor\"); this.disallowProperty(descriptor, \"value\", \"The property descriptor of a field descriptor\"); element.initializer = elementObject.initializer; } return element; }, toElementFinisherExtras: function toElementFinisherExtras(elementObject) { var element = this.toElementDescriptor(elementObject); var finisher = _optionalCallableProperty(elementObject, \"finisher\"); var extras = this.toElementDescriptors(elementObject.extras); return { element: element, finisher: finisher, extras: extras }; }, fromClassDescriptor: function fromClassDescriptor(elements) { var obj = { kind: \"class\", elements: elements.map(this.fromElementDescriptor, this) }; var desc = { value: \"Descriptor\", configurable: true }; Object.defineProperty(obj, Symbol.toStringTag, desc); return obj; }, toClassDescriptor: function toClassDescriptor(obj) { var kind = String(obj.kind); if (kind !== \"class\") { throw new TypeError('A class descriptor\\'s .kind property must be \"class\", but a decorator' + ' created a class descriptor with .kind \"' + kind + '\"'); } this.disallowProperty(obj, \"key\", \"A class descriptor\"); this.disallowProperty(obj, \"placement\", \"A class descriptor\"); this.disallowProperty(obj, \"descriptor\", \"A class descriptor\"); this.disallowProperty(obj, \"initializer\", \"A class descriptor\"); this.disallowProperty(obj, \"extras\", \"A class descriptor\"); var finisher = _optionalCallableProperty(obj, \"finisher\"); var elements = this.toElementDescriptors(obj.elements); return { elements: elements, finisher: finisher }; }, runClassFinishers: function runClassFinishers(constructor, finishers) { for (var i = 0; i < finishers.length; i++) { var newConstructor = (0, finishers[i])(constructor); if (newConstructor !== undefined) { if (typeof newConstructor !== \"function\") { throw new TypeError(\"Finishers must return a constructor.\"); } constructor = newConstructor; } } return constructor; }, disallowProperty: function disallowProperty(obj, name, objectType) { if (obj[name] !== undefined) { throw new TypeError(objectType + \" can't have a .\" + name + \" property.\"); } } }; return api; }\n\nfunction _createElementDescriptor(def) { var key = _toPropertyKey(def.key); var descriptor; if (def.kind === \"method\") { descriptor = { value: def.value, writable: true, configurable: true, enumerable: false }; } else if (def.kind === \"get\") { descriptor = { get: def.value, configurable: true, enumerable: false }; } else if (def.kind === \"set\") { descriptor = { set: def.value, configurable: true, enumerable: false }; } else if (def.kind === \"field\") { descriptor = { configurable: true, writable: true, enumerable: true }; } var element = { kind: def.kind === \"field\" ? \"field\" : \"method\", key: key, placement: def[\"static\"] ? \"static\" : def.kind === \"field\" ? \"own\" : \"prototype\", descriptor: descriptor }; if (def.decorators) element.decorators = def.decorators; if (def.kind === \"field\") element.initializer = def.value; return element; }\n\nfunction _coalesceGetterSetter(element, other) { if (element.descriptor.get !== undefined) { other.descriptor.get = element.descriptor.get; } else { other.descriptor.set = element.descriptor.set; } }\n\nfunction _coalesceClassElements(elements) { var newElements = []; var isSameElement = function isSameElement(other) { return other.kind === \"method\" && other.key === element.key && other.placement === element.placement; }; for (var i = 0; i < elements.length; i++) { var element = elements[i]; var other; if (element.kind === \"method\" && (other = newElements.find(isSameElement))) { if (_isDataDescriptor(element.descriptor) || _isDataDescriptor(other.descriptor)) { if (_hasDecorators(element) || _hasDecorators(other)) { throw new ReferenceError(\"Duplicated methods (\" + element.key + \") can't be decorated.\"); } other.descriptor = element.descriptor; } else { if (_hasDecorators(element)) { if (_hasDecorators(other)) { throw new ReferenceError(\"Decorators can't be placed on different accessors with for \" + \"the same property (\" + element.key + \").\"); } other.decorators = element.decorators; } _coalesceGetterSetter(element, other); } } else { newElements.push(element); } } return newElements; }\n\nfunction _hasDecorators(element) { return element.decorators && element.decorators.length; }\n\nfunction _isDataDescriptor(desc) { return desc !== undefined && !(desc.value === undefined && desc.writable === undefined); }\n\nfunction _optionalCallableProperty(obj, name) { var value = obj[name]; if (value !== undefined && typeof value !== \"function\") { throw new TypeError(\"Expected '\" + name + \"' to be a function\"); } return value; }\n\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\n\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\n\nfunction _toArray(arr) { return _arrayWithHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n\n\n\n\n\n\n\n\n\nvar HaCameraStream = _decorate([(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.customElement)(\"ha-camera-stream\")], function (_initialize, _LitElement) {\n  var HaCameraStream = /*#__PURE__*/function (_LitElement2) {\n    _inherits(HaCameraStream, _LitElement2);\n\n    var _super = _createSuper(HaCameraStream);\n\n    function HaCameraStream() {\n      var _this;\n\n      _classCallCheck(this, HaCameraStream);\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      _this = _super.call.apply(_super, [this].concat(args));\n\n      _initialize(_assertThisInitialized(_this));\n\n      return _this;\n    }\n\n    return HaCameraStream;\n  }(_LitElement);\n\n  return {\n    F: HaCameraStream,\n    d: [{\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.property)({\n        attribute: false\n      })],\n      key: \"hass\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.property)({\n        attribute: false\n      })],\n      key: \"stateObj\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.property)({\n        type: Boolean,\n        attribute: \"controls\"\n      })],\n      key: \"controls\",\n      value: function value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.property)({\n        type: Boolean,\n        attribute: \"muted\"\n      })],\n      key: \"muted\",\n      value: function value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.property)({\n        type: Boolean,\n        attribute: \"allow-exoplayer\"\n      })],\n      key: \"allowExoPlayer\",\n      value: function value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.state)()],\n      key: \"_forceMJPEG\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.state)()],\n      key: \"_url\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.state)()],\n      key: \"_connected\",\n      value: function value() {\n        return false;\n      }\n    }, {\n      kind: \"method\",\n      key: \"willUpdate\",\n      value: // We keep track if we should force MJPEG if there was a failure\n      // to get the HLS stream url. This is reset if we change entities.\n      function willUpdate(changedProps) {\n        var _changedProps$get;\n\n        if (changedProps.has(\"stateObj\") && !this._shouldRenderMJPEG && this.stateObj && ((_changedProps$get = changedProps.get(\"stateObj\")) === null || _changedProps$get === void 0 ? void 0 : _changedProps$get.entity_id) !== this.stateObj.entity_id && this.stateObj.attributes.frontend_stream_type === _data_camera__WEBPACK_IMPORTED_MODULE_5__.STREAM_TYPE_HLS) {\n          this._forceMJPEG = undefined;\n          this._url = undefined;\n\n          this._getStreamUrl();\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"connectedCallback\",\n      value: function connectedCallback() {\n        _get(_getPrototypeOf(HaCameraStream.prototype), \"connectedCallback\", this).call(this);\n\n        this._connected = true;\n      }\n    }, {\n      kind: \"method\",\n      key: \"disconnectedCallback\",\n      value: function disconnectedCallback() {\n        _get(_getPrototypeOf(HaCameraStream.prototype), \"disconnectedCallback\", this).call(this);\n\n        this._connected = false;\n      }\n    }, {\n      kind: \"method\",\n      key: \"render\",\n      value: function render() {\n        if (!this.stateObj) {\n          return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\"])));\n        }\n\n        if ( false || this._shouldRenderMJPEG) {\n          return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\" <img\\n        .src=\", \"\\n        .alt=\", \"\\n      />\"])),  false ? 0 : this._connected ? (0,_data_camera__WEBPACK_IMPORTED_MODULE_5__.computeMJPEGStreamUrl)(this.stateObj) : \"\", \"Preview of the \".concat((0,_common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_3__.computeStateName)(this.stateObj), \" camera.\"));\n        }\n\n        if (this.stateObj.attributes.frontend_stream_type === _data_camera__WEBPACK_IMPORTED_MODULE_5__.STREAM_TYPE_HLS) {\n          return this._url ? (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\"<ha-hls-player\\n            autoplay\\n            playsinline\\n            .allowExoPlayer=\", \"\\n            .muted=\", \"\\n            .controls=\", \"\\n            .hass=\", \"\\n            .url=\", \"\\n          ></ha-hls-player>\"])), this.allowExoPlayer, this.muted, this.controls, this.hass, this._url) : (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([\"\"])));\n        }\n\n        if (this.stateObj.attributes.frontend_stream_type === _data_camera__WEBPACK_IMPORTED_MODULE_5__.STREAM_TYPE_WEB_RTC) {\n          return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([\"<ha-web-rtc-player\\n        autoplay\\n        playsinline\\n        .muted=\", \"\\n        .controls=\", \"\\n        .hass=\", \"\\n        .entityid=\", \"\\n      ></ha-web-rtc-player>\"])), this.muted, this.controls, this.hass, this.stateObj.entity_id);\n        }\n\n        return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)(_templateObject6 || (_templateObject6 = _taggedTemplateLiteral([\"\"])));\n      }\n    }, {\n      kind: \"get\",\n      key: \"_shouldRenderMJPEG\",\n      value: function _shouldRenderMJPEG() {\n        if (this._forceMJPEG === this.stateObj.entity_id) {\n          // Fallback when unable to fetch stream url\n          return true;\n        }\n\n        if (!(0,_common_entity_supports_feature__WEBPACK_IMPORTED_MODULE_4__.supportsFeature)(this.stateObj, _data_camera__WEBPACK_IMPORTED_MODULE_5__.CAMERA_SUPPORT_STREAM)) {\n          // Steaming is not supported by the camera so fallback to MJPEG stream\n          return true;\n        }\n\n        if (this.stateObj.attributes.frontend_stream_type === _data_camera__WEBPACK_IMPORTED_MODULE_5__.STREAM_TYPE_WEB_RTC) {\n          // Browser support required for WebRTC\n          return typeof RTCPeerConnection === \"undefined\";\n        } // Server side stream component required for HLS\n\n\n        return !(0,_common_config_is_component_loaded__WEBPACK_IMPORTED_MODULE_2__.isComponentLoaded)(this.hass, \"stream\");\n      }\n    }, {\n      kind: \"method\",\n      key: \"_getStreamUrl\",\n      value: function () {\n        var _getStreamUrl2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n          var _yield$fetchStreamUrl, url;\n\n          return regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  _context.prev = 0;\n                  _context.next = 3;\n                  return (0,_data_camera__WEBPACK_IMPORTED_MODULE_5__.fetchStreamUrl)(this.hass, this.stateObj.entity_id);\n\n                case 3:\n                  _yield$fetchStreamUrl = _context.sent;\n                  url = _yield$fetchStreamUrl.url;\n                  this._url = url;\n                  _context.next = 12;\n                  break;\n\n                case 8:\n                  _context.prev = 8;\n                  _context.t0 = _context[\"catch\"](0);\n                  // Fails if we were unable to get a stream\n                  // eslint-disable-next-line\n                  console.error(_context.t0);\n                  this._forceMJPEG = this.stateObj.entity_id;\n\n                case 12:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee, this, [[0, 8]]);\n        }));\n\n        function _getStreamUrl() {\n          return _getStreamUrl2.apply(this, arguments);\n        }\n\n        return _getStreamUrl;\n      }()\n    }, {\n      kind: \"get\",\n      \"static\": true,\n      key: \"styles\",\n      value: function styles() {\n        return (0,lit__WEBPACK_IMPORTED_MODULE_0__.css)(_templateObject7 || (_templateObject7 = _taggedTemplateLiteral([\"\\n      :host,\\n      img {\\n        display: block;\\n      }\\n\\n      img {\\n        width: 100%;\\n      }\\n    \"])));\n      }\n    }]\n  };\n}, lit__WEBPACK_IMPORTED_MODULE_0__.LitElement);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9oYS1jYW1lcmEtc3RyZWFtLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBU0E7QUFDQTs7QUFHQTtBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7OztBQUNBO0FBQUE7QUFBQTs7Ozs7QUFFQTtBQUFBO0FBQUE7Ozs7O0FBRUE7QUFBQTtBQUFBO0FBQUE7OztBQUNBOzs7O0FBRUE7QUFBQTtBQUFBO0FBQUE7OztBQUNBOzs7O0FBRUE7QUFBQTtBQUFBO0FBQUE7OztBQUNBOzs7O0FBSUE7Ozs7O0FBRUE7Ozs7O0FBRUE7OztBQUFBOzs7OztBQU5BO0FBQ0E7QUFPQTtBQUFBOztBQUNBO0FBUUE7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFFQTtBQUNBOztBQUNBO0FBQ0E7Ozs7QUFFQTtBQUNBOztBQUNBO0FBQ0E7Ozs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBUUE7O0FBQ0E7QUFDQTtBQVdBOztBQUNBO0FBQ0E7QUFRQTs7QUFDQTtBQUNBOzs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUdBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTs7Ozs7QUFFQTtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFFQTtBQUtBO0FBUEE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFTQTtBQUNBO0FBQ0E7QUFFQTs7QUFiQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7Ozs7Ozs7O0FBaUJBO0FBQ0E7QUFVQTs7O0FBdElBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaG9tZS1hc3Npc3RhbnQtZnJvbnRlbmQvLi9zcmMvY29tcG9uZW50cy9oYS1jYW1lcmEtc3RyZWFtLnRzPzk2MWUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgY3NzLFxuICBDU1NSZXN1bHRHcm91cCxcbiAgaHRtbCxcbiAgTGl0RWxlbWVudCxcbiAgUHJvcGVydHlWYWx1ZXMsXG4gIFRlbXBsYXRlUmVzdWx0LFxufSBmcm9tIFwibGl0XCI7XG5pbXBvcnQgeyBjdXN0b21FbGVtZW50LCBwcm9wZXJ0eSwgc3RhdGUgfSBmcm9tIFwibGl0L2RlY29yYXRvcnNcIjtcbmltcG9ydCB7IGlzQ29tcG9uZW50TG9hZGVkIH0gZnJvbSBcIi4uL2NvbW1vbi9jb25maWcvaXNfY29tcG9uZW50X2xvYWRlZFwiO1xuaW1wb3J0IHsgY29tcHV0ZVN0YXRlTmFtZSB9IGZyb20gXCIuLi9jb21tb24vZW50aXR5L2NvbXB1dGVfc3RhdGVfbmFtZVwiO1xuaW1wb3J0IHsgc3VwcG9ydHNGZWF0dXJlIH0gZnJvbSBcIi4uL2NvbW1vbi9lbnRpdHkvc3VwcG9ydHMtZmVhdHVyZVwiO1xuaW1wb3J0IHtcbiAgQ2FtZXJhRW50aXR5LFxuICBDQU1FUkFfU1VQUE9SVF9TVFJFQU0sXG4gIGNvbXB1dGVNSlBFR1N0cmVhbVVybCxcbiAgZmV0Y2hTdHJlYW1VcmwsXG4gIFNUUkVBTV9UWVBFX0hMUyxcbiAgU1RSRUFNX1RZUEVfV0VCX1JUQyxcbn0gZnJvbSBcIi4uL2RhdGEvY2FtZXJhXCI7XG5pbXBvcnQgeyBIb21lQXNzaXN0YW50IH0gZnJvbSBcIi4uL3R5cGVzXCI7XG5pbXBvcnQgXCIuL2hhLWhscy1wbGF5ZXJcIjtcbmltcG9ydCBcIi4vaGEtd2ViLXJ0Yy1wbGF5ZXJcIjtcblxuQGN1c3RvbUVsZW1lbnQoXCJoYS1jYW1lcmEtc3RyZWFtXCIpXG5jbGFzcyBIYUNhbWVyYVN0cmVhbSBleHRlbmRzIExpdEVsZW1lbnQge1xuICBAcHJvcGVydHkoeyBhdHRyaWJ1dGU6IGZhbHNlIH0pIHB1YmxpYyBoYXNzPzogSG9tZUFzc2lzdGFudDtcblxuICBAcHJvcGVydHkoeyBhdHRyaWJ1dGU6IGZhbHNlIH0pIHB1YmxpYyBzdGF0ZU9iaj86IENhbWVyYUVudGl0eTtcblxuICBAcHJvcGVydHkoeyB0eXBlOiBCb29sZWFuLCBhdHRyaWJ1dGU6IFwiY29udHJvbHNcIiB9KVxuICBwdWJsaWMgY29udHJvbHMgPSBmYWxzZTtcblxuICBAcHJvcGVydHkoeyB0eXBlOiBCb29sZWFuLCBhdHRyaWJ1dGU6IFwibXV0ZWRcIiB9KVxuICBwdWJsaWMgbXV0ZWQgPSBmYWxzZTtcblxuICBAcHJvcGVydHkoeyB0eXBlOiBCb29sZWFuLCBhdHRyaWJ1dGU6IFwiYWxsb3ctZXhvcGxheWVyXCIgfSlcbiAgcHVibGljIGFsbG93RXhvUGxheWVyID0gZmFsc2U7XG5cbiAgLy8gV2Uga2VlcCB0cmFjayBpZiB3ZSBzaG91bGQgZm9yY2UgTUpQRUcgaWYgdGhlcmUgd2FzIGEgZmFpbHVyZVxuICAvLyB0byBnZXQgdGhlIEhMUyBzdHJlYW0gdXJsLiBUaGlzIGlzIHJlc2V0IGlmIHdlIGNoYW5nZSBlbnRpdGllcy5cbiAgQHN0YXRlKCkgcHJpdmF0ZSBfZm9yY2VNSlBFRz86IHN0cmluZztcblxuICBAc3RhdGUoKSBwcml2YXRlIF91cmw/OiBzdHJpbmc7XG5cbiAgQHN0YXRlKCkgcHJpdmF0ZSBfY29ubmVjdGVkID0gZmFsc2U7XG5cbiAgcHVibGljIHdpbGxVcGRhdGUoY2hhbmdlZFByb3BzOiBQcm9wZXJ0eVZhbHVlcyk6IHZvaWQge1xuICAgIGlmIChcbiAgICAgIGNoYW5nZWRQcm9wcy5oYXMoXCJzdGF0ZU9ialwiKSAmJlxuICAgICAgIXRoaXMuX3Nob3VsZFJlbmRlck1KUEVHICYmXG4gICAgICB0aGlzLnN0YXRlT2JqICYmXG4gICAgICAoY2hhbmdlZFByb3BzLmdldChcInN0YXRlT2JqXCIpIGFzIENhbWVyYUVudGl0eSB8IHVuZGVmaW5lZCk/LmVudGl0eV9pZCAhPT1cbiAgICAgICAgdGhpcy5zdGF0ZU9iai5lbnRpdHlfaWQgJiZcbiAgICAgIHRoaXMuc3RhdGVPYmohLmF0dHJpYnV0ZXMuZnJvbnRlbmRfc3RyZWFtX3R5cGUgPT09IFNUUkVBTV9UWVBFX0hMU1xuICAgICkge1xuICAgICAgdGhpcy5fZm9yY2VNSlBFRyA9IHVuZGVmaW5lZDtcbiAgICAgIHRoaXMuX3VybCA9IHVuZGVmaW5lZDtcbiAgICAgIHRoaXMuX2dldFN0cmVhbVVybCgpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgIHRoaXMuX2Nvbm5lY3RlZCA9IHRydWU7XG4gIH1cblxuICBwdWJsaWMgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgc3VwZXIuZGlzY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICB0aGlzLl9jb25uZWN0ZWQgPSBmYWxzZTtcbiAgfVxuXG4gIHByb3RlY3RlZCByZW5kZXIoKTogVGVtcGxhdGVSZXN1bHQge1xuICAgIGlmICghdGhpcy5zdGF0ZU9iaikge1xuICAgICAgcmV0dXJuIGh0bWxgYDtcbiAgICB9XG4gICAgaWYgKF9fREVNT19fIHx8IHRoaXMuX3Nob3VsZFJlbmRlck1KUEVHKSB7XG4gICAgICByZXR1cm4gaHRtbGAgPGltZ1xuICAgICAgICAuc3JjPSR7X19ERU1PX19cbiAgICAgICAgICA/IHRoaXMuc3RhdGVPYmouYXR0cmlidXRlcy5lbnRpdHlfcGljdHVyZSFcbiAgICAgICAgICA6IHRoaXMuX2Nvbm5lY3RlZFxuICAgICAgICAgID8gY29tcHV0ZU1KUEVHU3RyZWFtVXJsKHRoaXMuc3RhdGVPYmopXG4gICAgICAgICAgOiBcIlwifVxuICAgICAgICAuYWx0PSR7YFByZXZpZXcgb2YgdGhlICR7Y29tcHV0ZVN0YXRlTmFtZSh0aGlzLnN0YXRlT2JqKX0gY2FtZXJhLmB9XG4gICAgICAvPmA7XG4gICAgfVxuICAgIGlmICh0aGlzLnN0YXRlT2JqLmF0dHJpYnV0ZXMuZnJvbnRlbmRfc3RyZWFtX3R5cGUgPT09IFNUUkVBTV9UWVBFX0hMUykge1xuICAgICAgcmV0dXJuIHRoaXMuX3VybFxuICAgICAgICA/IGh0bWxgPGhhLWhscy1wbGF5ZXJcbiAgICAgICAgICAgIGF1dG9wbGF5XG4gICAgICAgICAgICBwbGF5c2lubGluZVxuICAgICAgICAgICAgLmFsbG93RXhvUGxheWVyPSR7dGhpcy5hbGxvd0V4b1BsYXllcn1cbiAgICAgICAgICAgIC5tdXRlZD0ke3RoaXMubXV0ZWR9XG4gICAgICAgICAgICAuY29udHJvbHM9JHt0aGlzLmNvbnRyb2xzfVxuICAgICAgICAgICAgLmhhc3M9JHt0aGlzLmhhc3N9XG4gICAgICAgICAgICAudXJsPSR7dGhpcy5fdXJsfVxuICAgICAgICAgID48L2hhLWhscy1wbGF5ZXI+YFxuICAgICAgICA6IGh0bWxgYDtcbiAgICB9XG4gICAgaWYgKHRoaXMuc3RhdGVPYmouYXR0cmlidXRlcy5mcm9udGVuZF9zdHJlYW1fdHlwZSA9PT0gU1RSRUFNX1RZUEVfV0VCX1JUQykge1xuICAgICAgcmV0dXJuIGh0bWxgPGhhLXdlYi1ydGMtcGxheWVyXG4gICAgICAgIGF1dG9wbGF5XG4gICAgICAgIHBsYXlzaW5saW5lXG4gICAgICAgIC5tdXRlZD0ke3RoaXMubXV0ZWR9XG4gICAgICAgIC5jb250cm9scz0ke3RoaXMuY29udHJvbHN9XG4gICAgICAgIC5oYXNzPSR7dGhpcy5oYXNzfVxuICAgICAgICAuZW50aXR5aWQ9JHt0aGlzLnN0YXRlT2JqLmVudGl0eV9pZH1cbiAgICAgID48L2hhLXdlYi1ydGMtcGxheWVyPmA7XG4gICAgfVxuICAgIHJldHVybiBodG1sYGA7XG4gIH1cblxuICBwcml2YXRlIGdldCBfc2hvdWxkUmVuZGVyTUpQRUcoKSB7XG4gICAgaWYgKHRoaXMuX2ZvcmNlTUpQRUcgPT09IHRoaXMuc3RhdGVPYmohLmVudGl0eV9pZCkge1xuICAgICAgLy8gRmFsbGJhY2sgd2hlbiB1bmFibGUgdG8gZmV0Y2ggc3RyZWFtIHVybFxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmICghc3VwcG9ydHNGZWF0dXJlKHRoaXMuc3RhdGVPYmohLCBDQU1FUkFfU1VQUE9SVF9TVFJFQU0pKSB7XG4gICAgICAvLyBTdGVhbWluZyBpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoZSBjYW1lcmEgc28gZmFsbGJhY2sgdG8gTUpQRUcgc3RyZWFtXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKFxuICAgICAgdGhpcy5zdGF0ZU9iaiEuYXR0cmlidXRlcy5mcm9udGVuZF9zdHJlYW1fdHlwZSA9PT0gU1RSRUFNX1RZUEVfV0VCX1JUQ1xuICAgICkge1xuICAgICAgLy8gQnJvd3NlciBzdXBwb3J0IHJlcXVpcmVkIGZvciBXZWJSVENcbiAgICAgIHJldHVybiB0eXBlb2YgUlRDUGVlckNvbm5lY3Rpb24gPT09IFwidW5kZWZpbmVkXCI7XG4gICAgfVxuICAgIC8vIFNlcnZlciBzaWRlIHN0cmVhbSBjb21wb25lbnQgcmVxdWlyZWQgZm9yIEhMU1xuICAgIHJldHVybiAhaXNDb21wb25lbnRMb2FkZWQodGhpcy5oYXNzISwgXCJzdHJlYW1cIik7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIF9nZXRTdHJlYW1VcmwoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgdXJsIH0gPSBhd2FpdCBmZXRjaFN0cmVhbVVybChcbiAgICAgICAgdGhpcy5oYXNzISxcbiAgICAgICAgdGhpcy5zdGF0ZU9iaiEuZW50aXR5X2lkXG4gICAgICApO1xuXG4gICAgICB0aGlzLl91cmwgPSB1cmw7XG4gICAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcbiAgICAgIC8vIEZhaWxzIGlmIHdlIHdlcmUgdW5hYmxlIHRvIGdldCBhIHN0cmVhbVxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XG5cbiAgICAgIHRoaXMuX2ZvcmNlTUpQRUcgPSB0aGlzLnN0YXRlT2JqIS5lbnRpdHlfaWQ7XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGdldCBzdHlsZXMoKTogQ1NTUmVzdWx0R3JvdXAge1xuICAgIHJldHVybiBjc3NgXG4gICAgICA6aG9zdCxcbiAgICAgIGltZyB7XG4gICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgfVxuXG4gICAgICBpbWcge1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgIH1cbiAgICBgO1xuICB9XG59XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIEhUTUxFbGVtZW50VGFnTmFtZU1hcCB7XG4gICAgXCJoYS1jYW1lcmEtc3RyZWFtXCI6IEhhQ2FtZXJhU3RyZWFtO1xuICB9XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/components/ha-camera-stream.ts\n");

/***/ }),

/***/ "./src/components/ha-web-rtc-player.ts":
/*!*********************************************!*\
  !*** ./src/components/ha-web-rtc-player.ts ***!
  \*********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lit */ \"./node_modules/lit/index.js\");\n/* harmony import */ var lit_decorators__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit/decorators */ \"./node_modules/lit/decorators.js\");\n/* harmony import */ var _data_camera__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../data/camera */ \"./src/data/camera.ts\");\n/* harmony import */ var _ha_alert__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ha-alert */ \"./src/components/ha-alert.ts\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nvar _templateObject, _templateObject2, _templateObject3;\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _decorate(decorators, factory, superClass, mixins) { var api = _getDecoratorsApi(); if (mixins) { for (var i = 0; i < mixins.length; i++) { api = mixins[i](api); } } var r = factory(function initialize(O) { api.initializeInstanceElements(O, decorated.elements); }, superClass); var decorated = api.decorateClass(_coalesceClassElements(r.d.map(_createElementDescriptor)), decorators); api.initializeClassElements(r.F, decorated.elements); return api.runClassFinishers(r.F, decorated.finishers); }\n\nfunction _getDecoratorsApi() { _getDecoratorsApi = function _getDecoratorsApi() { return api; }; var api = { elementsDefinitionOrder: [[\"method\"], [\"field\"]], initializeInstanceElements: function initializeInstanceElements(O, elements) { [\"method\", \"field\"].forEach(function (kind) { elements.forEach(function (element) { if (element.kind === kind && element.placement === \"own\") { this.defineClassElement(O, element); } }, this); }, this); }, initializeClassElements: function initializeClassElements(F, elements) { var proto = F.prototype; [\"method\", \"field\"].forEach(function (kind) { elements.forEach(function (element) { var placement = element.placement; if (element.kind === kind && (placement === \"static\" || placement === \"prototype\")) { var receiver = placement === \"static\" ? F : proto; this.defineClassElement(receiver, element); } }, this); }, this); }, defineClassElement: function defineClassElement(receiver, element) { var descriptor = element.descriptor; if (element.kind === \"field\") { var initializer = element.initializer; descriptor = { enumerable: descriptor.enumerable, writable: descriptor.writable, configurable: descriptor.configurable, value: initializer === void 0 ? void 0 : initializer.call(receiver) }; } Object.defineProperty(receiver, element.key, descriptor); }, decorateClass: function decorateClass(elements, decorators) { var newElements = []; var finishers = []; var placements = { \"static\": [], prototype: [], own: [] }; elements.forEach(function (element) { this.addElementPlacement(element, placements); }, this); elements.forEach(function (element) { if (!_hasDecorators(element)) return newElements.push(element); var elementFinishersExtras = this.decorateElement(element, placements); newElements.push(elementFinishersExtras.element); newElements.push.apply(newElements, elementFinishersExtras.extras); finishers.push.apply(finishers, elementFinishersExtras.finishers); }, this); if (!decorators) { return { elements: newElements, finishers: finishers }; } var result = this.decorateConstructor(newElements, decorators); finishers.push.apply(finishers, result.finishers); result.finishers = finishers; return result; }, addElementPlacement: function addElementPlacement(element, placements, silent) { var keys = placements[element.placement]; if (!silent && keys.indexOf(element.key) !== -1) { throw new TypeError(\"Duplicated element (\" + element.key + \")\"); } keys.push(element.key); }, decorateElement: function decorateElement(element, placements) { var extras = []; var finishers = []; for (var decorators = element.decorators, i = decorators.length - 1; i >= 0; i--) { var keys = placements[element.placement]; keys.splice(keys.indexOf(element.key), 1); var elementObject = this.fromElementDescriptor(element); var elementFinisherExtras = this.toElementFinisherExtras((0, decorators[i])(elementObject) || elementObject); element = elementFinisherExtras.element; this.addElementPlacement(element, placements); if (elementFinisherExtras.finisher) { finishers.push(elementFinisherExtras.finisher); } var newExtras = elementFinisherExtras.extras; if (newExtras) { for (var j = 0; j < newExtras.length; j++) { this.addElementPlacement(newExtras[j], placements); } extras.push.apply(extras, newExtras); } } return { element: element, finishers: finishers, extras: extras }; }, decorateConstructor: function decorateConstructor(elements, decorators) { var finishers = []; for (var i = decorators.length - 1; i >= 0; i--) { var obj = this.fromClassDescriptor(elements); var elementsAndFinisher = this.toClassDescriptor((0, decorators[i])(obj) || obj); if (elementsAndFinisher.finisher !== undefined) { finishers.push(elementsAndFinisher.finisher); } if (elementsAndFinisher.elements !== undefined) { elements = elementsAndFinisher.elements; for (var j = 0; j < elements.length - 1; j++) { for (var k = j + 1; k < elements.length; k++) { if (elements[j].key === elements[k].key && elements[j].placement === elements[k].placement) { throw new TypeError(\"Duplicated element (\" + elements[j].key + \")\"); } } } } } return { elements: elements, finishers: finishers }; }, fromElementDescriptor: function fromElementDescriptor(element) { var obj = { kind: element.kind, key: element.key, placement: element.placement, descriptor: element.descriptor }; var desc = { value: \"Descriptor\", configurable: true }; Object.defineProperty(obj, Symbol.toStringTag, desc); if (element.kind === \"field\") obj.initializer = element.initializer; return obj; }, toElementDescriptors: function toElementDescriptors(elementObjects) { if (elementObjects === undefined) return; return _toArray(elementObjects).map(function (elementObject) { var element = this.toElementDescriptor(elementObject); this.disallowProperty(elementObject, \"finisher\", \"An element descriptor\"); this.disallowProperty(elementObject, \"extras\", \"An element descriptor\"); return element; }, this); }, toElementDescriptor: function toElementDescriptor(elementObject) { var kind = String(elementObject.kind); if (kind !== \"method\" && kind !== \"field\") { throw new TypeError('An element descriptor\\'s .kind property must be either \"method\" or' + ' \"field\", but a decorator created an element descriptor with' + ' .kind \"' + kind + '\"'); } var key = _toPropertyKey(elementObject.key); var placement = String(elementObject.placement); if (placement !== \"static\" && placement !== \"prototype\" && placement !== \"own\") { throw new TypeError('An element descriptor\\'s .placement property must be one of \"static\",' + ' \"prototype\" or \"own\", but a decorator created an element descriptor' + ' with .placement \"' + placement + '\"'); } var descriptor = elementObject.descriptor; this.disallowProperty(elementObject, \"elements\", \"An element descriptor\"); var element = { kind: kind, key: key, placement: placement, descriptor: Object.assign({}, descriptor) }; if (kind !== \"field\") { this.disallowProperty(elementObject, \"initializer\", \"A method descriptor\"); } else { this.disallowProperty(descriptor, \"get\", \"The property descriptor of a field descriptor\"); this.disallowProperty(descriptor, \"set\", \"The property descriptor of a field descriptor\"); this.disallowProperty(descriptor, \"value\", \"The property descriptor of a field descriptor\"); element.initializer = elementObject.initializer; } return element; }, toElementFinisherExtras: function toElementFinisherExtras(elementObject) { var element = this.toElementDescriptor(elementObject); var finisher = _optionalCallableProperty(elementObject, \"finisher\"); var extras = this.toElementDescriptors(elementObject.extras); return { element: element, finisher: finisher, extras: extras }; }, fromClassDescriptor: function fromClassDescriptor(elements) { var obj = { kind: \"class\", elements: elements.map(this.fromElementDescriptor, this) }; var desc = { value: \"Descriptor\", configurable: true }; Object.defineProperty(obj, Symbol.toStringTag, desc); return obj; }, toClassDescriptor: function toClassDescriptor(obj) { var kind = String(obj.kind); if (kind !== \"class\") { throw new TypeError('A class descriptor\\'s .kind property must be \"class\", but a decorator' + ' created a class descriptor with .kind \"' + kind + '\"'); } this.disallowProperty(obj, \"key\", \"A class descriptor\"); this.disallowProperty(obj, \"placement\", \"A class descriptor\"); this.disallowProperty(obj, \"descriptor\", \"A class descriptor\"); this.disallowProperty(obj, \"initializer\", \"A class descriptor\"); this.disallowProperty(obj, \"extras\", \"A class descriptor\"); var finisher = _optionalCallableProperty(obj, \"finisher\"); var elements = this.toElementDescriptors(obj.elements); return { elements: elements, finisher: finisher }; }, runClassFinishers: function runClassFinishers(constructor, finishers) { for (var i = 0; i < finishers.length; i++) { var newConstructor = (0, finishers[i])(constructor); if (newConstructor !== undefined) { if (typeof newConstructor !== \"function\") { throw new TypeError(\"Finishers must return a constructor.\"); } constructor = newConstructor; } } return constructor; }, disallowProperty: function disallowProperty(obj, name, objectType) { if (obj[name] !== undefined) { throw new TypeError(objectType + \" can't have a .\" + name + \" property.\"); } } }; return api; }\n\nfunction _createElementDescriptor(def) { var key = _toPropertyKey(def.key); var descriptor; if (def.kind === \"method\") { descriptor = { value: def.value, writable: true, configurable: true, enumerable: false }; } else if (def.kind === \"get\") { descriptor = { get: def.value, configurable: true, enumerable: false }; } else if (def.kind === \"set\") { descriptor = { set: def.value, configurable: true, enumerable: false }; } else if (def.kind === \"field\") { descriptor = { configurable: true, writable: true, enumerable: true }; } var element = { kind: def.kind === \"field\" ? \"field\" : \"method\", key: key, placement: def[\"static\"] ? \"static\" : def.kind === \"field\" ? \"own\" : \"prototype\", descriptor: descriptor }; if (def.decorators) element.decorators = def.decorators; if (def.kind === \"field\") element.initializer = def.value; return element; }\n\nfunction _coalesceGetterSetter(element, other) { if (element.descriptor.get !== undefined) { other.descriptor.get = element.descriptor.get; } else { other.descriptor.set = element.descriptor.set; } }\n\nfunction _coalesceClassElements(elements) { var newElements = []; var isSameElement = function isSameElement(other) { return other.kind === \"method\" && other.key === element.key && other.placement === element.placement; }; for (var i = 0; i < elements.length; i++) { var element = elements[i]; var other; if (element.kind === \"method\" && (other = newElements.find(isSameElement))) { if (_isDataDescriptor(element.descriptor) || _isDataDescriptor(other.descriptor)) { if (_hasDecorators(element) || _hasDecorators(other)) { throw new ReferenceError(\"Duplicated methods (\" + element.key + \") can't be decorated.\"); } other.descriptor = element.descriptor; } else { if (_hasDecorators(element)) { if (_hasDecorators(other)) { throw new ReferenceError(\"Decorators can't be placed on different accessors with for \" + \"the same property (\" + element.key + \").\"); } other.decorators = element.decorators; } _coalesceGetterSetter(element, other); } } else { newElements.push(element); } } return newElements; }\n\nfunction _hasDecorators(element) { return element.decorators && element.decorators.length; }\n\nfunction _isDataDescriptor(desc) { return desc !== undefined && !(desc.value === undefined && desc.writable === undefined); }\n\nfunction _optionalCallableProperty(obj, name) { var value = obj[name]; if (value !== undefined && typeof value !== \"function\") { throw new TypeError(\"Expected '\" + name + \"' to be a function\"); } return value; }\n\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\n\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\n\nfunction _toArray(arr) { return _arrayWithHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n\n\n\n\n/**\n * A WebRTC stream is established by first sending an offer through a signal\n * path via an integration. An answer is returned, then the rest of the stream\n * is handled entirely client side.\n */\n\nvar HaWebRtcPlayer = _decorate([(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.customElement)(\"ha-web-rtc-player\")], function (_initialize, _LitElement) {\n  var HaWebRtcPlayer = /*#__PURE__*/function (_LitElement2) {\n    _inherits(HaWebRtcPlayer, _LitElement2);\n\n    var _super = _createSuper(HaWebRtcPlayer);\n\n    function HaWebRtcPlayer() {\n      var _this;\n\n      _classCallCheck(this, HaWebRtcPlayer);\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      _this = _super.call.apply(_super, [this].concat(args));\n\n      _initialize(_assertThisInitialized(_this));\n\n      return _this;\n    }\n\n    return HaWebRtcPlayer;\n  }(_LitElement);\n\n  return {\n    F: HaWebRtcPlayer,\n    d: [{\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.property)({\n        attribute: false\n      })],\n      key: \"hass\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.property)()],\n      key: \"entityid\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.property)({\n        type: Boolean,\n        attribute: \"controls\"\n      })],\n      key: \"controls\",\n      value: function value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.property)({\n        type: Boolean,\n        attribute: \"muted\"\n      })],\n      key: \"muted\",\n      value: function value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.property)({\n        type: Boolean,\n        attribute: \"autoplay\"\n      })],\n      key: \"autoPlay\",\n      value: function value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.property)({\n        type: Boolean,\n        attribute: \"playsinline\"\n      })],\n      key: \"playsInline\",\n      value: function value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.state)()],\n      key: \"_error\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.query)(\"#remote-stream\")],\n      key: \"_videoEl\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      key: \"_peerConnection\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      key: \"_remoteStream\",\n      value: void 0\n    }, {\n      kind: \"method\",\n      key: \"render\",\n      value: // don't cache this, as we remove it on disconnects\n      function render() {\n        if (this._error) {\n          return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)(_templateObject || (_templateObject = _taggedTemplateLiteral([\"<ha-alert alert-type=\\\"error\\\">\", \"</ha-alert>\"])), this._error);\n        }\n\n        return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n      <video\\n        id=\\\"remote-stream\\\"\\n        ?autoplay=\", \"\\n        .muted=\", \"\\n        ?playsinline=\", \"\\n        ?controls=\", \"\\n      ></video>\\n    \"])), this.autoPlay, this.muted, this.playsInline, this.controls);\n      }\n    }, {\n      kind: \"method\",\n      key: \"connectedCallback\",\n      value: function connectedCallback() {\n        _get(_getPrototypeOf(HaWebRtcPlayer.prototype), \"connectedCallback\", this).call(this);\n\n        if (this.hasUpdated) {\n          this._startWebRtc();\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"disconnectedCallback\",\n      value: function disconnectedCallback() {\n        _get(_getPrototypeOf(HaWebRtcPlayer.prototype), \"disconnectedCallback\", this).call(this);\n\n        this._cleanUp();\n      }\n    }, {\n      kind: \"method\",\n      key: \"updated\",\n      value: function updated(changedProperties) {\n        if (!changedProperties.has(\"entityid\")) {\n          return;\n        }\n\n        if (!this._videoEl) {\n          return;\n        }\n\n        this._startWebRtc();\n      }\n    }, {\n      kind: \"method\",\n      key: \"_startWebRtc\",\n      value: function () {\n        var _startWebRtc2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n          var _this2 = this;\n\n          var peerConnection, offerOptions, offer, webRtcAnswer, remoteStream, remoteDesc;\n          return regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  this._error = undefined;\n                  peerConnection = new RTCPeerConnection(); // Some cameras (such as nest) require a data channel to establish a stream\n                  // however, not used by any integrations.\n\n                  peerConnection.createDataChannel(\"dataSendChannel\");\n                  peerConnection.addTransceiver(\"audio\", {\n                    direction: \"recvonly\"\n                  });\n                  peerConnection.addTransceiver(\"video\", {\n                    direction: \"recvonly\"\n                  });\n                  offerOptions = {\n                    offerToReceiveAudio: true,\n                    offerToReceiveVideo: true\n                  };\n                  _context.next = 8;\n                  return peerConnection.createOffer(offerOptions);\n\n                case 8:\n                  offer = _context.sent;\n                  _context.next = 11;\n                  return peerConnection.setLocalDescription(offer);\n\n                case 11:\n                  _context.prev = 11;\n                  _context.next = 14;\n                  return (0,_data_camera__WEBPACK_IMPORTED_MODULE_2__.handleWebRtcOffer)(this.hass, this.entityid, offer.sdp);\n\n                case 14:\n                  webRtcAnswer = _context.sent;\n                  _context.next = 22;\n                  break;\n\n                case 17:\n                  _context.prev = 17;\n                  _context.t0 = _context[\"catch\"](11);\n                  this._error = \"Failed to start WebRTC stream: \" + _context.t0.message;\n                  peerConnection.close();\n                  return _context.abrupt(\"return\");\n\n                case 22:\n                  // Setup callbacks to render remote stream once media tracks are discovered.\n                  remoteStream = new MediaStream();\n                  peerConnection.addEventListener(\"track\", function (event) {\n                    remoteStream.addTrack(event.track);\n                    _this2._videoEl.srcObject = remoteStream;\n                  });\n                  this._remoteStream = remoteStream; // Initiate the stream with the remote device\n\n                  remoteDesc = new RTCSessionDescription({\n                    type: \"answer\",\n                    sdp: webRtcAnswer.answer\n                  });\n                  _context.prev = 26;\n                  _context.next = 29;\n                  return peerConnection.setRemoteDescription(remoteDesc);\n\n                case 29:\n                  _context.next = 36;\n                  break;\n\n                case 31:\n                  _context.prev = 31;\n                  _context.t1 = _context[\"catch\"](26);\n                  this._error = \"Failed to connect WebRTC stream: \" + _context.t1.message;\n                  peerConnection.close();\n                  return _context.abrupt(\"return\");\n\n                case 36:\n                  this._peerConnection = peerConnection;\n\n                case 37:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee, this, [[11, 17], [26, 31]]);\n        }));\n\n        function _startWebRtc() {\n          return _startWebRtc2.apply(this, arguments);\n        }\n\n        return _startWebRtc;\n      }()\n    }, {\n      kind: \"method\",\n      key: \"_cleanUp\",\n      value: function _cleanUp() {\n        if (this._remoteStream) {\n          this._remoteStream.getTracks().forEach(function (track) {\n            track.stop();\n          });\n\n          this._remoteStream = undefined;\n        }\n\n        if (this._videoEl) {\n          this._videoEl.removeAttribute(\"src\");\n\n          this._videoEl.load();\n        }\n\n        if (this._peerConnection) {\n          this._peerConnection.close();\n\n          this._peerConnection = undefined;\n        }\n      }\n    }, {\n      kind: \"get\",\n      \"static\": true,\n      key: \"styles\",\n      value: function styles() {\n        return (0,lit__WEBPACK_IMPORTED_MODULE_0__.css)(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\"\\n      :host,\\n      video {\\n        display: block;\\n      }\\n\\n      video {\\n        width: 100%;\\n        max-height: var(--video-max-height, calc(100vh - 97px));\\n      }\\n    \"])));\n      }\n    }]\n  };\n}, lit__WEBPACK_IMPORTED_MODULE_0__.LitElement);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9oYS13ZWItcnRjLXBsYXllci50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFRQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTs7O0FBQ0E7QUFBQTtBQUFBOzs7OztBQUVBOzs7OztBQUVBO0FBQUE7QUFBQTtBQUFBOzs7QUFDQTs7OztBQUVBO0FBQUE7QUFBQTtBQUFBOzs7QUFDQTs7OztBQUVBO0FBQUE7QUFBQTtBQUFBOzs7QUFDQTs7OztBQUVBO0FBQUE7QUFBQTtBQUFBOzs7QUFDQTs7OztBQUVBOzs7OztBQUdBOzs7Ozs7Ozs7Ozs7OztBQURBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFTQTs7OztBQUVBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFFQTtBQUNBOztBQUNBO0FBQ0E7Ozs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTs7Ozs7QUFFQTtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBRUE7O0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFGQTtBQVZBO0FBQUE7O0FBQUE7QUFjQTtBQWRBO0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFxQkE7QUFyQkE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUEyQkE7QUFDQTtBQTVCQTs7QUFBQTtBQWdDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFHQTtBQUNBO0FBQ0E7QUFGQTtBQXpDQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQWdEQTtBQUNBO0FBakRBOztBQUFBO0FBb0RBOztBQXBEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7Ozs7Ozs7QUF1REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBOztBQUNBO0FBQ0E7O0FBQ0E7QUFDQTs7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTs7Ozs7QUFFQTtBQUNBO0FBV0E7OztBQW5KQSIsInNvdXJjZXMiOlsid2VicGFjazovL2hvbWUtYXNzaXN0YW50LWZyb250ZW5kLy4vc3JjL2NvbXBvbmVudHMvaGEtd2ViLXJ0Yy1wbGF5ZXIudHM/NTIyNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBjc3MsXG4gIENTU1Jlc3VsdEdyb3VwLFxuICBodG1sLFxuICBMaXRFbGVtZW50LFxuICBQcm9wZXJ0eVZhbHVlcyxcbiAgVGVtcGxhdGVSZXN1bHQsXG59IGZyb20gXCJsaXRcIjtcbmltcG9ydCB7IGN1c3RvbUVsZW1lbnQsIHByb3BlcnR5LCBzdGF0ZSwgcXVlcnkgfSBmcm9tIFwibGl0L2RlY29yYXRvcnNcIjtcbmltcG9ydCB7IGhhbmRsZVdlYlJ0Y09mZmVyLCBXZWJSdGNBbnN3ZXIgfSBmcm9tIFwiLi4vZGF0YS9jYW1lcmFcIjtcbmltcG9ydCB0eXBlIHsgSG9tZUFzc2lzdGFudCB9IGZyb20gXCIuLi90eXBlc1wiO1xuaW1wb3J0IFwiLi9oYS1hbGVydFwiO1xuXG4vKipcbiAqIEEgV2ViUlRDIHN0cmVhbSBpcyBlc3RhYmxpc2hlZCBieSBmaXJzdCBzZW5kaW5nIGFuIG9mZmVyIHRocm91Z2ggYSBzaWduYWxcbiAqIHBhdGggdmlhIGFuIGludGVncmF0aW9uLiBBbiBhbnN3ZXIgaXMgcmV0dXJuZWQsIHRoZW4gdGhlIHJlc3Qgb2YgdGhlIHN0cmVhbVxuICogaXMgaGFuZGxlZCBlbnRpcmVseSBjbGllbnQgc2lkZS5cbiAqL1xuQGN1c3RvbUVsZW1lbnQoXCJoYS13ZWItcnRjLXBsYXllclwiKVxuY2xhc3MgSGFXZWJSdGNQbGF5ZXIgZXh0ZW5kcyBMaXRFbGVtZW50IHtcbiAgQHByb3BlcnR5KHsgYXR0cmlidXRlOiBmYWxzZSB9KSBwdWJsaWMgaGFzcyE6IEhvbWVBc3Npc3RhbnQ7XG5cbiAgQHByb3BlcnR5KCkgcHVibGljIGVudGl0eWlkITogc3RyaW5nO1xuXG4gIEBwcm9wZXJ0eSh7IHR5cGU6IEJvb2xlYW4sIGF0dHJpYnV0ZTogXCJjb250cm9sc1wiIH0pXG4gIHB1YmxpYyBjb250cm9scyA9IGZhbHNlO1xuXG4gIEBwcm9wZXJ0eSh7IHR5cGU6IEJvb2xlYW4sIGF0dHJpYnV0ZTogXCJtdXRlZFwiIH0pXG4gIHB1YmxpYyBtdXRlZCA9IGZhbHNlO1xuXG4gIEBwcm9wZXJ0eSh7IHR5cGU6IEJvb2xlYW4sIGF0dHJpYnV0ZTogXCJhdXRvcGxheVwiIH0pXG4gIHB1YmxpYyBhdXRvUGxheSA9IGZhbHNlO1xuXG4gIEBwcm9wZXJ0eSh7IHR5cGU6IEJvb2xlYW4sIGF0dHJpYnV0ZTogXCJwbGF5c2lubGluZVwiIH0pXG4gIHB1YmxpYyBwbGF5c0lubGluZSA9IGZhbHNlO1xuXG4gIEBzdGF0ZSgpIHByaXZhdGUgX2Vycm9yPzogc3RyaW5nO1xuXG4gIC8vIGRvbid0IGNhY2hlIHRoaXMsIGFzIHdlIHJlbW92ZSBpdCBvbiBkaXNjb25uZWN0c1xuICBAcXVlcnkoXCIjcmVtb3RlLXN0cmVhbVwiKSBwcml2YXRlIF92aWRlb0VsITogSFRNTFZpZGVvRWxlbWVudDtcblxuICBwcml2YXRlIF9wZWVyQ29ubmVjdGlvbj86IFJUQ1BlZXJDb25uZWN0aW9uO1xuXG4gIHByaXZhdGUgX3JlbW90ZVN0cmVhbT86IE1lZGlhU3RyZWFtO1xuXG4gIHByb3RlY3RlZCBvdmVycmlkZSByZW5kZXIoKTogVGVtcGxhdGVSZXN1bHQge1xuICAgIGlmICh0aGlzLl9lcnJvcikge1xuICAgICAgcmV0dXJuIGh0bWxgPGhhLWFsZXJ0IGFsZXJ0LXR5cGU9XCJlcnJvclwiPiR7dGhpcy5fZXJyb3J9PC9oYS1hbGVydD5gO1xuICAgIH1cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDx2aWRlb1xuICAgICAgICBpZD1cInJlbW90ZS1zdHJlYW1cIlxuICAgICAgICA/YXV0b3BsYXk9JHt0aGlzLmF1dG9QbGF5fVxuICAgICAgICAubXV0ZWQ9JHt0aGlzLm11dGVkfVxuICAgICAgICA/cGxheXNpbmxpbmU9JHt0aGlzLnBsYXlzSW5saW5lfVxuICAgICAgICA/Y29udHJvbHM9JHt0aGlzLmNvbnRyb2xzfVxuICAgICAgPjwvdmlkZW8+XG4gICAgYDtcbiAgfVxuXG4gIHB1YmxpYyBvdmVycmlkZSBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgIGlmICh0aGlzLmhhc1VwZGF0ZWQpIHtcbiAgICAgIHRoaXMuX3N0YXJ0V2ViUnRjKCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIG92ZXJyaWRlIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIHN1cGVyLmRpc2Nvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgdGhpcy5fY2xlYW5VcCgpO1xuICB9XG5cbiAgcHJvdGVjdGVkIG92ZXJyaWRlIHVwZGF0ZWQoY2hhbmdlZFByb3BlcnRpZXM6IFByb3BlcnR5VmFsdWVzPHRoaXM+KSB7XG4gICAgaWYgKCFjaGFuZ2VkUHJvcGVydGllcy5oYXMoXCJlbnRpdHlpZFwiKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoIXRoaXMuX3ZpZGVvRWwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fc3RhcnRXZWJSdGMoKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgX3N0YXJ0V2ViUnRjKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRoaXMuX2Vycm9yID0gdW5kZWZpbmVkO1xuXG4gICAgY29uc3QgcGVlckNvbm5lY3Rpb24gPSBuZXcgUlRDUGVlckNvbm5lY3Rpb24oKTtcbiAgICAvLyBTb21lIGNhbWVyYXMgKHN1Y2ggYXMgbmVzdCkgcmVxdWlyZSBhIGRhdGEgY2hhbm5lbCB0byBlc3RhYmxpc2ggYSBzdHJlYW1cbiAgICAvLyBob3dldmVyLCBub3QgdXNlZCBieSBhbnkgaW50ZWdyYXRpb25zLlxuICAgIHBlZXJDb25uZWN0aW9uLmNyZWF0ZURhdGFDaGFubmVsKFwiZGF0YVNlbmRDaGFubmVsXCIpO1xuICAgIHBlZXJDb25uZWN0aW9uLmFkZFRyYW5zY2VpdmVyKFwiYXVkaW9cIiwgeyBkaXJlY3Rpb246IFwicmVjdm9ubHlcIiB9KTtcbiAgICBwZWVyQ29ubmVjdGlvbi5hZGRUcmFuc2NlaXZlcihcInZpZGVvXCIsIHsgZGlyZWN0aW9uOiBcInJlY3Zvbmx5XCIgfSk7XG5cbiAgICBjb25zdCBvZmZlck9wdGlvbnM6IFJUQ09mZmVyT3B0aW9ucyA9IHtcbiAgICAgIG9mZmVyVG9SZWNlaXZlQXVkaW86IHRydWUsXG4gICAgICBvZmZlclRvUmVjZWl2ZVZpZGVvOiB0cnVlLFxuICAgIH07XG4gICAgY29uc3Qgb2ZmZXI6IFJUQ1Nlc3Npb25EZXNjcmlwdGlvbkluaXQgPSBhd2FpdCBwZWVyQ29ubmVjdGlvbi5jcmVhdGVPZmZlcihcbiAgICAgIG9mZmVyT3B0aW9uc1xuICAgICk7XG4gICAgYXdhaXQgcGVlckNvbm5lY3Rpb24uc2V0TG9jYWxEZXNjcmlwdGlvbihvZmZlcik7XG5cbiAgICBsZXQgd2ViUnRjQW5zd2VyOiBXZWJSdGNBbnN3ZXI7XG4gICAgdHJ5IHtcbiAgICAgIHdlYlJ0Y0Fuc3dlciA9IGF3YWl0IGhhbmRsZVdlYlJ0Y09mZmVyKFxuICAgICAgICB0aGlzLmhhc3MsXG4gICAgICAgIHRoaXMuZW50aXR5aWQsXG4gICAgICAgIG9mZmVyLnNkcCFcbiAgICAgICk7XG4gICAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcbiAgICAgIHRoaXMuX2Vycm9yID0gXCJGYWlsZWQgdG8gc3RhcnQgV2ViUlRDIHN0cmVhbTogXCIgKyBlcnIubWVzc2FnZTtcbiAgICAgIHBlZXJDb25uZWN0aW9uLmNsb3NlKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gU2V0dXAgY2FsbGJhY2tzIHRvIHJlbmRlciByZW1vdGUgc3RyZWFtIG9uY2UgbWVkaWEgdHJhY2tzIGFyZSBkaXNjb3ZlcmVkLlxuICAgIGNvbnN0IHJlbW90ZVN0cmVhbSA9IG5ldyBNZWRpYVN0cmVhbSgpO1xuICAgIHBlZXJDb25uZWN0aW9uLmFkZEV2ZW50TGlzdGVuZXIoXCJ0cmFja1wiLCAoZXZlbnQpID0+IHtcbiAgICAgIHJlbW90ZVN0cmVhbS5hZGRUcmFjayhldmVudC50cmFjayk7XG4gICAgICB0aGlzLl92aWRlb0VsLnNyY09iamVjdCA9IHJlbW90ZVN0cmVhbTtcbiAgICB9KTtcbiAgICB0aGlzLl9yZW1vdGVTdHJlYW0gPSByZW1vdGVTdHJlYW07XG5cbiAgICAvLyBJbml0aWF0ZSB0aGUgc3RyZWFtIHdpdGggdGhlIHJlbW90ZSBkZXZpY2VcbiAgICBjb25zdCByZW1vdGVEZXNjID0gbmV3IFJUQ1Nlc3Npb25EZXNjcmlwdGlvbih7XG4gICAgICB0eXBlOiBcImFuc3dlclwiLFxuICAgICAgc2RwOiB3ZWJSdGNBbnN3ZXIuYW5zd2VyLFxuICAgIH0pO1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBwZWVyQ29ubmVjdGlvbi5zZXRSZW1vdGVEZXNjcmlwdGlvbihyZW1vdGVEZXNjKTtcbiAgICB9IGNhdGNoIChlcnI6IGFueSkge1xuICAgICAgdGhpcy5fZXJyb3IgPSBcIkZhaWxlZCB0byBjb25uZWN0IFdlYlJUQyBzdHJlYW06IFwiICsgZXJyLm1lc3NhZ2U7XG4gICAgICBwZWVyQ29ubmVjdGlvbi5jbG9zZSgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9wZWVyQ29ubmVjdGlvbiA9IHBlZXJDb25uZWN0aW9uO1xuICB9XG5cbiAgcHJpdmF0ZSBfY2xlYW5VcCgpIHtcbiAgICBpZiAodGhpcy5fcmVtb3RlU3RyZWFtKSB7XG4gICAgICB0aGlzLl9yZW1vdGVTdHJlYW0uZ2V0VHJhY2tzKCkuZm9yRWFjaCgodHJhY2spID0+IHtcbiAgICAgICAgdHJhY2suc3RvcCgpO1xuICAgICAgfSk7XG4gICAgICB0aGlzLl9yZW1vdGVTdHJlYW0gPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmICh0aGlzLl92aWRlb0VsKSB7XG4gICAgICB0aGlzLl92aWRlb0VsLnJlbW92ZUF0dHJpYnV0ZShcInNyY1wiKTtcbiAgICAgIHRoaXMuX3ZpZGVvRWwubG9hZCgpO1xuICAgIH1cbiAgICBpZiAodGhpcy5fcGVlckNvbm5lY3Rpb24pIHtcbiAgICAgIHRoaXMuX3BlZXJDb25uZWN0aW9uLmNsb3NlKCk7XG4gICAgICB0aGlzLl9wZWVyQ29ubmVjdGlvbiA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZ2V0IHN0eWxlcygpOiBDU1NSZXN1bHRHcm91cCB7XG4gICAgcmV0dXJuIGNzc2BcbiAgICAgIDpob3N0LFxuICAgICAgdmlkZW8ge1xuICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgIH1cblxuICAgICAgdmlkZW8ge1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgbWF4LWhlaWdodDogdmFyKC0tdmlkZW8tbWF4LWhlaWdodCwgY2FsYygxMDB2aCAtIDk3cHgpKTtcbiAgICAgIH1cbiAgICBgO1xuICB9XG59XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIEhUTUxFbGVtZW50VGFnTmFtZU1hcCB7XG4gICAgXCJoYS13ZWItcnRjLXBsYXllclwiOiBIYVdlYlJ0Y1BsYXllcjtcbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/components/ha-web-rtc-player.ts\n");

/***/ }),

/***/ "./src/panels/lovelace/components/hui-image.ts":
/*!*****************************************************!*\
  !*** ./src/panels/lovelace/components/hui-image.ts ***!
  \*****************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"HuiImage\": function() { return /* binding */ HuiImage; }\n/* harmony export */ });\n/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lit */ \"./node_modules/lit/index.js\");\n/* harmony import */ var lit_decorators__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit/decorators */ \"./node_modules/lit/decorators.js\");\n/* harmony import */ var lit_directives_class_map__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lit/directives/class-map */ \"./node_modules/lit/directives/class-map.js\");\n/* harmony import */ var lit_directives_style_map__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lit/directives/style-map */ \"./node_modules/lit/directives/style-map.js\");\n/* harmony import */ var _common_const__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../common/const */ \"./src/common/const.ts\");\n/* harmony import */ var _common_util_parse_aspect_ratio__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../common/util/parse-aspect-ratio */ \"./src/common/util/parse-aspect-ratio.ts\");\n/* harmony import */ var _components_ha_camera_stream__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../components/ha-camera-stream */ \"./src/components/ha-camera-stream.ts\");\n/* harmony import */ var _data_camera__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../data/camera */ \"./src/data/camera.ts\");\n/* harmony import */ var _data_entity__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../data/entity */ \"./src/data/entity.ts\");\n/* harmony import */ var _components_ha_circular_progress__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../components/ha-circular-progress */ \"./src/components/ha-circular-progress.ts\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nvar _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5, _templateObject6, _templateObject7, _templateObject8;\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _decorate(decorators, factory, superClass, mixins) { var api = _getDecoratorsApi(); if (mixins) { for (var i = 0; i < mixins.length; i++) { api = mixins[i](api); } } var r = factory(function initialize(O) { api.initializeInstanceElements(O, decorated.elements); }, superClass); var decorated = api.decorateClass(_coalesceClassElements(r.d.map(_createElementDescriptor)), decorators); api.initializeClassElements(r.F, decorated.elements); return api.runClassFinishers(r.F, decorated.finishers); }\n\nfunction _getDecoratorsApi() { _getDecoratorsApi = function _getDecoratorsApi() { return api; }; var api = { elementsDefinitionOrder: [[\"method\"], [\"field\"]], initializeInstanceElements: function initializeInstanceElements(O, elements) { [\"method\", \"field\"].forEach(function (kind) { elements.forEach(function (element) { if (element.kind === kind && element.placement === \"own\") { this.defineClassElement(O, element); } }, this); }, this); }, initializeClassElements: function initializeClassElements(F, elements) { var proto = F.prototype; [\"method\", \"field\"].forEach(function (kind) { elements.forEach(function (element) { var placement = element.placement; if (element.kind === kind && (placement === \"static\" || placement === \"prototype\")) { var receiver = placement === \"static\" ? F : proto; this.defineClassElement(receiver, element); } }, this); }, this); }, defineClassElement: function defineClassElement(receiver, element) { var descriptor = element.descriptor; if (element.kind === \"field\") { var initializer = element.initializer; descriptor = { enumerable: descriptor.enumerable, writable: descriptor.writable, configurable: descriptor.configurable, value: initializer === void 0 ? void 0 : initializer.call(receiver) }; } Object.defineProperty(receiver, element.key, descriptor); }, decorateClass: function decorateClass(elements, decorators) { var newElements = []; var finishers = []; var placements = { \"static\": [], prototype: [], own: [] }; elements.forEach(function (element) { this.addElementPlacement(element, placements); }, this); elements.forEach(function (element) { if (!_hasDecorators(element)) return newElements.push(element); var elementFinishersExtras = this.decorateElement(element, placements); newElements.push(elementFinishersExtras.element); newElements.push.apply(newElements, elementFinishersExtras.extras); finishers.push.apply(finishers, elementFinishersExtras.finishers); }, this); if (!decorators) { return { elements: newElements, finishers: finishers }; } var result = this.decorateConstructor(newElements, decorators); finishers.push.apply(finishers, result.finishers); result.finishers = finishers; return result; }, addElementPlacement: function addElementPlacement(element, placements, silent) { var keys = placements[element.placement]; if (!silent && keys.indexOf(element.key) !== -1) { throw new TypeError(\"Duplicated element (\" + element.key + \")\"); } keys.push(element.key); }, decorateElement: function decorateElement(element, placements) { var extras = []; var finishers = []; for (var decorators = element.decorators, i = decorators.length - 1; i >= 0; i--) { var keys = placements[element.placement]; keys.splice(keys.indexOf(element.key), 1); var elementObject = this.fromElementDescriptor(element); var elementFinisherExtras = this.toElementFinisherExtras((0, decorators[i])(elementObject) || elementObject); element = elementFinisherExtras.element; this.addElementPlacement(element, placements); if (elementFinisherExtras.finisher) { finishers.push(elementFinisherExtras.finisher); } var newExtras = elementFinisherExtras.extras; if (newExtras) { for (var j = 0; j < newExtras.length; j++) { this.addElementPlacement(newExtras[j], placements); } extras.push.apply(extras, newExtras); } } return { element: element, finishers: finishers, extras: extras }; }, decorateConstructor: function decorateConstructor(elements, decorators) { var finishers = []; for (var i = decorators.length - 1; i >= 0; i--) { var obj = this.fromClassDescriptor(elements); var elementsAndFinisher = this.toClassDescriptor((0, decorators[i])(obj) || obj); if (elementsAndFinisher.finisher !== undefined) { finishers.push(elementsAndFinisher.finisher); } if (elementsAndFinisher.elements !== undefined) { elements = elementsAndFinisher.elements; for (var j = 0; j < elements.length - 1; j++) { for (var k = j + 1; k < elements.length; k++) { if (elements[j].key === elements[k].key && elements[j].placement === elements[k].placement) { throw new TypeError(\"Duplicated element (\" + elements[j].key + \")\"); } } } } } return { elements: elements, finishers: finishers }; }, fromElementDescriptor: function fromElementDescriptor(element) { var obj = { kind: element.kind, key: element.key, placement: element.placement, descriptor: element.descriptor }; var desc = { value: \"Descriptor\", configurable: true }; Object.defineProperty(obj, Symbol.toStringTag, desc); if (element.kind === \"field\") obj.initializer = element.initializer; return obj; }, toElementDescriptors: function toElementDescriptors(elementObjects) { if (elementObjects === undefined) return; return _toArray(elementObjects).map(function (elementObject) { var element = this.toElementDescriptor(elementObject); this.disallowProperty(elementObject, \"finisher\", \"An element descriptor\"); this.disallowProperty(elementObject, \"extras\", \"An element descriptor\"); return element; }, this); }, toElementDescriptor: function toElementDescriptor(elementObject) { var kind = String(elementObject.kind); if (kind !== \"method\" && kind !== \"field\") { throw new TypeError('An element descriptor\\'s .kind property must be either \"method\" or' + ' \"field\", but a decorator created an element descriptor with' + ' .kind \"' + kind + '\"'); } var key = _toPropertyKey(elementObject.key); var placement = String(elementObject.placement); if (placement !== \"static\" && placement !== \"prototype\" && placement !== \"own\") { throw new TypeError('An element descriptor\\'s .placement property must be one of \"static\",' + ' \"prototype\" or \"own\", but a decorator created an element descriptor' + ' with .placement \"' + placement + '\"'); } var descriptor = elementObject.descriptor; this.disallowProperty(elementObject, \"elements\", \"An element descriptor\"); var element = { kind: kind, key: key, placement: placement, descriptor: Object.assign({}, descriptor) }; if (kind !== \"field\") { this.disallowProperty(elementObject, \"initializer\", \"A method descriptor\"); } else { this.disallowProperty(descriptor, \"get\", \"The property descriptor of a field descriptor\"); this.disallowProperty(descriptor, \"set\", \"The property descriptor of a field descriptor\"); this.disallowProperty(descriptor, \"value\", \"The property descriptor of a field descriptor\"); element.initializer = elementObject.initializer; } return element; }, toElementFinisherExtras: function toElementFinisherExtras(elementObject) { var element = this.toElementDescriptor(elementObject); var finisher = _optionalCallableProperty(elementObject, \"finisher\"); var extras = this.toElementDescriptors(elementObject.extras); return { element: element, finisher: finisher, extras: extras }; }, fromClassDescriptor: function fromClassDescriptor(elements) { var obj = { kind: \"class\", elements: elements.map(this.fromElementDescriptor, this) }; var desc = { value: \"Descriptor\", configurable: true }; Object.defineProperty(obj, Symbol.toStringTag, desc); return obj; }, toClassDescriptor: function toClassDescriptor(obj) { var kind = String(obj.kind); if (kind !== \"class\") { throw new TypeError('A class descriptor\\'s .kind property must be \"class\", but a decorator' + ' created a class descriptor with .kind \"' + kind + '\"'); } this.disallowProperty(obj, \"key\", \"A class descriptor\"); this.disallowProperty(obj, \"placement\", \"A class descriptor\"); this.disallowProperty(obj, \"descriptor\", \"A class descriptor\"); this.disallowProperty(obj, \"initializer\", \"A class descriptor\"); this.disallowProperty(obj, \"extras\", \"A class descriptor\"); var finisher = _optionalCallableProperty(obj, \"finisher\"); var elements = this.toElementDescriptors(obj.elements); return { elements: elements, finisher: finisher }; }, runClassFinishers: function runClassFinishers(constructor, finishers) { for (var i = 0; i < finishers.length; i++) { var newConstructor = (0, finishers[i])(constructor); if (newConstructor !== undefined) { if (typeof newConstructor !== \"function\") { throw new TypeError(\"Finishers must return a constructor.\"); } constructor = newConstructor; } } return constructor; }, disallowProperty: function disallowProperty(obj, name, objectType) { if (obj[name] !== undefined) { throw new TypeError(objectType + \" can't have a .\" + name + \" property.\"); } } }; return api; }\n\nfunction _createElementDescriptor(def) { var key = _toPropertyKey(def.key); var descriptor; if (def.kind === \"method\") { descriptor = { value: def.value, writable: true, configurable: true, enumerable: false }; } else if (def.kind === \"get\") { descriptor = { get: def.value, configurable: true, enumerable: false }; } else if (def.kind === \"set\") { descriptor = { set: def.value, configurable: true, enumerable: false }; } else if (def.kind === \"field\") { descriptor = { configurable: true, writable: true, enumerable: true }; } var element = { kind: def.kind === \"field\" ? \"field\" : \"method\", key: key, placement: def[\"static\"] ? \"static\" : def.kind === \"field\" ? \"own\" : \"prototype\", descriptor: descriptor }; if (def.decorators) element.decorators = def.decorators; if (def.kind === \"field\") element.initializer = def.value; return element; }\n\nfunction _coalesceGetterSetter(element, other) { if (element.descriptor.get !== undefined) { other.descriptor.get = element.descriptor.get; } else { other.descriptor.set = element.descriptor.set; } }\n\nfunction _coalesceClassElements(elements) { var newElements = []; var isSameElement = function isSameElement(other) { return other.kind === \"method\" && other.key === element.key && other.placement === element.placement; }; for (var i = 0; i < elements.length; i++) { var element = elements[i]; var other; if (element.kind === \"method\" && (other = newElements.find(isSameElement))) { if (_isDataDescriptor(element.descriptor) || _isDataDescriptor(other.descriptor)) { if (_hasDecorators(element) || _hasDecorators(other)) { throw new ReferenceError(\"Duplicated methods (\" + element.key + \") can't be decorated.\"); } other.descriptor = element.descriptor; } else { if (_hasDecorators(element)) { if (_hasDecorators(other)) { throw new ReferenceError(\"Decorators can't be placed on different accessors with for \" + \"the same property (\" + element.key + \").\"); } other.decorators = element.decorators; } _coalesceGetterSetter(element, other); } } else { newElements.push(element); } } return newElements; }\n\nfunction _hasDecorators(element) { return element.decorators && element.decorators.length; }\n\nfunction _isDataDescriptor(desc) { return desc !== undefined && !(desc.value === undefined && desc.writable === undefined); }\n\nfunction _optionalCallableProperty(obj, name) { var value = obj[name]; if (value !== undefined && typeof value !== \"function\") { throw new TypeError(\"Expected '\" + name + \"' to be a function\"); } return value; }\n\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\n\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\n\nfunction _toArray(arr) { return _arrayWithHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n\n\n\n\n\n\n\n\n\n\nvar UPDATE_INTERVAL = 10000;\nvar DEFAULT_FILTER = \"grayscale(100%)\";\nvar MAX_IMAGE_WIDTH = 640;\nvar ASPECT_RATIO_DEFAULT = 9 / 16;\nvar LoadState;\n\n(function (LoadState) {\n  LoadState[LoadState[\"Loading\"] = 1] = \"Loading\";\n  LoadState[LoadState[\"Loaded\"] = 2] = \"Loaded\";\n  LoadState[LoadState[\"Error\"] = 3] = \"Error\";\n})(LoadState || (LoadState = {}));\n\nvar HuiImage = _decorate([(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.customElement)(\"hui-image\")], function (_initialize, _LitElement) {\n  var HuiImage = /*#__PURE__*/function (_LitElement2) {\n    _inherits(HuiImage, _LitElement2);\n\n    var _super = _createSuper(HuiImage);\n\n    function HuiImage() {\n      var _this;\n\n      _classCallCheck(this, HuiImage);\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      _this = _super.call.apply(_super, [this].concat(args));\n\n      _initialize(_assertThisInitialized(_this));\n\n      return _this;\n    }\n\n    return HuiImage;\n  }(_LitElement);\n\n  return {\n    F: HuiImage,\n    d: [{\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.property)({\n        attribute: false\n      })],\n      key: \"hass\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.property)()],\n      key: \"entity\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.property)()],\n      key: \"image\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.property)({\n        attribute: false\n      })],\n      key: \"stateImage\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.property)()],\n      key: \"cameraImage\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.property)()],\n      key: \"cameraView\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.property)()],\n      key: \"aspectRatio\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.property)()],\n      key: \"filter\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.property)({\n        attribute: false\n      })],\n      key: \"stateFilter\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.property)()],\n      key: \"darkModeImage\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.property)()],\n      key: \"darkModeFilter\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.state)()],\n      key: \"_imageVisible\",\n      value: function value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.state)()],\n      key: \"_loadState\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.state)()],\n      key: \"_cameraImageSrc\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_1__.state)()],\n      key: \"_loadedImageSrc\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      key: \"_intersectionObserver\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      key: \"_lastImageHeight\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      key: \"_cameraUpdater\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      key: \"_ratio\",\n      value: function value() {\n        return null;\n      }\n    }, {\n      kind: \"method\",\n      key: \"connectedCallback\",\n      value: function connectedCallback() {\n        _get(_getPrototypeOf(HuiImage.prototype), \"connectedCallback\", this).call(this);\n\n        if (this._loadState === undefined) {\n          this._loadState = LoadState.Loading;\n        }\n\n        if (this.cameraImage && this.cameraView !== \"live\") {\n          this._startIntersectionObserverOrUpdates();\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"disconnectedCallback\",\n      value: function disconnectedCallback() {\n        _get(_getPrototypeOf(HuiImage.prototype), \"disconnectedCallback\", this).call(this);\n\n        this._stopUpdateCameraInterval();\n\n        this._stopIntersectionObserver();\n\n        this._imageVisible = undefined;\n      }\n    }, {\n      kind: \"method\",\n      key: \"handleIntersectionCallback\",\n      value: function handleIntersectionCallback(entries) {\n        this._imageVisible = entries[0].isIntersecting;\n      }\n    }, {\n      kind: \"method\",\n      key: \"willUpdate\",\n      value: function willUpdate(changedProps) {\n        if (changedProps.has(\"hass\")) {\n          var oldHass = changedProps.get(\"hass\");\n\n          if (this._shouldStartCameraUpdates(oldHass)) {\n            this._startIntersectionObserverOrUpdates();\n          } else if (!this.hass.connected) {\n            this._stopUpdateCameraInterval();\n\n            this._stopIntersectionObserver();\n\n            this._loadState = LoadState.Loading;\n            this._cameraImageSrc = undefined;\n            this._loadedImageSrc = undefined;\n          }\n        }\n\n        if (changedProps.has(\"_imageVisible\")) {\n          if (this._imageVisible) {\n            if (this._shouldStartCameraUpdates()) {\n              this._startUpdateCameraInterval();\n            }\n          } else {\n            this._stopUpdateCameraInterval();\n          }\n        }\n\n        if (changedProps.has(\"aspectRatio\")) {\n          this._ratio = this.aspectRatio ? (0,_common_util_parse_aspect_ratio__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(this.aspectRatio) : null;\n        }\n\n        if (this._loadState === LoadState.Loading && !this.cameraImage) {\n          this._loadState = LoadState.Loaded;\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"render\",\n      value: function render() {\n        if (!this.hass) {\n          return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\"])));\n        }\n\n        var useRatio = Boolean(this._ratio && this._ratio.w > 0 && this._ratio.h > 0);\n        var stateObj = this.entity ? this.hass.states[this.entity] : undefined;\n        var entityState = stateObj ? stateObj.state : _data_entity__WEBPACK_IMPORTED_MODULE_8__.UNAVAILABLE; // Figure out image source to use\n\n        var imageSrc;\n        var cameraObj; // Track if we are we using a fallback image, used for filter.\n\n        var imageFallback = !this.stateImage;\n\n        if (this.cameraImage) {\n          if (this.cameraView === \"live\") {\n            cameraObj = this.hass.states[this.cameraImage];\n          } else {\n            imageSrc = this._cameraImageSrc;\n          }\n        } else if (this.stateImage) {\n          var stateImage = this.stateImage[entityState];\n\n          if (stateImage) {\n            imageSrc = stateImage;\n          } else {\n            imageSrc = this.image;\n            imageFallback = true;\n          }\n        } else if (this.darkModeImage && this.hass.themes.darkMode) {\n          imageSrc = this.darkModeImage;\n        } else {\n          imageSrc = this.image;\n        }\n\n        if (imageSrc) {\n          imageSrc = this.hass.hassUrl(imageSrc);\n        } // Figure out filter to use\n\n\n        var filter = this.filter || \"\";\n\n        if (this.hass.themes.darkMode && this.darkModeFilter) {\n          filter += this.darkModeFilter;\n        }\n\n        if (this.stateFilter && this.stateFilter[entityState]) {\n          filter += this.stateFilter[entityState];\n        }\n\n        if (!filter && this.entity) {\n          var isOff = !stateObj || _common_const__WEBPACK_IMPORTED_MODULE_4__.STATES_OFF.includes(entityState);\n          filter = isOff && imageFallback ? DEFAULT_FILTER : \"\";\n        }\n\n        return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n      <div\\n        style=\", \"\\n        class=\\\"container \", \"\\\"\\n      >\\n        \", \"\\n        \", \"\\n      </div>\\n    \"])), (0,lit_directives_style_map__WEBPACK_IMPORTED_MODULE_3__.styleMap)({\n          paddingBottom: useRatio ? \"\".concat((100 * this._ratio.h / this._ratio.w).toFixed(2), \"%\") : undefined,\n          backgroundImage: useRatio && this._loadedImageSrc ? \"url(\\\"\".concat(this._loadedImageSrc, \"\\\")\") : undefined,\n          filter: this._loadState === LoadState.Loaded || this.cameraView === \"live\" ? filter : undefined\n        }), (0,lit_directives_class_map__WEBPACK_IMPORTED_MODULE_2__.classMap)({\n          ratio: useRatio\n        }), this.cameraImage && this.cameraView === \"live\" ? (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\"\\n              <ha-camera-stream\\n                muted\\n                .hass=\", \"\\n                .stateObj=\", \"\\n              ></ha-camera-stream>\\n            \"])), this.hass, cameraObj) : imageSrc === undefined ? (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([\"\"]))) : (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([\"\\n              <img\\n                id=\\\"image\\\"\\n                src=\", \"\\n                @error=\", \"\\n                @load=\", \"\\n                style=\", \"\\n              />\\n            \"])), imageSrc, this._onImageError, this._onImageLoad, (0,lit_directives_style_map__WEBPACK_IMPORTED_MODULE_3__.styleMap)({\n          display: useRatio || this._loadState === LoadState.Loaded ? \"block\" : \"none\"\n        })), this._loadState === LoadState.Error ? (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)(_templateObject6 || (_templateObject6 = _taggedTemplateLiteral([\"<div\\n              id=\\\"brokenImage\\\"\\n              style=\", \"\\n            ></div>\"])), (0,lit_directives_style_map__WEBPACK_IMPORTED_MODULE_3__.styleMap)({\n          height: !useRatio ? \"\".concat(this._lastImageHeight || \"100\", \"px\") : undefined\n        })) : this.cameraView !== \"live\" && (imageSrc === undefined || this._loadState === LoadState.Loading) ? (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)(_templateObject7 || (_templateObject7 = _taggedTemplateLiteral([\"<div\\n              class=\\\"progress-container\\\"\\n              style=\", \"\\n            >\\n              <ha-circular-progress\\n                class=\\\"render-spinner\\\"\\n                active\\n                size=\\\"small\\\"\\n              ></ha-circular-progress>\\n            </div>\"])), (0,lit_directives_style_map__WEBPACK_IMPORTED_MODULE_3__.styleMap)({\n          height: !useRatio ? \"\".concat(this._lastImageHeight || \"100\", \"px\") : undefined\n        })) : \"\");\n      }\n    }, {\n      kind: \"method\",\n      key: \"_shouldStartCameraUpdates\",\n      value: function _shouldStartCameraUpdates(oldHass) {\n        return !!((!oldHass || oldHass.connected !== this.hass.connected) && this.hass.connected && this.cameraView !== \"live\");\n      }\n    }, {\n      kind: \"method\",\n      key: \"_startIntersectionObserverOrUpdates\",\n      value: function _startIntersectionObserverOrUpdates() {\n        if (\"IntersectionObserver\" in window) {\n          if (!this._intersectionObserver) {\n            this._intersectionObserver = new IntersectionObserver(this.handleIntersectionCallback.bind(this));\n          }\n\n          this._intersectionObserver.observe(this);\n        } else {\n          // No support for IntersectionObserver\n          // assume all images are visible\n          this._imageVisible = true;\n\n          this._startUpdateCameraInterval();\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"_stopIntersectionObserver\",\n      value: function _stopIntersectionObserver() {\n        if (this._intersectionObserver) {\n          this._intersectionObserver.disconnect();\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"_startUpdateCameraInterval\",\n      value: function _startUpdateCameraInterval() {\n        var _this2 = this;\n\n        this._stopUpdateCameraInterval();\n\n        this._updateCameraImageSrc();\n\n        if (this.cameraImage && this.isConnected) {\n          this._cameraUpdater = window.setInterval(function () {\n            return _this2._updateCameraImageSrcAtInterval();\n          }, UPDATE_INTERVAL);\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"_stopUpdateCameraInterval\",\n      value: function _stopUpdateCameraInterval() {\n        if (this._cameraUpdater) {\n          clearInterval(this._cameraUpdater);\n          this._cameraUpdater = undefined;\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"_onImageError\",\n      value: function _onImageError() {\n        this._loadState = LoadState.Error;\n      }\n    }, {\n      kind: \"method\",\n      key: \"_onImageLoad\",\n      value: function () {\n        var _onImageLoad2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(ev) {\n          var imgEl;\n          return regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  this._loadState = LoadState.Loaded;\n                  imgEl = ev.target;\n\n                  if (this._ratio && this._ratio.w > 0 && this._ratio.h > 0) {\n                    this._loadedImageSrc = imgEl.src;\n                  }\n\n                  _context.next = 5;\n                  return this.updateComplete;\n\n                case 5:\n                  this._lastImageHeight = imgEl.offsetHeight;\n\n                case 6:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee, this);\n        }));\n\n        function _onImageLoad(_x) {\n          return _onImageLoad2.apply(this, arguments);\n        }\n\n        return _onImageLoad;\n      }()\n    }, {\n      kind: \"method\",\n      key: \"_updateCameraImageSrcAtInterval\",\n      value: function () {\n        var _updateCameraImageSrcAtInterval2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n          return regeneratorRuntime.wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  // If we hit the interval and it was still loading\n                  // it means we timed out so we should show the error.\n                  if (this._loadState === LoadState.Loading) {\n                    this._onImageError();\n                  }\n\n                  return _context2.abrupt(\"return\", this._updateCameraImageSrc());\n\n                case 2:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }, _callee2, this);\n        }));\n\n        function _updateCameraImageSrcAtInterval() {\n          return _updateCameraImageSrcAtInterval2.apply(this, arguments);\n        }\n\n        return _updateCameraImageSrcAtInterval;\n      }()\n    }, {\n      kind: \"method\",\n      key: \"_updateCameraImageSrc\",\n      value: function () {\n        var _updateCameraImageSrc2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3() {\n          var cameraState, element_width, width, height;\n          return regeneratorRuntime.wrap(function _callee3$(_context3) {\n            while (1) {\n              switch (_context3.prev = _context3.next) {\n                case 0:\n                  if (!(!this.hass || !this.cameraImage)) {\n                    _context3.next = 2;\n                    break;\n                  }\n\n                  return _context3.abrupt(\"return\");\n\n                case 2:\n                  cameraState = this.hass.states[this.cameraImage];\n\n                  if (cameraState) {\n                    _context3.next = 6;\n                    break;\n                  }\n\n                  this._onImageError();\n\n                  return _context3.abrupt(\"return\");\n\n                case 6:\n                  element_width = this.clientWidth || MAX_IMAGE_WIDTH;\n                  width = Math.ceil(element_width * devicePixelRatio);\n\n                  // If the image has not rendered yet we have no height\n                  if (!this._lastImageHeight) {\n                    if (this._ratio && this._ratio.w > 0 && this._ratio.h > 0) {\n                      height = Math.ceil(width * (this._ratio.h / this._ratio.w));\n                    } else {\n                      // If we don't have a ratio and we don't have a height\n                      // we ask for 200% of what we need because the aspect\n                      // ratio might result in a smaller image\n                      width *= 2;\n                      height = Math.ceil(width * ASPECT_RATIO_DEFAULT);\n                    }\n                  } else {\n                    height = Math.ceil(this._lastImageHeight * devicePixelRatio);\n                  }\n\n                  _context3.next = 11;\n                  return (0,_data_camera__WEBPACK_IMPORTED_MODULE_7__.fetchThumbnailUrlWithCache)(this.hass, this.cameraImage, width, height);\n\n                case 11:\n                  this._cameraImageSrc = _context3.sent;\n\n                  if (this._cameraImageSrc === undefined) {\n                    this._onImageError();\n                  }\n\n                case 13:\n                case \"end\":\n                  return _context3.stop();\n              }\n            }\n          }, _callee3, this);\n        }));\n\n        function _updateCameraImageSrc() {\n          return _updateCameraImageSrc2.apply(this, arguments);\n        }\n\n        return _updateCameraImageSrc;\n      }()\n    }, {\n      kind: \"get\",\n      \"static\": true,\n      key: \"styles\",\n      value: function styles() {\n        return (0,lit__WEBPACK_IMPORTED_MODULE_0__.css)(_templateObject8 || (_templateObject8 = _taggedTemplateLiteral([\"\\n      :host {\\n        display: block;\\n      }\\n\\n      .container {\\n        transition: filter 0.2s linear;\\n      }\\n\\n      img {\\n        display: block;\\n        height: auto;\\n        width: 100%;\\n      }\\n\\n      .progress-container {\\n        display: flex;\\n        justify-content: center;\\n        align-items: center;\\n      }\\n\\n      .ratio {\\n        position: relative;\\n        width: 100%;\\n        height: 0;\\n        background-position: center;\\n        background-size: cover;\\n      }\\n\\n      .ratio img,\\n      .ratio div {\\n        position: absolute;\\n        top: 0;\\n        left: 0;\\n        width: 100%;\\n        height: 100%;\\n      }\\n\\n      .ratio img {\\n        visibility: hidden;\\n      }\\n\\n      #brokenImage {\\n        background: grey url(\\\"/static/images/image-broken.svg\\\") center/36px\\n          no-repeat;\\n      }\\n    \"])));\n      }\n    }]\n  };\n}, lit__WEBPACK_IMPORTED_MODULE_0__.LitElement);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2NvbXBvbmVudHMvaHVpLWltYWdlLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFXQTtBQUFBO0FBQUE7O0FBQUE7O0FBQUE7QUFBQTs7QUFBQTs7QUFBQTtBQUFBO0FBQUE7O0FBQUE7O0FBQUE7O0FBQUE7QUFBQTs7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBT0E7QUFBQTtBQVBBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBaUJBO0FBQUE7QUFqQkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQTJDQTs7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFsREE7QUFBQTtBQUFBO0FBQUE7QUFxREE7O0FBQ0E7O0FBQ0E7O0FBQ0E7QUFDQTtBQXpEQTtBQUFBO0FBQUE7QUFBQTtBQTREQTtBQUNBO0FBN0RBO0FBQUE7QUFBQTtBQUFBO0FBZ0VBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUdBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBOUZBO0FBQUE7QUFBQTtBQUFBO0FBaUdBO0FBQ0E7QUFDQTs7QUFDQTtBQUdBO0FBQ0E7O0FBR0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOzs7QUFHQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBR0E7QUFHQTtBQUlBO0FBUkE7QUFjQTtBQURBO0FBcUJBO0FBREE7QUFZQTtBQURBO0FBV0E7QUFEQTtBQWVBO0FBaE9BO0FBQUE7QUFBQTtBQUFBO0FBbU9BO0FBS0E7QUF4T0E7QUFBQTtBQUFBO0FBQUE7QUEyT0E7QUFDQTtBQUNBO0FBR0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUF4UEE7QUFBQTtBQUFBO0FBQUE7QUEyUEE7QUFDQTtBQUNBO0FBQ0E7QUE5UEE7QUFBQTtBQUFBO0FBQUE7QUFnUUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFHQTtBQUNBO0FBelFBO0FBQUE7QUFBQTtBQUFBO0FBNFFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFoUkE7QUFBQTtBQUFBO0FBQUE7QUFtUkE7QUFDQTtBQXBSQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBc1JBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTs7QUFMQTtBQUFBOztBQUFBO0FBT0E7O0FBUEE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBdFJBO0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQWdTQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBTEE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBaFNBO0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQXlTQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBQUE7O0FBQUE7QUFLQTs7QUFMQTtBQUFBO0FBQUE7QUFBQTs7QUFVQTs7QUFWQTs7QUFBQTtBQWNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUE5QkE7QUFBQTs7QUFBQTtBQStCQTs7QUFNQTtBQUNBO0FBQ0E7O0FBdkNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQXpTQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFvVkE7QUErQ0E7QUFuWUE7QUFBQTtBQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaG9tZS1hc3Npc3RhbnQtZnJvbnRlbmQvLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2NvbXBvbmVudHMvaHVpLWltYWdlLnRzP2IzZDUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgY3NzLFxuICBDU1NSZXN1bHRHcm91cCxcbiAgaHRtbCxcbiAgTGl0RWxlbWVudCxcbiAgUHJvcGVydHlWYWx1ZXMsXG4gIFRlbXBsYXRlUmVzdWx0LFxufSBmcm9tIFwibGl0XCI7XG5pbXBvcnQgeyBjdXN0b21FbGVtZW50LCBwcm9wZXJ0eSwgc3RhdGUgfSBmcm9tIFwibGl0L2RlY29yYXRvcnNcIjtcbmltcG9ydCB7IGNsYXNzTWFwIH0gZnJvbSBcImxpdC9kaXJlY3RpdmVzL2NsYXNzLW1hcFwiO1xuaW1wb3J0IHsgc3R5bGVNYXAgfSBmcm9tIFwibGl0L2RpcmVjdGl2ZXMvc3R5bGUtbWFwXCI7XG5pbXBvcnQgeyBTVEFURVNfT0ZGIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9jb25zdFwiO1xuaW1wb3J0IHBhcnNlQXNwZWN0UmF0aW8gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi91dGlsL3BhcnNlLWFzcGVjdC1yYXRpb1wiO1xuaW1wb3J0IFwiLi4vLi4vLi4vY29tcG9uZW50cy9oYS1jYW1lcmEtc3RyZWFtXCI7XG5pbXBvcnQgeyBDYW1lcmFFbnRpdHksIGZldGNoVGh1bWJuYWlsVXJsV2l0aENhY2hlIH0gZnJvbSBcIi4uLy4uLy4uL2RhdGEvY2FtZXJhXCI7XG5pbXBvcnQgeyBVTkFWQUlMQUJMRSB9IGZyb20gXCIuLi8uLi8uLi9kYXRhL2VudGl0eVwiO1xuaW1wb3J0IHsgSG9tZUFzc2lzdGFudCB9IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuaW1wb3J0IFwiLi4vLi4vLi4vY29tcG9uZW50cy9oYS1jaXJjdWxhci1wcm9ncmVzc1wiO1xuXG5jb25zdCBVUERBVEVfSU5URVJWQUwgPSAxMDAwMDtcbmNvbnN0IERFRkFVTFRfRklMVEVSID0gXCJncmF5c2NhbGUoMTAwJSlcIjtcblxuY29uc3QgTUFYX0lNQUdFX1dJRFRIID0gNjQwO1xuY29uc3QgQVNQRUNUX1JBVElPX0RFRkFVTFQgPSA5IC8gMTY7XG5cbmNvbnN0IGVudW0gTG9hZFN0YXRlIHtcbiAgTG9hZGluZyA9IDEsXG4gIExvYWRlZCA9IDIsXG4gIEVycm9yID0gMyxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdGF0ZVNwZWNpZmljQ29uZmlnIHtcbiAgW3N0YXRlOiBzdHJpbmddOiBzdHJpbmc7XG59XG5cbkBjdXN0b21FbGVtZW50KFwiaHVpLWltYWdlXCIpXG5leHBvcnQgY2xhc3MgSHVpSW1hZ2UgZXh0ZW5kcyBMaXRFbGVtZW50IHtcbiAgQHByb3BlcnR5KHsgYXR0cmlidXRlOiBmYWxzZSB9KSBwdWJsaWMgaGFzcz86IEhvbWVBc3Npc3RhbnQ7XG5cbiAgQHByb3BlcnR5KCkgcHVibGljIGVudGl0eT86IHN0cmluZztcblxuICBAcHJvcGVydHkoKSBwdWJsaWMgaW1hZ2U/OiBzdHJpbmc7XG5cbiAgQHByb3BlcnR5KHsgYXR0cmlidXRlOiBmYWxzZSB9KSBwdWJsaWMgc3RhdGVJbWFnZT86IFN0YXRlU3BlY2lmaWNDb25maWc7XG5cbiAgQHByb3BlcnR5KCkgcHVibGljIGNhbWVyYUltYWdlPzogc3RyaW5nO1xuXG4gIEBwcm9wZXJ0eSgpIHB1YmxpYyBjYW1lcmFWaWV3PzogXCJsaXZlXCIgfCBcImF1dG9cIjtcblxuICBAcHJvcGVydHkoKSBwdWJsaWMgYXNwZWN0UmF0aW8/OiBzdHJpbmc7XG5cbiAgQHByb3BlcnR5KCkgcHVibGljIGZpbHRlcj86IHN0cmluZztcblxuICBAcHJvcGVydHkoeyBhdHRyaWJ1dGU6IGZhbHNlIH0pIHB1YmxpYyBzdGF0ZUZpbHRlcj86IFN0YXRlU3BlY2lmaWNDb25maWc7XG5cbiAgQHByb3BlcnR5KCkgcHVibGljIGRhcmtNb2RlSW1hZ2U/OiBzdHJpbmc7XG5cbiAgQHByb3BlcnR5KCkgcHVibGljIGRhcmtNb2RlRmlsdGVyPzogc3RyaW5nO1xuXG4gIEBzdGF0ZSgpIHByaXZhdGUgX2ltYWdlVmlzaWJsZT8gPSBmYWxzZTtcblxuICBAc3RhdGUoKSBwcml2YXRlIF9sb2FkU3RhdGU/OiBMb2FkU3RhdGU7XG5cbiAgQHN0YXRlKCkgcHJpdmF0ZSBfY2FtZXJhSW1hZ2VTcmM/OiBzdHJpbmc7XG5cbiAgQHN0YXRlKCkgcHJpdmF0ZSBfbG9hZGVkSW1hZ2VTcmM/OiBzdHJpbmc7XG5cbiAgcHJpdmF0ZSBfaW50ZXJzZWN0aW9uT2JzZXJ2ZXI/OiBJbnRlcnNlY3Rpb25PYnNlcnZlcjtcblxuICBwcml2YXRlIF9sYXN0SW1hZ2VIZWlnaHQ/OiBudW1iZXI7XG5cbiAgcHJpdmF0ZSBfY2FtZXJhVXBkYXRlcj86IG51bWJlcjtcblxuICBwcml2YXRlIF9yYXRpbzoge1xuICAgIHc6IG51bWJlcjtcbiAgICBoOiBudW1iZXI7XG4gIH0gfCBudWxsID0gbnVsbDtcblxuICBwdWJsaWMgY29ubmVjdGVkQ2FsbGJhY2soKTogdm9pZCB7XG4gICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICBpZiAodGhpcy5fbG9hZFN0YXRlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuX2xvYWRTdGF0ZSA9IExvYWRTdGF0ZS5Mb2FkaW5nO1xuICAgIH1cbiAgICBpZiAodGhpcy5jYW1lcmFJbWFnZSAmJiB0aGlzLmNhbWVyYVZpZXcgIT09IFwibGl2ZVwiKSB7XG4gICAgICB0aGlzLl9zdGFydEludGVyc2VjdGlvbk9ic2VydmVyT3JVcGRhdGVzKCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCk6IHZvaWQge1xuICAgIHN1cGVyLmRpc2Nvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgdGhpcy5fc3RvcFVwZGF0ZUNhbWVyYUludGVydmFsKCk7XG4gICAgdGhpcy5fc3RvcEludGVyc2VjdGlvbk9ic2VydmVyKCk7XG4gICAgdGhpcy5faW1hZ2VWaXNpYmxlID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgcHJvdGVjdGVkIGhhbmRsZUludGVyc2VjdGlvbkNhbGxiYWNrKGVudHJpZXM6IEludGVyc2VjdGlvbk9ic2VydmVyRW50cnlbXSkge1xuICAgIHRoaXMuX2ltYWdlVmlzaWJsZSA9IGVudHJpZXNbMF0uaXNJbnRlcnNlY3Rpbmc7XG4gIH1cblxuICBwdWJsaWMgd2lsbFVwZGF0ZShjaGFuZ2VkUHJvcHM6IFByb3BlcnR5VmFsdWVzKTogdm9pZCB7XG4gICAgaWYgKGNoYW5nZWRQcm9wcy5oYXMoXCJoYXNzXCIpKSB7XG4gICAgICBjb25zdCBvbGRIYXNzID0gY2hhbmdlZFByb3BzLmdldChcImhhc3NcIikgYXMgSG9tZUFzc2lzdGFudCB8IHVuZGVmaW5lZDtcblxuICAgICAgaWYgKHRoaXMuX3Nob3VsZFN0YXJ0Q2FtZXJhVXBkYXRlcyhvbGRIYXNzKSkge1xuICAgICAgICB0aGlzLl9zdGFydEludGVyc2VjdGlvbk9ic2VydmVyT3JVcGRhdGVzKCk7XG4gICAgICB9IGVsc2UgaWYgKCF0aGlzLmhhc3MhLmNvbm5lY3RlZCkge1xuICAgICAgICB0aGlzLl9zdG9wVXBkYXRlQ2FtZXJhSW50ZXJ2YWwoKTtcbiAgICAgICAgdGhpcy5fc3RvcEludGVyc2VjdGlvbk9ic2VydmVyKCk7XG4gICAgICAgIHRoaXMuX2xvYWRTdGF0ZSA9IExvYWRTdGF0ZS5Mb2FkaW5nO1xuICAgICAgICB0aGlzLl9jYW1lcmFJbWFnZVNyYyA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fbG9hZGVkSW1hZ2VTcmMgPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChjaGFuZ2VkUHJvcHMuaGFzKFwiX2ltYWdlVmlzaWJsZVwiKSkge1xuICAgICAgaWYgKHRoaXMuX2ltYWdlVmlzaWJsZSkge1xuICAgICAgICBpZiAodGhpcy5fc2hvdWxkU3RhcnRDYW1lcmFVcGRhdGVzKCkpIHtcbiAgICAgICAgICB0aGlzLl9zdGFydFVwZGF0ZUNhbWVyYUludGVydmFsKCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX3N0b3BVcGRhdGVDYW1lcmFJbnRlcnZhbCgpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoY2hhbmdlZFByb3BzLmhhcyhcImFzcGVjdFJhdGlvXCIpKSB7XG4gICAgICB0aGlzLl9yYXRpbyA9IHRoaXMuYXNwZWN0UmF0aW9cbiAgICAgICAgPyBwYXJzZUFzcGVjdFJhdGlvKHRoaXMuYXNwZWN0UmF0aW8pXG4gICAgICAgIDogbnVsbDtcbiAgICB9XG4gICAgaWYgKHRoaXMuX2xvYWRTdGF0ZSA9PT0gTG9hZFN0YXRlLkxvYWRpbmcgJiYgIXRoaXMuY2FtZXJhSW1hZ2UpIHtcbiAgICAgIHRoaXMuX2xvYWRTdGF0ZSA9IExvYWRTdGF0ZS5Mb2FkZWQ7XG4gICAgfVxuICB9XG5cbiAgcHJvdGVjdGVkIHJlbmRlcigpOiBUZW1wbGF0ZVJlc3VsdCB7XG4gICAgaWYgKCF0aGlzLmhhc3MpIHtcbiAgICAgIHJldHVybiBodG1sYGA7XG4gICAgfVxuICAgIGNvbnN0IHVzZVJhdGlvID0gQm9vbGVhbihcbiAgICAgIHRoaXMuX3JhdGlvICYmIHRoaXMuX3JhdGlvLncgPiAwICYmIHRoaXMuX3JhdGlvLmggPiAwXG4gICAgKTtcbiAgICBjb25zdCBzdGF0ZU9iaiA9IHRoaXMuZW50aXR5ID8gdGhpcy5oYXNzLnN0YXRlc1t0aGlzLmVudGl0eV0gOiB1bmRlZmluZWQ7XG4gICAgY29uc3QgZW50aXR5U3RhdGUgPSBzdGF0ZU9iaiA/IHN0YXRlT2JqLnN0YXRlIDogVU5BVkFJTEFCTEU7XG5cbiAgICAvLyBGaWd1cmUgb3V0IGltYWdlIHNvdXJjZSB0byB1c2VcbiAgICBsZXQgaW1hZ2VTcmM6IHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgICBsZXQgY2FtZXJhT2JqOiBDYW1lcmFFbnRpdHkgfCB1bmRlZmluZWQ7XG4gICAgLy8gVHJhY2sgaWYgd2UgYXJlIHdlIHVzaW5nIGEgZmFsbGJhY2sgaW1hZ2UsIHVzZWQgZm9yIGZpbHRlci5cbiAgICBsZXQgaW1hZ2VGYWxsYmFjayA9ICF0aGlzLnN0YXRlSW1hZ2U7XG5cbiAgICBpZiAodGhpcy5jYW1lcmFJbWFnZSkge1xuICAgICAgaWYgKHRoaXMuY2FtZXJhVmlldyA9PT0gXCJsaXZlXCIpIHtcbiAgICAgICAgY2FtZXJhT2JqID0gdGhpcy5oYXNzLnN0YXRlc1t0aGlzLmNhbWVyYUltYWdlXSBhcyBDYW1lcmFFbnRpdHk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpbWFnZVNyYyA9IHRoaXMuX2NhbWVyYUltYWdlU3JjO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0ZUltYWdlKSB7XG4gICAgICBjb25zdCBzdGF0ZUltYWdlID0gdGhpcy5zdGF0ZUltYWdlW2VudGl0eVN0YXRlXTtcblxuICAgICAgaWYgKHN0YXRlSW1hZ2UpIHtcbiAgICAgICAgaW1hZ2VTcmMgPSBzdGF0ZUltYWdlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaW1hZ2VTcmMgPSB0aGlzLmltYWdlO1xuICAgICAgICBpbWFnZUZhbGxiYWNrID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMuZGFya01vZGVJbWFnZSAmJiB0aGlzLmhhc3MudGhlbWVzLmRhcmtNb2RlKSB7XG4gICAgICBpbWFnZVNyYyA9IHRoaXMuZGFya01vZGVJbWFnZTtcbiAgICB9IGVsc2Uge1xuICAgICAgaW1hZ2VTcmMgPSB0aGlzLmltYWdlO1xuICAgIH1cblxuICAgIGlmIChpbWFnZVNyYykge1xuICAgICAgaW1hZ2VTcmMgPSB0aGlzLmhhc3MuaGFzc1VybChpbWFnZVNyYyk7XG4gICAgfVxuXG4gICAgLy8gRmlndXJlIG91dCBmaWx0ZXIgdG8gdXNlXG4gICAgbGV0IGZpbHRlciA9IHRoaXMuZmlsdGVyIHx8IFwiXCI7XG5cbiAgICBpZiAodGhpcy5oYXNzLnRoZW1lcy5kYXJrTW9kZSAmJiB0aGlzLmRhcmtNb2RlRmlsdGVyKSB7XG4gICAgICBmaWx0ZXIgKz0gdGhpcy5kYXJrTW9kZUZpbHRlcjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zdGF0ZUZpbHRlciAmJiB0aGlzLnN0YXRlRmlsdGVyW2VudGl0eVN0YXRlXSkge1xuICAgICAgZmlsdGVyICs9IHRoaXMuc3RhdGVGaWx0ZXJbZW50aXR5U3RhdGVdO1xuICAgIH1cblxuICAgIGlmICghZmlsdGVyICYmIHRoaXMuZW50aXR5KSB7XG4gICAgICBjb25zdCBpc09mZiA9ICFzdGF0ZU9iaiB8fCBTVEFURVNfT0ZGLmluY2x1ZGVzKGVudGl0eVN0YXRlKTtcbiAgICAgIGZpbHRlciA9IGlzT2ZmICYmIGltYWdlRmFsbGJhY2sgPyBERUZBVUxUX0ZJTFRFUiA6IFwiXCI7XG4gICAgfVxuXG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8ZGl2XG4gICAgICAgIHN0eWxlPSR7c3R5bGVNYXAoe1xuICAgICAgICAgIHBhZGRpbmdCb3R0b206IHVzZVJhdGlvXG4gICAgICAgICAgICA/IGAkeygoMTAwICogdGhpcy5fcmF0aW8hLmgpIC8gdGhpcy5fcmF0aW8hLncpLnRvRml4ZWQoMil9JWBcbiAgICAgICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgICAgIGJhY2tncm91bmRJbWFnZTpcbiAgICAgICAgICAgIHVzZVJhdGlvICYmIHRoaXMuX2xvYWRlZEltYWdlU3JjXG4gICAgICAgICAgICAgID8gYHVybChcIiR7dGhpcy5fbG9hZGVkSW1hZ2VTcmN9XCIpYFxuICAgICAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgICAgICBmaWx0ZXI6XG4gICAgICAgICAgICB0aGlzLl9sb2FkU3RhdGUgPT09IExvYWRTdGF0ZS5Mb2FkZWQgfHwgdGhpcy5jYW1lcmFWaWV3ID09PSBcImxpdmVcIlxuICAgICAgICAgICAgICA/IGZpbHRlclxuICAgICAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgICAgfSl9XG4gICAgICAgIGNsYXNzPVwiY29udGFpbmVyICR7Y2xhc3NNYXAoe1xuICAgICAgICAgIHJhdGlvOiB1c2VSYXRpbyxcbiAgICAgICAgfSl9XCJcbiAgICAgID5cbiAgICAgICAgJHt0aGlzLmNhbWVyYUltYWdlICYmIHRoaXMuY2FtZXJhVmlldyA9PT0gXCJsaXZlXCJcbiAgICAgICAgICA/IGh0bWxgXG4gICAgICAgICAgICAgIDxoYS1jYW1lcmEtc3RyZWFtXG4gICAgICAgICAgICAgICAgbXV0ZWRcbiAgICAgICAgICAgICAgICAuaGFzcz0ke3RoaXMuaGFzc31cbiAgICAgICAgICAgICAgICAuc3RhdGVPYmo9JHtjYW1lcmFPYmp9XG4gICAgICAgICAgICAgID48L2hhLWNhbWVyYS1zdHJlYW0+XG4gICAgICAgICAgICBgXG4gICAgICAgICAgOiBpbWFnZVNyYyA9PT0gdW5kZWZpbmVkXG4gICAgICAgICAgPyBodG1sYGBcbiAgICAgICAgICA6IGh0bWxgXG4gICAgICAgICAgICAgIDxpbWdcbiAgICAgICAgICAgICAgICBpZD1cImltYWdlXCJcbiAgICAgICAgICAgICAgICBzcmM9JHtpbWFnZVNyY31cbiAgICAgICAgICAgICAgICBAZXJyb3I9JHt0aGlzLl9vbkltYWdlRXJyb3J9XG4gICAgICAgICAgICAgICAgQGxvYWQ9JHt0aGlzLl9vbkltYWdlTG9hZH1cbiAgICAgICAgICAgICAgICBzdHlsZT0ke3N0eWxlTWFwKHtcbiAgICAgICAgICAgICAgICAgIGRpc3BsYXk6XG4gICAgICAgICAgICAgICAgICAgIHVzZVJhdGlvIHx8IHRoaXMuX2xvYWRTdGF0ZSA9PT0gTG9hZFN0YXRlLkxvYWRlZFxuICAgICAgICAgICAgICAgICAgICAgID8gXCJibG9ja1wiXG4gICAgICAgICAgICAgICAgICAgICAgOiBcIm5vbmVcIixcbiAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIGB9XG4gICAgICAgICR7dGhpcy5fbG9hZFN0YXRlID09PSBMb2FkU3RhdGUuRXJyb3JcbiAgICAgICAgICA/IGh0bWxgPGRpdlxuICAgICAgICAgICAgICBpZD1cImJyb2tlbkltYWdlXCJcbiAgICAgICAgICAgICAgc3R5bGU9JHtzdHlsZU1hcCh7XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAhdXNlUmF0aW9cbiAgICAgICAgICAgICAgICAgID8gYCR7dGhpcy5fbGFzdEltYWdlSGVpZ2h0IHx8IFwiMTAwXCJ9cHhgXG4gICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICA+PC9kaXY+YFxuICAgICAgICAgIDogdGhpcy5jYW1lcmFWaWV3ICE9PSBcImxpdmVcIiAmJlxuICAgICAgICAgICAgKGltYWdlU3JjID09PSB1bmRlZmluZWQgfHwgdGhpcy5fbG9hZFN0YXRlID09PSBMb2FkU3RhdGUuTG9hZGluZylcbiAgICAgICAgICA/IGh0bWxgPGRpdlxuICAgICAgICAgICAgICBjbGFzcz1cInByb2dyZXNzLWNvbnRhaW5lclwiXG4gICAgICAgICAgICAgIHN0eWxlPSR7c3R5bGVNYXAoe1xuICAgICAgICAgICAgICAgIGhlaWdodDogIXVzZVJhdGlvXG4gICAgICAgICAgICAgICAgICA/IGAke3RoaXMuX2xhc3RJbWFnZUhlaWdodCB8fCBcIjEwMFwifXB4YFxuICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8aGEtY2lyY3VsYXItcHJvZ3Jlc3NcbiAgICAgICAgICAgICAgICBjbGFzcz1cInJlbmRlci1zcGlubmVyXCJcbiAgICAgICAgICAgICAgICBhY3RpdmVcbiAgICAgICAgICAgICAgICBzaXplPVwic21hbGxcIlxuICAgICAgICAgICAgICA+PC9oYS1jaXJjdWxhci1wcm9ncmVzcz5cbiAgICAgICAgICAgIDwvZGl2PmBcbiAgICAgICAgICA6IFwiXCJ9XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuICB9XG5cbiAgcHJvdGVjdGVkIF9zaG91bGRTdGFydENhbWVyYVVwZGF0ZXMob2xkSGFzcz86IEhvbWVBc3Npc3RhbnQpOiBib29sZWFuIHtcbiAgICByZXR1cm4gISEoXG4gICAgICAoIW9sZEhhc3MgfHwgb2xkSGFzcy5jb25uZWN0ZWQgIT09IHRoaXMuaGFzcyEuY29ubmVjdGVkKSAmJlxuICAgICAgdGhpcy5oYXNzIS5jb25uZWN0ZWQgJiZcbiAgICAgIHRoaXMuY2FtZXJhVmlldyAhPT0gXCJsaXZlXCJcbiAgICApO1xuICB9XG5cbiAgcHJpdmF0ZSBfc3RhcnRJbnRlcnNlY3Rpb25PYnNlcnZlck9yVXBkYXRlcygpOiB2b2lkIHtcbiAgICBpZiAoXCJJbnRlcnNlY3Rpb25PYnNlcnZlclwiIGluIHdpbmRvdykge1xuICAgICAgaWYgKCF0aGlzLl9pbnRlcnNlY3Rpb25PYnNlcnZlcikge1xuICAgICAgICB0aGlzLl9pbnRlcnNlY3Rpb25PYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihcbiAgICAgICAgICB0aGlzLmhhbmRsZUludGVyc2VjdGlvbkNhbGxiYWNrLmJpbmQodGhpcylcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuX2ludGVyc2VjdGlvbk9ic2VydmVyLm9ic2VydmUodGhpcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIE5vIHN1cHBvcnQgZm9yIEludGVyc2VjdGlvbk9ic2VydmVyXG4gICAgICAvLyBhc3N1bWUgYWxsIGltYWdlcyBhcmUgdmlzaWJsZVxuICAgICAgdGhpcy5faW1hZ2VWaXNpYmxlID0gdHJ1ZTtcbiAgICAgIHRoaXMuX3N0YXJ0VXBkYXRlQ2FtZXJhSW50ZXJ2YWwoKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9zdG9wSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2ludGVyc2VjdGlvbk9ic2VydmVyKSB7XG4gICAgICB0aGlzLl9pbnRlcnNlY3Rpb25PYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfc3RhcnRVcGRhdGVDYW1lcmFJbnRlcnZhbCgpOiB2b2lkIHtcbiAgICB0aGlzLl9zdG9wVXBkYXRlQ2FtZXJhSW50ZXJ2YWwoKTtcbiAgICB0aGlzLl91cGRhdGVDYW1lcmFJbWFnZVNyYygpO1xuICAgIGlmICh0aGlzLmNhbWVyYUltYWdlICYmIHRoaXMuaXNDb25uZWN0ZWQpIHtcbiAgICAgIHRoaXMuX2NhbWVyYVVwZGF0ZXIgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoXG4gICAgICAgICgpID0+IHRoaXMuX3VwZGF0ZUNhbWVyYUltYWdlU3JjQXRJbnRlcnZhbCgpLFxuICAgICAgICBVUERBVEVfSU5URVJWQUxcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfc3RvcFVwZGF0ZUNhbWVyYUludGVydmFsKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9jYW1lcmFVcGRhdGVyKSB7XG4gICAgICBjbGVhckludGVydmFsKHRoaXMuX2NhbWVyYVVwZGF0ZXIpO1xuICAgICAgdGhpcy5fY2FtZXJhVXBkYXRlciA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9vbkltYWdlRXJyb3IoKTogdm9pZCB7XG4gICAgdGhpcy5fbG9hZFN0YXRlID0gTG9hZFN0YXRlLkVycm9yO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBfb25JbWFnZUxvYWQoZXY6IEV2ZW50KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdGhpcy5fbG9hZFN0YXRlID0gTG9hZFN0YXRlLkxvYWRlZDtcbiAgICBjb25zdCBpbWdFbCA9IGV2LnRhcmdldCBhcyBIVE1MSW1hZ2VFbGVtZW50O1xuICAgIGlmICh0aGlzLl9yYXRpbyAmJiB0aGlzLl9yYXRpby53ID4gMCAmJiB0aGlzLl9yYXRpby5oID4gMCkge1xuICAgICAgdGhpcy5fbG9hZGVkSW1hZ2VTcmMgPSBpbWdFbC5zcmM7XG4gICAgfVxuICAgIGF3YWl0IHRoaXMudXBkYXRlQ29tcGxldGU7XG4gICAgdGhpcy5fbGFzdEltYWdlSGVpZ2h0ID0gaW1nRWwub2Zmc2V0SGVpZ2h0O1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBfdXBkYXRlQ2FtZXJhSW1hZ2VTcmNBdEludGVydmFsKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIC8vIElmIHdlIGhpdCB0aGUgaW50ZXJ2YWwgYW5kIGl0IHdhcyBzdGlsbCBsb2FkaW5nXG4gICAgLy8gaXQgbWVhbnMgd2UgdGltZWQgb3V0IHNvIHdlIHNob3VsZCBzaG93IHRoZSBlcnJvci5cbiAgICBpZiAodGhpcy5fbG9hZFN0YXRlID09PSBMb2FkU3RhdGUuTG9hZGluZykge1xuICAgICAgdGhpcy5fb25JbWFnZUVycm9yKCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl91cGRhdGVDYW1lcmFJbWFnZVNyYygpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBfdXBkYXRlQ2FtZXJhSW1hZ2VTcmMoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKCF0aGlzLmhhc3MgfHwgIXRoaXMuY2FtZXJhSW1hZ2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBjYW1lcmFTdGF0ZSA9IHRoaXMuaGFzcy5zdGF0ZXNbdGhpcy5jYW1lcmFJbWFnZV0gYXNcbiAgICAgIHwgQ2FtZXJhRW50aXR5XG4gICAgICB8IHVuZGVmaW5lZDtcblxuICAgIGlmICghY2FtZXJhU3RhdGUpIHtcbiAgICAgIHRoaXMuX29uSW1hZ2VFcnJvcigpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGVsZW1lbnRfd2lkdGggPSB0aGlzLmNsaWVudFdpZHRoIHx8IE1BWF9JTUFHRV9XSURUSDtcbiAgICBsZXQgd2lkdGggPSBNYXRoLmNlaWwoZWxlbWVudF93aWR0aCAqIGRldmljZVBpeGVsUmF0aW8pO1xuICAgIGxldCBoZWlnaHQ6IG51bWJlcjtcbiAgICAvLyBJZiB0aGUgaW1hZ2UgaGFzIG5vdCByZW5kZXJlZCB5ZXQgd2UgaGF2ZSBubyBoZWlnaHRcbiAgICBpZiAoIXRoaXMuX2xhc3RJbWFnZUhlaWdodCkge1xuICAgICAgaWYgKHRoaXMuX3JhdGlvICYmIHRoaXMuX3JhdGlvLncgPiAwICYmIHRoaXMuX3JhdGlvLmggPiAwKSB7XG4gICAgICAgIGhlaWdodCA9IE1hdGguY2VpbCh3aWR0aCAqICh0aGlzLl9yYXRpby5oIC8gdGhpcy5fcmF0aW8udykpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gSWYgd2UgZG9uJ3QgaGF2ZSBhIHJhdGlvIGFuZCB3ZSBkb24ndCBoYXZlIGEgaGVpZ2h0XG4gICAgICAgIC8vIHdlIGFzayBmb3IgMjAwJSBvZiB3aGF0IHdlIG5lZWQgYmVjYXVzZSB0aGUgYXNwZWN0XG4gICAgICAgIC8vIHJhdGlvIG1pZ2h0IHJlc3VsdCBpbiBhIHNtYWxsZXIgaW1hZ2VcbiAgICAgICAgd2lkdGggKj0gMjtcbiAgICAgICAgaGVpZ2h0ID0gTWF0aC5jZWlsKHdpZHRoICogQVNQRUNUX1JBVElPX0RFRkFVTFQpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBoZWlnaHQgPSBNYXRoLmNlaWwodGhpcy5fbGFzdEltYWdlSGVpZ2h0ICogZGV2aWNlUGl4ZWxSYXRpbyk7XG4gICAgfVxuICAgIHRoaXMuX2NhbWVyYUltYWdlU3JjID0gYXdhaXQgZmV0Y2hUaHVtYm5haWxVcmxXaXRoQ2FjaGUoXG4gICAgICB0aGlzLmhhc3MsXG4gICAgICB0aGlzLmNhbWVyYUltYWdlLFxuICAgICAgd2lkdGgsXG4gICAgICBoZWlnaHRcbiAgICApO1xuICAgIGlmICh0aGlzLl9jYW1lcmFJbWFnZVNyYyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLl9vbkltYWdlRXJyb3IoKTtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZ2V0IHN0eWxlcygpOiBDU1NSZXN1bHRHcm91cCB7XG4gICAgcmV0dXJuIGNzc2BcbiAgICAgIDpob3N0IHtcbiAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICB9XG5cbiAgICAgIC5jb250YWluZXIge1xuICAgICAgICB0cmFuc2l0aW9uOiBmaWx0ZXIgMC4ycyBsaW5lYXI7XG4gICAgICB9XG5cbiAgICAgIGltZyB7XG4gICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICBoZWlnaHQ6IGF1dG87XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgfVxuXG4gICAgICAucHJvZ3Jlc3MtY29udGFpbmVyIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICB9XG5cbiAgICAgIC5yYXRpbyB7XG4gICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIGhlaWdodDogMDtcbiAgICAgICAgYmFja2dyb3VuZC1wb3NpdGlvbjogY2VudGVyO1xuICAgICAgICBiYWNrZ3JvdW5kLXNpemU6IGNvdmVyO1xuICAgICAgfVxuXG4gICAgICAucmF0aW8gaW1nLFxuICAgICAgLnJhdGlvIGRpdiB7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgdG9wOiAwO1xuICAgICAgICBsZWZ0OiAwO1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgfVxuXG4gICAgICAucmF0aW8gaW1nIHtcbiAgICAgICAgdmlzaWJpbGl0eTogaGlkZGVuO1xuICAgICAgfVxuXG4gICAgICAjYnJva2VuSW1hZ2Uge1xuICAgICAgICBiYWNrZ3JvdW5kOiBncmV5IHVybChcIi9zdGF0aWMvaW1hZ2VzL2ltYWdlLWJyb2tlbi5zdmdcIikgY2VudGVyLzM2cHhcbiAgICAgICAgICBuby1yZXBlYXQ7XG4gICAgICB9XG4gICAgYDtcbiAgfVxufVxuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIGludGVyZmFjZSBIVE1MRWxlbWVudFRhZ05hbWVNYXAge1xuICAgIFwiaHVpLWltYWdlXCI6IEh1aUltYWdlO1xuICB9XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/panels/lovelace/components/hui-image.ts\n");

/***/ })

}]);