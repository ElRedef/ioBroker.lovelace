(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[5916],{12198:function(e,t,r){"use strict";r.d(t,{p:function(){return o},D:function(){return a}});var n=r(68928),i=r(43274),o=i.Sb?function(e,t){return e.toLocaleDateString(t.language,{year:"numeric",month:"long",day:"numeric"})}:function(e){return(0,n.WU)(e,"longDate")},a=i.Sb?function(e,t){return e.toLocaleDateString(t.language,{weekday:"long",month:"short",day:"numeric"})}:function(e){return(0,n.WU)(e,"dddd, MMM D")}},49684:function(e,t,r){"use strict";r.d(t,{mr:function(){return o},Vu:function(){return a},xO:function(){return s}});var n=r(68928),i=r(43274),o=i.BF?function(e,t){return e.toLocaleTimeString(t.language,{hour:"numeric",minute:"2-digit"})}:function(e){return(0,n.WU)(e,"shortTime")},a=i.BF?function(e,t){return e.toLocaleTimeString(t.language,{hour:"numeric",minute:"2-digit",second:"2-digit"})}:function(e){return(0,n.WU)(e,"mediumTime")},s=i.BF?function(e,t){return e.toLocaleTimeString(t.language,{weekday:"long",hour:"numeric",minute:"2-digit"})}:function(e){return(0,n.WU)(e,"dddd, HH:mm")}},91168:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=function(e){return e<10?"0".concat(e):e};function i(e){var t=Math.floor(e/3600),r=Math.floor(e%3600/60),i=Math.floor(e%3600%60);return t>0?"".concat(t,":").concat(n(r),":").concat(n(i)):r>0?"".concat(r,":").concat(n(i)):i>0?""+i:null}},29171:function(e,t,r){"use strict";r.d(t,{D:function(){return l}});var n=r(56007),i=r(12198),o=r(44583),a=r(49684),s=r(45524),c=r(22311),l=function(e,t,r,l){var u=void 0!==l?l:t.state;if(u===n.lz||u===n.nZ)return e("state.default.".concat(u));if(t.attributes.unit_of_measurement)return"".concat((0,s.u)(u,r)," ").concat(t.attributes.unit_of_measurement);var d=(0,c.N)(t);if("input_datetime"===d){var f;if(!t.attributes.has_time)return f=new Date(t.attributes.year,t.attributes.month-1,t.attributes.day),(0,i.p)(f,r);if(!t.attributes.has_date){var h=new Date;return f=new Date(h.getFullYear(),h.getMonth(),h.getDay(),t.attributes.hour,t.attributes.minute),(0,a.mr)(f,r)}return f=new Date(t.attributes.year,t.attributes.month-1,t.attributes.day,t.attributes.hour,t.attributes.minute),(0,o.o)(f,r)}return"humidifier"===d&&"on"===u&&t.attributes.humidity?"".concat(t.attributes.humidity," %"):"counter"===d||"number"===d?(0,s.u)(u,r):t.attributes.device_class&&e("component.".concat(d,".state.").concat(t.attributes.device_class,".").concat(u))||e("component.".concat(d,".state._.").concat(u))||u}},45524:function(e,t,r){"use strict";r.d(t,{u:function(){return i}});var n=r(66477),i=function(e,t,r){var i;switch(null==t?void 0:t.number_format){case n.y4.comma_decimal:i=["en-US","en"];break;case n.y4.decimal_comma:i=["de","es","it"];break;case n.y4.space_comma:i=["fr","sv","cs"];break;case n.y4.system:i=void 0;break;default:i=null==t?void 0:t.language}if(Number.isNaN=Number.isNaN||function e(t){return"number"==typeof t&&e(t)},!Number.isNaN(Number(e))&&Intl&&(null==t?void 0:t.number_format)!==n.y4.none)try{return new Intl.NumberFormat(i,o(e,r)).format(Number(e))}catch(a){return console.error(a),new Intl.NumberFormat(void 0,o(e,r)).format(Number(e))}return e?e.toString():""},o=function(e,t){var r=t||{};if("string"!=typeof e)return r;if(!t||!t.minimumFractionDigits&&!t.maximumFractionDigits){var n=e.indexOf(".")>-1?e.split(".")[1].length:0;r.minimumFractionDigits=n,r.maximumFractionDigits=n}return r}},43793:function(e,t,r){"use strict";r.d(t,{x:function(){return n}});var n=function(e,t){return e.substring(0,t.length)===t}},97389:function(e,t,r){"use strict";r.d(t,{mA:function(){return i},lj:function(){return o},U_:function(){return a},nV:function(){return s},Zm:function(){return c}});var n=r(43793),i=function(e,t,r,n){return e.callWS({type:"trace/get",domain:t,item_id:r,run_id:n})},o=function(e,t,r){return e.callWS({type:"trace/list",domain:t,item_id:r})},a=function(e,t,r){return e.callWS({type:"trace/contexts",domain:t,item_id:r})},s=function(e,t){for(var r=t.split("/").reverse(),n=e;r.length;){var i=r.pop(),o=Number(i);if(isNaN(o))n=n[i];else if(Array.isArray(n))n=n[o];else if(0!==o)throw new Error("If config is not an array, can only return index 0")}return n},c=function(e){return"trigger"===e||(0,n.x)(e,"trigger/")}},99008:function(e,t,r){"use strict";r.r(t),r.d(t,{HaAutomationTrace:function(){return Ti}});var n=r(15652),i=r(97389),o=(r(25230),r(47181)),a=(r(52039),r(55317)),s=r(81471);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(){var e=y(['\n      :host {\n        position: relative;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        --stroke-clr: var(--stroke-color, var(--secondary-text-color));\n        --active-clr: var(--active-color, var(--primary-color));\n        --track-clr: var(--track-color, var(--accent-color));\n        --disabled-clr: var(--disabled-color, gray);\n      }\n      :host(:focus) {\n        outline: none;\n      }\n      #branches {\n        position: relative;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n      }\n      :host([branching]) #branches {\n        flex-direction: row;\n        align-items: start;\n      }\n      :host([branching]) ::slotted(*) {\n        z-index: 1;\n      }\n      :host([branching]) ::slotted([slot="head"]) {\n        margin-bottom: ',"px;\n      }\n\n      #lines {\n        position: absolute;\n      }\n\n      path.line {\n        stroke: var(--stroke-clr);\n        stroke-width: 2;\n        fill: none;\n      }\n      path.line.track {\n        stroke: var(--track-clr);\n      }\n      :host([disabled]) path.line {\n        stroke: var(--disabled-clr);\n      }\n      :host(.active) #top path.line {\n        stroke: var(--active-clr);\n      }\n      :host(:focus) #top path.line {\n        stroke: var(--active-clr);\n      }\n    "]);return l=function(){return e},e}function u(){var e=y(['\n                  <path\n                    class="','"\n                    id="','"\n                    index=','\n                    d="\n                      M '," 0\n                      L "," ","\n                      L "," ",'\n                      "/>\n                ']);return u=function(){return e},e}function d(){var e=y(['\n            <svg\n              id="bottom"\n              width="','"\n              height="','"\n            >\n              ','\n              <use xlink:href="#track-end" />\n            </svg>\n          ']);return d=function(){return e},e}function f(){var e=y(['\n                    <path\n                      class="','"\n                      index=','\n                      d="\n                        M '," ","\n                        l 0 ",'\n                        "/>\n                  ']);return f=function(){return e},e}function h(){var e=y(['\n              <svg\n                id="lines"\n                width="','"\n                height="','"\n              >\n                ',"\n              </svg>\n            "]);return h=function(){return e},e}function p(){var e=y(['\n                  <path\n                    class="','"\n                    id="','"\n                    index=','\n                    d="\n                      M '," 0\n                      L "," ",'\n                      "/>\n                ']);return p=function(){return e},e}function m(){var e=y(['\n            <svg\n              id="top"\n              width="','"\n              height="','"\n            >\n              ','\n              <use xlink:href="#track-start" />\n            </svg>\n          ']);return m=function(){return e},e}function v(){var e=y(['\n      <slot name="head" @slotchange=',"> </slot>\n      ",'\n      <div id="branches">\n        ',"\n        <slot @slotchange=","></slot>\n      </div>\n\n      ","\n    "]);return v=function(){return e},e}function y(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function b(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=P(e);if(t){var i=P(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return E(this,r)}}function E(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?_(e):t}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(){x=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){["method","field"].forEach((function(r){t.forEach((function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r=e.prototype;["method","field"].forEach((function(n){t.forEach((function(t){var i=t.placement;if(t.kind===n&&("static"===i||"prototype"===i)){var o="static"===i?e:r;this.defineClassElement(o,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var n=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===n?void 0:n.call(e)}}Object.defineProperty(e,t.key,r)},decorateClass:function(e,t){var r=[],n=[],i={static:[],prototype:[],own:[]};if(e.forEach((function(e){this.addElementPlacement(e,i)}),this),e.forEach((function(e){if(!D(e))return r.push(e);var t=this.decorateElement(e,i);r.push(t.element),r.push.apply(r,t.extras),n.push.apply(n,t.finishers)}),this),!t)return{elements:r,finishers:n};var o=this.decorateConstructor(r,t);return n.push.apply(n,o.finishers),o.finishers=n,o},addElementPlacement:function(e,t,r){var n=t[e.placement];if(!r&&-1!==n.indexOf(e.key))throw new TypeError("Duplicated element ("+e.key+")");n.push(e.key)},decorateElement:function(e,t){for(var r=[],n=[],i=e.decorators,o=i.length-1;o>=0;o--){var a=t[e.placement];a.splice(a.indexOf(e.key),1);var s=this.fromElementDescriptor(e),c=this.toElementFinisherExtras((0,i[o])(s)||s);e=c.element,this.addElementPlacement(e,t),c.finisher&&n.push(c.finisher);var l=c.extras;if(l){for(var u=0;u<l.length;u++)this.addElementPlacement(l[u],t);r.push.apply(r,l)}}return{element:e,finishers:n,extras:r}},decorateConstructor:function(e,t){for(var r=[],n=t.length-1;n>=0;n--){var i=this.fromClassDescriptor(e),o=this.toClassDescriptor((0,t[n])(i)||i);if(void 0!==o.finisher&&r.push(o.finisher),void 0!==o.elements){e=o.elements;for(var a=0;a<e.length-1;a++)for(var s=a+1;s<e.length;s++)if(e[a].key===e[s].key&&e[a].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[a].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return Object.defineProperty(t,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return(t=e,function(e){if(Array.isArray(e))return e}(t)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return A(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?A(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).map((function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=j(e.key),n=String(e.placement);if("static"!==n&&"prototype"!==n&&"own"!==n)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+n+'"');var i=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var o={kind:t,key:r,placement:n,descriptor:Object.assign({},i)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(i,"get","The property descriptor of a field descriptor"),this.disallowProperty(i,"set","The property descriptor of a field descriptor"),this.disallowProperty(i,"value","The property descriptor of a field descriptor"),o.initializer=e.initializer),o},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:C(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:e.map(this.fromElementDescriptor,this)};return Object.defineProperty(t,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=C(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var n=(0,t[r])(e);if(void 0!==n){if("function"!=typeof n)throw new TypeError("Finishers must return a constructor.");e=n}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function S(e){var t,r=j(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var n={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(n.decorators=e.decorators),"field"===e.kind&&(n.initializer=e.value),n}function O(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function D(e){return e.decorators&&e.decorators.length}function T(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function C(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function j(e){var t=function(e,t){if("object"!==c(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===c(t)?t:String(t)}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var I=10,z={fromAttribute:function(e){return e.split(",").map((function(e){return parseInt(e)}))},toAttribute:function(e){return e instanceof Array?e.join(","):"".concat(e)}};!function(e,t,r,n){var i=x();if(n)for(var o=0;o<n.length;o++)i=n[o](i);var a=t((function(e){i.initializeInstanceElements(e,s.elements)}),r),s=i.decorateClass(function(e){for(var t=[],r=function(e){return"method"===e.kind&&e.key===o.key&&e.placement===o.placement},n=0;n<e.length;n++){var i,o=e[n];if("method"===o.kind&&(i=t.find(r)))if(T(o.descriptor)||T(i.descriptor)){if(D(o)||D(i))throw new ReferenceError("Duplicated methods ("+o.key+") can't be decorated.");i.descriptor=o.descriptor}else{if(D(o)){if(D(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+o.key+").");i.decorators=o.decorators}O(o,i)}else t.push(o)}return t}(a.d.map(S)),e);i.initializeClassElements(a.F,s.elements),i.runClassFinishers(a.F,s.finishers)}([(0,n.Mo)("hat-graph")],(function(e,t){var r,i;return{F:function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(n,t);var r=w(n);function n(){var t;g(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=r.call.apply(r,[this].concat(o)),e(_(t)),t}return n}(t),d:[{kind:"field",decorators:[(0,n.Cb)({type:Number})],key:"_num_items",value:function(){return 0}},{kind:"field",decorators:[(0,n.Cb)({reflect:!0,type:Boolean})],key:"branching",value:void 0},{kind:"field",decorators:[(0,n.Cb)({reflect:!0,converter:z})],key:"track_start",value:void 0},{kind:"field",decorators:[(0,n.Cb)({reflect:!0,converter:z})],key:"track_end",value:void 0},{kind:"field",decorators:[(0,n.Cb)({reflect:!0,type:Boolean})],key:"disabled",value:void 0},{kind:"field",decorators:[(0,n.Cb)({reflect:!0,type:Boolean})],key:"selected",value:void 0},{kind:"field",decorators:[(0,n.Cb)({reflect:!0,type:Boolean})],key:"short",value:function(){return!1}},{kind:"method",key:"updateChildren",value:(r=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._num_items=this.children.length;case 1:case"end":return e.stop()}}),e,this)})),i=function(){var e=this,t=arguments;return new Promise((function(n,i){var o=r.apply(e,t);function a(e){b(o,n,i,a,s,"next",e)}function s(e){b(o,n,i,a,s,"throw",e)}a(void 0)}))},function(){return i.apply(this,arguments)})},{kind:"method",key:"render",value:function(){var e=this,t=[],r=0,i=0,o=Number.POSITIVE_INFINITY;if(this.branching)for(var a=0,c=Array.from(this.children);a<c.length;a++){var l=c[a];if("head"!==l.slot){var y=l.getBoundingClientRect();t.push({x:y.width/2+r,height:y.height,start:null!=l.getAttribute("graphStart"),end:null!=l.getAttribute("graphEnd")}),r+=y.width,i=Math.max(i,y.height),o=Math.min(o,y.height)}}return(0,n.dy)(v(),this.updateChildren,this.branching?(0,n.YP)(m(),r,20,t.map((function(t,i){var o,a,c;return t.start?"":(0,n.YP)(p(),(0,s.$)({line:!0,track:null!==(o=null===(a=e.track_start)||void 0===a?void 0:a.includes(i))&&void 0!==o&&o}),(null===(c=e.track_start)||void 0===c?void 0:c.includes(i))?"track-start":"",i,r/2,t.x,20)}))):"",this.branching?(0,n.YP)(h(),r,i,t.map((function(t,r){var o,a;return t.end?"":(0,n.YP)(f(),(0,s.$)({line:!0,track:null!==(o=null===(a=e.track_end)||void 0===a?void 0:a.includes(r))&&void 0!==o&&o}),r,t.x,t.height,i-t.height)}))):"",this.updateChildren,this.branching&&!this.short?(0,n.YP)(d(),r,30,t.map((function(t,i){var o,a,c;return t.end?"":(0,n.YP)(u(),(0,s.$)({line:!0,track:null!==(o=null===(a=e.track_end)||void 0===a?void 0:a.includes(i))&&void 0!==o&&o}),(null===(c=e.track_end)||void 0===c?void 0:c.includes(i))?"track-end":"",i,t.x,t.x,I,r/2,30)}))):"")}},{kind:"get",static:!0,key:"styles",value:function(){return(0,n.iv)(l(),-10)}}]}}),n.oi);function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(){var e=L(["\n      :host {\n        display: flex;\n        flex-direction: column;\n        --stroke-clr: var(--stroke-color, var(--secondary-text-color));\n        --active-clr: var(--active-color, var(--primary-color));\n        --track-clr: var(--track-color, var(--accent-color));\n        --hover-clr: var(--hover-color, var(--primary-color));\n        --disabled-clr: var(--disabled-color, var(--disabled-text-color));\n        --default-trigger-color: 3, 169, 244;\n        --rgb-trigger-color: var(--trigger-color, var(--default-trigger-color));\n        --background-clr: var(--background-color, white);\n        --default-icon-clr: var(--icon-color, black);\n        --icon-clr: var(--stroke-clr);\n      }\n      :host(.track) {\n        --stroke-clr: var(--track-clr);\n        --icon-clr: var(--default-icon-clr);\n      }\n      :host(.active) circle {\n        --stroke-clr: var(--active-clr);\n        --icon-clr: var(--default-icon-clr);\n      }\n      :host(:focus) {\n        outline: none;\n      }\n      :host(:hover) circle {\n        --stroke-clr: var(--hover-clr);\n        --icon-clr: var(--default-icon-clr);\n      }\n      :host([disabled]) circle {\n        stroke: var(--disabled-clr);\n      }\n      :host-context([disabled]) {\n        --stroke-clr: var(--disabled-clr);\n      }\n\n      :host([nofocus]):host-context(.active),\n      :host([nofocus]):host-context(:focus) {\n        --stroke-clr: var(--active-clr);\n        --icon-clr: var(--default-icon-clr);\n      }\n\n      circle,\n      path.connector {\n        stroke: var(--stroke-clr);\n        stroke-width: 2;\n        fill: none;\n      }\n      circle {\n        fill: var(--background-clr);\n        stroke: var(--circle-clr, var(--stroke-clr));\n      }\n      .number circle {\n        fill: var(--track-clr);\n        stroke: none;\n        stroke-width: 0;\n      }\n      .number text {\n        font-size: smaller;\n      }\n      path.icon {\n        fill: var(--icon-clr);\n      }\n\n      :host(.triggered) svg {\n        overflow: visible;\n      }\n      :host(.triggered) circle {\n        animation: glow 10s;\n      }\n      @keyframes glow {\n        0% {\n          filter: drop-shadow(0px 0px 5px rgba(var(--rgb-trigger-color), 0));\n        }\n        10% {\n          filter: drop-shadow(0px 0px 10px rgba(var(--rgb-trigger-color), 1));\n        }\n        100% {\n          filter: drop-shadow(0px 0px 5px rgba(var(--rgb-trigger-color), 0));\n        }\n      }\n    "]);return F=function(){return e},e}function N(){var e=L(['<path class="icon" d="','"/>']);return N=function(){return e},e}function M(){var e=L(['\n        <g class="number">\n          <circle\n            cx="8"\n            cy="','"\n            r="8"\n          ></circle>\n          <text\n            x="8"\n            y="','"\n            text-anchor="middle"\n            alignment-baseline="middle"\n          >',"</text>\n        </g>\n      "]);return M=function(){return e},e}function $(){var e=L(['\n          <path\n            class="connector"\n            d="\n              M 0 ','\n              L 0 0\n            "\n            line-caps="round"\n          />\n          ']);return $=function(){return e},e}function B(){var e=L(["\n    <svg\n    >\n      ",'\n    <g class="node">\n      <circle\n        cx="0"\n        cy="0"\n        r="','"\n      />\n      ','\n      <g\n        style="pointer-events: none"\n        transform="translate('," ",')"\n      >\n        ',"\n      </g>\n    </g>\n      </svg>\n    "]);return B=function(){return e},e}function L(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function U(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function W(e,t){return(W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=re(e);if(t){var i=re(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Y(this,r)}}function Y(e,t){return!t||"object"!==R(t)&&"function"!=typeof t?V(e):t}function V(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(){H=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){["method","field"].forEach((function(r){t.forEach((function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r=e.prototype;["method","field"].forEach((function(n){t.forEach((function(t){var i=t.placement;if(t.kind===n&&("static"===i||"prototype"===i)){var o="static"===i?e:r;this.defineClassElement(o,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var n=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===n?void 0:n.call(e)}}Object.defineProperty(e,t.key,r)},decorateClass:function(e,t){var r=[],n=[],i={static:[],prototype:[],own:[]};if(e.forEach((function(e){this.addElementPlacement(e,i)}),this),e.forEach((function(e){if(!X(e))return r.push(e);var t=this.decorateElement(e,i);r.push(t.element),r.push.apply(r,t.extras),n.push.apply(n,t.finishers)}),this),!t)return{elements:r,finishers:n};var o=this.decorateConstructor(r,t);return n.push.apply(n,o.finishers),o.finishers=n,o},addElementPlacement:function(e,t,r){var n=t[e.placement];if(!r&&-1!==n.indexOf(e.key))throw new TypeError("Duplicated element ("+e.key+")");n.push(e.key)},decorateElement:function(e,t){for(var r=[],n=[],i=e.decorators,o=i.length-1;o>=0;o--){var a=t[e.placement];a.splice(a.indexOf(e.key),1);var s=this.fromElementDescriptor(e),c=this.toElementFinisherExtras((0,i[o])(s)||s);e=c.element,this.addElementPlacement(e,t),c.finisher&&n.push(c.finisher);var l=c.extras;if(l){for(var u=0;u<l.length;u++)this.addElementPlacement(l[u],t);r.push.apply(r,l)}}return{element:e,finishers:n,extras:r}},decorateConstructor:function(e,t){for(var r=[],n=t.length-1;n>=0;n--){var i=this.fromClassDescriptor(e),o=this.toClassDescriptor((0,t[n])(i)||i);if(void 0!==o.finisher&&r.push(o.finisher),void 0!==o.elements){e=o.elements;for(var a=0;a<e.length-1;a++)for(var s=a+1;s<e.length;s++)if(e[a].key===e[s].key&&e[a].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[a].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return Object.defineProperty(t,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return(t=e,function(e){if(Array.isArray(e))return e}(t)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return ee(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ee(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).map((function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=Q(e.key),n=String(e.placement);if("static"!==n&&"prototype"!==n&&"own"!==n)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+n+'"');var i=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var o={kind:t,key:r,placement:n,descriptor:Object.assign({},i)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(i,"get","The property descriptor of a field descriptor"),this.disallowProperty(i,"set","The property descriptor of a field descriptor"),this.disallowProperty(i,"value","The property descriptor of a field descriptor"),o.initializer=e.initializer),o},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:G(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:e.map(this.fromElementDescriptor,this)};return Object.defineProperty(t,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=G(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var n=(0,t[r])(e);if(void 0!==n){if("function"!=typeof n)throw new TypeError("Finishers must return a constructor.");e=n}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function J(e){var t,r=Q(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var n={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(n.decorators=e.decorators),"field"===e.kind&&(n.initializer=e.value),n}function Z(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function X(e){return e.decorators&&e.decorators.length}function K(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function G(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function Q(e){var t=function(e,t){if("object"!==R(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==R(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===R(t)?t:String(t)}function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function te(e,t,r){return(te="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=re(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function re(e){return(re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}!function(e,t,r,n){var i=H();if(n)for(var o=0;o<n.length;o++)i=n[o](i);var a=t((function(e){i.initializeInstanceElements(e,s.elements)}),r),s=i.decorateClass(function(e){for(var t=[],r=function(e){return"method"===e.kind&&e.key===o.key&&e.placement===o.placement},n=0;n<e.length;n++){var i,o=e[n];if("method"===o.kind&&(i=t.find(r)))if(K(o.descriptor)||K(i.descriptor)){if(X(o)||X(i))throw new ReferenceError("Duplicated methods ("+o.key+") can't be decorated.");i.descriptor=o.descriptor}else{if(X(o)){if(X(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+o.key+").");i.decorators=o.decorators}Z(o,i)}else t.push(o)}return t}(a.d.map(J)),e);i.initializeClassElements(a.F,s.elements),i.runClassFinishers(a.F,s.finishers)}([(0,n.Mo)("hat-graph-node")],(function(e,t){var r=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&W(e,t)}(n,t);var r=q(n);function n(){var t;U(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=r.call.apply(r,[this].concat(o)),e(V(t)),t}return n}(t);return{F:r,d:[{kind:"field",decorators:[(0,n.Cb)()],key:"iconPath",value:void 0},{kind:"field",decorators:[(0,n.Cb)({reflect:!0,type:Boolean})],key:"disabled",value:void 0},{kind:"field",decorators:[(0,n.Cb)({reflect:!0,type:Boolean})],key:"graphstart",value:void 0},{kind:"field",decorators:[(0,n.Cb)({reflect:!0,type:Boolean})],key:"nofocus",value:void 0},{kind:"field",decorators:[(0,n.Cb)({reflect:!0,type:Number})],key:"badge",value:void 0},{kind:"method",key:"connectedCallback",value:function(){te(re(r.prototype),"connectedCallback",this).call(this),this.hasAttribute("tabindex")||this.nofocus||this.setAttribute("tabindex","0")}},{kind:"method",key:"updated",value:function(){var e,t=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("svg");if(t){var r=t.getBBox(),n=this.graphstart?2:1;t.setAttribute("width","".concat(r.width+10,"px")),t.setAttribute("height","".concat(r.height+n,"px")),t.setAttribute("viewBox","".concat(Math.ceil(r.x-5),"\n      ").concat(Math.ceil(r.y-n/2),"\n      ").concat(r.width+10,"\n      ").concat(r.height+n))}}},{kind:"method",key:"render",value:function(){return(0,n.YP)(B(),this.graphstart?"":(0,n.YP)($(),-25),15,this.badge?(0,n.YP)(M(),-15,-15,this.badge>9?"9+":this.badge):"",-12,-12,this.iconPath?(0,n.YP)(N(),this.iconPath):"")}},{kind:"get",static:!0,key:"styles",value:function(){return(0,n.iv)(F())}}]}}),n.oi);var ne=r(42141);function ie(e){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oe(){var e=we(["\n      :host {\n        display: flex;\n      }\n      .actions {\n        display: flex;\n        flex-direction: column;\n      }\n      .parent {\n        margin-left: 8px;\n      }\n      .error {\n        padding: 16px;\n        max-width: 300px;\n      }\n    "]);return oe=function(){return e},e}function ae(){var e=we(['\n        <div class="error">\n          Error rendering graph. Please download trace and share with the\n          developers.\n        </div>\n      ']);return ae=function(){return e},e}function se(){var e=we(['\n        <hat-graph class="parent">\n          <div></div>\n          <hat-graph\n            branching\n            id="trigger"\n            .short=',"\n            .track_start=","\n            .track_end=","\n          >\n            ",'\n          </hat-graph>\n          <hat-graph id="condition">\n            ',"\n          </hat-graph>\n          ",'\n        </hat-graph>\n        <div class="actions">\n          <mwc-icon-button\n            .disabled=',"\n            @click=","\n          >\n            <ha-svg-icon .path=","></ha-svg-icon>\n          </mwc-icon-button>\n          <mwc-icon-button\n            .disabled=","\n            @click=","\n          >\n            <ha-svg-icon .path=","></ha-svg-icon>\n          </mwc-icon-button>\n        </div>\n      "]);return se=function(){return e},e}function ce(){var e=we(["\n      <hat-graph-node\n        .iconPath=","\n        @focus=","\n        class=","\n      ></hat-graph-node>\n    "]);return ce=function(){return e},e}function le(){var e=we(["\n      <hat-graph-node\n        .iconPath=","\n        @focus=","\n        class=","\n        tabindex=","\n      ></hat-graph-node>\n    "]);return le=function(){return e},e}function ue(){var e=we(["\n      <hat-graph-node\n        .iconPath=","\n        @focus=","\n        class=","\n        tabindex=","\n      ></hat-graph-node>\n    "]);return ue=function(){return e},e}function de(){var e=we(["\n      <hat-graph-node\n        .iconPath=","\n        @focus=","\n        class=","\n        tabindex=","\n      ></hat-graph-node>\n    "]);return de=function(){return e},e}function fe(){var e=we(["\n      <hat-graph\n        .track_start=","\n        .track_end=","\n        tabindex=","\n        branching\n        @focus=","\n        class=","\n      >\n        <hat-graph-node\n          .iconPath=","\n          class=",'\n          slot="head"\n          nofocus\n        ></hat-graph-node>\n        <hat-graph-node\n          .iconPath=',"\n          nofocus\n          class=","\n          .badge=","\n        ></hat-graph-node>\n        <hat-graph>\n          ","\n        </hat-graph>\n      </hat-graph>\n    "]);return fe=function(){return e},e}function he(){var e=we(["\n      <hat-graph-node\n        .iconPath=","\n        @focus=","\n        class=","\n        tabindex=","\n      ></hat-graph-node>\n    "]);return he=function(){return e},e}function pe(){var e=we(["\n      <hat-graph-node\n        .iconPath=","\n        @focus=","\n        class=","\n        tabindex=","\n      ></hat-graph-node>\n    "]);return pe=function(){return e},e}function me(){var e=we(["\n      <hat-graph-node\n        .iconPath=","\n        @focus=","\n        class=","\n        tabindex=","\n      ></hat-graph-node>\n    "]);return me=function(){return e},e}function ve(){var e=we(["\n      <hat-graph\n        branching\n        @focus=","\n        class=","\n        .track_start=","\n        .track_end=","\n        tabindex=",'\n        short\n      >\n        <hat-graph-node\n          slot="head"\n          class=',"\n          .iconPath=","\n          nofocus\n          graphEnd\n        ></hat-graph-node>\n        <div\n          style=","\n          graphStart\n          graphEnd\n        ></div>\n        <div></div>\n        <hat-graph-node\n          .iconPath=","\n          graphEnd\n          nofocus\n          class=","\n        ></hat-graph-node>\n      </hat-graph>\n    "]);return ve=function(){return e},e}function ye(){var e=we(["\n            <hat-graph>\n              <hat-graph-node\n                .iconPath=","\n                nofocus\n                class=","\n              ></hat-graph-node>\n              ","\n            </hat-graph>\n          "]);return ye=function(){return e},e}function be(){var e=we(["\n      <hat-graph\n        tabindex=","\n        branching\n        .track_start=","\n        .track_end=","\n        @focus=","\n        class=","\n      >\n        <hat-graph-node\n          .iconPath=","\n          class=",'\n          slot="head"\n          nofocus\n        ></hat-graph-node>\n\n        ',"\n        <hat-graph>\n          <hat-graph-node\n            .iconPath=","\n            nofocus\n            class=","\n          ></hat-graph-node>\n          ","\n        </hat-graph>\n      </hat-graph>\n    "]);return be=function(){return e},e}function ge(){var e=we(["\n      <hat-graph\n        branching\n        @focus=","\n        class=","\n        .track_start=","\n        .track_end=","\n        tabindex=",'\n        short\n      >\n        <hat-graph-node\n          slot="head"\n          class=',"\n          .iconPath=","\n          nofocus\n          graphEnd\n        ></hat-graph-node>\n        <div\n          style=","\n          graphStart\n          graphEnd\n        ></div>\n        <div></div>\n        <hat-graph-node\n          .iconPath=","\n          graphEnd\n          nofocus\n          class=","\n        ></hat-graph-node>\n      </hat-graph>\n    "]);return ge=function(){return e},e}function ke(){var e=we(["\n      <hat-graph-node\n        graphStart\n        @focus=","\n        class=","\n        .iconPath=","\n        tabindex=","\n      ></hat-graph-node>\n    "]);return ke=function(){return e},e}function we(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function Ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _e(e,t){return(_e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ne(e);if(t){var i=Ne(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return xe(this,r)}}function xe(e,t){return!t||"object"!==ie(t)&&"function"!=typeof t?Se(e):t}function Se(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Oe(){Oe=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){["method","field"].forEach((function(r){t.forEach((function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r=e.prototype;["method","field"].forEach((function(n){t.forEach((function(t){var i=t.placement;if(t.kind===n&&("static"===i||"prototype"===i)){var o="static"===i?e:r;this.defineClassElement(o,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var n=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===n?void 0:n.call(e)}}Object.defineProperty(e,t.key,r)},decorateClass:function(e,t){var r=[],n=[],i={static:[],prototype:[],own:[]};if(e.forEach((function(e){this.addElementPlacement(e,i)}),this),e.forEach((function(e){if(!Ce(e))return r.push(e);var t=this.decorateElement(e,i);r.push(t.element),r.push.apply(r,t.extras),n.push.apply(n,t.finishers)}),this),!t)return{elements:r,finishers:n};var o=this.decorateConstructor(r,t);return n.push.apply(n,o.finishers),o.finishers=n,o},addElementPlacement:function(e,t,r){var n=t[e.placement];if(!r&&-1!==n.indexOf(e.key))throw new TypeError("Duplicated element ("+e.key+")");n.push(e.key)},decorateElement:function(e,t){for(var r=[],n=[],i=e.decorators,o=i.length-1;o>=0;o--){var a=t[e.placement];a.splice(a.indexOf(e.key),1);var s=this.fromElementDescriptor(e),c=this.toElementFinisherExtras((0,i[o])(s)||s);e=c.element,this.addElementPlacement(e,t),c.finisher&&n.push(c.finisher);var l=c.extras;if(l){for(var u=0;u<l.length;u++)this.addElementPlacement(l[u],t);r.push.apply(r,l)}}return{element:e,finishers:n,extras:r}},decorateConstructor:function(e,t){for(var r=[],n=t.length-1;n>=0;n--){var i=this.fromClassDescriptor(e),o=this.toClassDescriptor((0,t[n])(i)||i);if(void 0!==o.finisher&&r.push(o.finisher),void 0!==o.elements){e=o.elements;for(var a=0;a<e.length-1;a++)for(var s=a+1;s<e.length;s++)if(e[a].key===e[s].key&&e[a].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[a].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return Object.defineProperty(t,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return(t=e,function(e){if(Array.isArray(e))return e}(t)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(t)||ze(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).map((function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=Ie(e.key),n=String(e.placement);if("static"!==n&&"prototype"!==n&&"own"!==n)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+n+'"');var i=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var o={kind:t,key:r,placement:n,descriptor:Object.assign({},i)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(i,"get","The property descriptor of a field descriptor"),this.disallowProperty(i,"set","The property descriptor of a field descriptor"),this.disallowProperty(i,"value","The property descriptor of a field descriptor"),o.initializer=e.initializer),o},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:Ae(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:e.map(this.fromElementDescriptor,this)};return Object.defineProperty(t,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=Ae(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var n=(0,t[r])(e);if(void 0!==n){if("function"!=typeof n)throw new TypeError("Finishers must return a constructor.");e=n}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function De(e){var t,r=Ie(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var n={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(n.decorators=e.decorators),"field"===e.kind&&(n.initializer=e.value),n}function Te(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function Ce(e){return e.decorators&&e.decorators.length}function je(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function Ae(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function Ie(e){var t=function(e,t){if("object"!==ie(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==ie(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ie(t)?t:String(t)}function ze(e,t){if(e){if("string"==typeof e)return Re(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Re(e,t):void 0}}function Re(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Fe(e,t,r){return(Fe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ne(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function Ne(e){return(Ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}!function(e,t,r,n){var i=Oe();if(n)for(var o=0;o<n.length;o++)i=n[o](i);var a=t((function(e){i.initializeInstanceElements(e,s.elements)}),r),s=i.decorateClass(function(e){for(var t=[],r=function(e){return"method"===e.kind&&e.key===o.key&&e.placement===o.placement},n=0;n<e.length;n++){var i,o=e[n];if("method"===o.kind&&(i=t.find(r)))if(je(o.descriptor)||je(i.descriptor)){if(Ce(o)||Ce(i))throw new ReferenceError("Duplicated methods ("+o.key+") can't be decorated.");i.descriptor=o.descriptor}else{if(Ce(o)){if(Ce(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+o.key+").");i.decorators=o.decorators}Te(o,i)}else t.push(o)}return t}(a.d.map(De)),e);i.initializeClassElements(a.F,s.elements),i.runClassFinishers(a.F,s.finishers)}([(0,n.Mo)("hat-script-graph")],(function(e,t){var r=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_e(e,t)}(n,t);var r=Pe(n);function n(){var t;Ee(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=r.call.apply(r,[this].concat(o)),e(Se(t)),t}return n}(t);return{F:r,d:[{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"trace",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"selected",value:void 0},{kind:"field",decorators:[(0,n.Cb)()],key:"trackedNodes",value:function(){return{}}},{kind:"method",key:"selectNode",value:function(e,t){var r=this;return function(){(0,o.B)(r,"graph-node-selected",{config:e,path:t})}}},{kind:"method",key:"render_trigger",value:function(e,t){var r="trigger/".concat(t),i=this.trace&&r in this.trace.trace;return i&&(this.trackedNodes[r]={config:e,path:r}),(0,n.dy)(ke(),this.selectNode(e,r),(0,s.$)({track:i,active:this.selected===r}),a.AD$,i?"0":"-1")}},{kind:"method",key:"render_condition",value:function(e,t){var r="condition/".concat(t),i=this.trace.trace[r],o=void 0===(null==i?void 0:i[0].result)?0:i[0].result.result?1:2;return i&&(this.trackedNodes[r]={config:e,path:r}),(0,n.dy)(ge(),this.selectNode(e,r),(0,s.$)({track:o,active:this.selected===r}),[o],[o],void 0===i?"-1":"0",(0,s.$)({track:void 0!==i}),a._wd,"width: ".concat(40,"px;"),a.r5M,(0,s.$)({track:2===o}))}},{kind:"method",key:"render_choose_node",value:function(e,t){var r,i,o=this,c=this.trace.trace[t],l=(null==c?void 0:c[0].result)?"default"===c[0].result.choice?[e.choose.length]:[c[0].result.choice]:[];return(0,n.dy)(be(),void 0===c?"-1":"0",l,l,this.selectNode(e,t),(0,s.$)({track:void 0!==c,active:this.selected===t}),a.g$R,(0,s.$)({track:void 0!==c}),e.choose.map((function(e,r){var i,l="".concat(t,"/choose/").concat(r);return(0,n.dy)(ye(),a.Eut,(0,s.$)({track:void 0!==c&&(null===(i=c[0].result)||void 0===i?void 0:i.choice)===r}),(0,ne.r)(e.sequence).map((function(e,t){return o.render_node(e,"".concat(l,"/sequence/").concat(t))})))})),a.Ii0,(0,s.$)({track:void 0!==c&&"default"===(null===(r=c[0].result)||void 0===r?void 0:r.choice)}),null===(i=(0,ne.r)(e.default))||void 0===i?void 0:i.map((function(e,r){return o.render_node(e,"".concat(t,"/default/").concat(r))})))}},{kind:"method",key:"render_condition_node",value:function(e,t){var r=this.trace.trace[t]||void 0,i=void 0===(null==r?void 0:r[0].result)?0:r[0].result.result?1:2;return(0,n.dy)(ve(),this.selectNode(e,t),(0,s.$)({track:i,active:this.selected===t}),[i],[i],void 0===r?"-1":"0",(0,s.$)({track:Boolean(r)}),a._wd,"width: ".concat(40,"px;"),a.r5M,(0,s.$)({track:2===i}))}},{kind:"method",key:"render_delay_node",value:function(e,t){return(0,n.dy)(me(),a.clR,this.selectNode(e,t),(0,s.$)({track:t in this.trace.trace,active:this.selected===t}),this.trace&&t in this.trace.trace?"0":"-1")}},{kind:"method",key:"render_device_node",value:function(e,t){return(0,n.dy)(pe(),a.p0g,this.selectNode(e,t),(0,s.$)({track:t in this.trace.trace,active:this.selected===t}),this.trace&&t in this.trace.trace?"0":"-1")}},{kind:"method",key:"render_event_node",value:function(e,t){return(0,n.dy)(he(),a.XW6,this.selectNode(e,t),(0,s.$)({track:t in this.trace.trace,active:this.selected===t}),this.trace&&t in this.trace.trace?"0":"-1")}},{kind:"method",key:"render_repeat_node",value:function(e,t){var r,i,o=this,c=this.trace.trace[t],l=c?[0,1]:[],u=null===(r=this.trace)||void 0===r||null===(i=r.trace["".concat(t,"/repeat/sequence/0")])||void 0===i?void 0:i.length;return(0,n.dy)(fe(),l,l,void 0===c?"-1":"0",this.selectNode(e,t),(0,s.$)({track:t in this.trace.trace,active:this.selected===t}),a.jcD,(0,s.$)({track:c}),a.XHH,(0,s.$)({track:l.includes(1)}),u,(0,ne.r)(e.repeat.sequence).map((function(e,r){return o.render_node(e,"".concat(t,"/repeat/sequence/").concat(r))})))}},{kind:"method",key:"render_scene_node",value:function(e,t){return(0,n.dy)(de(),a.XW6,this.selectNode(e,t),(0,s.$)({track:t in this.trace.trace,active:this.selected===t}),this.trace&&t in this.trace.trace?"0":"-1")}},{kind:"method",key:"render_service_node",value:function(e,t){return(0,n.dy)(ue(),a.zrb,this.selectNode(e,t),(0,s.$)({track:t in this.trace.trace,active:this.selected===t}),this.trace&&t in this.trace.trace?"0":"-1")}},{kind:"method",key:"render_wait_node",value:function(e,t){return(0,n.dy)(le(),a._yq,this.selectNode(e,t),(0,s.$)({track:t in this.trace.trace,active:this.selected===t}),this.trace&&t in this.trace.trace?"0":"-1")}},{kind:"method",key:"render_other_node",value:function(e,t){return(0,n.dy)(ce(),a.Nqu,this.selectNode(e,t),(0,s.$)({track:t in this.trace.trace,active:this.selected===t}))}},{kind:"method",key:"render_node",value:function(e,t){var r={choose:this.render_choose_node,condition:this.render_condition_node,delay:this.render_delay_node,device_id:this.render_device_node,event:this.render_event_node,repeat:this.render_repeat_node,scene:this.render_scene_node,service:this.render_service_node,wait_template:this.render_wait_node,wait_for_trigger:this.render_wait_node,other:this.render_other_node},n=r[Object.keys(r).find((function(t){return t in e}))||"other"].bind(this)(e,t);return this.trace&&t in this.trace.trace&&(this.trackedNodes[t]={config:e,path:t}),n}},{kind:"method",key:"render",value:function(){var e=this,t=Object.keys(this.trackedNodes),r=this.trace&&"trigger"in this.trace.trace?void 0:[0],i=(0,ne.r)(this.trace.config.trigger).map((function(t,n){return e.trace&&"trigger/".concat(n)in e.trace.trace&&(r=[n]),e.render_trigger(t,n)}));try{var o;return(0,n.dy)(se(),i.length<2,r,r,i,null===(o=(0,ne.r)(this.trace.config.condition))||void 0===o?void 0:o.map((function(t,r){return e.render_condition(t,r)})),(0,ne.r)(this.trace.config.action).map((function(t,r){return e.render_node(t,"action/".concat(r))})),0===t.length||t[0]===this.selected,this.previousTrackedNode,a.Waq,0===t.length||t[t.length-1]===this.selected,this.nextTrackedNode,a.CW)}catch(s){return(0,n.dy)(ae())}}},{kind:"method",key:"update",value:function(e){e.has("trace")&&(this.trackedNodes={}),Fe(Ne(r.prototype),"update",this).call(this,e)}},{kind:"method",key:"updated",value:function(e){var t=this;if(Fe(Ne(r.prototype),"updated",this).call(this,e),e.has("trace")){var n=this.getTrackedNodes(),i=Object.keys(n);if(""===this.selected||!(this.selected in i)){var a,s=function(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=ze(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}(i);try{for(s.s();!(a=s.n()).done;){var c=a.value;if(n[c]){(0,o.B)(this,"graph-node-selected",n[c]);break}}}catch(d){s.e(d)}finally{s.f()}}if(this.trace){var l=Object.keys(this.trace.trace),u=Object.keys(this.trackedNodes).sort((function(e,t){return l.indexOf(e)-l.indexOf(t)})).reduce((function(e,r){return e[r]=t.trackedNodes[r],e}),{});this.trackedNodes=u}}}},{kind:"method",key:"getTrackedNodes",value:function(){return this.trackedNodes}},{kind:"method",key:"previousTrackedNode",value:function(){for(var e=this.getTrackedNodes(),t=Object.keys(e),r=t.indexOf(this.selected)-1;r>=0;r--)if(e[t[r]]){(0,o.B)(this,"graph-node-selected",e[t[r]]);break}}},{kind:"method",key:"nextTrackedNode",value:function(){for(var e=this.getTrackedNodes(),t=Object.keys(e),r=t.indexOf(this.selected)+1;r<t.length;r++)if(e[t[r]]){(0,o.B)(this,"graph-node-selected",e[t[r]]);break}}},{kind:"get",static:!0,key:"styles",value:function(){return(0,n.iv)(oe())}}]}}),n.oi);var Me=r(11654),$e=r(29311),Be=r(55422),Le=r(44583),Ue=r(83278),We=r(26765),qe=r(50947);r(10983),r(53822);function Ye(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  .tabs {\n    background-color: var(--primary-background-color);\n    border-top: 1px solid var(--divider-color);\n    border-bottom: 1px solid var(--divider-color);\n    display: flex;\n    padding-left: 4px;\n  }\n\n  .tabs.top {\n    border-top: none;\n  }\n\n  .tabs > * {\n    padding: 2px 16px;\n    cursor: pointer;\n    position: relative;\n    bottom: -1px;\n    border: none;\n    border-bottom: 2px solid transparent;\n    user-select: none;\n    background: none;\n  }\n\n  .tabs > *.active {\n    border-bottom-color: var(--accent-color);\n  }\n"]);return Ye=function(){return e},e}var Ve=(0,n.iv)(Ye());r(97740);function He(e){return(He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Je(){var e=ft(["\n        .padded-box {\n          margin: 16px;\n        }\n\n        :host(:not([narrow])) .trace-info {\n          min-height: 250px;\n        }\n\n        pre {\n          margin: 0;\n        }\n\n        .error {\n          color: var(--error-color);\n        }\n      "]);return Je=function(){return e},e}function Ze(){var e=ft(['<div class="padded-box">\n          No Logbook entries found for this step.\n        </div>']);return Ze=function(){return e},e}function Xe(){var e=ft(["<ha-logbook\n          relative-time\n          .hass=","\n          .entries=","\n          .narrow=","\n        ></ha-logbook>"]);return Xe=function(){return e},e}function Ke(){var e=ft(['<div class="padded-box">Node not tracked.</div>']);return Ke=function(){return e},e}function Ge(){var e=ft(["<pre>\n","</pre\n                >"]);return Ge=function(){return e},e}function Qe(){var e=ft(["<p>Iteration ","</p>"]);return Qe=function(){return e},e}function et(){var e=ft(["\n            ","\n            ","\n          "]);return et=function(){return e},e}function tt(){var e=ft(['\n      <div class="padded-box">\n        ',"\n      </div>\n    "]);return tt=function(){return e},e}function rt(){var e=ft(["<ha-code-editor\n          .value=","\n          readOnly\n        ></ha-code-editor>"]);return rt=function(){return e},e}function nt(){var e=ft(["<pre>","</pre>"]);return nt=function(){return e},e}function it(){var e=ft(['<div class="error">Error: ',"</div>"]);return it=function(){return e},e}function ot(){var e=ft(["Result:\n              <pre>","</pre>"]);return ot=function(){return e},e}function at(){var e=ft(["<h3>Iteration ","</h3>"]);return at=function(){return e},e}function st(){var e=ft(["\n        ","\n        Executed:\n        ","<br />\n        ","\n        ","\n      "]);return st=function(){return e},e}function ct(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function lt(){var e=ft(["\n            <button\n              .view=","\n              class=","\n              @click=","\n            >\n              ","\n            </button>\n          "]);return lt=function(){return e},e}function ut(e,t){return Tt(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||Ot(e,t)||St()}function dt(){var e=ft(['\n      <div class="padded-box trace-info">\n        ','\n      </div>\n\n      <div class="tabs top">\n        ',"\n      </div>\n      ","\n    "]);return dt=function(){return e},e}function ft(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function ht(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pt(e,t){return(pt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function mt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=bt(e);if(t){var i=bt(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return vt(this,r)}}function vt(e,t){return!t||"object"!==He(t)&&"function"!=typeof t?yt(e):t}function yt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bt(e){return(bt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gt(){gt=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){["method","field"].forEach((function(r){t.forEach((function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r=e.prototype;["method","field"].forEach((function(n){t.forEach((function(t){var i=t.placement;if(t.kind===n&&("static"===i||"prototype"===i)){var o="static"===i?e:r;this.defineClassElement(o,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var n=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===n?void 0:n.call(e)}}Object.defineProperty(e,t.key,r)},decorateClass:function(e,t){var r=[],n=[],i={static:[],prototype:[],own:[]};if(e.forEach((function(e){this.addElementPlacement(e,i)}),this),e.forEach((function(e){if(!Et(e))return r.push(e);var t=this.decorateElement(e,i);r.push(t.element),r.push.apply(r,t.extras),n.push.apply(n,t.finishers)}),this),!t)return{elements:r,finishers:n};var o=this.decorateConstructor(r,t);return n.push.apply(n,o.finishers),o.finishers=n,o},addElementPlacement:function(e,t,r){var n=t[e.placement];if(!r&&-1!==n.indexOf(e.key))throw new TypeError("Duplicated element ("+e.key+")");n.push(e.key)},decorateElement:function(e,t){for(var r=[],n=[],i=e.decorators,o=i.length-1;o>=0;o--){var a=t[e.placement];a.splice(a.indexOf(e.key),1);var s=this.fromElementDescriptor(e),c=this.toElementFinisherExtras((0,i[o])(s)||s);e=c.element,this.addElementPlacement(e,t),c.finisher&&n.push(c.finisher);var l=c.extras;if(l){for(var u=0;u<l.length;u++)this.addElementPlacement(l[u],t);r.push.apply(r,l)}}return{element:e,finishers:n,extras:r}},decorateConstructor:function(e,t){for(var r=[],n=t.length-1;n>=0;n--){var i=this.fromClassDescriptor(e),o=this.toClassDescriptor((0,t[n])(i)||i);if(void 0!==o.finisher&&r.push(o.finisher),void 0!==o.elements){e=o.elements;for(var a=0;a<e.length-1;a++)for(var s=a+1;s<e.length;s++)if(e[a].key===e[s].key&&e[a].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[a].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return Object.defineProperty(t,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return(t=e,Tt(t)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(t)||Ot(t)||St()).map((function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=xt(e.key),n=String(e.placement);if("static"!==n&&"prototype"!==n&&"own"!==n)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+n+'"');var i=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var o={kind:t,key:r,placement:n,descriptor:Object.assign({},i)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(i,"get","The property descriptor of a field descriptor"),this.disallowProperty(i,"set","The property descriptor of a field descriptor"),this.disallowProperty(i,"value","The property descriptor of a field descriptor"),o.initializer=e.initializer),o},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:Pt(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:e.map(this.fromElementDescriptor,this)};return Object.defineProperty(t,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=Pt(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var n=(0,t[r])(e);if(void 0!==n){if("function"!=typeof n)throw new TypeError("Finishers must return a constructor.");e=n}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function kt(e){var t,r=xt(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var n={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(n.decorators=e.decorators),"field"===e.kind&&(n.initializer=e.value),n}function wt(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function Et(e){return e.decorators&&e.decorators.length}function _t(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function Pt(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function xt(e){var t=function(e,t){if("object"!==He(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==He(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===He(t)?t:String(t)}function St(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ot(e,t){if(e){if("string"==typeof e)return Dt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Dt(e,t):void 0}}function Dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Tt(e){if(Array.isArray(e))return e}!function(e,t,r,n){var i=gt();if(n)for(var o=0;o<n.length;o++)i=n[o](i);var a=t((function(e){i.initializeInstanceElements(e,s.elements)}),r),s=i.decorateClass(function(e){for(var t=[],r=function(e){return"method"===e.kind&&e.key===o.key&&e.placement===o.placement},n=0;n<e.length;n++){var i,o=e[n];if("method"===o.kind&&(i=t.find(r)))if(_t(o.descriptor)||_t(i.descriptor)){if(Et(o)||Et(i))throw new ReferenceError("Duplicated methods ("+o.key+") can't be decorated.");i.descriptor=o.descriptor}else{if(Et(o)){if(Et(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+o.key+").");i.decorators=o.decorators}wt(o,i)}else t.push(o)}return t}(a.d.map(kt)),e);i.initializeClassElements(a.F,s.elements),i.runClassFinishers(a.F,s.finishers)}([(0,n.Mo)("ha-automation-trace-path-details")],(function(e,t){return{F:function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pt(e,t)}(n,t);var r=mt(n);function n(){var t;ht(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=r.call.apply(r,[this].concat(o)),e(yt(t)),t}return n}(t),d:[{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Boolean,reflect:!0})],key:"narrow",value:void 0},{kind:"field",decorators:[(0,n.Cb)()],key:"selected",value:void 0},{kind:"field",decorators:[(0,n.Cb)()],key:"trace",value:void 0},{kind:"field",decorators:[(0,n.Cb)()],key:"logbookEntries",value:void 0},{kind:"field",decorators:[(0,n.Cb)()],key:"trackedNodes",value:void 0},{kind:"field",decorators:[(0,n.sz)()],key:"_view",value:function(){return"config"}},{kind:"method",key:"render",value:function(){var e=this;return(0,n.dy)(dt(),this._renderSelectedTraceInfo(),[["config","Step Config"],["changed_variables","Changed Variables"],["logbook","Related logbook entries"]].map((function(t){var r=ut(t,2),i=r[0],o=r[1];return(0,n.dy)(lt(),i,(0,s.$)({active:e._view===i}),e._showTab,o)})),"config"===this._view?this._renderSelectedConfig():"changed_variables"===this._view?this._renderChangedVars():this._renderLogbook())}},{kind:"method",key:"_renderSelectedTraceInfo",value:function(){var e,t=this,r=this.trace.trace;if(!(null===(e=this.selected)||void 0===e?void 0:e.path))return"Select a node on the left for more information.";var i=this.selected.path.split("/");if("default"===i[i.length-1]){var o,a,s=r[i.slice(0,i.length-1).join("/")];if(s&&"default"===(null===(o=s[0])||void 0===o||null===(a=o.result)||void 0===a?void 0:a.choice))return"The default node was executed because no choices matched."}if(!(this.selected.path in r))return"This node was not executed and so no further trace information is available.";var c=r[this.selected.path];return c.map((function(e,r){var i=e,o=(i.path,i.timestamp),a=i.result,s=i.error,l=(i.changed_variables,ct(i,["path","timestamp","result","error","changed_variables"]));return(0,n.dy)(st(),1===c.length?"":(0,n.dy)(at(),r+1),(0,Le.E)(new Date(o),t.hass.locale),a?(0,n.dy)(ot(),(0,qe.safeDump)(a)):s?(0,n.dy)(it(),s):"",0===Object.keys(l).length?"":(0,n.dy)(nt(),(0,qe.safeDump)(l)))}))}},{kind:"method",key:"_renderSelectedConfig",value:function(){var e;if(!(null===(e=this.selected)||void 0===e?void 0:e.path))return"";var t=(0,i.nV)(this.trace.config,this.selected.path);return t?(0,n.dy)(rt(),(0,qe.safeDump)(t).trimRight()):"Unable to find config"}},{kind:"method",key:"_renderChangedVars",value:function(){var e=this.trace.trace[this.selected.path];return(0,n.dy)(tt(),e.map((function(e,t){return(0,n.dy)(et(),t>0?(0,n.dy)(Qe(),t+1):"",0===Object.keys(e.changed_variables||{}).length?"No variables changed":(0,n.dy)(Ge(),(0,qe.safeDump)(e.changed_variables).trimRight()))})))}},{kind:"method",key:"_renderLogbook",value:function(){var e,t=this.trace.trace,r=t[this.selected.path],i=Object.keys(this.trackedNodes),o=i.indexOf(this.selected.path);if(-1===o)return(0,n.dy)(Ke());if(o===i.length-1){var a=new Date(r[0].timestamp),s=this.logbookEntries.findIndex((function(e){return new Date(e.when)>=a}));e=-1===s?[]:this.logbookEntries.slice(s)}else{var c=t[i[o+1]],l=new Date(r[0].timestamp),u=new Date(c[0].timestamp);e=[];var d,f=function(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=Ot(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}(this.logbookEntries||[]);try{for(f.s();!(d=f.n()).done;){var h=d.value,p=new Date(h.when);if(p>=l){if(!(p<u))break;e.push(h)}}}catch(m){f.e(m)}finally{f.f()}}return e.length?(0,n.dy)(Xe(),this.hass,e,this.narrow):(0,n.dy)(Ze())}},{kind:"method",key:"_showTab",value:function(e){this._view=e.target.view}},{kind:"get",static:!0,key:"styles",value:function(){return[Ve,(0,n.iv)(Je())]}}]}}),n.oi);function Ct(e){return(Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jt(){var e=Nt(["\n        :host {\n          display: flex;\n          flex-direction: row;\n        }\n        :host(:not([lastItem])) {\n          min-height: 50px;\n        }\n        :host([label]) {\n          margin-top: -8px;\n          font-style: italic;\n          color: var(--timeline-label-color, var(--secondary-text-color));\n        }\n        .timeline-start {\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          margin-right: 8px;\n          width: 24px;\n        }\n        ha-svg-icon {\n          color: var(\n            --timeline-ball-color,\n            var(--timeline-color, var(--secondary-text-color))\n          );\n          border-radius: 50%;\n        }\n        :host([raised]) ha-svg-icon {\n          transform: scale(1.3);\n        }\n        .line {\n          flex: 1;\n          width: 2px;\n          background-color: var(\n            --timeline-line-color,\n            var(--timeline-color, var(--secondary-text-color))\n          );\n          margin: 4px 0;\n        }\n        .content {\n          margin-top: 2px;\n        }\n        :host(:not([lastItem])) .content {\n          padding-bottom: 16px;\n        }\n        :host([label]) .content {\n          margin-top: 0;\n          padding-top: 6px;\n        }\n      "]);return jt=function(){return e},e}function At(){var e=Nt(['\n                      <button class="link" @click=',">\n                        Show "," more items\n                      </button>\n                    "]);return At=function(){return e},e}function It(){var e=Nt(["\n              <div>\n                ","\n              </div>\n            "]);return It=function(){return e},e}function zt(){var e=Nt(['<div class="line"></div>']);return zt=function(){return e},e}function Rt(){var e=Nt(["\n              <ha-svg-icon .path=","></ha-svg-icon>\n            "]);return Rt=function(){return e},e}function Ft(){var e=Nt(['\n      <div class="timeline-start">\n        ',"\n        ",'\n      </div>\n      <div class="content">\n        <slot></slot>\n        ',"\n      </div>\n    "]);return Ft=function(){return e},e}function Nt(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function Mt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $t(e,t){return($t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Bt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Wt(e);if(t){var i=Wt(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Lt(this,r)}}function Lt(e,t){return!t||"object"!==Ct(t)&&"function"!=typeof t?Ut(e):t}function Ut(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wt(e){return(Wt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qt(){qt=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){["method","field"].forEach((function(r){t.forEach((function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r=e.prototype;["method","field"].forEach((function(n){t.forEach((function(t){var i=t.placement;if(t.kind===n&&("static"===i||"prototype"===i)){var o="static"===i?e:r;this.defineClassElement(o,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var n=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===n?void 0:n.call(e)}}Object.defineProperty(e,t.key,r)},decorateClass:function(e,t){var r=[],n=[],i={static:[],prototype:[],own:[]};if(e.forEach((function(e){this.addElementPlacement(e,i)}),this),e.forEach((function(e){if(!Ht(e))return r.push(e);var t=this.decorateElement(e,i);r.push(t.element),r.push.apply(r,t.extras),n.push.apply(n,t.finishers)}),this),!t)return{elements:r,finishers:n};var o=this.decorateConstructor(r,t);return n.push.apply(n,o.finishers),o.finishers=n,o},addElementPlacement:function(e,t,r){var n=t[e.placement];if(!r&&-1!==n.indexOf(e.key))throw new TypeError("Duplicated element ("+e.key+")");n.push(e.key)},decorateElement:function(e,t){for(var r=[],n=[],i=e.decorators,o=i.length-1;o>=0;o--){var a=t[e.placement];a.splice(a.indexOf(e.key),1);var s=this.fromElementDescriptor(e),c=this.toElementFinisherExtras((0,i[o])(s)||s);e=c.element,this.addElementPlacement(e,t),c.finisher&&n.push(c.finisher);var l=c.extras;if(l){for(var u=0;u<l.length;u++)this.addElementPlacement(l[u],t);r.push.apply(r,l)}}return{element:e,finishers:n,extras:r}},decorateConstructor:function(e,t){for(var r=[],n=t.length-1;n>=0;n--){var i=this.fromClassDescriptor(e),o=this.toClassDescriptor((0,t[n])(i)||i);if(void 0!==o.finisher&&r.push(o.finisher),void 0!==o.elements){e=o.elements;for(var a=0;a<e.length-1;a++)for(var s=a+1;s<e.length;s++)if(e[a].key===e[s].key&&e[a].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[a].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return Object.defineProperty(t,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return(t=e,function(e){if(Array.isArray(e))return e}(t)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return Kt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Kt(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).map((function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=Xt(e.key),n=String(e.placement);if("static"!==n&&"prototype"!==n&&"own"!==n)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+n+'"');var i=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var o={kind:t,key:r,placement:n,descriptor:Object.assign({},i)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(i,"get","The property descriptor of a field descriptor"),this.disallowProperty(i,"set","The property descriptor of a field descriptor"),this.disallowProperty(i,"value","The property descriptor of a field descriptor"),o.initializer=e.initializer),o},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:Zt(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:e.map(this.fromElementDescriptor,this)};return Object.defineProperty(t,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=Zt(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var n=(0,t[r])(e);if(void 0!==n){if("function"!=typeof n)throw new TypeError("Finishers must return a constructor.");e=n}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function Yt(e){var t,r=Xt(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var n={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(n.decorators=e.decorators),"field"===e.kind&&(n.initializer=e.value),n}function Vt(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function Ht(e){return e.decorators&&e.decorators.length}function Jt(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function Zt(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function Xt(e){var t=function(e,t){if("object"!==Ct(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Ct(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ct(t)?t:String(t)}function Kt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}!function(e,t,r,n){var i=qt();if(n)for(var o=0;o<n.length;o++)i=n[o](i);var a=t((function(e){i.initializeInstanceElements(e,s.elements)}),r),s=i.decorateClass(function(e){for(var t=[],r=function(e){return"method"===e.kind&&e.key===o.key&&e.placement===o.placement},n=0;n<e.length;n++){var i,o=e[n];if("method"===o.kind&&(i=t.find(r)))if(Jt(o.descriptor)||Jt(i.descriptor)){if(Ht(o)||Ht(i))throw new ReferenceError("Duplicated methods ("+o.key+") can't be decorated.");i.descriptor=o.descriptor}else{if(Ht(o)){if(Ht(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+o.key+").");i.decorators=o.decorators}Vt(o,i)}else t.push(o)}return t}(a.d.map(Yt)),e);i.initializeClassElements(a.F,s.elements),i.runClassFinishers(a.F,s.finishers)}([(0,n.Mo)("ha-timeline")],(function(e,t){return{F:function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$t(e,t)}(n,t);var r=Bt(n);function n(){var t;Mt(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=r.call.apply(r,[this].concat(o)),e(Ut(t)),t}return n}(t),d:[{kind:"field",decorators:[(0,n.Cb)({type:Boolean,reflect:!0})],key:"label",value:function(){return!1}},{kind:"field",decorators:[(0,n.Cb)({type:Boolean,reflect:!0})],key:"raised",value:function(){return!1}},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"lastItem",value:function(){return!1}},{kind:"field",decorators:[(0,n.Cb)({type:String})],key:"icon",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"moreItems",value:void 0},{kind:"field",decorators:[(0,n.sz)()],key:"_showMore",value:function(){return!1}},{kind:"method",key:"render",value:function(){return(0,n.dy)(Ft(),this.label?"":(0,n.dy)(Rt(),this.icon||a.KS$),this.lastItem?"":(0,n.dy)(zt()),this.moreItems?(0,n.dy)(It(),this._showMore||1===this.moreItems.length?this.moreItems:(0,n.dy)(At(),this._handleShowMore,this.moreItems.length)):"")}},{kind:"method",key:"_handleShowMore",value:function(){this._showMore=!0}},{kind:"get",static:!0,key:"styles",value:function(){return[(0,n.iv)(jt()),Me.k1]}}]}}),n.oi);var Gt=r(44547),Qt=r(5435),er=r(91168),tr=r(91741),rr=r(61761);function nr(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=or(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function ir(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||or(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function or(e,t){if(e){if("string"==typeof e)return ar(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ar(e,t):void 0}}function ar(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var sr=r(49629);function cr(e){return(cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lr(){var e=zr(["\n        ha-timeline[lastItem].condition {\n          --timeline-ball-color: var(--error-color);\n        }\n        ha-timeline[data-path] {\n          cursor: pointer;\n        }\n        ha-timeline[selected] {\n          --timeline-ball-color: var(--primary-color);\n        }\n        ha-timeline:focus {\n          outline: none;\n          --timeline-ball-color: var(--accent-color);\n        }\n        .error {\n          --timeline-ball-color: var(--error-color);\n          color: var(--error-color);\n        }\n      "]);return lr=function(){return e},e}function ur(){var e=zr(["",""]);return ur=function(){return e},e}function dr(){var e=zr(["\n        <ha-timeline\n          lastItem\n          .icon=","\n          class=","\n        >\n          ","\n        </ha-timeline>\n      "]);return dr=function(){return e},e}function fr(){var e=zr(["Stopped because "," at ","\n        ","",""]);return fr=function(){return e},e}function hr(){var e=zr(["<br /><br />",""]);return hr=function(){return e},e}function pr(){var e=zr([""]);return pr=function(){return e},e}function mr(e,t){return(mr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Dr(e);if(t){var i=Dr(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return yr(this,r)}}function yr(e,t){return!t||"object"!==cr(t)&&"function"!=typeof t?br(e):t}function br(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gr(){gr=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){["method","field"].forEach((function(r){t.forEach((function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r=e.prototype;["method","field"].forEach((function(n){t.forEach((function(t){var i=t.placement;if(t.kind===n&&("static"===i||"prototype"===i)){var o="static"===i?e:r;this.defineClassElement(o,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var n=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===n?void 0:n.call(e)}}Object.defineProperty(e,t.key,r)},decorateClass:function(e,t){var r=[],n=[],i={static:[],prototype:[],own:[]};if(e.forEach((function(e){this.addElementPlacement(e,i)}),this),e.forEach((function(e){if(!Er(e))return r.push(e);var t=this.decorateElement(e,i);r.push(t.element),r.push.apply(r,t.extras),n.push.apply(n,t.finishers)}),this),!t)return{elements:r,finishers:n};var o=this.decorateConstructor(r,t);return n.push.apply(n,o.finishers),o.finishers=n,o},addElementPlacement:function(e,t,r){var n=t[e.placement];if(!r&&-1!==n.indexOf(e.key))throw new TypeError("Duplicated element ("+e.key+")");n.push(e.key)},decorateElement:function(e,t){for(var r=[],n=[],i=e.decorators,o=i.length-1;o>=0;o--){var a=t[e.placement];a.splice(a.indexOf(e.key),1);var s=this.fromElementDescriptor(e),c=this.toElementFinisherExtras((0,i[o])(s)||s);e=c.element,this.addElementPlacement(e,t),c.finisher&&n.push(c.finisher);var l=c.extras;if(l){for(var u=0;u<l.length;u++)this.addElementPlacement(l[u],t);r.push.apply(r,l)}}return{element:e,finishers:n,extras:r}},decorateConstructor:function(e,t){for(var r=[],n=t.length-1;n>=0;n--){var i=this.fromClassDescriptor(e),o=this.toClassDescriptor((0,t[n])(i)||i);if(void 0!==o.finisher&&r.push(o.finisher),void 0!==o.elements){e=o.elements;for(var a=0;a<e.length-1;a++)for(var s=a+1;s<e.length;s++)if(e[a].key===e[s].key&&e[a].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[a].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return Object.defineProperty(t,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return(t=e,function(e){if(Array.isArray(e))return e}(t)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return Sr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Sr(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).map((function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=xr(e.key),n=String(e.placement);if("static"!==n&&"prototype"!==n&&"own"!==n)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+n+'"');var i=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var o={kind:t,key:r,placement:n,descriptor:Object.assign({},i)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(i,"get","The property descriptor of a field descriptor"),this.disallowProperty(i,"set","The property descriptor of a field descriptor"),this.disallowProperty(i,"value","The property descriptor of a field descriptor"),o.initializer=e.initializer),o},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:Pr(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:e.map(this.fromElementDescriptor,this)};return Object.defineProperty(t,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=Pr(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var n=(0,t[r])(e);if(void 0!==n){if("function"!=typeof n)throw new TypeError("Finishers must return a constructor.");e=n}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function kr(e){var t,r=xr(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var n={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(n.decorators=e.decorators),"field"===e.kind&&(n.initializer=e.value),n}function wr(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function Er(e){return e.decorators&&e.decorators.length}function _r(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function Pr(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function xr(e){var t=function(e,t){if("object"!==cr(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==cr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===cr(t)?t:String(t)}function Sr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Or(e,t,r){return(Or="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Dr(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function Dr(e){return(Dr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Tr(){var e=zr(["\n      <ha-timeline .icon="," data-path=",">\n        ","\n      </ha-timeline>\n    "]);return Tr=function(){return e},e}function Cr(){var e=zr(["Unable to extract path ",". Download trace and report as bug"]);return Cr=function(){return e},e}function jr(){var e=zr([""," (",")\n      ","<br />"]);return jr=function(){return e},e}function Ar(){var e=zr(["\n      <ha-timeline .icon="," .moreItems=",">\n        ","\n      </ha-timeline>\n    "]);return Ar=function(){return e},e}function Ir(){var e=zr(["\n      <ha-timeline label>\n        ","\n        later\n      </ha-timeline>\n    "]);return Ir=function(){return e},e}function zr(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function Rr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Nr(e,t,r){return t&&Fr(e.prototype,t),r&&Fr(e,r),e}function Mr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var $r=function(e,t){return Math.abs(t.getTime()-e.getTime())>1e3},Br=function(){function e(t,r,n){Rr(this,e),this.hass=t,this.entries=r,Mr(this,"lastReportedTime",void 0),this.lastReportedTime=new Date(n.timestamp.start)}return Nr(e,[{key:"setLastReportedTime",value:function(e){this.lastReportedTime=e}},{key:"renderTime",value:function(e,t){this.entries.push((0,n.dy)(Ir(),(0,Qt.Z)(e,this.hass.localize,{compareTime:t,includeTense:!1}))),this.lastReportedTime=t}},{key:"maybeRenderTime",value:function(e){return $r(e,this.lastReportedTime)?(this.renderTime(this.lastReportedTime,e),!0):(this.lastReportedTime=e,!1)}}]),e}(),Lr=function(){function e(t,r,n){Rr(this,e),this.entries=t,this.timeTracker=r,this.logbookEntries=n,Mr(this,"curIndex",void 0),Mr(this,"pendingItems",[]),this.curIndex=n.length>0&&"automation"===n[0].domain?1:0}return Nr(e,[{key:"maybeRenderItem",value:function(){var e=this.curItem;this.curIndex++;var t=new Date(e.when);if(0!==this.pendingItems.length){var r=this.pendingItems[this.pendingItems.length-1][0];$r(r,t)&&(this._renderLogbookEntries(),this.timeTracker.renderTime(r,t)),this.pendingItems.push([t,e])}else this.pendingItems.push([t,e])}},{key:"flush",value:function(){this.pendingItems.length>0&&this._renderLogbookEntries()}},{key:"_renderLogbookEntries",value:function(){this.timeTracker.maybeRenderTime(this.pendingItems[0][0]);var e,t,r=[];for(e=0;e<Math.min(this.pendingItems.length,2);e++)r.push(this._renderLogbookEntryHelper(this.pendingItems[e][1]));if(e<this.pendingItems.length)for(t=[];e<this.pendingItems.length;e++)t.push(this._renderLogbookEntryHelper(this.pendingItems[e][1]));this.entries.push((0,n.dy)(Ar(),a.KS$,t,r)),this.timeTracker.setLastReportedTime(this.pendingItems[this.pendingItems.length-1][0]),this.pendingItems=[]}},{key:"_renderLogbookEntryHelper",value:function(e){return(0,n.dy)(jr(),e.name,e.entity_id,e.message||"turned ".concat(e.state))}},{key:"curItem",get:function(){return this.logbookEntries[this.curIndex]}},{key:"hasNext",get:function(){return this.curIndex!==this.logbookEntries.length}}]),e}(),Ur=function(){function e(t,r,n,i,o){Rr(this,e),this.hass=t,this.entries=r,this.trace=n,this.logbookRenderer=i,this.timeTracker=o,Mr(this,"curIndex",0),Mr(this,"keys",void 0),this.keys=Object.keys(n.trace)}return Nr(e,[{key:"renderItem",value:function(){this.curIndex=this._renderItem(this.curIndex)}},{key:"_getItem",value:function(e){return this.trace.trace[this.keys[e]]}},{key:"_renderItem",value:function(e,t){var r=this._getItem(e);if((0,i.Zm)(r[0].path))return this._handleTrigger(e,r[0]);for(var o=new Date(r[0].timestamp);this.logbookRenderer.hasNext&&new Date(this.logbookRenderer.curItem.when)<o;)this.logbookRenderer.maybeRenderItem();this.logbookRenderer.flush(),this.timeTracker.maybeRenderTime(o);var a,s=r[0].path;try{a=(0,i.nV)(this.trace.config,s)}catch(c){return this.entries.push((0,n.dy)(Cr(),s)),e+1}return 2===s.split("/").length||t?(t||(t=(0,Gt.Pw)(a)),"choose"===t?this._handleChoose(e):(this._renderEntry(s,function(e,t,r){if(t.alias)return t.alias;if(r||(r=(0,Gt.Pw)(t)),"service"===r){var n,i=t;if(i.service_template||i.service&&(0,rr.J)(i.service))n="Call a service based on a template";else{if(!i.service)return r;n="Call service ".concat(i.service)}if(i.target){for(var o=[],a=0,s=Object.entries({area_id:"areas",device_id:"devices",entity_id:"entities"});a<s.length;a++){var l=ir(s[a],2),u=l[0],d=l[1];if(u in i.target){var f,h=[],p=!0,m=nr(Array.isArray(i.target[u])?i.target[u]:[i.target[u]]);try{for(m.s();!(f=m.n()).done;){var v=f.value;if((0,rr.J)(v)){o.push("templated ".concat(d)),p=!1;break}h.push(v)}}catch(c){m.e(c)}finally{m.f()}p&&o.push("".concat(d," ").concat(h.join(", ")))}}o.length>0&&(n+=" on ".concat(o.join(", ")))}return n}if("delay"===r){var y,b=t;return y="number"==typeof b.delay?"for ".concat((0,er.Z)(b.delay)):"string"==typeof b.delay?(0,rr.J)(b.delay)?"based on a template":"for ".concat(b.delay):"for ".concat(JSON.stringify(b.delay)),"Delay ".concat(y)}if("activate_scene"===r){var g=t,k=e.states[g.scene];return"Activate scene ".concat(k?(0,tr.C)(k):g.scene)}if("wait_for_trigger"===r){var w=t;return"Wait for ".concat((0,ne.r)(w.wait_for_trigger).map((function(e){return function(e){return"".concat(e.platform," trigger")}(e)})).join(", "))}if("variables"===r){var E=t;return"Define variables ".concat(Object.keys(E.variables).join(", "))}if("fire_event"===r){var _=t;return(0,rr.J)(_.event)?"Fire event based on a template":"Fire event ".concat(_.event)}return"wait_template"===r?"Wait for a template to render true":"check_condition"===r?"Test ".concat((P=t).alias?P.alias:"template"===P.condition?"Test a template":"".concat(P.condition," condition")):r;var P}(this.hass,a,t)),e+1)):(this._renderEntry(s,s.replace(/\//g," ")),e+1)}},{key:"_handleTrigger",value:function(e,t){return this._renderEntry(t.path,"Triggered ".concat("trigger"===t.path?"manually":"by the ".concat(this.trace.trigger)," at\n    ").concat((0,Le.E)(new Date(t.timestamp),this.hass.locale)),a.mdD),e+1}},{key:"_handleChoose",value:function(e){var t,r,n=this.keys[e],i=n.split("/").length-1,o=this._getItem(e)[0],a="default"===(null===(t=o.result)||void 0===t?void 0:t.choice),s=this._getDataFromPath(this.keys[e]).alias||"Choose";if(a)this._renderEntry(n,"".concat(s,": Default action executed"));else{var c,l,u=this._getDataFromPath("".concat(this.keys[e],"/choose/").concat(null===(c=o.result)||void 0===c?void 0:c.choice)),d=u?"".concat(u.alias||"Choice ".concat(null===(l=o.result)||void 0===l?void 0:l.choice)," executed"):"Error: ".concat(o.error);this._renderEntry(n,"".concat(s,": ").concat(d))}for(r=e+1;r<this.keys.length;r++){var f=this.keys[r].split("/");if(f.length<=i)return r;if(a&&"default"===f[i+1]||!a&&"sequence"===f[i+3])break}for(;r<this.keys.length;){var h=this.keys[r];if(h.split("/").length<=i)return r;r=this._renderItem(r,(0,Gt.Pw)(this._getDataFromPath(h)))}return r}},{key:"_renderEntry",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.U3w;this.entries.push((0,n.dy)(Tr(),r,e,t))}},{key:"_getDataFromPath",value:function(e){return(0,i.nV)(this.trace.config,e)}},{key:"curItem",get:function(){return this._getItem(this.curIndex)}},{key:"hasNext",get:function(){return this.curIndex!==this.keys.length}}]),e}();!function(e,t,r,n){var i=gr();if(n)for(var o=0;o<n.length;o++)i=n[o](i);var a=t((function(e){i.initializeInstanceElements(e,s.elements)}),r),s=i.decorateClass(function(e){for(var t=[],r=function(e){return"method"===e.kind&&e.key===o.key&&e.placement===o.placement},n=0;n<e.length;n++){var i,o=e[n];if("method"===o.kind&&(i=t.find(r)))if(_r(o.descriptor)||_r(i.descriptor)){if(Er(o)||Er(i))throw new ReferenceError("Duplicated methods ("+o.key+") can't be decorated.");i.descriptor=o.descriptor}else{if(Er(o)){if(Er(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+o.key+").");i.decorators=o.decorators}wr(o,i)}else t.push(o)}return t}(a.d.map(kr)),e);i.initializeClassElements(a.F,s.elements),i.runClassFinishers(a.F,s.finishers)}([(0,n.Mo)("hat-trace-timeline")],(function(e,t){var r=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mr(e,t)}(n,t);var r=vr(n);function n(){var t;Rr(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=r.call.apply(r,[this].concat(o)),e(br(t)),t}return n}(t);return{F:r,d:[{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"trace",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"logbookEntries",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"selectedPath",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"allowPick",value:function(){return!1}},{kind:"method",key:"render",value:function(){var e=this;if(!this.trace)return(0,n.dy)(pr());for(var t=[],r=new Br(this.hass,t,this.trace),i=new Lr(t,r,this.logbookEntries||[]),o=new Ur(this.hass,t,this.trace,i,r);o.hasNext;)o.renderItem();for(;i.hasNext;)i.maybeRenderItem();i.flush();var s,c=function(){return(0,Le.E)(new Date(e.trace.timestamp.finish),e.hass.locale)},l=function(){return"(runtime:\n      ".concat(((new Date(e.trace.timestamp.finish).getTime()-new Date(e.trace.timestamp.start).getTime())/1e3).toFixed(2),"\n      seconds)")};if("running"===this.trace.state)s={description:"Still running",icon:a.plV};else if("debugged"===this.trace.state)s={description:"Debugged",icon:a.Oy8};else if("finished"===this.trace.script_execution)s={description:"Finished at ".concat(c()," ").concat(l()),icon:a.mdD};else if("aborted"===this.trace.script_execution)s={description:"Aborted at ".concat(c()," ").concat(l()),icon:a.fr4};else if("cancelled"===this.trace.script_execution)s={description:"Cancelled at ".concat(c()," ").concat(l()),icon:a.fr4};else{var u,d,f=!1;switch(this.trace.script_execution){case"failed_condition":u="a condition failed";break;case"failed_single":u="only a single execution is allowed";break;case"failed_max_runs":u="maximum number of parallel runs reached";break;case"error":u="an error was encountered",f=!0,d=(0,n.dy)(hr(),this.trace.error);break;default:u='of unknown reason "'.concat(this.trace.script_execution,'"'),f=!0}s={description:(0,n.dy)(fr(),u,c(),l(),d||""),icon:a.fr4,className:f?"error":void 0}}return s&&t.push((0,n.dy)(dr(),s.icon,(0,sr.o)(s.className),s.description)),(0,n.dy)(ur(),t)}},{kind:"method",key:"updated",value:function(e){var t=this;if(Or(Dr(r.prototype),"updated",this).call(this,e),this.allowPick&&e.has("trace")&&this.trace&&this.selectedPath&&!(this.selectedPath in this.trace.trace)){var n=this.shadowRoot.querySelector("ha-timeline[data-path]");n&&((0,o.B)(this,"value-changed",{value:n.dataset.path}),this.selectedPath=n.dataset.path)}(e.has("trace")||e.has("selectedPath"))&&this.shadowRoot.querySelectorAll("ha-timeline[data-path]").forEach((function(e){if(e.toggleAttribute("selected",t.selectedPath===e.dataset.path),t.allowPick&&0!==e.tabIndex){e.tabIndex=0;var r=function(){t.selectedPath=e.dataset.path,(0,o.B)(t,"value-changed",{value:e.dataset.path})};e.addEventListener("click",r),e.addEventListener("keydown",(function(e){"Enter"!==e.key&&" "!==e.key||r()})),e.addEventListener("mouseover",(function(){e.raised=!0})),e.addEventListener("mouseout",(function(){e.raised=!1}))}}))}},{kind:"get",static:!0,key:"styles",value:function(){return[(0,n.iv)(lr())]}}]}}),n.oi);function Wr(e){return(Wr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qr(){var e=Vr(["\n        :host {\n          display: block;\n          padding: 16px;\n        }\n      "]);return qr=function(){return e},e}function Yr(){var e=Vr(["\n      <hat-trace-timeline\n        .hass=","\n        .trace=","\n        .logbookEntries=","\n        .selectedPath=","\n        allowPick\n      >\n      </hat-trace-timeline>\n    "]);return Yr=function(){return e},e}function Vr(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function Hr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jr(e,t){return(Jr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Zr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Gr(e);if(t){var i=Gr(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Xr(this,r)}}function Xr(e,t){return!t||"object"!==Wr(t)&&"function"!=typeof t?Kr(e):t}function Kr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gr(e){return(Gr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qr(){Qr=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){["method","field"].forEach((function(r){t.forEach((function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r=e.prototype;["method","field"].forEach((function(n){t.forEach((function(t){var i=t.placement;if(t.kind===n&&("static"===i||"prototype"===i)){var o="static"===i?e:r;this.defineClassElement(o,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var n=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===n?void 0:n.call(e)}}Object.defineProperty(e,t.key,r)},decorateClass:function(e,t){var r=[],n=[],i={static:[],prototype:[],own:[]};if(e.forEach((function(e){this.addElementPlacement(e,i)}),this),e.forEach((function(e){if(!rn(e))return r.push(e);var t=this.decorateElement(e,i);r.push(t.element),r.push.apply(r,t.extras),n.push.apply(n,t.finishers)}),this),!t)return{elements:r,finishers:n};var o=this.decorateConstructor(r,t);return n.push.apply(n,o.finishers),o.finishers=n,o},addElementPlacement:function(e,t,r){var n=t[e.placement];if(!r&&-1!==n.indexOf(e.key))throw new TypeError("Duplicated element ("+e.key+")");n.push(e.key)},decorateElement:function(e,t){for(var r=[],n=[],i=e.decorators,o=i.length-1;o>=0;o--){var a=t[e.placement];a.splice(a.indexOf(e.key),1);var s=this.fromElementDescriptor(e),c=this.toElementFinisherExtras((0,i[o])(s)||s);e=c.element,this.addElementPlacement(e,t),c.finisher&&n.push(c.finisher);var l=c.extras;if(l){for(var u=0;u<l.length;u++)this.addElementPlacement(l[u],t);r.push.apply(r,l)}}return{element:e,finishers:n,extras:r}},decorateConstructor:function(e,t){for(var r=[],n=t.length-1;n>=0;n--){var i=this.fromClassDescriptor(e),o=this.toClassDescriptor((0,t[n])(i)||i);if(void 0!==o.finisher&&r.push(o.finisher),void 0!==o.elements){e=o.elements;for(var a=0;a<e.length-1;a++)for(var s=a+1;s<e.length;s++)if(e[a].key===e[s].key&&e[a].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[a].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return Object.defineProperty(t,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return(t=e,function(e){if(Array.isArray(e))return e}(t)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return sn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?sn(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).map((function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=an(e.key),n=String(e.placement);if("static"!==n&&"prototype"!==n&&"own"!==n)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+n+'"');var i=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var o={kind:t,key:r,placement:n,descriptor:Object.assign({},i)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(i,"get","The property descriptor of a field descriptor"),this.disallowProperty(i,"set","The property descriptor of a field descriptor"),this.disallowProperty(i,"value","The property descriptor of a field descriptor"),o.initializer=e.initializer),o},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:on(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:e.map(this.fromElementDescriptor,this)};return Object.defineProperty(t,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=on(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var n=(0,t[r])(e);if(void 0!==n){if("function"!=typeof n)throw new TypeError("Finishers must return a constructor.");e=n}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function en(e){var t,r=an(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var n={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(n.decorators=e.decorators),"field"===e.kind&&(n.initializer=e.value),n}function tn(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function rn(e){return e.decorators&&e.decorators.length}function nn(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function on(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function an(e){var t=function(e,t){if("object"!==Wr(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Wr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Wr(t)?t:String(t)}function sn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}!function(e,t,r,n){var i=Qr();if(n)for(var o=0;o<n.length;o++)i=n[o](i);var a=t((function(e){i.initializeInstanceElements(e,s.elements)}),r),s=i.decorateClass(function(e){for(var t=[],r=function(e){return"method"===e.kind&&e.key===o.key&&e.placement===o.placement},n=0;n<e.length;n++){var i,o=e[n];if("method"===o.kind&&(i=t.find(r)))if(nn(o.descriptor)||nn(i.descriptor)){if(rn(o)||rn(i))throw new ReferenceError("Duplicated methods ("+o.key+") can't be decorated.");i.descriptor=o.descriptor}else{if(rn(o)){if(rn(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+o.key+").");i.decorators=o.decorators}tn(o,i)}else t.push(o)}return t}(a.d.map(en)),e);i.initializeClassElements(a.F,s.elements),i.runClassFinishers(a.F,s.finishers)}([(0,n.Mo)("ha-automation-trace-timeline")],(function(e,t){return{F:function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jr(e,t)}(n,t);var r=Zr(n);function n(){var t;Hr(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=r.call.apply(r,[this].concat(o)),e(Kr(t)),t}return n}(t),d:[{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.Cb)()],key:"trace",value:void 0},{kind:"field",decorators:[(0,n.Cb)()],key:"logbookEntries",value:void 0},{kind:"field",decorators:[(0,n.Cb)()],key:"selected",value:void 0},{kind:"method",key:"render",value:function(){return(0,n.dy)(Yr(),this.hass,this.trace,this.logbookEntries,this.selected.path)}},{kind:"get",static:!0,key:"styles",value:function(){return[(0,n.iv)(qr())]}}]}}),n.oi);function cn(e){return(cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ln(){var e=dn([""]);return ln=function(){return e},e}function un(){var e=dn(["\n      <ha-code-editor\n        .value=","\n        readOnly\n      ></ha-code-editor>\n    "]);return un=function(){return e},e}function dn(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function fn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hn(e,t){return(hn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=yn(e);if(t){var i=yn(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return mn(this,r)}}function mn(e,t){return!t||"object"!==cn(t)&&"function"!=typeof t?vn(e):t}function vn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yn(e){return(yn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bn(){bn=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){["method","field"].forEach((function(r){t.forEach((function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r=e.prototype;["method","field"].forEach((function(n){t.forEach((function(t){var i=t.placement;if(t.kind===n&&("static"===i||"prototype"===i)){var o="static"===i?e:r;this.defineClassElement(o,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var n=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===n?void 0:n.call(e)}}Object.defineProperty(e,t.key,r)},decorateClass:function(e,t){var r=[],n=[],i={static:[],prototype:[],own:[]};if(e.forEach((function(e){this.addElementPlacement(e,i)}),this),e.forEach((function(e){if(!wn(e))return r.push(e);var t=this.decorateElement(e,i);r.push(t.element),r.push.apply(r,t.extras),n.push.apply(n,t.finishers)}),this),!t)return{elements:r,finishers:n};var o=this.decorateConstructor(r,t);return n.push.apply(n,o.finishers),o.finishers=n,o},addElementPlacement:function(e,t,r){var n=t[e.placement];if(!r&&-1!==n.indexOf(e.key))throw new TypeError("Duplicated element ("+e.key+")");n.push(e.key)},decorateElement:function(e,t){for(var r=[],n=[],i=e.decorators,o=i.length-1;o>=0;o--){var a=t[e.placement];a.splice(a.indexOf(e.key),1);var s=this.fromElementDescriptor(e),c=this.toElementFinisherExtras((0,i[o])(s)||s);e=c.element,this.addElementPlacement(e,t),c.finisher&&n.push(c.finisher);var l=c.extras;if(l){for(var u=0;u<l.length;u++)this.addElementPlacement(l[u],t);r.push.apply(r,l)}}return{element:e,finishers:n,extras:r}},decorateConstructor:function(e,t){for(var r=[],n=t.length-1;n>=0;n--){var i=this.fromClassDescriptor(e),o=this.toClassDescriptor((0,t[n])(i)||i);if(void 0!==o.finisher&&r.push(o.finisher),void 0!==o.elements){e=o.elements;for(var a=0;a<e.length-1;a++)for(var s=a+1;s<e.length;s++)if(e[a].key===e[s].key&&e[a].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[a].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return Object.defineProperty(t,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return(t=e,function(e){if(Array.isArray(e))return e}(t)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return xn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?xn(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).map((function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=Pn(e.key),n=String(e.placement);if("static"!==n&&"prototype"!==n&&"own"!==n)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+n+'"');var i=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var o={kind:t,key:r,placement:n,descriptor:Object.assign({},i)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(i,"get","The property descriptor of a field descriptor"),this.disallowProperty(i,"set","The property descriptor of a field descriptor"),this.disallowProperty(i,"value","The property descriptor of a field descriptor"),o.initializer=e.initializer),o},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:_n(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:e.map(this.fromElementDescriptor,this)};return Object.defineProperty(t,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=_n(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var n=(0,t[r])(e);if(void 0!==n){if("function"!=typeof n)throw new TypeError("Finishers must return a constructor.");e=n}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function gn(e){var t,r=Pn(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var n={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(n.decorators=e.decorators),"field"===e.kind&&(n.initializer=e.value),n}function kn(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function wn(e){return e.decorators&&e.decorators.length}function En(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function _n(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function Pn(e){var t=function(e,t){if("object"!==cn(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==cn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===cn(t)?t:String(t)}function xn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}!function(e,t,r,n){var i=bn();if(n)for(var o=0;o<n.length;o++)i=n[o](i);var a=t((function(e){i.initializeInstanceElements(e,s.elements)}),r),s=i.decorateClass(function(e){for(var t=[],r=function(e){return"method"===e.kind&&e.key===o.key&&e.placement===o.placement},n=0;n<e.length;n++){var i,o=e[n];if("method"===o.kind&&(i=t.find(r)))if(En(o.descriptor)||En(i.descriptor)){if(wn(o)||wn(i))throw new ReferenceError("Duplicated methods ("+o.key+") can't be decorated.");i.descriptor=o.descriptor}else{if(wn(o)){if(wn(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+o.key+").");i.decorators=o.decorators}kn(o,i)}else t.push(o)}return t}(a.d.map(gn)),e);i.initializeClassElements(a.F,s.elements),i.runClassFinishers(a.F,s.finishers)}([(0,n.Mo)("ha-automation-trace-config")],(function(e,t){return{F:function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hn(e,t)}(n,t);var r=pn(n);function n(){var t;fn(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=r.call.apply(r,[this].concat(o)),e(vn(t)),t}return n}(t),d:[{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.Cb)()],key:"trace",value:void 0},{kind:"method",key:"render",value:function(){return(0,n.dy)(un(),(0,qe.safeDump)(this.trace.config).trimRight())}},{kind:"get",static:!0,key:"styles",value:function(){return[(0,n.iv)(ln())]}}]}}),n.oi);function Sn(e){return(Sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function On(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n      <ha-code-editor\n        .value=","\n        readOnly\n      ></ha-code-editor>\n    "]);return On=function(){return e},e}function Dn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tn(e,t){return(Tn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Cn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=In(e);if(t){var i=In(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return jn(this,r)}}function jn(e,t){return!t||"object"!==Sn(t)&&"function"!=typeof t?An(e):t}function An(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function In(e){return(In=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zn(){zn=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){["method","field"].forEach((function(r){t.forEach((function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r=e.prototype;["method","field"].forEach((function(n){t.forEach((function(t){var i=t.placement;if(t.kind===n&&("static"===i||"prototype"===i)){var o="static"===i?e:r;this.defineClassElement(o,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var n=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===n?void 0:n.call(e)}}Object.defineProperty(e,t.key,r)},decorateClass:function(e,t){var r=[],n=[],i={static:[],prototype:[],own:[]};if(e.forEach((function(e){this.addElementPlacement(e,i)}),this),e.forEach((function(e){if(!Nn(e))return r.push(e);var t=this.decorateElement(e,i);r.push(t.element),r.push.apply(r,t.extras),n.push.apply(n,t.finishers)}),this),!t)return{elements:r,finishers:n};var o=this.decorateConstructor(r,t);return n.push.apply(n,o.finishers),o.finishers=n,o},addElementPlacement:function(e,t,r){var n=t[e.placement];if(!r&&-1!==n.indexOf(e.key))throw new TypeError("Duplicated element ("+e.key+")");n.push(e.key)},decorateElement:function(e,t){for(var r=[],n=[],i=e.decorators,o=i.length-1;o>=0;o--){var a=t[e.placement];a.splice(a.indexOf(e.key),1);var s=this.fromElementDescriptor(e),c=this.toElementFinisherExtras((0,i[o])(s)||s);e=c.element,this.addElementPlacement(e,t),c.finisher&&n.push(c.finisher);var l=c.extras;if(l){for(var u=0;u<l.length;u++)this.addElementPlacement(l[u],t);r.push.apply(r,l)}}return{element:e,finishers:n,extras:r}},decorateConstructor:function(e,t){for(var r=[],n=t.length-1;n>=0;n--){var i=this.fromClassDescriptor(e),o=this.toClassDescriptor((0,t[n])(i)||i);if(void 0!==o.finisher&&r.push(o.finisher),void 0!==o.elements){e=o.elements;for(var a=0;a<e.length-1;a++)for(var s=a+1;s<e.length;s++)if(e[a].key===e[s].key&&e[a].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[a].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return Object.defineProperty(t,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return(t=e,function(e){if(Array.isArray(e))return e}(t)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return Ln(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ln(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).map((function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=Bn(e.key),n=String(e.placement);if("static"!==n&&"prototype"!==n&&"own"!==n)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+n+'"');var i=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var o={kind:t,key:r,placement:n,descriptor:Object.assign({},i)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(i,"get","The property descriptor of a field descriptor"),this.disallowProperty(i,"set","The property descriptor of a field descriptor"),this.disallowProperty(i,"value","The property descriptor of a field descriptor"),o.initializer=e.initializer),o},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:$n(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:e.map(this.fromElementDescriptor,this)};return Object.defineProperty(t,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=$n(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var n=(0,t[r])(e);if(void 0!==n){if("function"!=typeof n)throw new TypeError("Finishers must return a constructor.");e=n}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function Rn(e){var t,r=Bn(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var n={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(n.decorators=e.decorators),"field"===e.kind&&(n.initializer=e.value),n}function Fn(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function Nn(e){return e.decorators&&e.decorators.length}function Mn(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function $n(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function Bn(e){var t=function(e,t){if("object"!==Sn(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Sn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Sn(t)?t:String(t)}function Ln(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}!function(e,t,r,n){var i=zn();if(n)for(var o=0;o<n.length;o++)i=n[o](i);var a=t((function(e){i.initializeInstanceElements(e,s.elements)}),r),s=i.decorateClass(function(e){for(var t=[],r=function(e){return"method"===e.kind&&e.key===o.key&&e.placement===o.placement},n=0;n<e.length;n++){var i,o=e[n];if("method"===o.kind&&(i=t.find(r)))if(Mn(o.descriptor)||Mn(i.descriptor)){if(Nn(o)||Nn(i))throw new ReferenceError("Duplicated methods ("+o.key+") can't be decorated.");i.descriptor=o.descriptor}else{if(Nn(o)){if(Nn(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+o.key+").");i.decorators=o.decorators}Fn(o,i)}else t.push(o)}return t}(a.d.map(Rn)),e);i.initializeClassElements(a.F,s.elements),i.runClassFinishers(a.F,s.finishers)}([(0,n.Mo)("ha-automation-trace-blueprint-config")],(function(e,t){return{F:function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tn(e,t)}(n,t);var r=Cn(n);function n(){var t;Dn(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=r.call.apply(r,[this].concat(o)),e(An(t)),t}return n}(t),d:[{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.Cb)()],key:"trace",value:void 0},{kind:"method",key:"render",value:function(){return(0,n.dy)(On(),(0,qe.safeDump)(this.trace.blueprint_inputs||"").trimRight())}}]}}),n.oi);function Un(e){return(Un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wn(){var e=ui(["\n        .toolbar {\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n          font-size: 20px;\n          height: var(--header-height);\n          padding: 0 16px;\n          background-color: var(--primary-background-color);\n          font-weight: 400;\n          color: var(--app-header-text-color, white);\n          border-bottom: var(--app-header-border-bottom, none);\n          box-sizing: border-box;\n        }\n\n        .toolbar > * {\n          display: flex;\n          align-items: center;\n        }\n\n        :host([narrow]) .toolbar > * {\n          display: contents;\n        }\n\n        .main {\n          height: calc(100% - 56px);\n          display: flex;\n          background-color: var(--card-background-color);\n        }\n\n        :host([narrow]) .main {\n          height: auto;\n          flex-direction: column;\n        }\n\n        .container {\n          padding: 16px;\n        }\n\n        .graph {\n          border-right: 1px solid var(--divider-color);\n          overflow-x: auto;\n          max-width: 50%;\n        }\n        :host([narrow]) .graph {\n          max-width: 100%;\n        }\n\n        .info {\n          flex: 1;\n          background-color: var(--card-background-color);\n        }\n\n        .linkButton {\n          color: var(--primary-text-color);\n        }\n      "]);return Wn=function(){return e},e}function qn(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}function Yn(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){qn(o,n,i,a,s,"next",e)}function s(e){qn(o,n,i,a,s,"throw",e)}a(void 0)}))}}function Vn(){var e=ui(["\n                        <ha-automation-trace-timeline\n                          .hass=","\n                          .trace=","\n                          .logbookEntries=","\n                          .selected=","\n                          @value-changed=","\n                        ></ha-automation-trace-timeline>\n                      "]);return Vn=function(){return e},e}function Hn(){var e=ui(["\n                        <ha-automation-trace-blueprint-config\n                          .hass=","\n                          .trace=","\n                        ></ha-automation-trace-blueprint-config>\n                      "]);return Hn=function(){return e},e}function Jn(){var e=ui(["\n                        <ha-logbook\n                          .hass=","\n                          .entries=","\n                        ></ha-logbook>\n                      "]);return Jn=function(){return e},e}function Zn(){var e=ui(["\n                        <ha-automation-trace-config\n                          .hass=","\n                          .trace=","\n                        ></ha-automation-trace-config>\n                      "]);return Zn=function(){return e},e}function Xn(){var e=ui(["\n                        <ha-automation-trace-path-details\n                          .hass=","\n                          .narrow=","\n                          .trace=","\n                          .selected=","\n                          .logbookEntries=","\n                          .trackedNodes=","\n                        ></ha-automation-trace-path-details>\n                      "]);return Xn=function(){return e},e}function Kn(){var e=ui(['\n                          <button\n                            tabindex="0"\n                            .view=',"\n                            class=","\n                            @click=","\n                          >\n                            Blueprint Config\n                          </div>\n                        "]);return Kn=function(){return e},e}function Gn(){var e=ui(['\n                        <button\n                          tabindex="0"\n                          .view=',"\n                          class=","\n                          @click=","\n                        >\n                          ","\n                        </button>\n                      "]);return Gn=function(){return e},e}function Qn(e,t){return Si(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||Pi(e,t)||_i()}function ei(){var e=ui(['\n              <div class="main">\n                <div class="graph">\n                  <hat-script-graph\n                    .trace=',"\n                    .selected=","\n                    @graph-node-selected=",'\n                  ></hat-script-graph>\n                </div>\n\n                <div class="info">\n                  <div class="tabs top">\n                    ',"\n                    ","\n                  </div>\n                  ","\n                </div>\n              </div>\n            "]);return ei=function(){return e},e}function ti(){var e=ui(['<div class="container">No traces found</div>']);return ti=function(){return e},e}function ri(){var e=ui(['<div class="container">Loading…</div>']);return ri=function(){return e},e}function ni(){var e=ui(["<div>","</div>"]);return ni=function(){return e},e}function ii(){var e=ui(["<option value=","\n                          >","</option\n                        >"]);return ii=function(){return e},e}function oi(){var e=ui(["\n                <div>\n                  <mwc-icon-button\n                    .disabled=",'\n                    label="Older trace"\n                    @click=',"\n                  >\n                    <ha-svg-icon .path=","></ha-svg-icon>\n                  </mwc-icon-button>\n                  <select .value="," @change=",">\n                    ","\n                  </select>\n                  <mwc-icon-button\n                    .disabled=",'\n                    label="Newer trace"\n                    @click=',"\n                  >\n                    <ha-svg-icon .path=","></ha-svg-icon>\n                  </mwc-icon-button>\n                </div>\n              "]);return oi=function(){return e},e}function ai(){var e=ui(["<div>\n                ",'\n                <a\n                  class="linkButton"\n                  href="/config/automation/edit/','"\n                >\n                  <mwc-icon-button label="Edit Automation" tabindex="-1">\n                    <ha-svg-icon .path=',"></ha-svg-icon>\n                  </mwc-icon-button>\n                </a>\n              </div>"]);return ai=function(){return e},e}function si(){var e=ui(['<span slot="header">\n                ','\n              </span>\n              <div slot="toolbar-icon">\n                ',"\n              </div>"]);return si=function(){return e},e}function ci(){var e=ui(["\n      <hass-tabs-subpage\n        .hass=","\n        .narrow=","\n        .route=","\n        .backCallback=","\n        .tabs=","\n      >\n        ",'\n        <div class="toolbar">\n          ',"\n          ","\n          ","\n        </div>\n\n        ","\n      </hass-tabs-subpage>\n    "]);return ci=function(){return e},e}function li(){var e=ui(['\n      <mwc-icon-button label="Refresh" @click=',">\n        <ha-svg-icon .path=","></ha-svg-icon>\n      </mwc-icon-button>\n      <mwc-icon-button\n        .disabled=",'\n        label="Download Trace"\n        @click=',"\n      >\n        <ha-svg-icon .path=","></ha-svg-icon>\n      </mwc-icon-button>\n    "]);return li=function(){return e},e}function ui(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function di(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fi(e,t){return(fi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function hi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Di(e);if(t){var i=Di(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return pi(this,r)}}function pi(e,t){return!t||"object"!==Un(t)&&"function"!=typeof t?mi(e):t}function mi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vi(){vi=function(){return e};var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){["method","field"].forEach((function(r){t.forEach((function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r=e.prototype;["method","field"].forEach((function(n){t.forEach((function(t){var i=t.placement;if(t.kind===n&&("static"===i||"prototype"===i)){var o="static"===i?e:r;this.defineClassElement(o,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var n=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===n?void 0:n.call(e)}}Object.defineProperty(e,t.key,r)},decorateClass:function(e,t){var r=[],n=[],i={static:[],prototype:[],own:[]};if(e.forEach((function(e){this.addElementPlacement(e,i)}),this),e.forEach((function(e){if(!gi(e))return r.push(e);var t=this.decorateElement(e,i);r.push(t.element),r.push.apply(r,t.extras),n.push.apply(n,t.finishers)}),this),!t)return{elements:r,finishers:n};var o=this.decorateConstructor(r,t);return n.push.apply(n,o.finishers),o.finishers=n,o},addElementPlacement:function(e,t,r){var n=t[e.placement];if(!r&&-1!==n.indexOf(e.key))throw new TypeError("Duplicated element ("+e.key+")");n.push(e.key)},decorateElement:function(e,t){for(var r=[],n=[],i=e.decorators,o=i.length-1;o>=0;o--){var a=t[e.placement];a.splice(a.indexOf(e.key),1);var s=this.fromElementDescriptor(e),c=this.toElementFinisherExtras((0,i[o])(s)||s);e=c.element,this.addElementPlacement(e,t),c.finisher&&n.push(c.finisher);var l=c.extras;if(l){for(var u=0;u<l.length;u++)this.addElementPlacement(l[u],t);r.push.apply(r,l)}}return{element:e,finishers:n,extras:r}},decorateConstructor:function(e,t){for(var r=[],n=t.length-1;n>=0;n--){var i=this.fromClassDescriptor(e),o=this.toClassDescriptor((0,t[n])(i)||i);if(void 0!==o.finisher&&r.push(o.finisher),void 0!==o.elements){e=o.elements;for(var a=0;a<e.length-1;a++)for(var s=a+1;s<e.length;s++)if(e[a].key===e[s].key&&e[a].placement===e[s].placement)throw new TypeError("Duplicated element ("+e[a].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return Object.defineProperty(t,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){var t;if(void 0!==e)return(t=e,Si(t)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(t)||Pi(t)||_i()).map((function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=Ei(e.key),n=String(e.placement);if("static"!==n&&"prototype"!==n&&"own"!==n)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+n+'"');var i=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var o={kind:t,key:r,placement:n,descriptor:Object.assign({},i)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(i,"get","The property descriptor of a field descriptor"),this.disallowProperty(i,"set","The property descriptor of a field descriptor"),this.disallowProperty(i,"value","The property descriptor of a field descriptor"),o.initializer=e.initializer),o},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:wi(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:e.map(this.fromElementDescriptor,this)};return Object.defineProperty(t,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=wi(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var n=(0,t[r])(e);if(void 0!==n){if("function"!=typeof n)throw new TypeError("Finishers must return a constructor.");e=n}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}function yi(e){var t,r=Ei(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var n={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(n.decorators=e.decorators),"field"===e.kind&&(n.initializer=e.value),n}function bi(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function gi(e){return e.decorators&&e.decorators.length}function ki(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function wi(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function Ei(e){var t=function(e,t){if("object"!==Un(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Un(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Un(t)?t:String(t)}function _i(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Pi(e,t){if(e){if("string"==typeof e)return xi(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?xi(e,t):void 0}}function xi(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Si(e){if(Array.isArray(e))return e}function Oi(e,t,r){return(Oi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Di(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function Di(e){return(Di=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ti=function(e,t,r,n){var i=vi();if(n)for(var o=0;o<n.length;o++)i=n[o](i);var a=t((function(e){i.initializeInstanceElements(e,s.elements)}),r),s=i.decorateClass(function(e){for(var t=[],r=function(e){return"method"===e.kind&&e.key===o.key&&e.placement===o.placement},n=0;n<e.length;n++){var i,o=e[n];if("method"===o.kind&&(i=t.find(r)))if(ki(o.descriptor)||ki(i.descriptor)){if(gi(o)||gi(i))throw new ReferenceError("Duplicated methods ("+o.key+") can't be decorated.");i.descriptor=o.descriptor}else{if(gi(o)){if(gi(i))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+o.key+").");i.decorators=o.decorators}bi(o,i)}else t.push(o)}return t}(a.d.map(yi)),e);return i.initializeClassElements(a.F,s.elements),i.runClassFinishers(a.F,s.finishers)}([(0,n.Mo)("ha-automation-trace")],(function(e,t){var r,o,c=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fi(e,t)}(n,t);var r=hi(n);function n(){var t;di(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=r.call.apply(r,[this].concat(o)),e(mi(t)),t}return n}(t);return{F:c,d:[{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.Cb)()],key:"automationId",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"automations",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Boolean})],key:"isWide",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:Boolean,reflect:!0})],key:"narrow",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"route",value:void 0},{kind:"field",decorators:[(0,n.sz)()],key:"_entityId",value:void 0},{kind:"field",decorators:[(0,n.sz)()],key:"_traces",value:void 0},{kind:"field",decorators:[(0,n.sz)()],key:"_runId",value:void 0},{kind:"field",decorators:[(0,n.sz)()],key:"_selected",value:void 0},{kind:"field",decorators:[(0,n.sz)()],key:"_trace",value:void 0},{kind:"field",decorators:[(0,n.sz)()],key:"_logbookEntries",value:void 0},{kind:"field",decorators:[(0,n.sz)()],key:"_view",value:function(){return"details"}},{kind:"method",key:"render",value:function(){var e,t,r=this,i=this._entityId?this.hass.states[this._entityId]:void 0,o=null===(e=this.shadowRoot.querySelector("hat-script-graph"))||void 0===e?void 0:e.getTrackedNodes(),c=(null==i?void 0:i.attributes.friendly_name)||this._entityId,l=(0,n.dy)(li(),(function(){return r._loadTraces()}),a.jcD,!this._runId,this._downloadTrace,a.OGU);return(0,n.dy)(ci(),this.hass,this.narrow,this.route,(function(){return r._backTapped()}),$e.configSections.automation,this.narrow?(0,n.dy)(si(),c,l):"",this.narrow?"":(0,n.dy)(ai(),c,this.automationId,a.r9),this._traces&&this._traces.length>0?(0,n.dy)(oi(),this._traces[this._traces.length-1].run_id===this._runId,this._pickOlderTrace,a.JXK,this._runId,this._pickTrace,(0,Ue.r)(this._traces,(function(e){return e.run_id}),(function(e){return(0,n.dy)(ii(),e.run_id,(0,Le.E)(new Date(e.timestamp.start),r.hass.locale))})),this._traces[0].run_id===this._runId,this._pickNewerTrace,a.RWP):"",this.narrow?"":(0,n.dy)(ni(),l),void 0===this._traces?(0,n.dy)(ri()):0===this._traces.length?(0,n.dy)(ti()):void 0===this._trace?"":(0,n.dy)(ei(),this._trace,null===(t=this._selected)||void 0===t?void 0:t.path,this._pickNode,[["details","Step Details"],["timeline","Trace Timeline"],["logbook","Related logbook entries"],["config","Automation Config"]].map((function(e){var t=Qn(e,2),i=t[0],o=t[1];return(0,n.dy)(Gn(),i,(0,s.$)({active:r._view===i}),r._showTab,o)})),this._trace.blueprint_inputs?(0,n.dy)(Kn(),"blueprint",(0,s.$)({active:"blueprint"===this._view}),this._showTab):"",void 0===this._selected||void 0===this._logbookEntries||void 0===o?"":"details"===this._view?(0,n.dy)(Xn(),this.hass,this.narrow,this._trace,this._selected,this._logbookEntries,o):"config"===this._view?(0,n.dy)(Zn(),this.hass,this._trace):"logbook"===this._view?(0,n.dy)(Jn(),this.hass,this._logbookEntries):"blueprint"===this._view?(0,n.dy)(Hn(),this.hass,this._trace):(0,n.dy)(Vn(),this.hass,this._trace,this._logbookEntries,this._selected,this._timelinePathPicked)))}},{kind:"method",key:"firstUpdated",value:function(e){if(Oi(Di(c.prototype),"firstUpdated",this).call(this,e),this.automationId){var t=new URLSearchParams(location.search);this._loadTraces(t.get("run_id")||void 0)}}},{kind:"method",key:"updated",value:function(e){var t=this;if(Oi(Di(c.prototype),"updated",this).call(this,e),e.get("automationId")&&(this._traces=void 0,this._entityId=void 0,this._runId=void 0,this._trace=void 0,this._logbookEntries=void 0,this.automationId&&this._loadTraces()),e.has("_runId")&&this._runId&&(this._trace=void 0,this._logbookEntries=void 0,this.shadowRoot.querySelector("select").value=this._runId,this._loadTrace()),e.has("automations")&&this.automationId&&!this._entityId){var r=this.automations.find((function(e){return e.attributes.id===t.automationId}));this._entityId=null==r?void 0:r.entity_id}}},{kind:"method",key:"_pickOlderTrace",value:function(){var e=this,t=this._traces.findIndex((function(t){return t.run_id===e._runId}));this._runId=this._traces[t+1].run_id,this._selected=void 0}},{kind:"method",key:"_pickNewerTrace",value:function(){var e=this,t=this._traces.findIndex((function(t){return t.run_id===e._runId}));this._runId=this._traces[t-1].run_id,this._selected=void 0}},{kind:"method",key:"_pickTrace",value:function(e){this._runId=e.target.value,this._selected=void 0}},{kind:"method",key:"_pickNode",value:function(e){this._selected=e.detail}},{kind:"method",key:"_loadTraces",value:(o=Yn(regeneratorRuntime.mark((function e(t){var r,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.lj)(this.hass,"automation",this.automationId);case 2:if(this._traces=e.sent,this._traces.reverse(),t&&(this._runId=t),!this._runId||this._traces.some((function(e){return e.run_id===n._runId}))){e.next=11;break}return this._runId=void 0,this._selected=void 0,t&&((r=new URLSearchParams(location.search)).delete("run_id"),history.replaceState(null,"","".concat(location.pathname,"?").concat(r.toString()))),e.next=11,(0,We.Ys)(this,{text:"Chosen trace is no longer available"});case 11:!this._runId&&this._traces.length>0&&(this._runId=this._traces[0].run_id);case 12:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{kind:"method",key:"_loadTrace",value:(r=Yn(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.mA)(this.hass,"automation",this.automationId,this._runId);case 2:return t=e.sent,e.next=5,(0,Be.sS)(this.hass,t.timestamp.start,t.context.id);case 5:this._logbookEntries=e.sent,this._trace=t;case 7:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{kind:"method",key:"_backTapped",value:function(){history.back()}},{kind:"method",key:"_downloadTrace",value:function(){var e=document.createElement("a");e.download="trace ".concat(this._entityId," ").concat(this._trace.timestamp.start,".json"),e.href="data:application/json;charset=utf-8,".concat(encodeURI(JSON.stringify({trace:this._trace,logbookEntries:this._logbookEntries},void 0,2))),e.click()}},{kind:"method",key:"_showTab",value:function(e){this._view=e.target.view}},{kind:"method",key:"_timelinePathPicked",value:function(e){var t=e.detail.value,r=this.shadowRoot.querySelector("hat-script-graph").getTrackedNodes();r[t]&&(this._selected=r[t])}},{kind:"get",static:!0,key:"styles",value:function(){return[Me.Qx,Ve,(0,n.iv)(Wn())]}}]}}),n.oi)}}]);
//# sourceMappingURL=chunk.c9a3977013a82d90ad58.js.map