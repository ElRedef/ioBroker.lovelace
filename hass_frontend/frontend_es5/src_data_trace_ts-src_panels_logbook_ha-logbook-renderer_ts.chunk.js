"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkhome_assistant_frontend"] = self["webpackChunkhome_assistant_frontend"] || []).push([["src_data_trace_ts-src_panels_logbook_ha-logbook-renderer_ts"],{

/***/ "./src/common/string/starts-with.ts":
/*!******************************************!*\
  !*** ./src/common/string/starts-with.ts ***!
  \******************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"strStartsWith\": function() { return /* binding */ strStartsWith; }\n/* harmony export */ });\nvar strStartsWith = function strStartsWith(value, search) {\n  return value.substring(0, search.length) === search;\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tbW9uL3N0cmluZy9zdGFydHMtd2l0aC50cy5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFBQTtBQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaG9tZS1hc3Npc3RhbnQtZnJvbnRlbmQvLi9zcmMvY29tbW9uL3N0cmluZy9zdGFydHMtd2l0aC50cz8zMzExIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBzdHJTdGFydHNXaXRoID0gKHZhbHVlOiBzdHJpbmcsIHNlYXJjaDogc3RyaW5nKSA9PlxuICB2YWx1ZS5zdWJzdHJpbmcoMCwgc2VhcmNoLmxlbmd0aCkgPT09IHNlYXJjaDtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/common/string/starts-with.ts\n");

/***/ }),

/***/ "./src/data/logbook.ts":
/*!*****************************!*\
  !*** ./src/data/logbook.ts ***!
  \*****************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"CONTINUOUS_DOMAINS\": function() { return /* binding */ CONTINUOUS_DOMAINS; },\n/* harmony export */   \"getLogbookDataForContext\": function() { return /* binding */ getLogbookDataForContext; },\n/* harmony export */   \"getLogbookData\": function() { return /* binding */ getLogbookData; },\n/* harmony export */   \"subscribeLogbook\": function() { return /* binding */ subscribeLogbook; },\n/* harmony export */   \"clearLogbookCache\": function() { return /* binding */ clearLogbookCache; },\n/* harmony export */   \"createHistoricState\": function() { return /* binding */ createHistoricState; },\n/* harmony export */   \"localizeTriggerSource\": function() { return /* binding */ localizeTriggerSource; },\n/* harmony export */   \"localizeStateMessage\": function() { return /* binding */ localizeStateMessage; },\n/* harmony export */   \"filterLogbookCompatibleEntities\": function() { return /* binding */ filterLogbookCompatibleEntities; }\n/* harmony export */ });\n/* harmony import */ var _common_const__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/const */ \"./src/common/const.ts\");\n/* harmony import */ var _common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common/entity/compute_domain */ \"./src/common/entity/compute_domain.ts\");\n/* harmony import */ var _common_entity_compute_state_display__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common/entity/compute_state_display */ \"./src/common/entity/compute_state_display.ts\");\n/* harmony import */ var _common_entity_compute_state_domain__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../common/entity/compute_state_domain */ \"./src/common/entity/compute_state_domain.ts\");\n/* harmony import */ var _entity__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./entity */ \"./src/data/entity.ts\");\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\n\n\n\n\n\nvar LOGBOOK_LOCALIZE_PATH = \"ui.components.logbook.messages\";\nvar CONTINUOUS_DOMAINS = [\"counter\", \"proximity\", \"sensor\"];\n//\n// Localization mapping for all the triggers in core\n// in homeassistant.components.homeassistant.triggers\n//\nvar triggerPhrases = {\n  \"numeric state of\": \"triggered_by_numeric_state_of\",\n  // number state trigger\n  \"state of\": \"triggered_by_state_of\",\n  // state trigger\n  event: \"triggered_by_event\",\n  // event trigger\n  time: \"triggered_by_time\",\n  // time trigger\n  \"time pattern\": \"triggered_by_time_pattern\",\n  // time trigger\n  \"Home Assistant stopping\": \"triggered_by_homeassistant_stopping\",\n  // stop event\n  \"Home Assistant starting\": \"triggered_by_homeassistant_starting\" // start event\n\n};\nvar DATA_CACHE = {};\nvar getLogbookDataForContext = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(hass, startDate, contextId) {\n    return regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return hass.loadBackendTranslation(\"device_class\");\n\n          case 2:\n            return _context.abrupt(\"return\", getLogbookDataFromServer(hass, startDate, undefined, undefined, contextId));\n\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function getLogbookDataForContext(_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar getLogbookData = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(hass, startDate, endDate, entityIds, deviceIds) {\n    return regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return hass.loadBackendTranslation(\"device_class\");\n\n          case 2:\n            return _context2.abrupt(\"return\", deviceIds !== null && deviceIds !== void 0 && deviceIds.length ? getLogbookDataFromServer(hass, startDate, endDate, entityIds, undefined, deviceIds) : getLogbookDataCache(hass, startDate, endDate, entityIds));\n\n          case 3:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n\n  return function getLogbookData(_x4, _x5, _x6, _x7, _x8) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nvar getLogbookDataCache = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(hass, startDate, endDate, entityId) {\n    var ALL_ENTITIES, entityIdKey, cacheKey, entities;\n    return regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            ALL_ENTITIES = \"*\";\n            entityIdKey = entityId ? entityId.toString() : ALL_ENTITIES;\n            cacheKey = \"\".concat(startDate).concat(endDate);\n\n            if (!DATA_CACHE[cacheKey]) {\n              DATA_CACHE[cacheKey] = {};\n            }\n\n            if (!(entityIdKey in DATA_CACHE[cacheKey])) {\n              _context3.next = 6;\n              break;\n            }\n\n            return _context3.abrupt(\"return\", DATA_CACHE[cacheKey][entityIdKey]);\n\n          case 6:\n            if (!(entityId && DATA_CACHE[cacheKey][ALL_ENTITIES])) {\n              _context3.next = 11;\n              break;\n            }\n\n            _context3.next = 9;\n            return DATA_CACHE[cacheKey][ALL_ENTITIES];\n\n          case 9:\n            entities = _context3.sent;\n            return _context3.abrupt(\"return\", entities.filter(function (entity) {\n              return entity.entity_id && entityId.includes(entity.entity_id);\n            }));\n\n          case 11:\n            DATA_CACHE[cacheKey][entityIdKey] = getLogbookDataFromServer(hass, startDate, endDate, entityId);\n            return _context3.abrupt(\"return\", DATA_CACHE[cacheKey][entityIdKey]);\n\n          case 13:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n\n  return function getLogbookDataCache(_x9, _x10, _x11, _x12) {\n    return _ref3.apply(this, arguments);\n  };\n}();\n\nvar getLogbookDataFromServer = function getLogbookDataFromServer(hass, startDate, endDate, entityIds, contextId, deviceIds) {\n  // If all specified filters are empty lists, we can return an empty list.\n  if ((entityIds || deviceIds) && (!entityIds || entityIds.length === 0) && (!deviceIds || deviceIds.length === 0)) {\n    return Promise.resolve([]);\n  }\n\n  var params = {\n    type: \"logbook/get_events\",\n    start_time: startDate\n  };\n\n  if (endDate) {\n    params.end_time = endDate;\n  }\n\n  if (entityIds !== null && entityIds !== void 0 && entityIds.length) {\n    params.entity_ids = entityIds;\n  }\n\n  if (deviceIds !== null && deviceIds !== void 0 && deviceIds.length) {\n    params.device_ids = deviceIds;\n  }\n\n  if (contextId) {\n    params.context_id = contextId;\n  }\n\n  return hass.callWS(params);\n};\n\nvar subscribeLogbook = function subscribeLogbook(hass, callbackFunction, startDate, endDate, entityIds, deviceIds) {\n  // If all specified filters are empty lists, we can return an empty list.\n  if ((entityIds || deviceIds) && (!entityIds || entityIds.length === 0) && (!deviceIds || deviceIds.length === 0)) {\n    return Promise.reject(\"No entities or devices\");\n  }\n\n  var params = {\n    type: \"logbook/event_stream\",\n    start_time: startDate,\n    end_time: endDate\n  };\n\n  if (entityIds !== null && entityIds !== void 0 && entityIds.length) {\n    params.entity_ids = entityIds;\n  }\n\n  if (deviceIds !== null && deviceIds !== void 0 && deviceIds.length) {\n    params.device_ids = deviceIds;\n  }\n\n  return hass.connection.subscribeMessage(function (message) {\n    return callbackFunction(message);\n  }, params);\n};\nvar clearLogbookCache = function clearLogbookCache(startDate, endDate) {\n  DATA_CACHE[\"\".concat(startDate).concat(endDate)] = {};\n};\nvar createHistoricState = function createHistoricState(currentStateObj, state) {\n  return {\n    entity_id: currentStateObj.entity_id,\n    state: state,\n    attributes: {\n      // Rebuild the historical state by copying static attributes only\n      device_class: currentStateObj === null || currentStateObj === void 0 ? void 0 : currentStateObj.attributes.device_class,\n      source_type: currentStateObj === null || currentStateObj === void 0 ? void 0 : currentStateObj.attributes.source_type,\n      has_date: currentStateObj === null || currentStateObj === void 0 ? void 0 : currentStateObj.attributes.has_date,\n      has_time: currentStateObj === null || currentStateObj === void 0 ? void 0 : currentStateObj.attributes.has_time,\n      // We do not want to use dynamic entity pictures (e.g., from media player) for the log book rendering,\n      // as they would present a false state in the log (played media right now vs actual historic data).\n      entity_picture_local: _common_const__WEBPACK_IMPORTED_MODULE_0__.DOMAINS_WITH_DYNAMIC_PICTURE.has((0,_common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_1__.computeDomain)(currentStateObj.entity_id)) ? undefined : currentStateObj === null || currentStateObj === void 0 ? void 0 : currentStateObj.attributes.entity_picture_local,\n      entity_picture: _common_const__WEBPACK_IMPORTED_MODULE_0__.DOMAINS_WITH_DYNAMIC_PICTURE.has((0,_common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_1__.computeDomain)(currentStateObj.entity_id)) ? undefined : currentStateObj === null || currentStateObj === void 0 ? void 0 : currentStateObj.attributes.entity_picture\n    }\n  };\n};\nvar localizeTriggerSource = function localizeTriggerSource(localize, source) {\n  for (var triggerPhrase in triggerPhrases) {\n    if (source.startsWith(triggerPhrase)) {\n      return source.replace(triggerPhrase, \"\".concat(localize(\"ui.components.logbook.\".concat(triggerPhrases[triggerPhrase]))));\n    }\n  }\n\n  return source;\n};\nvar localizeStateMessage = function localizeStateMessage(hass, localize, state, stateObj, domain) {\n  switch (domain) {\n    case \"device_tracker\":\n    case \"person\":\n      if (state === \"not_home\") {\n        return localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".was_away\"));\n      }\n\n      if (state === \"home\") {\n        return localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".was_at_home\"));\n      }\n\n      return localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".was_at_state\"), \"state\", state);\n\n    case \"sun\":\n      return state === \"above_horizon\" ? localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".rose\")) : localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".set\"));\n\n    case \"binary_sensor\":\n      {\n        var isOn = state === _common_const__WEBPACK_IMPORTED_MODULE_0__.BINARY_STATE_ON;\n        var isOff = state === _common_const__WEBPACK_IMPORTED_MODULE_0__.BINARY_STATE_OFF;\n        var device_class = stateObj.attributes.device_class;\n\n        switch (device_class) {\n          case \"battery\":\n            if (isOn) {\n              return localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".was_low\"));\n            }\n\n            if (isOff) {\n              return localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".was_normal\"));\n            }\n\n            break;\n\n          case \"connectivity\":\n            if (isOn) {\n              return localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".was_connected\"));\n            }\n\n            if (isOff) {\n              return localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".was_disconnected\"));\n            }\n\n            break;\n\n          case \"door\":\n          case \"garage_door\":\n          case \"opening\":\n          case \"window\":\n            if (isOn) {\n              return localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".was_opened\"));\n            }\n\n            if (isOff) {\n              return localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".was_closed\"));\n            }\n\n            break;\n\n          case \"lock\":\n            if (isOn) {\n              return localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".was_unlocked\"));\n            }\n\n            if (isOff) {\n              return localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".was_locked\"));\n            }\n\n            break;\n\n          case \"plug\":\n            if (isOn) {\n              return localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".was_plugged_in\"));\n            }\n\n            if (isOff) {\n              return localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".was_unplugged\"));\n            }\n\n            break;\n\n          case \"presence\":\n            if (isOn) {\n              return localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".was_at_home\"));\n            }\n\n            if (isOff) {\n              return localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".was_away\"));\n            }\n\n            break;\n\n          case \"safety\":\n            if (isOn) {\n              return localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".was_unsafe\"));\n            }\n\n            if (isOff) {\n              return localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".was_safe\"));\n            }\n\n            break;\n\n          case \"cold\":\n          case \"gas\":\n          case \"heat\":\n          case \"moisture\":\n          case \"motion\":\n          case \"occupancy\":\n          case \"power\":\n          case \"problem\":\n          case \"smoke\":\n          case \"sound\":\n          case \"vibration\":\n            if (isOn) {\n              return localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".detected_device_class\"), {\n                device_class: localize(\"component.binary_sensor.device_class.\".concat(device_class))\n              });\n            }\n\n            if (isOff) {\n              return localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".cleared_device_class\"), {\n                device_class: localize(\"component.binary_sensor.device_class.\".concat(device_class))\n              });\n            }\n\n            break;\n\n          case \"tamper\":\n            if (isOn) {\n              return localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".detected_tampering\"));\n            }\n\n            if (isOff) {\n              return localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".cleared_tampering\"));\n            }\n\n            break;\n        }\n\n        break;\n      }\n\n    case \"cover\":\n      switch (state) {\n        case \"open\":\n          return localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".was_opened\"));\n\n        case \"opening\":\n          return localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".is_opening\"));\n\n        case \"closing\":\n          return localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".is_closing\"));\n\n        case \"closed\":\n          return localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".was_closed\"));\n      }\n\n      break;\n\n    case \"lock\":\n      if (state === \"unlocked\") {\n        return localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".was_unlocked\"));\n      }\n\n      if (state === \"locked\") {\n        return localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".was_locked\"));\n      }\n\n      break;\n  }\n\n  if (state === _common_const__WEBPACK_IMPORTED_MODULE_0__.BINARY_STATE_ON) {\n    return localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".turned_on\"));\n  }\n\n  if (state === _common_const__WEBPACK_IMPORTED_MODULE_0__.BINARY_STATE_OFF) {\n    return localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".turned_off\"));\n  }\n\n  if (_entity__WEBPACK_IMPORTED_MODULE_4__.UNAVAILABLE_STATES.includes(state)) {\n    return localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".became_unavailable\"));\n  }\n\n  return hass.localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".changed_to_state\"), \"state\", stateObj ? (0,_common_entity_compute_state_display__WEBPACK_IMPORTED_MODULE_2__.computeStateDisplay)(localize, stateObj, hass.locale, state) : state);\n};\nvar filterLogbookCompatibleEntities = function filterLogbookCompatibleEntities(entity) {\n  return (0,_common_entity_compute_state_domain__WEBPACK_IMPORTED_MODULE_3__.computeStateDomain)(entity) !== \"sensor\" || entity.attributes.unit_of_measurement === undefined && entity.attributes.state_class === undefined;\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZGF0YS9sb2dib29rLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUNBO0FBS0E7QUFDQTtBQUNBO0FBSUE7QUFFQTtBQUNBO0FBaUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTs7QUFQQTtBQVVBO0FBSUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBZUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBOztBQW9CQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQU1BO0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBYkE7QUFBQTtBQUFBO0FBQUE7O0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBOztBQUFBO0FBb0JBO0FBcEJBO0FBc0JBO0FBQUE7O0FBdEJBO0FBMEJBO0FBMUJBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBOztBQW1DQTtBQVFBO0FBQ0E7QUFLQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUZBOztBQUlBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBOztBQUVBO0FBUUE7QUFDQTtBQUtBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTs7QUFLQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFBQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQWJBO0FBSEE7QUFIQTtBQTJCQTtBQUlBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7O0FBQ0E7QUFDQTtBQUVBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTs7QUFDQTs7QUFFQTtBQUNBOztBQUlBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBOztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTs7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBOztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTs7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBS0E7O0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFLQTs7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFyR0E7O0FBd0dBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTs7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFSQTs7QUFVQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFwSkE7O0FBdUpBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBT0E7QUFFQTtBQUFBO0FBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ob21lLWFzc2lzdGFudC1mcm9udGVuZC8uL3NyYy9kYXRhL2xvZ2Jvb2sudHM/NDBkMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBIYXNzRW50aXR5IH0gZnJvbSBcImhvbWUtYXNzaXN0YW50LWpzLXdlYnNvY2tldFwiO1xuaW1wb3J0IHtcbiAgQklOQVJZX1NUQVRFX09GRixcbiAgQklOQVJZX1NUQVRFX09OLFxuICBET01BSU5TX1dJVEhfRFlOQU1JQ19QSUNUVVJFLFxufSBmcm9tIFwiLi4vY29tbW9uL2NvbnN0XCI7XG5pbXBvcnQgeyBjb21wdXRlRG9tYWluIH0gZnJvbSBcIi4uL2NvbW1vbi9lbnRpdHkvY29tcHV0ZV9kb21haW5cIjtcbmltcG9ydCB7IGNvbXB1dGVTdGF0ZURpc3BsYXkgfSBmcm9tIFwiLi4vY29tbW9uL2VudGl0eS9jb21wdXRlX3N0YXRlX2Rpc3BsYXlcIjtcbmltcG9ydCB7IGNvbXB1dGVTdGF0ZURvbWFpbiB9IGZyb20gXCIuLi9jb21tb24vZW50aXR5L2NvbXB1dGVfc3RhdGVfZG9tYWluXCI7XG5pbXBvcnQgeyBMb2NhbGl6ZUZ1bmMgfSBmcm9tIFwiLi4vY29tbW9uL3RyYW5zbGF0aW9ucy9sb2NhbGl6ZVwiO1xuaW1wb3J0IHsgSGFFbnRpdHlQaWNrZXJFbnRpdHlGaWx0ZXJGdW5jIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvZW50aXR5L2hhLWVudGl0eS1waWNrZXJcIjtcbmltcG9ydCB7IEhvbWVBc3Npc3RhbnQgfSBmcm9tIFwiLi4vdHlwZXNcIjtcbmltcG9ydCB7IFVOQVZBSUxBQkxFX1NUQVRFUyB9IGZyb20gXCIuL2VudGl0eVwiO1xuXG5jb25zdCBMT0dCT09LX0xPQ0FMSVpFX1BBVEggPSBcInVpLmNvbXBvbmVudHMubG9nYm9vay5tZXNzYWdlc1wiO1xuZXhwb3J0IGNvbnN0IENPTlRJTlVPVVNfRE9NQUlOUyA9IFtcImNvdW50ZXJcIiwgXCJwcm94aW1pdHlcIiwgXCJzZW5zb3JcIl07XG5cbmV4cG9ydCBpbnRlcmZhY2UgTG9nYm9va1N0cmVhbU1lc3NhZ2Uge1xuICBldmVudHM6IExvZ2Jvb2tFbnRyeVtdO1xuICBzdGFydF90aW1lPzogbnVtYmVyOyAvLyBTdGFydCB0aW1lIG9mIHRoaXMgaGlzdG9yaWNhbCBjaHVua1xuICBlbmRfdGltZT86IG51bWJlcjsgLy8gRW5kIHRpbWUgb2YgdGhpcyBoaXN0b3JpY2FsIGNodW5rXG4gIHBhcnRpYWw/OiBib29sZWFuOyAvLyBJbmRpY2lhdGVzIG1vcmUgaGlzdG9yaWNhbCBjaHVua3MgYXJlIGNvbWluZ1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIExvZ2Jvb2tFbnRyeSB7XG4gIC8vIEJhc2UgZGF0YVxuICB3aGVuOiBudW1iZXI7IC8vIFB5dGhvbiB0aW1lc3RhbXAuIERvICoxMDAwIHRvIGdldCBKUyB0aW1lc3RhbXAuXG4gIG5hbWU6IHN0cmluZztcbiAgbWVzc2FnZT86IHN0cmluZztcbiAgZW50aXR5X2lkPzogc3RyaW5nO1xuICBpY29uPzogc3RyaW5nO1xuICBzb3VyY2U/OiBzdHJpbmc7IC8vIFRoZSB0cmlnZ2VyIHNvdXJjZVxuICBkb21haW4/OiBzdHJpbmc7XG4gIHN0YXRlPzogc3RyaW5nOyAvLyBUaGUgc3RhdGUgb2YgdGhlIGVudGl0eVxuICAvLyBDb250ZXh0IGRhdGFcbiAgY29udGV4dF9pZD86IHN0cmluZztcbiAgY29udGV4dF91c2VyX2lkPzogc3RyaW5nO1xuICBjb250ZXh0X2V2ZW50X3R5cGU/OiBzdHJpbmc7XG4gIGNvbnRleHRfZG9tYWluPzogc3RyaW5nO1xuICBjb250ZXh0X3NlcnZpY2U/OiBzdHJpbmc7IC8vIFNlcnZpY2UgY2FsbHMgb25seVxuICBjb250ZXh0X2VudGl0eV9pZD86IHN0cmluZztcbiAgY29udGV4dF9lbnRpdHlfaWRfbmFtZT86IHN0cmluZzsgLy8gTGVnYWN5LCBub3QgbG9uZ2VyIHNlbnRcbiAgY29udGV4dF9uYW1lPzogc3RyaW5nO1xuICBjb250ZXh0X3N0YXRlPzogc3RyaW5nOyAvLyBUaGUgc3RhdGUgb2YgdGhlIGVudGl0eVxuICBjb250ZXh0X3NvdXJjZT86IHN0cmluZzsgLy8gVGhlIHRyaWdnZXIgc291cmNlXG4gIGNvbnRleHRfbWVzc2FnZT86IHN0cmluZztcbn1cblxuLy9cbi8vIExvY2FsaXphdGlvbiBtYXBwaW5nIGZvciBhbGwgdGhlIHRyaWdnZXJzIGluIGNvcmVcbi8vIGluIGhvbWVhc3Npc3RhbnQuY29tcG9uZW50cy5ob21lYXNzaXN0YW50LnRyaWdnZXJzXG4vL1xuY29uc3QgdHJpZ2dlclBocmFzZXMgPSB7XG4gIFwibnVtZXJpYyBzdGF0ZSBvZlwiOiBcInRyaWdnZXJlZF9ieV9udW1lcmljX3N0YXRlX29mXCIsIC8vIG51bWJlciBzdGF0ZSB0cmlnZ2VyXG4gIFwic3RhdGUgb2ZcIjogXCJ0cmlnZ2VyZWRfYnlfc3RhdGVfb2ZcIiwgLy8gc3RhdGUgdHJpZ2dlclxuICBldmVudDogXCJ0cmlnZ2VyZWRfYnlfZXZlbnRcIiwgLy8gZXZlbnQgdHJpZ2dlclxuICB0aW1lOiBcInRyaWdnZXJlZF9ieV90aW1lXCIsIC8vIHRpbWUgdHJpZ2dlclxuICBcInRpbWUgcGF0dGVyblwiOiBcInRyaWdnZXJlZF9ieV90aW1lX3BhdHRlcm5cIiwgLy8gdGltZSB0cmlnZ2VyXG4gIFwiSG9tZSBBc3Npc3RhbnQgc3RvcHBpbmdcIjogXCJ0cmlnZ2VyZWRfYnlfaG9tZWFzc2lzdGFudF9zdG9wcGluZ1wiLCAvLyBzdG9wIGV2ZW50XG4gIFwiSG9tZSBBc3Npc3RhbnQgc3RhcnRpbmdcIjogXCJ0cmlnZ2VyZWRfYnlfaG9tZWFzc2lzdGFudF9zdGFydGluZ1wiLCAvLyBzdGFydCBldmVudFxufTtcblxuY29uc3QgREFUQV9DQUNIRToge1xuICBbY2FjaGVLZXk6IHN0cmluZ106IHsgW2VudGl0eUlkOiBzdHJpbmddOiBQcm9taXNlPExvZ2Jvb2tFbnRyeVtdPiB9O1xufSA9IHt9O1xuXG5leHBvcnQgY29uc3QgZ2V0TG9nYm9va0RhdGFGb3JDb250ZXh0ID0gYXN5bmMgKFxuICBoYXNzOiBIb21lQXNzaXN0YW50LFxuICBzdGFydERhdGU6IHN0cmluZyxcbiAgY29udGV4dElkPzogc3RyaW5nXG4pOiBQcm9taXNlPExvZ2Jvb2tFbnRyeVtdPiA9PiB7XG4gIGF3YWl0IGhhc3MubG9hZEJhY2tlbmRUcmFuc2xhdGlvbihcImRldmljZV9jbGFzc1wiKTtcbiAgcmV0dXJuIGdldExvZ2Jvb2tEYXRhRnJvbVNlcnZlcihcbiAgICBoYXNzLFxuICAgIHN0YXJ0RGF0ZSxcbiAgICB1bmRlZmluZWQsXG4gICAgdW5kZWZpbmVkLFxuICAgIGNvbnRleHRJZFxuICApO1xufTtcblxuZXhwb3J0IGNvbnN0IGdldExvZ2Jvb2tEYXRhID0gYXN5bmMgKFxuICBoYXNzOiBIb21lQXNzaXN0YW50LFxuICBzdGFydERhdGU6IHN0cmluZyxcbiAgZW5kRGF0ZTogc3RyaW5nLFxuICBlbnRpdHlJZHM/OiBzdHJpbmdbXSxcbiAgZGV2aWNlSWRzPzogc3RyaW5nW11cbik6IFByb21pc2U8TG9nYm9va0VudHJ5W10+ID0+IHtcbiAgYXdhaXQgaGFzcy5sb2FkQmFja2VuZFRyYW5zbGF0aW9uKFwiZGV2aWNlX2NsYXNzXCIpO1xuICByZXR1cm4gZGV2aWNlSWRzPy5sZW5ndGhcbiAgICA/IGdldExvZ2Jvb2tEYXRhRnJvbVNlcnZlcihcbiAgICAgICAgaGFzcyxcbiAgICAgICAgc3RhcnREYXRlLFxuICAgICAgICBlbmREYXRlLFxuICAgICAgICBlbnRpdHlJZHMsXG4gICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgZGV2aWNlSWRzXG4gICAgICApXG4gICAgOiBnZXRMb2dib29rRGF0YUNhY2hlKGhhc3MsIHN0YXJ0RGF0ZSwgZW5kRGF0ZSwgZW50aXR5SWRzKTtcbn07XG5cbmNvbnN0IGdldExvZ2Jvb2tEYXRhQ2FjaGUgPSBhc3luYyAoXG4gIGhhc3M6IEhvbWVBc3Npc3RhbnQsXG4gIHN0YXJ0RGF0ZTogc3RyaW5nLFxuICBlbmREYXRlOiBzdHJpbmcsXG4gIGVudGl0eUlkPzogc3RyaW5nW11cbikgPT4ge1xuICBjb25zdCBBTExfRU5USVRJRVMgPSBcIipcIjtcblxuICBjb25zdCBlbnRpdHlJZEtleSA9IGVudGl0eUlkID8gZW50aXR5SWQudG9TdHJpbmcoKSA6IEFMTF9FTlRJVElFUztcbiAgY29uc3QgY2FjaGVLZXkgPSBgJHtzdGFydERhdGV9JHtlbmREYXRlfWA7XG5cbiAgaWYgKCFEQVRBX0NBQ0hFW2NhY2hlS2V5XSkge1xuICAgIERBVEFfQ0FDSEVbY2FjaGVLZXldID0ge307XG4gIH1cblxuICBpZiAoZW50aXR5SWRLZXkgaW4gREFUQV9DQUNIRVtjYWNoZUtleV0pIHtcbiAgICByZXR1cm4gREFUQV9DQUNIRVtjYWNoZUtleV1bZW50aXR5SWRLZXldO1xuICB9XG5cbiAgaWYgKGVudGl0eUlkICYmIERBVEFfQ0FDSEVbY2FjaGVLZXldW0FMTF9FTlRJVElFU10pIHtcbiAgICBjb25zdCBlbnRpdGllcyA9IGF3YWl0IERBVEFfQ0FDSEVbY2FjaGVLZXldW0FMTF9FTlRJVElFU107XG4gICAgcmV0dXJuIGVudGl0aWVzLmZpbHRlcihcbiAgICAgIChlbnRpdHkpID0+IGVudGl0eS5lbnRpdHlfaWQgJiYgZW50aXR5SWQuaW5jbHVkZXMoZW50aXR5LmVudGl0eV9pZClcbiAgICApO1xuICB9XG5cbiAgREFUQV9DQUNIRVtjYWNoZUtleV1bZW50aXR5SWRLZXldID0gZ2V0TG9nYm9va0RhdGFGcm9tU2VydmVyKFxuICAgIGhhc3MsXG4gICAgc3RhcnREYXRlLFxuICAgIGVuZERhdGUsXG4gICAgZW50aXR5SWRcbiAgKTtcbiAgcmV0dXJuIERBVEFfQ0FDSEVbY2FjaGVLZXldW2VudGl0eUlkS2V5XTtcbn07XG5cbmNvbnN0IGdldExvZ2Jvb2tEYXRhRnJvbVNlcnZlciA9IChcbiAgaGFzczogSG9tZUFzc2lzdGFudCxcbiAgc3RhcnREYXRlOiBzdHJpbmcsXG4gIGVuZERhdGU/OiBzdHJpbmcsXG4gIGVudGl0eUlkcz86IHN0cmluZ1tdLFxuICBjb250ZXh0SWQ/OiBzdHJpbmcsXG4gIGRldmljZUlkcz86IHN0cmluZ1tdXG4pOiBQcm9taXNlPExvZ2Jvb2tFbnRyeVtdPiA9PiB7XG4gIC8vIElmIGFsbCBzcGVjaWZpZWQgZmlsdGVycyBhcmUgZW1wdHkgbGlzdHMsIHdlIGNhbiByZXR1cm4gYW4gZW1wdHkgbGlzdC5cbiAgaWYgKFxuICAgIChlbnRpdHlJZHMgfHwgZGV2aWNlSWRzKSAmJlxuICAgICghZW50aXR5SWRzIHx8IGVudGl0eUlkcy5sZW5ndGggPT09IDApICYmXG4gICAgKCFkZXZpY2VJZHMgfHwgZGV2aWNlSWRzLmxlbmd0aCA9PT0gMClcbiAgKSB7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShbXSk7XG4gIH1cblxuICBjb25zdCBwYXJhbXM6IGFueSA9IHtcbiAgICB0eXBlOiBcImxvZ2Jvb2svZ2V0X2V2ZW50c1wiLFxuICAgIHN0YXJ0X3RpbWU6IHN0YXJ0RGF0ZSxcbiAgfTtcbiAgaWYgKGVuZERhdGUpIHtcbiAgICBwYXJhbXMuZW5kX3RpbWUgPSBlbmREYXRlO1xuICB9XG4gIGlmIChlbnRpdHlJZHM/Lmxlbmd0aCkge1xuICAgIHBhcmFtcy5lbnRpdHlfaWRzID0gZW50aXR5SWRzO1xuICB9XG4gIGlmIChkZXZpY2VJZHM/Lmxlbmd0aCkge1xuICAgIHBhcmFtcy5kZXZpY2VfaWRzID0gZGV2aWNlSWRzO1xuICB9XG4gIGlmIChjb250ZXh0SWQpIHtcbiAgICBwYXJhbXMuY29udGV4dF9pZCA9IGNvbnRleHRJZDtcbiAgfVxuICByZXR1cm4gaGFzcy5jYWxsV1M8TG9nYm9va0VudHJ5W10+KHBhcmFtcyk7XG59O1xuXG5leHBvcnQgY29uc3Qgc3Vic2NyaWJlTG9nYm9vayA9IChcbiAgaGFzczogSG9tZUFzc2lzdGFudCxcbiAgY2FsbGJhY2tGdW5jdGlvbjogKG1lc3NhZ2U6IExvZ2Jvb2tTdHJlYW1NZXNzYWdlKSA9PiB2b2lkLFxuICBzdGFydERhdGU6IHN0cmluZyxcbiAgZW5kRGF0ZTogc3RyaW5nLFxuICBlbnRpdHlJZHM/OiBzdHJpbmdbXSxcbiAgZGV2aWNlSWRzPzogc3RyaW5nW11cbik6IFByb21pc2U8KCkgPT4gUHJvbWlzZTx2b2lkPj4gPT4ge1xuICAvLyBJZiBhbGwgc3BlY2lmaWVkIGZpbHRlcnMgYXJlIGVtcHR5IGxpc3RzLCB3ZSBjYW4gcmV0dXJuIGFuIGVtcHR5IGxpc3QuXG4gIGlmIChcbiAgICAoZW50aXR5SWRzIHx8IGRldmljZUlkcykgJiZcbiAgICAoIWVudGl0eUlkcyB8fCBlbnRpdHlJZHMubGVuZ3RoID09PSAwKSAmJlxuICAgICghZGV2aWNlSWRzIHx8IGRldmljZUlkcy5sZW5ndGggPT09IDApXG4gICkge1xuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChcIk5vIGVudGl0aWVzIG9yIGRldmljZXNcIik7XG4gIH1cbiAgY29uc3QgcGFyYW1zOiBhbnkgPSB7XG4gICAgdHlwZTogXCJsb2dib29rL2V2ZW50X3N0cmVhbVwiLFxuICAgIHN0YXJ0X3RpbWU6IHN0YXJ0RGF0ZSxcbiAgICBlbmRfdGltZTogZW5kRGF0ZSxcbiAgfTtcbiAgaWYgKGVudGl0eUlkcz8ubGVuZ3RoKSB7XG4gICAgcGFyYW1zLmVudGl0eV9pZHMgPSBlbnRpdHlJZHM7XG4gIH1cbiAgaWYgKGRldmljZUlkcz8ubGVuZ3RoKSB7XG4gICAgcGFyYW1zLmRldmljZV9pZHMgPSBkZXZpY2VJZHM7XG4gIH1cbiAgcmV0dXJuIGhhc3MuY29ubmVjdGlvbi5zdWJzY3JpYmVNZXNzYWdlPExvZ2Jvb2tTdHJlYW1NZXNzYWdlPihcbiAgICAobWVzc2FnZSkgPT4gY2FsbGJhY2tGdW5jdGlvbihtZXNzYWdlKSxcbiAgICBwYXJhbXNcbiAgKTtcbn07XG5cbmV4cG9ydCBjb25zdCBjbGVhckxvZ2Jvb2tDYWNoZSA9IChzdGFydERhdGU6IHN0cmluZywgZW5kRGF0ZTogc3RyaW5nKSA9PiB7XG4gIERBVEFfQ0FDSEVbYCR7c3RhcnREYXRlfSR7ZW5kRGF0ZX1gXSA9IHt9O1xufTtcblxuZXhwb3J0IGNvbnN0IGNyZWF0ZUhpc3RvcmljU3RhdGUgPSAoXG4gIGN1cnJlbnRTdGF0ZU9iajogSGFzc0VudGl0eSxcbiAgc3RhdGU/OiBzdHJpbmdcbik6IEhhc3NFbnRpdHkgPT4gPEhhc3NFbnRpdHk+KDx1bmtub3duPntcbiAgICBlbnRpdHlfaWQ6IGN1cnJlbnRTdGF0ZU9iai5lbnRpdHlfaWQsXG4gICAgc3RhdGU6IHN0YXRlLFxuICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgIC8vIFJlYnVpbGQgdGhlIGhpc3RvcmljYWwgc3RhdGUgYnkgY29weWluZyBzdGF0aWMgYXR0cmlidXRlcyBvbmx5XG4gICAgICBkZXZpY2VfY2xhc3M6IGN1cnJlbnRTdGF0ZU9iaj8uYXR0cmlidXRlcy5kZXZpY2VfY2xhc3MsXG4gICAgICBzb3VyY2VfdHlwZTogY3VycmVudFN0YXRlT2JqPy5hdHRyaWJ1dGVzLnNvdXJjZV90eXBlLFxuICAgICAgaGFzX2RhdGU6IGN1cnJlbnRTdGF0ZU9iaj8uYXR0cmlidXRlcy5oYXNfZGF0ZSxcbiAgICAgIGhhc190aW1lOiBjdXJyZW50U3RhdGVPYmo/LmF0dHJpYnV0ZXMuaGFzX3RpbWUsXG4gICAgICAvLyBXZSBkbyBub3Qgd2FudCB0byB1c2UgZHluYW1pYyBlbnRpdHkgcGljdHVyZXMgKGUuZy4sIGZyb20gbWVkaWEgcGxheWVyKSBmb3IgdGhlIGxvZyBib29rIHJlbmRlcmluZyxcbiAgICAgIC8vIGFzIHRoZXkgd291bGQgcHJlc2VudCBhIGZhbHNlIHN0YXRlIGluIHRoZSBsb2cgKHBsYXllZCBtZWRpYSByaWdodCBub3cgdnMgYWN0dWFsIGhpc3RvcmljIGRhdGEpLlxuICAgICAgZW50aXR5X3BpY3R1cmVfbG9jYWw6IERPTUFJTlNfV0lUSF9EWU5BTUlDX1BJQ1RVUkUuaGFzKFxuICAgICAgICBjb21wdXRlRG9tYWluKGN1cnJlbnRTdGF0ZU9iai5lbnRpdHlfaWQpXG4gICAgICApXG4gICAgICAgID8gdW5kZWZpbmVkXG4gICAgICAgIDogY3VycmVudFN0YXRlT2JqPy5hdHRyaWJ1dGVzLmVudGl0eV9waWN0dXJlX2xvY2FsLFxuICAgICAgZW50aXR5X3BpY3R1cmU6IERPTUFJTlNfV0lUSF9EWU5BTUlDX1BJQ1RVUkUuaGFzKFxuICAgICAgICBjb21wdXRlRG9tYWluKGN1cnJlbnRTdGF0ZU9iai5lbnRpdHlfaWQpXG4gICAgICApXG4gICAgICAgID8gdW5kZWZpbmVkXG4gICAgICAgIDogY3VycmVudFN0YXRlT2JqPy5hdHRyaWJ1dGVzLmVudGl0eV9waWN0dXJlLFxuICAgIH0sXG4gIH0pO1xuXG5leHBvcnQgY29uc3QgbG9jYWxpemVUcmlnZ2VyU291cmNlID0gKFxuICBsb2NhbGl6ZTogTG9jYWxpemVGdW5jLFxuICBzb3VyY2U6IHN0cmluZ1xuKSA9PiB7XG4gIGZvciAoY29uc3QgdHJpZ2dlclBocmFzZSBpbiB0cmlnZ2VyUGhyYXNlcykge1xuICAgIGlmIChzb3VyY2Uuc3RhcnRzV2l0aCh0cmlnZ2VyUGhyYXNlKSkge1xuICAgICAgcmV0dXJuIHNvdXJjZS5yZXBsYWNlKFxuICAgICAgICB0cmlnZ2VyUGhyYXNlLFxuICAgICAgICBgJHtsb2NhbGl6ZShgdWkuY29tcG9uZW50cy5sb2dib29rLiR7dHJpZ2dlclBocmFzZXNbdHJpZ2dlclBocmFzZV19YCl9YFxuICAgICAgKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHNvdXJjZTtcbn07XG5cbmV4cG9ydCBjb25zdCBsb2NhbGl6ZVN0YXRlTWVzc2FnZSA9IChcbiAgaGFzczogSG9tZUFzc2lzdGFudCxcbiAgbG9jYWxpemU6IExvY2FsaXplRnVuYyxcbiAgc3RhdGU6IHN0cmluZyxcbiAgc3RhdGVPYmo6IEhhc3NFbnRpdHksXG4gIGRvbWFpbjogc3RyaW5nXG4pOiBzdHJpbmcgPT4ge1xuICBzd2l0Y2ggKGRvbWFpbikge1xuICAgIGNhc2UgXCJkZXZpY2VfdHJhY2tlclwiOlxuICAgIGNhc2UgXCJwZXJzb25cIjpcbiAgICAgIGlmIChzdGF0ZSA9PT0gXCJub3RfaG9tZVwiKSB7XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZShgJHtMT0dCT09LX0xPQ0FMSVpFX1BBVEh9Lndhc19hd2F5YCk7XG4gICAgICB9XG4gICAgICBpZiAoc3RhdGUgPT09IFwiaG9tZVwiKSB7XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZShgJHtMT0dCT09LX0xPQ0FMSVpFX1BBVEh9Lndhc19hdF9ob21lYCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbG9jYWxpemUoYCR7TE9HQk9PS19MT0NBTElaRV9QQVRIfS53YXNfYXRfc3RhdGVgLCBcInN0YXRlXCIsIHN0YXRlKTtcblxuICAgIGNhc2UgXCJzdW5cIjpcbiAgICAgIHJldHVybiBzdGF0ZSA9PT0gXCJhYm92ZV9ob3Jpem9uXCJcbiAgICAgICAgPyBsb2NhbGl6ZShgJHtMT0dCT09LX0xPQ0FMSVpFX1BBVEh9LnJvc2VgKVxuICAgICAgICA6IGxvY2FsaXplKGAke0xPR0JPT0tfTE9DQUxJWkVfUEFUSH0uc2V0YCk7XG5cbiAgICBjYXNlIFwiYmluYXJ5X3NlbnNvclwiOiB7XG4gICAgICBjb25zdCBpc09uID0gc3RhdGUgPT09IEJJTkFSWV9TVEFURV9PTjtcbiAgICAgIGNvbnN0IGlzT2ZmID0gc3RhdGUgPT09IEJJTkFSWV9TVEFURV9PRkY7XG4gICAgICBjb25zdCBkZXZpY2VfY2xhc3MgPSBzdGF0ZU9iai5hdHRyaWJ1dGVzLmRldmljZV9jbGFzcztcblxuICAgICAgc3dpdGNoIChkZXZpY2VfY2xhc3MpIHtcbiAgICAgICAgY2FzZSBcImJhdHRlcnlcIjpcbiAgICAgICAgICBpZiAoaXNPbikge1xuICAgICAgICAgICAgcmV0dXJuIGxvY2FsaXplKGAke0xPR0JPT0tfTE9DQUxJWkVfUEFUSH0ud2FzX2xvd2ApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaXNPZmYpIHtcbiAgICAgICAgICAgIHJldHVybiBsb2NhbGl6ZShgJHtMT0dCT09LX0xPQ0FMSVpFX1BBVEh9Lndhc19ub3JtYWxgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBcImNvbm5lY3Rpdml0eVwiOlxuICAgICAgICAgIGlmIChpc09uKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxpemUoYCR7TE9HQk9PS19MT0NBTElaRV9QQVRIfS53YXNfY29ubmVjdGVkYCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChpc09mZikge1xuICAgICAgICAgICAgcmV0dXJuIGxvY2FsaXplKGAke0xPR0JPT0tfTE9DQUxJWkVfUEFUSH0ud2FzX2Rpc2Nvbm5lY3RlZGApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIFwiZG9vclwiOlxuICAgICAgICBjYXNlIFwiZ2FyYWdlX2Rvb3JcIjpcbiAgICAgICAgY2FzZSBcIm9wZW5pbmdcIjpcbiAgICAgICAgY2FzZSBcIndpbmRvd1wiOlxuICAgICAgICAgIGlmIChpc09uKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxpemUoYCR7TE9HQk9PS19MT0NBTElaRV9QQVRIfS53YXNfb3BlbmVkYCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChpc09mZikge1xuICAgICAgICAgICAgcmV0dXJuIGxvY2FsaXplKGAke0xPR0JPT0tfTE9DQUxJWkVfUEFUSH0ud2FzX2Nsb3NlZGApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIFwibG9ja1wiOlxuICAgICAgICAgIGlmIChpc09uKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxpemUoYCR7TE9HQk9PS19MT0NBTElaRV9QQVRIfS53YXNfdW5sb2NrZWRgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGlzT2ZmKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxpemUoYCR7TE9HQk9PS19MT0NBTElaRV9QQVRIfS53YXNfbG9ja2VkYCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgXCJwbHVnXCI6XG4gICAgICAgICAgaWYgKGlzT24pIHtcbiAgICAgICAgICAgIHJldHVybiBsb2NhbGl6ZShgJHtMT0dCT09LX0xPQ0FMSVpFX1BBVEh9Lndhc19wbHVnZ2VkX2luYCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChpc09mZikge1xuICAgICAgICAgICAgcmV0dXJuIGxvY2FsaXplKGAke0xPR0JPT0tfTE9DQUxJWkVfUEFUSH0ud2FzX3VucGx1Z2dlZGApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIFwicHJlc2VuY2VcIjpcbiAgICAgICAgICBpZiAoaXNPbikge1xuICAgICAgICAgICAgcmV0dXJuIGxvY2FsaXplKGAke0xPR0JPT0tfTE9DQUxJWkVfUEFUSH0ud2FzX2F0X2hvbWVgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGlzT2ZmKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxpemUoYCR7TE9HQk9PS19MT0NBTElaRV9QQVRIfS53YXNfYXdheWApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIFwic2FmZXR5XCI6XG4gICAgICAgICAgaWYgKGlzT24pIHtcbiAgICAgICAgICAgIHJldHVybiBsb2NhbGl6ZShgJHtMT0dCT09LX0xPQ0FMSVpFX1BBVEh9Lndhc191bnNhZmVgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGlzT2ZmKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxpemUoYCR7TE9HQk9PS19MT0NBTElaRV9QQVRIfS53YXNfc2FmZWApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIFwiY29sZFwiOlxuICAgICAgICBjYXNlIFwiZ2FzXCI6XG4gICAgICAgIGNhc2UgXCJoZWF0XCI6XG4gICAgICAgIGNhc2UgXCJtb2lzdHVyZVwiOlxuICAgICAgICBjYXNlIFwibW90aW9uXCI6XG4gICAgICAgIGNhc2UgXCJvY2N1cGFuY3lcIjpcbiAgICAgICAgY2FzZSBcInBvd2VyXCI6XG4gICAgICAgIGNhc2UgXCJwcm9ibGVtXCI6XG4gICAgICAgIGNhc2UgXCJzbW9rZVwiOlxuICAgICAgICBjYXNlIFwic291bmRcIjpcbiAgICAgICAgY2FzZSBcInZpYnJhdGlvblwiOlxuICAgICAgICAgIGlmIChpc09uKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxpemUoYCR7TE9HQk9PS19MT0NBTElaRV9QQVRIfS5kZXRlY3RlZF9kZXZpY2VfY2xhc3NgLCB7XG4gICAgICAgICAgICAgIGRldmljZV9jbGFzczogbG9jYWxpemUoXG4gICAgICAgICAgICAgICAgYGNvbXBvbmVudC5iaW5hcnlfc2Vuc29yLmRldmljZV9jbGFzcy4ke2RldmljZV9jbGFzc31gXG4gICAgICAgICAgICAgICksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGlzT2ZmKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxpemUoYCR7TE9HQk9PS19MT0NBTElaRV9QQVRIfS5jbGVhcmVkX2RldmljZV9jbGFzc2AsIHtcbiAgICAgICAgICAgICAgZGV2aWNlX2NsYXNzOiBsb2NhbGl6ZShcbiAgICAgICAgICAgICAgICBgY29tcG9uZW50LmJpbmFyeV9zZW5zb3IuZGV2aWNlX2NsYXNzLiR7ZGV2aWNlX2NsYXNzfWBcbiAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIFwidGFtcGVyXCI6XG4gICAgICAgICAgaWYgKGlzT24pIHtcbiAgICAgICAgICAgIHJldHVybiBsb2NhbGl6ZShgJHtMT0dCT09LX0xPQ0FMSVpFX1BBVEh9LmRldGVjdGVkX3RhbXBlcmluZ2ApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaXNPZmYpIHtcbiAgICAgICAgICAgIHJldHVybiBsb2NhbGl6ZShgJHtMT0dCT09LX0xPQ0FMSVpFX1BBVEh9LmNsZWFyZWRfdGFtcGVyaW5nYCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBicmVhaztcbiAgICB9XG5cbiAgICBjYXNlIFwiY292ZXJcIjpcbiAgICAgIHN3aXRjaCAoc3RhdGUpIHtcbiAgICAgICAgY2FzZSBcIm9wZW5cIjpcbiAgICAgICAgICByZXR1cm4gbG9jYWxpemUoYCR7TE9HQk9PS19MT0NBTElaRV9QQVRIfS53YXNfb3BlbmVkYCk7XG4gICAgICAgIGNhc2UgXCJvcGVuaW5nXCI6XG4gICAgICAgICAgcmV0dXJuIGxvY2FsaXplKGAke0xPR0JPT0tfTE9DQUxJWkVfUEFUSH0uaXNfb3BlbmluZ2ApO1xuICAgICAgICBjYXNlIFwiY2xvc2luZ1wiOlxuICAgICAgICAgIHJldHVybiBsb2NhbGl6ZShgJHtMT0dCT09LX0xPQ0FMSVpFX1BBVEh9LmlzX2Nsb3NpbmdgKTtcbiAgICAgICAgY2FzZSBcImNsb3NlZFwiOlxuICAgICAgICAgIHJldHVybiBsb2NhbGl6ZShgJHtMT0dCT09LX0xPQ0FMSVpFX1BBVEh9Lndhc19jbG9zZWRgKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSBcImxvY2tcIjpcbiAgICAgIGlmIChzdGF0ZSA9PT0gXCJ1bmxvY2tlZFwiKSB7XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZShgJHtMT0dCT09LX0xPQ0FMSVpFX1BBVEh9Lndhc191bmxvY2tlZGApO1xuICAgICAgfVxuICAgICAgaWYgKHN0YXRlID09PSBcImxvY2tlZFwiKSB7XG4gICAgICAgIHJldHVybiBsb2NhbGl6ZShgJHtMT0dCT09LX0xPQ0FMSVpFX1BBVEh9Lndhc19sb2NrZWRgKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICB9XG5cbiAgaWYgKHN0YXRlID09PSBCSU5BUllfU1RBVEVfT04pIHtcbiAgICByZXR1cm4gbG9jYWxpemUoYCR7TE9HQk9PS19MT0NBTElaRV9QQVRIfS50dXJuZWRfb25gKTtcbiAgfVxuXG4gIGlmIChzdGF0ZSA9PT0gQklOQVJZX1NUQVRFX09GRikge1xuICAgIHJldHVybiBsb2NhbGl6ZShgJHtMT0dCT09LX0xPQ0FMSVpFX1BBVEh9LnR1cm5lZF9vZmZgKTtcbiAgfVxuXG4gIGlmIChVTkFWQUlMQUJMRV9TVEFURVMuaW5jbHVkZXMoc3RhdGUpKSB7XG4gICAgcmV0dXJuIGxvY2FsaXplKGAke0xPR0JPT0tfTE9DQUxJWkVfUEFUSH0uYmVjYW1lX3VuYXZhaWxhYmxlYCk7XG4gIH1cblxuICByZXR1cm4gaGFzcy5sb2NhbGl6ZShcbiAgICBgJHtMT0dCT09LX0xPQ0FMSVpFX1BBVEh9LmNoYW5nZWRfdG9fc3RhdGVgLFxuICAgIFwic3RhdGVcIixcbiAgICBzdGF0ZU9ialxuICAgICAgPyBjb21wdXRlU3RhdGVEaXNwbGF5KGxvY2FsaXplLCBzdGF0ZU9iaiwgaGFzcy5sb2NhbGUsIHN0YXRlKVxuICAgICAgOiBzdGF0ZVxuICApO1xufTtcblxuZXhwb3J0IGNvbnN0IGZpbHRlckxvZ2Jvb2tDb21wYXRpYmxlRW50aXRpZXM6IEhhRW50aXR5UGlja2VyRW50aXR5RmlsdGVyRnVuYyA9IChcbiAgZW50aXR5XG4pID0+XG4gIGNvbXB1dGVTdGF0ZURvbWFpbihlbnRpdHkpICE9PSBcInNlbnNvclwiIHx8XG4gIChlbnRpdHkuYXR0cmlidXRlcy51bml0X29mX21lYXN1cmVtZW50ID09PSB1bmRlZmluZWQgJiZcbiAgICBlbnRpdHkuYXR0cmlidXRlcy5zdGF0ZV9jbGFzcyA9PT0gdW5kZWZpbmVkKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/data/logbook.ts\n");

/***/ }),

/***/ "./src/data/trace.ts":
/*!***************************!*\
  !*** ./src/data/trace.ts ***!
  \***************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"loadTrace\": function() { return /* binding */ loadTrace; },\n/* harmony export */   \"loadTraces\": function() { return /* binding */ loadTraces; },\n/* harmony export */   \"loadTraceContexts\": function() { return /* binding */ loadTraceContexts; },\n/* harmony export */   \"getDataFromPath\": function() { return /* binding */ getDataFromPath; },\n/* harmony export */   \"isTriggerPath\": function() { return /* binding */ isTriggerPath; },\n/* harmony export */   \"getTriggerPathFromTrace\": function() { return /* binding */ getTriggerPathFromTrace; }\n/* harmony export */ });\n/* harmony import */ var _common_string_starts_with__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/string/starts-with */ \"./src/common/string/starts-with.ts\");\n\nvar loadTrace = function loadTrace(hass, domain, item_id, run_id) {\n  return hass.callWS({\n    type: \"trace/get\",\n    domain: domain,\n    item_id: item_id,\n    run_id: run_id\n  });\n};\nvar loadTraces = function loadTraces(hass, domain, item_id) {\n  return hass.callWS({\n    type: \"trace/list\",\n    domain: domain,\n    item_id: item_id\n  });\n};\nvar loadTraceContexts = function loadTraceContexts(hass, domain, item_id) {\n  return hass.callWS({\n    type: \"trace/contexts\",\n    domain: domain,\n    item_id: item_id\n  });\n};\nvar getDataFromPath = function getDataFromPath(config, path) {\n  var parts = path.split(\"/\").reverse();\n  var result = config;\n\n  while (parts.length) {\n    var raw = parts.pop();\n    var asNumber = Number(raw);\n\n    if (isNaN(asNumber)) {\n      var tempResult = result[raw];\n\n      if (!tempResult && raw === \"sequence\") {\n        continue;\n      }\n\n      result = tempResult;\n      continue;\n    }\n\n    if (Array.isArray(result)) {\n      result = result[asNumber];\n      continue;\n    }\n\n    if (asNumber !== 0) {\n      throw new Error(\"If config is not an array, can only return index 0\");\n    }\n  }\n\n  return result;\n}; // It is 'trigger' if manually triggered by the user via UI\n\nvar isTriggerPath = function isTriggerPath(path) {\n  return path === \"trigger\" || (0,_common_string_starts_with__WEBPACK_IMPORTED_MODULE_0__.strStartsWith)(path, \"trigger/\");\n};\nvar getTriggerPathFromTrace = function getTriggerPathFromTrace(steps) {\n  return Object.keys(steps).find(function (path) {\n    return isTriggerPath(path);\n  });\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZGF0YS90cmFjZS50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUE7QUFzSUE7QUFBQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFOQTtBQWFBO0FBQUE7QUFNQTtBQUNBO0FBQ0E7QUFIQTtBQUxBO0FBZ0JBO0FBQUE7QUFNQTtBQUNBO0FBQ0E7QUFIQTtBQUxBO0FBV0E7QUFJQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFHQTtBQUFBO0FBQUE7QUFHQTtBQUFBO0FBRUE7QUFBQTtBQUZBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaG9tZS1hc3Npc3RhbnQtZnJvbnRlbmQvLi9zcmMvZGF0YS90cmFjZS50cz9lNGU1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHN0clN0YXJ0c1dpdGggfSBmcm9tIFwiLi4vY29tbW9uL3N0cmluZy9zdGFydHMtd2l0aFwiO1xuaW1wb3J0IHsgQ29udGV4dCwgSG9tZUFzc2lzdGFudCB9IGZyb20gXCIuLi90eXBlc1wiO1xuaW1wb3J0IHtcbiAgQmx1ZXByaW50QXV0b21hdGlvbkNvbmZpZyxcbiAgTWFudWFsQXV0b21hdGlvbkNvbmZpZyxcbn0gZnJvbSBcIi4vYXV0b21hdGlvblwiO1xuaW1wb3J0IHsgQmx1ZXByaW50U2NyaXB0Q29uZmlnLCBTY3JpcHRDb25maWcgfSBmcm9tIFwiLi9zY3JpcHRcIjtcblxuaW50ZXJmYWNlIEJhc2VUcmFjZVN0ZXAge1xuICBwYXRoOiBzdHJpbmc7XG4gIHRpbWVzdGFtcDogc3RyaW5nO1xuICBlcnJvcj86IHN0cmluZztcbiAgY2hhbmdlZF92YXJpYWJsZXM/OiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBUcmlnZ2VyVHJhY2VTdGVwIGV4dGVuZHMgQmFzZVRyYWNlU3RlcCB7XG4gIGNoYW5nZWRfdmFyaWFibGVzOiB7XG4gICAgdHJpZ2dlcjoge1xuICAgICAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgICAgIFtrZXk6IHN0cmluZ106IHVua25vd247XG4gICAgfTtcbiAgICBba2V5OiBzdHJpbmddOiB1bmtub3duO1xuICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbmRpdGlvblRyYWNlU3RlcCBleHRlbmRzIEJhc2VUcmFjZVN0ZXAge1xuICByZXN1bHQ/OiB7IHJlc3VsdDogYm9vbGVhbiB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENhbGxTZXJ2aWNlQWN0aW9uVHJhY2VTdGVwIGV4dGVuZHMgQmFzZVRyYWNlU3RlcCB7XG4gIHJlc3VsdD86IHtcbiAgICBsaW1pdDogbnVtYmVyO1xuICAgIHJ1bm5pbmdfc2NyaXB0OiBib29sZWFuO1xuICAgIHBhcmFtczogUmVjb3JkPHN0cmluZywgdW5rbm93bj47XG4gIH07XG4gIGNoaWxkX2lkPzoge1xuICAgIGRvbWFpbjogc3RyaW5nO1xuICAgIGl0ZW1faWQ6IHN0cmluZztcbiAgICBydW5faWQ6IHN0cmluZztcbiAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDaG9vc2VBY3Rpb25UcmFjZVN0ZXAgZXh0ZW5kcyBCYXNlVHJhY2VTdGVwIHtcbiAgcmVzdWx0PzogeyBjaG9pY2U6IG51bWJlciB8IFwiZGVmYXVsdFwiIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSWZBY3Rpb25UcmFjZVN0ZXAgZXh0ZW5kcyBCYXNlVHJhY2VTdGVwIHtcbiAgcmVzdWx0PzogeyBjaG9pY2U6IFwidGhlblwiIHwgXCJlbHNlXCIgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdG9wQWN0aW9uVHJhY2VTdGVwIGV4dGVuZHMgQmFzZVRyYWNlU3RlcCB7XG4gIHJlc3VsdD86IHsgc3RvcDogc3RyaW5nOyBlcnJvcjogYm9vbGVhbiB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENob29zZUNob2ljZUFjdGlvblRyYWNlU3RlcCBleHRlbmRzIEJhc2VUcmFjZVN0ZXAge1xuICByZXN1bHQ/OiB7IHJlc3VsdDogYm9vbGVhbiB9O1xufVxuXG5leHBvcnQgdHlwZSBBY3Rpb25UcmFjZVN0ZXAgPVxuICB8IEJhc2VUcmFjZVN0ZXBcbiAgfCBDb25kaXRpb25UcmFjZVN0ZXBcbiAgfCBDYWxsU2VydmljZUFjdGlvblRyYWNlU3RlcFxuICB8IENob29zZUFjdGlvblRyYWNlU3RlcFxuICB8IENob29zZUNob2ljZUFjdGlvblRyYWNlU3RlcDtcblxuaW50ZXJmYWNlIEJhc2VUcmFjZSB7XG4gIGRvbWFpbjogc3RyaW5nO1xuICBpdGVtX2lkOiBzdHJpbmc7XG4gIGxhc3Rfc3RlcDogc3RyaW5nIHwgbnVsbDtcbiAgcnVuX2lkOiBzdHJpbmc7XG4gIHN0YXRlOiBcInJ1bm5pbmdcIiB8IFwic3RvcHBlZFwiIHwgXCJkZWJ1Z2dlZFwiO1xuICB0aW1lc3RhbXA6IHtcbiAgICBzdGFydDogc3RyaW5nO1xuICAgIGZpbmlzaDogc3RyaW5nIHwgbnVsbDtcbiAgfTtcbiAgc2NyaXB0X2V4ZWN1dGlvbjpcbiAgICB8IC8vIFRoZSBzY3JpcHQgd2FzIG5vdCBleGVjdXRlZCBiZWNhdXNlIHRoZSBhdXRvbWF0aW9uJ3MgY29uZGl0aW9uIGZhaWxlZFxuICAgIFwiZmFpbGVkX2NvbmRpdGlvbnNcIlxuICAgIC8vIFRoZSBzY3JpcHQgd2FzIG5vdCBleGVjdXRlZCBiZWNhdXNlIHRoZSBydW4gbW9kZSBpcyBzaW5nbGVcbiAgICB8IFwiZmFpbGVkX3NpbmdsZVwiXG4gICAgLy8gVGhlIHNjcmlwdCB3YXMgbm90IGV4ZWN1dGVkIGJlY2F1c2UgbWF4IHBhcmFsbGVsIHJ1bnMgd291bGQgYmUgZXhjZWVkZWRcbiAgICB8IFwiZmFpbGVkX21heF9ydW5zXCJcbiAgICAvLyBBbGwgc2NyaXB0IHN0ZXBzIGZpbmlzaGVkOlxuICAgIHwgXCJmaW5pc2hlZFwiXG4gICAgLy8gU2NyaXB0IGV4ZWN1dGlvbiBzdG9wcGVkIGJ5IHRoZSBzY3JpcHQgaXRzZWxmIGJlY2F1c2UgYSBjb25kaXRpb24gZmFpbHMsIHdhaXRfZm9yX3RyaWdnZXIgdGltZW91dHMgZXRjOlxuICAgIHwgXCJhYm9ydGVkXCJcbiAgICAvLyBEZXRhaWxzIGFib3V0IGZhaWxpbmcgY29uZGl0aW9uLCB0aW1lb3V0IGV0Yy4gaXMgaW4gdGhlIGxhc3QgZWxlbWVudCBvZiB0aGUgdHJhY2VcbiAgICAvLyBTY3JpcHQgZXhlY3V0aW9uIHN0b3BzIGJlY2F1c2Ugb2YgYW4gdW5leHBlY3RlZCBleGNlcHRpb246XG4gICAgfCBcImVycm9yXCJcbiAgICAvLyBUaGUgZXhjZXB0aW9uIGlzIGluIHRoZSB0cmFjZSBpdHNlbGYgb3IgaW4gdGhlIGxhc3QgZWxlbWVudCBvZiB0aGUgdHJhY2VcbiAgICAvLyBTY3JpcHQgZXhlY3V0aW9uIHN0b3BwZWQgYnkgYXN5bmNfc3RvcCBjYWxsZWQgb24gdGhlIHNjcmlwdCBydW4gYmVjYXVzZSBob21lIGFzc2lzdGFudCBpcyBzaHV0dGluZyBkb3duLCBzY3JpcHQgbW9kZSBpcyBTQ1JJUFRfTU9ERV9SRVNUQVJUIGV0YzpcbiAgICB8IFwiY2FuY2VsbGVkXCI7XG59XG5cbmludGVyZmFjZSBCYXNlVHJhY2VFeHRlbmRlZCB7XG4gIHRyYWNlOiBSZWNvcmQ8c3RyaW5nLCBBY3Rpb25UcmFjZVN0ZXBbXT47XG4gIGNvbnRleHQ6IENvbnRleHQ7XG4gIGVycm9yPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEF1dG9tYXRpb25UcmFjZSBleHRlbmRzIEJhc2VUcmFjZSB7XG4gIGRvbWFpbjogXCJhdXRvbWF0aW9uXCI7XG4gIHRyaWdnZXI6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBdXRvbWF0aW9uVHJhY2VFeHRlbmRlZFxuICBleHRlbmRzIEF1dG9tYXRpb25UcmFjZSxcbiAgICBCYXNlVHJhY2VFeHRlbmRlZCB7XG4gIGNvbmZpZzogTWFudWFsQXV0b21hdGlvbkNvbmZpZztcbiAgYmx1ZXByaW50X2lucHV0cz86IEJsdWVwcmludEF1dG9tYXRpb25Db25maWc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2NyaXB0VHJhY2UgZXh0ZW5kcyBCYXNlVHJhY2Uge1xuICBkb21haW46IFwic2NyaXB0XCI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2NyaXB0VHJhY2VFeHRlbmRlZCBleHRlbmRzIFNjcmlwdFRyYWNlLCBCYXNlVHJhY2VFeHRlbmRlZCB7XG4gIGNvbmZpZzogU2NyaXB0Q29uZmlnO1xuICBibHVlcHJpbnRfaW5wdXRzPzogQmx1ZXByaW50U2NyaXB0Q29uZmlnO1xufVxuXG5leHBvcnQgdHlwZSBUcmFjZUV4dGVuZGVkID0gQXV0b21hdGlvblRyYWNlRXh0ZW5kZWQgfCBTY3JpcHRUcmFjZUV4dGVuZGVkO1xuXG5pbnRlcmZhY2UgVHJhY2VUeXBlcyB7XG4gIGF1dG9tYXRpb246IHtcbiAgICBzaG9ydDogQXV0b21hdGlvblRyYWNlO1xuICAgIGV4dGVuZGVkOiBBdXRvbWF0aW9uVHJhY2VFeHRlbmRlZDtcbiAgfTtcbiAgc2NyaXB0OiB7XG4gICAgc2hvcnQ6IFNjcmlwdFRyYWNlO1xuICAgIGV4dGVuZGVkOiBTY3JpcHRUcmFjZUV4dGVuZGVkO1xuICB9O1xufVxuXG5leHBvcnQgY29uc3QgbG9hZFRyYWNlID0gPFQgZXh0ZW5kcyBrZXlvZiBUcmFjZVR5cGVzPihcbiAgaGFzczogSG9tZUFzc2lzdGFudCxcbiAgZG9tYWluOiBULFxuICBpdGVtX2lkOiBzdHJpbmcsXG4gIHJ1bl9pZDogc3RyaW5nXG4pOiBQcm9taXNlPFRyYWNlVHlwZXNbVF1bXCJleHRlbmRlZFwiXT4gPT5cbiAgaGFzcy5jYWxsV1Moe1xuICAgIHR5cGU6IFwidHJhY2UvZ2V0XCIsXG4gICAgZG9tYWluLFxuICAgIGl0ZW1faWQsXG4gICAgcnVuX2lkLFxuICB9KTtcblxuZXhwb3J0IGNvbnN0IGxvYWRUcmFjZXMgPSA8VCBleHRlbmRzIGtleW9mIFRyYWNlVHlwZXM+KFxuICBoYXNzOiBIb21lQXNzaXN0YW50LFxuICBkb21haW46IFQsXG4gIGl0ZW1faWQ6IHN0cmluZ1xuKTogUHJvbWlzZTxBcnJheTxUcmFjZVR5cGVzW1RdW1wic2hvcnRcIl0+PiA9PlxuICBoYXNzLmNhbGxXUyh7XG4gICAgdHlwZTogXCJ0cmFjZS9saXN0XCIsXG4gICAgZG9tYWluLFxuICAgIGl0ZW1faWQsXG4gIH0pO1xuXG5leHBvcnQgdHlwZSBUcmFjZUNvbnRleHRzID0gUmVjb3JkPFxuICBzdHJpbmcsXG4gIHsgcnVuX2lkOiBzdHJpbmc7IGRvbWFpbjogc3RyaW5nOyBpdGVtX2lkOiBzdHJpbmcgfVxuPjtcblxuZXhwb3J0IGNvbnN0IGxvYWRUcmFjZUNvbnRleHRzID0gKFxuICBoYXNzOiBIb21lQXNzaXN0YW50LFxuICBkb21haW4/OiBzdHJpbmcsXG4gIGl0ZW1faWQ/OiBzdHJpbmdcbik6IFByb21pc2U8VHJhY2VDb250ZXh0cz4gPT5cbiAgaGFzcy5jYWxsV1Moe1xuICAgIHR5cGU6IFwidHJhY2UvY29udGV4dHNcIixcbiAgICBkb21haW4sXG4gICAgaXRlbV9pZCxcbiAgfSk7XG5cbmV4cG9ydCBjb25zdCBnZXREYXRhRnJvbVBhdGggPSAoXG4gIGNvbmZpZzogVHJhY2VFeHRlbmRlZFtcImNvbmZpZ1wiXSxcbiAgcGF0aDogc3RyaW5nXG4pOiBhbnkgPT4ge1xuICBjb25zdCBwYXJ0cyA9IHBhdGguc3BsaXQoXCIvXCIpLnJldmVyc2UoKTtcblxuICBsZXQgcmVzdWx0OiBhbnkgPSBjb25maWc7XG5cbiAgd2hpbGUgKHBhcnRzLmxlbmd0aCkge1xuICAgIGNvbnN0IHJhdyA9IHBhcnRzLnBvcCgpITtcbiAgICBjb25zdCBhc051bWJlciA9IE51bWJlcihyYXcpO1xuXG4gICAgaWYgKGlzTmFOKGFzTnVtYmVyKSkge1xuICAgICAgY29uc3QgdGVtcFJlc3VsdCA9IHJlc3VsdFtyYXddO1xuICAgICAgaWYgKCF0ZW1wUmVzdWx0ICYmIHJhdyA9PT0gXCJzZXF1ZW5jZVwiKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgcmVzdWx0ID0gdGVtcFJlc3VsdDtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGlmIChBcnJheS5pc0FycmF5KHJlc3VsdCkpIHtcbiAgICAgIHJlc3VsdCA9IHJlc3VsdFthc051bWJlcl07XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICBpZiAoYXNOdW1iZXIgIT09IDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIklmIGNvbmZpZyBpcyBub3QgYW4gYXJyYXksIGNhbiBvbmx5IHJldHVybiBpbmRleCAwXCIpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG4vLyBJdCBpcyAndHJpZ2dlcicgaWYgbWFudWFsbHkgdHJpZ2dlcmVkIGJ5IHRoZSB1c2VyIHZpYSBVSVxuZXhwb3J0IGNvbnN0IGlzVHJpZ2dlclBhdGggPSAocGF0aDogc3RyaW5nKTogYm9vbGVhbiA9PlxuICBwYXRoID09PSBcInRyaWdnZXJcIiB8fCBzdHJTdGFydHNXaXRoKHBhdGgsIFwidHJpZ2dlci9cIik7XG5cbmV4cG9ydCBjb25zdCBnZXRUcmlnZ2VyUGF0aEZyb21UcmFjZSA9IChcbiAgc3RlcHM6IFJlY29yZDxzdHJpbmcsIEJhc2VUcmFjZVN0ZXBbXT5cbik6IHN0cmluZyB8IHVuZGVmaW5lZCA9PiBPYmplY3Qua2V5cyhzdGVwcykuZmluZCgocGF0aCkgPT4gaXNUcmlnZ2VyUGF0aChwYXRoKSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/data/trace.ts\n");

/***/ }),

/***/ "./src/panels/logbook/ha-logbook-renderer.ts":
/*!***************************************************!*\
  !*** ./src/panels/logbook/ha-logbook-renderer.ts ***!
  \***************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _lit_labs_virtualizer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @lit-labs/virtualizer */ \"./node_modules/@lit-labs/virtualizer/lit-virtualizer.js\");\n/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit */ \"./node_modules/lit/index.js\");\n/* harmony import */ var lit_decorators__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lit/decorators */ \"./node_modules/lit/decorators.js\");\n/* harmony import */ var lit_directives_class_map__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lit/directives/class-map */ \"./node_modules/lit/directives/class-map.js\");\n/* harmony import */ var _common_datetime_format_date__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../common/datetime/format_date */ \"./src/common/datetime/format_date.ts\");\n/* harmony import */ var _common_datetime_format_time__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../common/datetime/format_time */ \"./src/common/datetime/format_time.ts\");\n/* harmony import */ var _common_decorators_restore_scroll__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../common/decorators/restore-scroll */ \"./src/common/decorators/restore-scroll.ts\");\n/* harmony import */ var _common_dom_fire_event__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../common/dom/fire_event */ \"./src/common/dom/fire_event.ts\");\n/* harmony import */ var _common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../common/entity/compute_domain */ \"./src/common/entity/compute_domain.ts\");\n/* harmony import */ var _common_config_is_component_loaded__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../common/config/is_component_loaded */ \"./src/common/config/is_component_loaded.ts\");\n/* harmony import */ var _components_entity_state_badge__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../components/entity/state-badge */ \"./src/components/entity/state-badge.ts\");\n/* harmony import */ var _components_ha_circular_progress__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../components/ha-circular-progress */ \"./src/components/ha-circular-progress.ts\");\n/* harmony import */ var _components_ha_relative_time__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../components/ha-relative-time */ \"./src/components/ha-relative-time.ts\");\n/* harmony import */ var _data_logbook__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../data/logbook */ \"./src/data/logbook.ts\");\n/* harmony import */ var _resources_styles__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../resources/styles */ \"./src/resources/styles.ts\");\n/* harmony import */ var _util_brands_url__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../util/brands-url */ \"./src/util/brands-url.ts\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nvar _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5, _templateObject6, _templateObject7, _templateObject8, _templateObject9, _templateObject10, _templateObject11, _templateObject12, _templateObject13, _templateObject14, _templateObject15, _templateObject16, _templateObject17, _templateObject18, _templateObject19;\n\nfunction _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _decorate(decorators, factory, superClass, mixins) { var api = _getDecoratorsApi(); if (mixins) { for (var i = 0; i < mixins.length; i++) { api = mixins[i](api); } } var r = factory(function initialize(O) { api.initializeInstanceElements(O, decorated.elements); }, superClass); var decorated = api.decorateClass(_coalesceClassElements(r.d.map(_createElementDescriptor)), decorators); api.initializeClassElements(r.F, decorated.elements); return api.runClassFinishers(r.F, decorated.finishers); }\n\nfunction _getDecoratorsApi() { _getDecoratorsApi = function _getDecoratorsApi() { return api; }; var api = { elementsDefinitionOrder: [[\"method\"], [\"field\"]], initializeInstanceElements: function initializeInstanceElements(O, elements) { [\"method\", \"field\"].forEach(function (kind) { elements.forEach(function (element) { if (element.kind === kind && element.placement === \"own\") { this.defineClassElement(O, element); } }, this); }, this); }, initializeClassElements: function initializeClassElements(F, elements) { var proto = F.prototype; [\"method\", \"field\"].forEach(function (kind) { elements.forEach(function (element) { var placement = element.placement; if (element.kind === kind && (placement === \"static\" || placement === \"prototype\")) { var receiver = placement === \"static\" ? F : proto; this.defineClassElement(receiver, element); } }, this); }, this); }, defineClassElement: function defineClassElement(receiver, element) { var descriptor = element.descriptor; if (element.kind === \"field\") { var initializer = element.initializer; descriptor = { enumerable: descriptor.enumerable, writable: descriptor.writable, configurable: descriptor.configurable, value: initializer === void 0 ? void 0 : initializer.call(receiver) }; } Object.defineProperty(receiver, element.key, descriptor); }, decorateClass: function decorateClass(elements, decorators) { var newElements = []; var finishers = []; var placements = { \"static\": [], prototype: [], own: [] }; elements.forEach(function (element) { this.addElementPlacement(element, placements); }, this); elements.forEach(function (element) { if (!_hasDecorators(element)) return newElements.push(element); var elementFinishersExtras = this.decorateElement(element, placements); newElements.push(elementFinishersExtras.element); newElements.push.apply(newElements, elementFinishersExtras.extras); finishers.push.apply(finishers, elementFinishersExtras.finishers); }, this); if (!decorators) { return { elements: newElements, finishers: finishers }; } var result = this.decorateConstructor(newElements, decorators); finishers.push.apply(finishers, result.finishers); result.finishers = finishers; return result; }, addElementPlacement: function addElementPlacement(element, placements, silent) { var keys = placements[element.placement]; if (!silent && keys.indexOf(element.key) !== -1) { throw new TypeError(\"Duplicated element (\" + element.key + \")\"); } keys.push(element.key); }, decorateElement: function decorateElement(element, placements) { var extras = []; var finishers = []; for (var decorators = element.decorators, i = decorators.length - 1; i >= 0; i--) { var keys = placements[element.placement]; keys.splice(keys.indexOf(element.key), 1); var elementObject = this.fromElementDescriptor(element); var elementFinisherExtras = this.toElementFinisherExtras((0, decorators[i])(elementObject) || elementObject); element = elementFinisherExtras.element; this.addElementPlacement(element, placements); if (elementFinisherExtras.finisher) { finishers.push(elementFinisherExtras.finisher); } var newExtras = elementFinisherExtras.extras; if (newExtras) { for (var j = 0; j < newExtras.length; j++) { this.addElementPlacement(newExtras[j], placements); } extras.push.apply(extras, newExtras); } } return { element: element, finishers: finishers, extras: extras }; }, decorateConstructor: function decorateConstructor(elements, decorators) { var finishers = []; for (var i = decorators.length - 1; i >= 0; i--) { var obj = this.fromClassDescriptor(elements); var elementsAndFinisher = this.toClassDescriptor((0, decorators[i])(obj) || obj); if (elementsAndFinisher.finisher !== undefined) { finishers.push(elementsAndFinisher.finisher); } if (elementsAndFinisher.elements !== undefined) { elements = elementsAndFinisher.elements; for (var j = 0; j < elements.length - 1; j++) { for (var k = j + 1; k < elements.length; k++) { if (elements[j].key === elements[k].key && elements[j].placement === elements[k].placement) { throw new TypeError(\"Duplicated element (\" + elements[j].key + \")\"); } } } } } return { elements: elements, finishers: finishers }; }, fromElementDescriptor: function fromElementDescriptor(element) { var obj = { kind: element.kind, key: element.key, placement: element.placement, descriptor: element.descriptor }; var desc = { value: \"Descriptor\", configurable: true }; Object.defineProperty(obj, Symbol.toStringTag, desc); if (element.kind === \"field\") obj.initializer = element.initializer; return obj; }, toElementDescriptors: function toElementDescriptors(elementObjects) { if (elementObjects === undefined) return; return _toArray(elementObjects).map(function (elementObject) { var element = this.toElementDescriptor(elementObject); this.disallowProperty(elementObject, \"finisher\", \"An element descriptor\"); this.disallowProperty(elementObject, \"extras\", \"An element descriptor\"); return element; }, this); }, toElementDescriptor: function toElementDescriptor(elementObject) { var kind = String(elementObject.kind); if (kind !== \"method\" && kind !== \"field\") { throw new TypeError('An element descriptor\\'s .kind property must be either \"method\" or' + ' \"field\", but a decorator created an element descriptor with' + ' .kind \"' + kind + '\"'); } var key = _toPropertyKey(elementObject.key); var placement = String(elementObject.placement); if (placement !== \"static\" && placement !== \"prototype\" && placement !== \"own\") { throw new TypeError('An element descriptor\\'s .placement property must be one of \"static\",' + ' \"prototype\" or \"own\", but a decorator created an element descriptor' + ' with .placement \"' + placement + '\"'); } var descriptor = elementObject.descriptor; this.disallowProperty(elementObject, \"elements\", \"An element descriptor\"); var element = { kind: kind, key: key, placement: placement, descriptor: Object.assign({}, descriptor) }; if (kind !== \"field\") { this.disallowProperty(elementObject, \"initializer\", \"A method descriptor\"); } else { this.disallowProperty(descriptor, \"get\", \"The property descriptor of a field descriptor\"); this.disallowProperty(descriptor, \"set\", \"The property descriptor of a field descriptor\"); this.disallowProperty(descriptor, \"value\", \"The property descriptor of a field descriptor\"); element.initializer = elementObject.initializer; } return element; }, toElementFinisherExtras: function toElementFinisherExtras(elementObject) { var element = this.toElementDescriptor(elementObject); var finisher = _optionalCallableProperty(elementObject, \"finisher\"); var extras = this.toElementDescriptors(elementObject.extras); return { element: element, finisher: finisher, extras: extras }; }, fromClassDescriptor: function fromClassDescriptor(elements) { var obj = { kind: \"class\", elements: elements.map(this.fromElementDescriptor, this) }; var desc = { value: \"Descriptor\", configurable: true }; Object.defineProperty(obj, Symbol.toStringTag, desc); return obj; }, toClassDescriptor: function toClassDescriptor(obj) { var kind = String(obj.kind); if (kind !== \"class\") { throw new TypeError('A class descriptor\\'s .kind property must be \"class\", but a decorator' + ' created a class descriptor with .kind \"' + kind + '\"'); } this.disallowProperty(obj, \"key\", \"A class descriptor\"); this.disallowProperty(obj, \"placement\", \"A class descriptor\"); this.disallowProperty(obj, \"descriptor\", \"A class descriptor\"); this.disallowProperty(obj, \"initializer\", \"A class descriptor\"); this.disallowProperty(obj, \"extras\", \"A class descriptor\"); var finisher = _optionalCallableProperty(obj, \"finisher\"); var elements = this.toElementDescriptors(obj.elements); return { elements: elements, finisher: finisher }; }, runClassFinishers: function runClassFinishers(constructor, finishers) { for (var i = 0; i < finishers.length; i++) { var newConstructor = (0, finishers[i])(constructor); if (newConstructor !== undefined) { if (typeof newConstructor !== \"function\") { throw new TypeError(\"Finishers must return a constructor.\"); } constructor = newConstructor; } } return constructor; }, disallowProperty: function disallowProperty(obj, name, objectType) { if (obj[name] !== undefined) { throw new TypeError(objectType + \" can't have a .\" + name + \" property.\"); } } }; return api; }\n\nfunction _createElementDescriptor(def) { var key = _toPropertyKey(def.key); var descriptor; if (def.kind === \"method\") { descriptor = { value: def.value, writable: true, configurable: true, enumerable: false }; } else if (def.kind === \"get\") { descriptor = { get: def.value, configurable: true, enumerable: false }; } else if (def.kind === \"set\") { descriptor = { set: def.value, configurable: true, enumerable: false }; } else if (def.kind === \"field\") { descriptor = { configurable: true, writable: true, enumerable: true }; } var element = { kind: def.kind === \"field\" ? \"field\" : \"method\", key: key, placement: def[\"static\"] ? \"static\" : def.kind === \"field\" ? \"own\" : \"prototype\", descriptor: descriptor }; if (def.decorators) element.decorators = def.decorators; if (def.kind === \"field\") element.initializer = def.value; return element; }\n\nfunction _coalesceGetterSetter(element, other) { if (element.descriptor.get !== undefined) { other.descriptor.get = element.descriptor.get; } else { other.descriptor.set = element.descriptor.set; } }\n\nfunction _coalesceClassElements(elements) { var newElements = []; var isSameElement = function isSameElement(other) { return other.kind === \"method\" && other.key === element.key && other.placement === element.placement; }; for (var i = 0; i < elements.length; i++) { var element = elements[i]; var other; if (element.kind === \"method\" && (other = newElements.find(isSameElement))) { if (_isDataDescriptor(element.descriptor) || _isDataDescriptor(other.descriptor)) { if (_hasDecorators(element) || _hasDecorators(other)) { throw new ReferenceError(\"Duplicated methods (\" + element.key + \") can't be decorated.\"); } other.descriptor = element.descriptor; } else { if (_hasDecorators(element)) { if (_hasDecorators(other)) { throw new ReferenceError(\"Decorators can't be placed on different accessors with for \" + \"the same property (\" + element.key + \").\"); } other.decorators = element.decorators; } _coalesceGetterSetter(element, other); } } else { newElements.push(element); } } return newElements; }\n\nfunction _hasDecorators(element) { return element.decorators && element.decorators.length; }\n\nfunction _isDataDescriptor(desc) { return desc !== undefined && !(desc.value === undefined && desc.writable === undefined); }\n\nfunction _optionalCallableProperty(obj, name) { var value = obj[name]; if (value !== undefined && typeof value !== \"function\") { throw new TypeError(\"Expected '\" + name + \"' to be a function\"); } return value; }\n\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\n\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\n\nfunction _toArray(arr) { return _arrayWithHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar triggerDomains = [\"script\", \"automation\"];\n\nvar hasContext = function hasContext(item) {\n  return item.context_event_type || item.context_state || item.context_message;\n};\n\nvar stripEntityId = function stripEntityId(message, entityId) {\n  return entityId ? message.replace(entityId, \" \") : message;\n};\n\nvar HaLogbookRenderer = _decorate([(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.customElement)(\"ha-logbook-renderer\")], function (_initialize, _LitElement) {\n  var HaLogbookRenderer = /*#__PURE__*/function (_LitElement2) {\n    _inherits(HaLogbookRenderer, _LitElement2);\n\n    var _super = _createSuper(HaLogbookRenderer);\n\n    function HaLogbookRenderer() {\n      var _this;\n\n      _classCallCheck(this, HaLogbookRenderer);\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      _this = _super.call.apply(_super, [this].concat(args));\n\n      _initialize(_assertThisInitialized(_this));\n\n      return _this;\n    }\n\n    return HaLogbookRenderer;\n  }(_LitElement);\n\n  return {\n    F: HaLogbookRenderer,\n    d: [{\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.property)({\n        attribute: false\n      })],\n      key: \"hass\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.property)({\n        attribute: false\n      })],\n      key: \"userIdToName\",\n      value: function value() {\n        return {};\n      }\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.property)({\n        attribute: false\n      })],\n      key: \"traceContexts\",\n      value: function value() {\n        return {};\n      }\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.property)({\n        attribute: false\n      })],\n      key: \"entries\",\n      value: function value() {\n        return [];\n      }\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.property)({\n        type: Boolean,\n        attribute: \"narrow\"\n      })],\n      key: \"narrow\",\n      value: function value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.property)({\n        type: Boolean,\n        attribute: \"virtualize\",\n        reflect: true\n      })],\n      key: \"virtualize\",\n      value: function value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.property)({\n        type: Boolean,\n        attribute: \"no-icon\"\n      })],\n      key: \"noIcon\",\n      value: function value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.property)({\n        type: Boolean,\n        attribute: \"no-name\"\n      })],\n      key: \"noName\",\n      value: function value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.property)({\n        type: Boolean,\n        attribute: \"relative-time\"\n      })],\n      key: \"relativeTime\",\n      value: function value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [(0,_common_decorators_restore_scroll__WEBPACK_IMPORTED_MODULE_6__.restoreScroll)(\".container\")],\n      key: \"_savedScrollPos\",\n      value: void 0\n    }, {\n      kind: \"method\",\n      key: \"shouldUpdate\",\n      value: // @ts-ignore\n      function shouldUpdate(changedProps) {\n        var oldHass = changedProps.get(\"hass\");\n        var languageChanged = oldHass === undefined || oldHass.locale !== this.hass.locale;\n        return changedProps.has(\"entries\") || changedProps.has(\"traceContexts\") || languageChanged;\n      }\n    }, {\n      kind: \"method\",\n      key: \"render\",\n      value: function render() {\n        var _this$entries,\n            _this2 = this;\n\n        if (!((_this$entries = this.entries) !== null && _this$entries !== void 0 && _this$entries.length)) {\n          return (0,lit__WEBPACK_IMPORTED_MODULE_1__.html)(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n        <div class=\\\"container no-entries\\\">\\n          \", \"\\n        </div>\\n      \"])), this.hass.localize(\"ui.components.logbook.entries_not_found\"));\n        }\n\n        return (0,lit__WEBPACK_IMPORTED_MODULE_1__.html)(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n      <div\\n        class=\\\"container ha-scrollbar \", \"\\\"\\n        @scroll=\", \"\\n      >\\n        \", \"\\n      </div>\\n    \"])), (0,lit_directives_class_map__WEBPACK_IMPORTED_MODULE_3__.classMap)({\n          narrow: this.narrow,\n          \"no-name\": this.noName,\n          \"no-icon\": this.noIcon\n        }), this._saveScrollPos, this.virtualize ? (0,lit__WEBPACK_IMPORTED_MODULE_1__.html)(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\"<lit-virtualizer\\n              @visibilityChanged=\", \"\\n              scroller\\n              class=\\\"ha-scrollbar\\\"\\n              .items=\", \"\\n              .renderItem=\", \"\\n            >\\n            </lit-virtualizer>\"])), this._visibilityChanged, this.entries, this._renderLogbookItem) : this.entries.map(function (item, index) {\n          return _this2._renderLogbookItem(item, index);\n        }));\n      }\n    }, {\n      kind: \"field\",\n      key: \"_renderLogbookItem\",\n      value: function value() {\n        var _this3 = this;\n\n        return function (item, index) {\n          var _this3$hass$themes;\n\n          if (!item || index === undefined) {\n            return (0,lit__WEBPACK_IMPORTED_MODULE_1__.html)(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([\"\"])));\n          }\n\n          var previous = _this3.entries[index - 1];\n          var seenEntityIds = [];\n          var currentStateObj = item.entity_id ? _this3.hass.states[item.entity_id] : undefined;\n          var historicStateObj = currentStateObj ? (0,_data_logbook__WEBPACK_IMPORTED_MODULE_13__.createHistoricState)(currentStateObj, item.state) : undefined;\n          var domain = item.entity_id ? (0,_common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_8__.computeDomain)(item.entity_id) : // Domain is there if there is no entity ID.\n          item.domain;\n          var overrideImage = !historicStateObj && !item.icon && !item.state && domain && (0,_common_config_is_component_loaded__WEBPACK_IMPORTED_MODULE_9__.isComponentLoaded)(_this3.hass, domain) ? (0,_util_brands_url__WEBPACK_IMPORTED_MODULE_15__.brandsUrl)({\n            domain: domain,\n            type: \"icon\",\n            useFallback: true,\n            darkOptimized: (_this3$hass$themes = _this3.hass.themes) === null || _this3$hass$themes === void 0 ? void 0 : _this3$hass$themes.darkMode\n          }) : undefined;\n          return (0,lit__WEBPACK_IMPORTED_MODULE_1__.html)(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([\"\\n      <div class=\\\"entry-container\\\">\\n        \", \"\\n\\n        <div class=\\\"entry \", \"\\\">\\n          <div class=\\\"icon-message\\\">\\n            \", \"\\n            <div class=\\\"message-relative_time\\\">\\n              <div class=\\\"message\\\">\\n                \", \"\\n                \", \"\\n                \", \"\\n              </div>\\n              <div class=\\\"secondary\\\">\\n                <span\\n                  >\", \"</span\\n                >\\n                -\\n                <ha-relative-time\\n                  .hass=\", \"\\n                  .datetime=\", \"\\n                  capitalize\\n                ></ha-relative-time>\\n                \", \"\\n                \", \"\\n              </div>\\n            </div>\\n          </div>\\n        </div>\\n      </div>\\n    \"])), index === 0 || item !== null && item !== void 0 && item.when && previous !== null && previous !== void 0 && previous.when && new Date(item.when * 1000).toDateString() !== new Date(previous.when * 1000).toDateString() ? (0,lit__WEBPACK_IMPORTED_MODULE_1__.html)(_templateObject6 || (_templateObject6 = _taggedTemplateLiteral([\"\\n              <h4 class=\\\"date\\\">\\n                \", \"\\n              </h4>\\n            \"])), (0,_common_datetime_format_date__WEBPACK_IMPORTED_MODULE_4__.formatDate)(new Date(item.when * 1000), _this3.hass.locale)) : (0,lit__WEBPACK_IMPORTED_MODULE_1__.html)(_templateObject7 || (_templateObject7 = _taggedTemplateLiteral([\"\"]))), (0,lit_directives_class_map__WEBPACK_IMPORTED_MODULE_3__.classMap)({\n            \"no-entity\": !item.entity_id\n          }), !_this3.noIcon ? (0,lit__WEBPACK_IMPORTED_MODULE_1__.html)(_templateObject8 || (_templateObject8 = _taggedTemplateLiteral([\"\\n                  <state-badge\\n                    .hass=\", \"\\n                    .overrideIcon=\", \"\\n                    .overrideImage=\", \"\\n                    .stateObj=\", \"\\n                    .stateColor=\", \"\\n                  ></state-badge>\\n                \"])), _this3.hass, item.icon, overrideImage, item.icon ? undefined : historicStateObj, false) : \"\", !_this3.noName // Used for more-info panel (single entity case)\n          ? _this3._renderEntity(item.entity_id, item.name) : \"\", _this3._renderMessage(item, seenEntityIds, domain, historicStateObj), _this3._renderContextMessage(item, seenEntityIds), (0,_common_datetime_format_time__WEBPACK_IMPORTED_MODULE_5__.formatTimeWithSeconds)(new Date(item.when * 1000), _this3.hass.locale), _this3.hass, item.when * 1000, item.context_user_id ? (0,lit__WEBPACK_IMPORTED_MODULE_1__.html)(_templateObject9 || (_templateObject9 = _taggedTemplateLiteral([\"\", \"\"])), _this3._renderUser(item)) : \"\", triggerDomains.includes(item.domain) && item.context_id in _this3.traceContexts ? (0,lit__WEBPACK_IMPORTED_MODULE_1__.html)(_templateObject10 || (_templateObject10 = _taggedTemplateLiteral([\"\\n                      -\\n                      <a\\n                        href=\", \"\\n                        @click=\", \"\\n                        >\", \"</a\\n                      >\\n                    \"])), \"/config/\".concat(_this3.traceContexts[item.context_id].domain, \"/trace/\").concat(_this3.traceContexts[item.context_id].domain === \"script\" ? \"script.\".concat(_this3.traceContexts[item.context_id].item_id) : _this3.traceContexts[item.context_id].item_id, \"?run_id=\").concat(_this3.traceContexts[item.context_id].run_id), _this3._close, _this3.hass.localize(\"ui.components.logbook.show_trace\")) : \"\");\n        };\n      }\n    }, {\n      kind: \"method\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.eventOptions)({\n        passive: true\n      })],\n      key: \"_saveScrollPos\",\n      value: function _saveScrollPos(e) {\n        this._savedScrollPos = e.target.scrollTop;\n      }\n    }, {\n      kind: \"method\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.eventOptions)({\n        passive: true\n      })],\n      key: \"_visibilityChanged\",\n      value: function _visibilityChanged(e) {\n        (0,_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_7__.fireEvent)(this, \"hass-logbook-live\", {\n          enable: e.first === 0\n        });\n      }\n    }, {\n      kind: \"method\",\n      key: \"_renderMessage\",\n      value: function _renderMessage(item, seenEntityIds, domain, historicStateObj) {\n        if (item.entity_id) {\n          if (item.state) {\n            return historicStateObj ? (0,_data_logbook__WEBPACK_IMPORTED_MODULE_13__.localizeStateMessage)(this.hass, this.hass.localize, item.state, historicStateObj, domain) : item.state;\n          }\n        }\n\n        var itemHasContext = hasContext(item);\n        var message = item.message;\n\n        if (triggerDomains.includes(domain) && item.source) {\n          if (itemHasContext) {\n            // These domains include the trigger source in the message\n            // but if we have the context we want to display that instead\n            // as otherwise we display duplicate triggers\n            return \"\";\n          }\n\n          message = (0,_data_logbook__WEBPACK_IMPORTED_MODULE_13__.localizeTriggerSource)(this.hass.localize, item.source);\n        }\n\n        return message ? this._formatMessageWithPossibleEntity(itemHasContext ? stripEntityId(message, item.context_entity_id) : message, seenEntityIds, undefined) : \"\";\n      }\n    }, {\n      kind: \"method\",\n      key: \"_renderUser\",\n      value: function _renderUser(item) {\n        var item_username = item.context_user_id && this.userIdToName[item.context_user_id];\n\n        if (item_username) {\n          return \"- \".concat(item_username);\n        }\n\n        return \"\";\n      }\n    }, {\n      kind: \"method\",\n      key: \"_renderUnseenContextSourceEntity\",\n      value: function _renderUnseenContextSourceEntity(item, seenEntityIds) {\n        if (!item.context_entity_id || seenEntityIds.includes(item.context_entity_id)) {\n          return \"\";\n        } // We don't know what caused this entity\n        // to be included since its an integration\n        // described event.\n\n\n        return (0,lit__WEBPACK_IMPORTED_MODULE_1__.html)(_templateObject11 || (_templateObject11 = _taggedTemplateLiteral([\" (\", \")\"])), this._renderEntity(item.context_entity_id, item.context_entity_id_name));\n      }\n    }, {\n      kind: \"method\",\n      key: \"_renderContextMessage\",\n      value: function _renderContextMessage(item, seenEntityIds) {\n        // State change\n        if (item.context_state) {\n          var historicStateObj = item.context_entity_id && item.context_entity_id in this.hass.states ? (0,_data_logbook__WEBPACK_IMPORTED_MODULE_13__.createHistoricState)(this.hass.states[item.context_entity_id], item.context_state) : undefined;\n          return (0,lit__WEBPACK_IMPORTED_MODULE_1__.html)(_templateObject12 || (_templateObject12 = _taggedTemplateLiteral([\"\", \"\\n      \", \"\\n      \", \"\"])), this.hass.localize(\"ui.components.logbook.triggered_by_state_of\"), this._renderEntity(item.context_entity_id, item.context_entity_id_name), historicStateObj ? (0,_data_logbook__WEBPACK_IMPORTED_MODULE_13__.localizeStateMessage)(this.hass, this.hass.localize, item.context_state, historicStateObj, (0,_common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_8__.computeDomain)(item.context_entity_id)) : item.context_state);\n        } // Service call\n\n\n        if (item.context_event_type === \"call_service\") {\n          return (0,lit__WEBPACK_IMPORTED_MODULE_1__.html)(_templateObject13 || (_templateObject13 = _taggedTemplateLiteral([\"\", \"\\n      \", \".\", \"\"])), this.hass.localize(\"ui.components.logbook.triggered_by_service\"), item.context_domain, item.context_service);\n        }\n\n        if (!item.context_message || seenEntityIds.includes(item.context_entity_id)) {\n          return \"\";\n        } // Automation or script\n\n\n        if (item.context_event_type === \"automation_triggered\" || item.context_event_type === \"script_started\") {\n          // context_source is available in 2022.6 and later\n          var triggerMsg = item.context_source ? item.context_source : item.context_message.replace(\"triggered by \", \"\");\n          var contextTriggerSource = (0,_data_logbook__WEBPACK_IMPORTED_MODULE_13__.localizeTriggerSource)(this.hass.localize, triggerMsg);\n          return (0,lit__WEBPACK_IMPORTED_MODULE_1__.html)(_templateObject14 || (_templateObject14 = _taggedTemplateLiteral([\"\", \"\\n      \", \"\\n      \", \"\"])), this.hass.localize(item.context_event_type === \"automation_triggered\" ? \"ui.components.logbook.triggered_by_automation\" : \"ui.components.logbook.triggered_by_script\"), this._renderEntity(item.context_entity_id, item.context_entity_id_name), item.context_message ? this._formatMessageWithPossibleEntity(contextTriggerSource, seenEntityIds) : \"\");\n        } // Generic externally described logbook platform\n        // These are not localizable\n\n\n        return (0,lit__WEBPACK_IMPORTED_MODULE_1__.html)(_templateObject15 || (_templateObject15 = _taggedTemplateLiteral([\" \", \"\\n    \", \"\\n    \", \"\\n    \", \"\"])), this.hass.localize(\"ui.components.logbook.triggered_by\"), item.context_name, this._formatMessageWithPossibleEntity(item.context_message, seenEntityIds, item.context_entity_id), this._renderUnseenContextSourceEntity(item, seenEntityIds));\n      }\n    }, {\n      kind: \"method\",\n      key: \"_renderEntity\",\n      value: function _renderEntity(entityId, entityName) {\n        var hasState = entityId && entityId in this.hass.states;\n        var displayName = entityName || (hasState ? this.hass.states[entityId].attributes.friendly_name || entityId : entityId);\n\n        if (!hasState) {\n          return displayName;\n        }\n\n        return (0,lit__WEBPACK_IMPORTED_MODULE_1__.html)(_templateObject16 || (_templateObject16 = _taggedTemplateLiteral([\"<button\\n      class=\\\"link\\\"\\n      @click=\", \"\\n      .entityId=\", \"\\n    >\\n      \", \"\\n    </button>\"])), this._entityClicked, entityId, displayName);\n      }\n    }, {\n      kind: \"method\",\n      key: \"_formatMessageWithPossibleEntity\",\n      value: function _formatMessageWithPossibleEntity(message, seenEntities, possibleEntity) {\n        //\n        // As we are looking at a log(book), we are doing entity_id\n        // \"highlighting\"/\"colorizing\". The goal is to make it easy for\n        // the user to access the entity that caused the event.\n        //\n        // If there is an entity_id in the message that is also in the\n        // state machine, we search the message for the entity_id and\n        // replace it with _renderEntity\n        //\n        if (message.indexOf(\".\") !== -1) {\n          var messageParts = message.split(\" \");\n\n          for (var i = 0, size = messageParts.length; i < size; i++) {\n            if (messageParts[i] in this.hass.states) {\n              var entityId = messageParts[i];\n\n              if (seenEntities.includes(entityId)) {\n                return \"\";\n              }\n\n              seenEntities.push(entityId);\n              var messageEnd = messageParts.splice(i);\n              messageEnd.shift(); // remove the entity\n\n              return (0,lit__WEBPACK_IMPORTED_MODULE_1__.html)(_templateObject17 || (_templateObject17 = _taggedTemplateLiteral([\"\", \"\\n          \", \"\\n          \", \"\"])), messageParts.join(\" \"), this._renderEntity(entityId, this.hass.states[entityId].attributes.friendly_name), messageEnd.join(\" \"));\n            }\n          }\n        } //\n        // When we have a message has a specific entity_id attached to\n        // it, and the entity_id is not in the message, we look\n        // for the friendly name of the entity and replace that with\n        // _renderEntity if its there so the user can quickly get to\n        // that entity.\n        //\n\n\n        if (possibleEntity && possibleEntity in this.hass.states) {\n          var possibleEntityName = this.hass.states[possibleEntity].attributes.friendly_name;\n\n          if (possibleEntityName && message.endsWith(possibleEntityName)) {\n            if (seenEntities.includes(possibleEntity)) {\n              return \"\";\n            }\n\n            seenEntities.push(possibleEntity);\n            message = message.substring(0, message.length - possibleEntityName.length);\n            return (0,lit__WEBPACK_IMPORTED_MODULE_1__.html)(_templateObject18 || (_templateObject18 = _taggedTemplateLiteral([\"\", \"\\n        \", \"\"])), message, this._renderEntity(possibleEntity, possibleEntityName));\n          }\n        }\n\n        return message;\n      }\n    }, {\n      kind: \"method\",\n      key: \"_entityClicked\",\n      value: function _entityClicked(ev) {\n        var entityId = ev.currentTarget.entityId;\n\n        if (!entityId) {\n          return;\n        }\n\n        ev.preventDefault();\n        ev.stopPropagation();\n        (0,_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_7__.fireEvent)(this, \"hass-more-info\", {\n          entityId: entityId\n        });\n      }\n    }, {\n      kind: \"method\",\n      key: \"_close\",\n      value: function _close() {\n        var _this4 = this;\n\n        setTimeout(function () {\n          return (0,_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_7__.fireEvent)(_this4, \"closed\");\n        }, 500);\n      }\n    }, {\n      kind: \"get\",\n      \"static\": true,\n      key: \"styles\",\n      value: function styles() {\n        return [_resources_styles__WEBPACK_IMPORTED_MODULE_14__.haStyle, _resources_styles__WEBPACK_IMPORTED_MODULE_14__.haStyleScrollbar, _resources_styles__WEBPACK_IMPORTED_MODULE_14__.buttonLinkStyle, (0,lit__WEBPACK_IMPORTED_MODULE_1__.css)(_templateObject19 || (_templateObject19 = _taggedTemplateLiteral([\"\\n        :host([virtualize]) {\\n          display: block;\\n          height: 100%;\\n        }\\n\\n        .entry-container {\\n          width: 100%;\\n        }\\n\\n        .entry {\\n          display: flex;\\n          width: 100%;\\n          line-height: 2em;\\n          padding: 8px 16px;\\n          box-sizing: border-box;\\n          border-top: 1px solid var(--divider-color);\\n        }\\n\\n        .entry.no-entity,\\n        .no-name .entry {\\n          cursor: default;\\n        }\\n\\n        .entry:hover {\\n          background-color: rgba(var(--rgb-primary-text-color), 0.04);\\n        }\\n\\n        .narrow:not(.no-icon) .time {\\n          margin-left: 32px;\\n          margin-inline-start: 32px;\\n          margin-inline-end: initial;\\n          direction: var(--direction);\\n        }\\n\\n        .message-relative_time {\\n          display: flex;\\n          flex-direction: column;\\n        }\\n\\n        .secondary {\\n          font-size: 12px;\\n          line-height: 1.7;\\n        }\\n\\n        .secondary a {\\n          color: var(--secondary-text-color);\\n        }\\n\\n        .date {\\n          margin: 8px 0;\\n          padding: 0 16px;\\n        }\\n\\n        .icon-message {\\n          display: flex;\\n          align-items: center;\\n        }\\n\\n        .no-entries {\\n          text-align: center;\\n          color: var(--secondary-text-color);\\n        }\\n\\n        state-badge {\\n          margin-right: 16px;\\n          margin-inline-start: initial;\\n          flex-shrink: 0;\\n          color: var(--state-icon-color);\\n          margin-inline-end: 16px;\\n          direction: var(--direction);\\n        }\\n\\n        .message {\\n          color: var(--primary-text-color);\\n        }\\n\\n        .no-name .message:first-letter {\\n          text-transform: capitalize;\\n        }\\n\\n        a {\\n          color: var(--primary-color);\\n          text-decoration: none;\\n        }\\n\\n        button.link {\\n          color: var(--paper-item-icon-color);\\n          text-decoration: none;\\n        }\\n\\n        .container {\\n          max-height: var(--logbook-max-height);\\n        }\\n\\n        .container,\\n        lit-virtualizer {\\n          height: 100%;\\n        }\\n\\n        lit-virtualizer {\\n          contain: size layout !important;\\n        }\\n\\n        .narrow .entry {\\n          line-height: 1.5;\\n        }\\n\\n        .narrow .icon-message state-badge {\\n          margin-left: 0;\\n          margin-inline-start: 0;\\n          margin-inline-end: initial;\\n          direction: var(--direction);\\n        }\\n      \"])))];\n      }\n    }]\n  };\n}, lit__WEBPACK_IMPORTED_MODULE_1__.LitElement);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcGFuZWxzL2xvZ2Jvb2svaGEtbG9nYm9vay1yZW5kZXJlci50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBRUE7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFPQTtBQU1BO0FBUUE7O0FBRUE7QUFBQTtBQUFBOztBQUVBO0FBQUE7QUFBQTs7QUFJQTtBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7OztBQUNBO0FBQUE7QUFBQTs7Ozs7QUFFQTtBQUFBO0FBQUE7OztBQUFBOzs7O0FBRUE7QUFBQTtBQUFBOzs7QUFDQTs7OztBQUVBO0FBQUE7QUFBQTs7O0FBQUE7Ozs7QUFFQTtBQUFBO0FBQUE7QUFBQTs7O0FBQ0E7Ozs7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7QUFDQTs7OztBQUVBO0FBQUE7QUFBQTtBQUFBOzs7QUFDQTs7OztBQUVBO0FBQUE7QUFBQTtBQUFBOzs7QUFDQTs7OztBQUVBO0FBQUE7QUFBQTtBQUFBOzs7QUFDQTs7OztBQUdBOzs7Ozs7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUdBO0FBS0E7Ozs7QUFFQTtBQUFBO0FBQUE7O0FBQ0E7QUFDQTtBQUtBOztBQUVBO0FBR0E7QUFDQTtBQUNBO0FBSEE7QUFnQkE7QUFBQTtBQUtBOzs7Ozs7O0FBRUE7QUFHQTs7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFHQTtBQUdBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBUUE7QUFjQTtBQUFBO0FBZUE7QUF1REE7Ozs7QUFFQTtBQUFBO0FBQUE7O0FBQUE7QUFFQTtBQUNBOzs7QUFFQTtBQUFBO0FBQUE7O0FBQUE7QUFFQTtBQUNBO0FBREE7QUFHQTs7OztBQUVBO0FBTUE7QUFDQTtBQUNBO0FBU0E7QUFDQTs7QUFFQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7O0FBQ0E7QUFTQTs7OztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUNBO0FBQ0E7Ozs7QUFFQTtBQUlBO0FBSUE7QUFDQTtBQUVBO0FBQ0E7OztBQUNBO0FBSUE7Ozs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQU9BO0FBYUE7OztBQUVBO0FBQ0E7QUFJQTs7QUFDQTtBQUlBO0FBQ0E7OztBQUVBO0FBSUE7QUFDQTtBQUdBO0FBSUE7QUFZQTtBQUVBOzs7QUFDQTtBQVFBOzs7O0FBRUE7QUFJQTtBQUNBOztBQUtBO0FBQ0E7QUFDQTs7QUFDQTtBQU9BOzs7O0FBRUE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBTUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFJQTtBQUVBO0FBQ0E7O0FBQ0E7QUFDQTs7OztBQUVBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTs7OztBQUVBO0FBQUE7O0FBQ0E7QUFBQTtBQUFBO0FBQ0E7Ozs7O0FBRUE7QUFDQTtBQXdIQTs7O0FBMWpCQSIsInNvdXJjZXMiOlsid2VicGFjazovL2hvbWUtYXNzaXN0YW50LWZyb250ZW5kLy4vc3JjL3BhbmVscy9sb2dib29rL2hhLWxvZ2Jvb2stcmVuZGVyZXIudHM/MWE0ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgXCJAbGl0LWxhYnMvdmlydHVhbGl6ZXJcIjtcbmltcG9ydCB7IFZpc2liaWxpdHlDaGFuZ2VkRXZlbnQgfSBmcm9tIFwiQGxpdC1sYWJzL3ZpcnR1YWxpemVyL1ZpcnR1YWxpemVyXCI7XG5pbXBvcnQge1xuICBjc3MsXG4gIENTU1Jlc3VsdEdyb3VwLFxuICBodG1sLFxuICBMaXRFbGVtZW50LFxuICBQcm9wZXJ0eVZhbHVlcyxcbiAgVGVtcGxhdGVSZXN1bHQsXG59IGZyb20gXCJsaXRcIjtcbmltcG9ydCB0eXBlIHsgSGFzc0VudGl0eSB9IGZyb20gXCJob21lLWFzc2lzdGFudC1qcy13ZWJzb2NrZXRcIjtcbmltcG9ydCB7IGN1c3RvbUVsZW1lbnQsIGV2ZW50T3B0aW9ucywgcHJvcGVydHkgfSBmcm9tIFwibGl0L2RlY29yYXRvcnNcIjtcbmltcG9ydCB7IGNsYXNzTWFwIH0gZnJvbSBcImxpdC9kaXJlY3RpdmVzL2NsYXNzLW1hcFwiO1xuaW1wb3J0IHsgZm9ybWF0RGF0ZSB9IGZyb20gXCIuLi8uLi9jb21tb24vZGF0ZXRpbWUvZm9ybWF0X2RhdGVcIjtcbmltcG9ydCB7IGZvcm1hdFRpbWVXaXRoU2Vjb25kcyB9IGZyb20gXCIuLi8uLi9jb21tb24vZGF0ZXRpbWUvZm9ybWF0X3RpbWVcIjtcbmltcG9ydCB7IHJlc3RvcmVTY3JvbGwgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2RlY29yYXRvcnMvcmVzdG9yZS1zY3JvbGxcIjtcbmltcG9ydCB7IGZpcmVFdmVudCB9IGZyb20gXCIuLi8uLi9jb21tb24vZG9tL2ZpcmVfZXZlbnRcIjtcbmltcG9ydCB7IGNvbXB1dGVEb21haW4gfSBmcm9tIFwiLi4vLi4vY29tbW9uL2VudGl0eS9jb21wdXRlX2RvbWFpblwiO1xuaW1wb3J0IHsgaXNDb21wb25lbnRMb2FkZWQgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2NvbmZpZy9pc19jb21wb25lbnRfbG9hZGVkXCI7XG5pbXBvcnQgXCIuLi8uLi9jb21wb25lbnRzL2VudGl0eS9zdGF0ZS1iYWRnZVwiO1xuaW1wb3J0IFwiLi4vLi4vY29tcG9uZW50cy9oYS1jaXJjdWxhci1wcm9ncmVzc1wiO1xuaW1wb3J0IFwiLi4vLi4vY29tcG9uZW50cy9oYS1yZWxhdGl2ZS10aW1lXCI7XG5pbXBvcnQge1xuICBjcmVhdGVIaXN0b3JpY1N0YXRlLFxuICBsb2NhbGl6ZVRyaWdnZXJTb3VyY2UsXG4gIGxvY2FsaXplU3RhdGVNZXNzYWdlLFxuICBMb2dib29rRW50cnksXG59IGZyb20gXCIuLi8uLi9kYXRhL2xvZ2Jvb2tcIjtcbmltcG9ydCB7IFRyYWNlQ29udGV4dHMgfSBmcm9tIFwiLi4vLi4vZGF0YS90cmFjZVwiO1xuaW1wb3J0IHtcbiAgaGFTdHlsZSxcbiAgaGFTdHlsZVNjcm9sbGJhcixcbiAgYnV0dG9uTGlua1N0eWxlLFxufSBmcm9tIFwiLi4vLi4vcmVzb3VyY2VzL3N0eWxlc1wiO1xuaW1wb3J0IHsgSG9tZUFzc2lzdGFudCB9IGZyb20gXCIuLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgYnJhbmRzVXJsIH0gZnJvbSBcIi4uLy4uL3V0aWwvYnJhbmRzLXVybFwiO1xuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIGludGVyZmFjZSBIQVNTRG9tRXZlbnRzIHtcbiAgICBcImhhc3MtbG9nYm9vay1saXZlXCI6IHsgZW5hYmxlOiBib29sZWFuIH07XG4gIH1cbn1cblxuY29uc3QgdHJpZ2dlckRvbWFpbnMgPSBbXCJzY3JpcHRcIiwgXCJhdXRvbWF0aW9uXCJdO1xuXG5jb25zdCBoYXNDb250ZXh0ID0gKGl0ZW06IExvZ2Jvb2tFbnRyeSkgPT5cbiAgaXRlbS5jb250ZXh0X2V2ZW50X3R5cGUgfHwgaXRlbS5jb250ZXh0X3N0YXRlIHx8IGl0ZW0uY29udGV4dF9tZXNzYWdlO1xuY29uc3Qgc3RyaXBFbnRpdHlJZCA9IChtZXNzYWdlOiBzdHJpbmcsIGVudGl0eUlkPzogc3RyaW5nKSA9PlxuICBlbnRpdHlJZCA/IG1lc3NhZ2UucmVwbGFjZShlbnRpdHlJZCwgXCIgXCIpIDogbWVzc2FnZTtcblxuQGN1c3RvbUVsZW1lbnQoXCJoYS1sb2dib29rLXJlbmRlcmVyXCIpXG5jbGFzcyBIYUxvZ2Jvb2tSZW5kZXJlciBleHRlbmRzIExpdEVsZW1lbnQge1xuICBAcHJvcGVydHkoeyBhdHRyaWJ1dGU6IGZhbHNlIH0pIHB1YmxpYyBoYXNzITogSG9tZUFzc2lzdGFudDtcblxuICBAcHJvcGVydHkoeyBhdHRyaWJ1dGU6IGZhbHNlIH0pIHB1YmxpYyB1c2VySWRUb05hbWUgPSB7fTtcblxuICBAcHJvcGVydHkoeyBhdHRyaWJ1dGU6IGZhbHNlIH0pXG4gIHB1YmxpYyB0cmFjZUNvbnRleHRzOiBUcmFjZUNvbnRleHRzID0ge307XG5cbiAgQHByb3BlcnR5KHsgYXR0cmlidXRlOiBmYWxzZSB9KSBwdWJsaWMgZW50cmllczogTG9nYm9va0VudHJ5W10gPSBbXTtcblxuICBAcHJvcGVydHkoeyB0eXBlOiBCb29sZWFuLCBhdHRyaWJ1dGU6IFwibmFycm93XCIgfSlcbiAgcHVibGljIG5hcnJvdyA9IGZhbHNlO1xuXG4gIEBwcm9wZXJ0eSh7IHR5cGU6IEJvb2xlYW4sIGF0dHJpYnV0ZTogXCJ2aXJ0dWFsaXplXCIsIHJlZmxlY3Q6IHRydWUgfSlcbiAgcHVibGljIHZpcnR1YWxpemUgPSBmYWxzZTtcblxuICBAcHJvcGVydHkoeyB0eXBlOiBCb29sZWFuLCBhdHRyaWJ1dGU6IFwibm8taWNvblwiIH0pXG4gIHB1YmxpYyBub0ljb24gPSBmYWxzZTtcblxuICBAcHJvcGVydHkoeyB0eXBlOiBCb29sZWFuLCBhdHRyaWJ1dGU6IFwibm8tbmFtZVwiIH0pXG4gIHB1YmxpYyBub05hbWUgPSBmYWxzZTtcblxuICBAcHJvcGVydHkoeyB0eXBlOiBCb29sZWFuLCBhdHRyaWJ1dGU6IFwicmVsYXRpdmUtdGltZVwiIH0pXG4gIHB1YmxpYyByZWxhdGl2ZVRpbWUgPSBmYWxzZTtcblxuICAvLyBAdHMtaWdub3JlXG4gIEByZXN0b3JlU2Nyb2xsKFwiLmNvbnRhaW5lclwiKSBwcml2YXRlIF9zYXZlZFNjcm9sbFBvcz86IG51bWJlcjtcblxuICBwcm90ZWN0ZWQgc2hvdWxkVXBkYXRlKGNoYW5nZWRQcm9wczogUHJvcGVydHlWYWx1ZXM8dGhpcz4pIHtcbiAgICBjb25zdCBvbGRIYXNzID0gY2hhbmdlZFByb3BzLmdldChcImhhc3NcIikgYXMgSG9tZUFzc2lzdGFudCB8IHVuZGVmaW5lZDtcbiAgICBjb25zdCBsYW5ndWFnZUNoYW5nZWQgPVxuICAgICAgb2xkSGFzcyA9PT0gdW5kZWZpbmVkIHx8IG9sZEhhc3MubG9jYWxlICE9PSB0aGlzLmhhc3MubG9jYWxlO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIGNoYW5nZWRQcm9wcy5oYXMoXCJlbnRyaWVzXCIpIHx8XG4gICAgICBjaGFuZ2VkUHJvcHMuaGFzKFwidHJhY2VDb250ZXh0c1wiKSB8fFxuICAgICAgbGFuZ3VhZ2VDaGFuZ2VkXG4gICAgKTtcbiAgfVxuXG4gIHByb3RlY3RlZCByZW5kZXIoKTogVGVtcGxhdGVSZXN1bHQge1xuICAgIGlmICghdGhpcy5lbnRyaWVzPy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBodG1sYFxuICAgICAgICA8ZGl2IGNsYXNzPVwiY29udGFpbmVyIG5vLWVudHJpZXNcIj5cbiAgICAgICAgICAke3RoaXMuaGFzcy5sb2NhbGl6ZShcInVpLmNvbXBvbmVudHMubG9nYm9vay5lbnRyaWVzX25vdF9mb3VuZFwiKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICBgO1xuICAgIH1cblxuICAgIHJldHVybiBodG1sYFxuICAgICAgPGRpdlxuICAgICAgICBjbGFzcz1cImNvbnRhaW5lciBoYS1zY3JvbGxiYXIgJHtjbGFzc01hcCh7XG4gICAgICAgICAgbmFycm93OiB0aGlzLm5hcnJvdyxcbiAgICAgICAgICBcIm5vLW5hbWVcIjogdGhpcy5ub05hbWUsXG4gICAgICAgICAgXCJuby1pY29uXCI6IHRoaXMubm9JY29uLFxuICAgICAgICB9KX1cIlxuICAgICAgICBAc2Nyb2xsPSR7dGhpcy5fc2F2ZVNjcm9sbFBvc31cbiAgICAgID5cbiAgICAgICAgJHt0aGlzLnZpcnR1YWxpemVcbiAgICAgICAgICA/IGh0bWxgPGxpdC12aXJ0dWFsaXplclxuICAgICAgICAgICAgICBAdmlzaWJpbGl0eUNoYW5nZWQ9JHt0aGlzLl92aXNpYmlsaXR5Q2hhbmdlZH1cbiAgICAgICAgICAgICAgc2Nyb2xsZXJcbiAgICAgICAgICAgICAgY2xhc3M9XCJoYS1zY3JvbGxiYXJcIlxuICAgICAgICAgICAgICAuaXRlbXM9JHt0aGlzLmVudHJpZXN9XG4gICAgICAgICAgICAgIC5yZW5kZXJJdGVtPSR7dGhpcy5fcmVuZGVyTG9nYm9va0l0ZW19XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICA8L2xpdC12aXJ0dWFsaXplcj5gXG4gICAgICAgICAgOiB0aGlzLmVudHJpZXMubWFwKChpdGVtLCBpbmRleCkgPT5cbiAgICAgICAgICAgICAgdGhpcy5fcmVuZGVyTG9nYm9va0l0ZW0oaXRlbSwgaW5kZXgpXG4gICAgICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgYDtcbiAgfVxuXG4gIHByaXZhdGUgX3JlbmRlckxvZ2Jvb2tJdGVtID0gKFxuICAgIGl0ZW06IExvZ2Jvb2tFbnRyeSxcbiAgICBpbmRleDogbnVtYmVyXG4gICk6IFRlbXBsYXRlUmVzdWx0ID0+IHtcbiAgICBpZiAoIWl0ZW0gfHwgaW5kZXggPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGh0bWxgYDtcbiAgICB9XG4gICAgY29uc3QgcHJldmlvdXMgPSB0aGlzLmVudHJpZXNbaW5kZXggLSAxXTtcbiAgICBjb25zdCBzZWVuRW50aXR5SWRzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGNvbnN0IGN1cnJlbnRTdGF0ZU9iaiA9IGl0ZW0uZW50aXR5X2lkXG4gICAgICA/IHRoaXMuaGFzcy5zdGF0ZXNbaXRlbS5lbnRpdHlfaWRdXG4gICAgICA6IHVuZGVmaW5lZDtcbiAgICBjb25zdCBoaXN0b3JpY1N0YXRlT2JqID0gY3VycmVudFN0YXRlT2JqXG4gICAgICA/IGNyZWF0ZUhpc3RvcmljU3RhdGUoY3VycmVudFN0YXRlT2JqLCBpdGVtLnN0YXRlISlcbiAgICAgIDogdW5kZWZpbmVkO1xuICAgIGNvbnN0IGRvbWFpbiA9IGl0ZW0uZW50aXR5X2lkXG4gICAgICA/IGNvbXB1dGVEb21haW4oaXRlbS5lbnRpdHlfaWQpXG4gICAgICA6IC8vIERvbWFpbiBpcyB0aGVyZSBpZiB0aGVyZSBpcyBubyBlbnRpdHkgSUQuXG4gICAgICAgIGl0ZW0uZG9tYWluITtcbiAgICBjb25zdCBvdmVycmlkZUltYWdlID1cbiAgICAgICFoaXN0b3JpY1N0YXRlT2JqICYmXG4gICAgICAhaXRlbS5pY29uICYmXG4gICAgICAhaXRlbS5zdGF0ZSAmJlxuICAgICAgZG9tYWluICYmXG4gICAgICBpc0NvbXBvbmVudExvYWRlZCh0aGlzLmhhc3MsIGRvbWFpbilcbiAgICAgICAgPyBicmFuZHNVcmwoe1xuICAgICAgICAgICAgZG9tYWluOiBkb21haW4hLFxuICAgICAgICAgICAgdHlwZTogXCJpY29uXCIsXG4gICAgICAgICAgICB1c2VGYWxsYmFjazogdHJ1ZSxcbiAgICAgICAgICAgIGRhcmtPcHRpbWl6ZWQ6IHRoaXMuaGFzcy50aGVtZXM/LmRhcmtNb2RlLFxuICAgICAgICAgIH0pXG4gICAgICAgIDogdW5kZWZpbmVkO1xuXG4gICAgcmV0dXJuIGh0bWxgXG4gICAgICA8ZGl2IGNsYXNzPVwiZW50cnktY29udGFpbmVyXCI+XG4gICAgICAgICR7aW5kZXggPT09IDAgfHxcbiAgICAgICAgKGl0ZW0/LndoZW4gJiZcbiAgICAgICAgICBwcmV2aW91cz8ud2hlbiAmJlxuICAgICAgICAgIG5ldyBEYXRlKGl0ZW0ud2hlbiAqIDEwMDApLnRvRGF0ZVN0cmluZygpICE9PVxuICAgICAgICAgICAgbmV3IERhdGUocHJldmlvdXMud2hlbiAqIDEwMDApLnRvRGF0ZVN0cmluZygpKVxuICAgICAgICAgID8gaHRtbGBcbiAgICAgICAgICAgICAgPGg0IGNsYXNzPVwiZGF0ZVwiPlxuICAgICAgICAgICAgICAgICR7Zm9ybWF0RGF0ZShuZXcgRGF0ZShpdGVtLndoZW4gKiAxMDAwKSwgdGhpcy5oYXNzLmxvY2FsZSl9XG4gICAgICAgICAgICAgIDwvaDQ+XG4gICAgICAgICAgICBgXG4gICAgICAgICAgOiBodG1sYGB9XG5cbiAgICAgICAgPGRpdiBjbGFzcz1cImVudHJ5ICR7Y2xhc3NNYXAoeyBcIm5vLWVudGl0eVwiOiAhaXRlbS5lbnRpdHlfaWQgfSl9XCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImljb24tbWVzc2FnZVwiPlxuICAgICAgICAgICAgJHshdGhpcy5ub0ljb25cbiAgICAgICAgICAgICAgPyBodG1sYFxuICAgICAgICAgICAgICAgICAgPHN0YXRlLWJhZGdlXG4gICAgICAgICAgICAgICAgICAgIC5oYXNzPSR7dGhpcy5oYXNzfVxuICAgICAgICAgICAgICAgICAgICAub3ZlcnJpZGVJY29uPSR7aXRlbS5pY29ufVxuICAgICAgICAgICAgICAgICAgICAub3ZlcnJpZGVJbWFnZT0ke292ZXJyaWRlSW1hZ2V9XG4gICAgICAgICAgICAgICAgICAgIC5zdGF0ZU9iaj0ke2l0ZW0uaWNvbiA/IHVuZGVmaW5lZCA6IGhpc3RvcmljU3RhdGVPYmp9XG4gICAgICAgICAgICAgICAgICAgIC5zdGF0ZUNvbG9yPSR7ZmFsc2V9XG4gICAgICAgICAgICAgICAgICA+PC9zdGF0ZS1iYWRnZT5cbiAgICAgICAgICAgICAgICBgXG4gICAgICAgICAgICAgIDogXCJcIn1cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtZXNzYWdlLXJlbGF0aXZlX3RpbWVcIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1lc3NhZ2VcIj5cbiAgICAgICAgICAgICAgICAkeyF0aGlzLm5vTmFtZSAvLyBVc2VkIGZvciBtb3JlLWluZm8gcGFuZWwgKHNpbmdsZSBlbnRpdHkgY2FzZSlcbiAgICAgICAgICAgICAgICAgID8gdGhpcy5fcmVuZGVyRW50aXR5KGl0ZW0uZW50aXR5X2lkLCBpdGVtLm5hbWUpXG4gICAgICAgICAgICAgICAgICA6IFwiXCJ9XG4gICAgICAgICAgICAgICAgJHt0aGlzLl9yZW5kZXJNZXNzYWdlKFxuICAgICAgICAgICAgICAgICAgaXRlbSxcbiAgICAgICAgICAgICAgICAgIHNlZW5FbnRpdHlJZHMsXG4gICAgICAgICAgICAgICAgICBkb21haW4sXG4gICAgICAgICAgICAgICAgICBoaXN0b3JpY1N0YXRlT2JqXG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAke3RoaXMuX3JlbmRlckNvbnRleHRNZXNzYWdlKGl0ZW0sIHNlZW5FbnRpdHlJZHMpfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInNlY29uZGFyeVwiPlxuICAgICAgICAgICAgICAgIDxzcGFuXG4gICAgICAgICAgICAgICAgICA+JHtmb3JtYXRUaW1lV2l0aFNlY29uZHMoXG4gICAgICAgICAgICAgICAgICAgIG5ldyBEYXRlKGl0ZW0ud2hlbiAqIDEwMDApLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhc3MubG9jYWxlXG4gICAgICAgICAgICAgICAgICApfTwvc3BhblxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAtXG4gICAgICAgICAgICAgICAgPGhhLXJlbGF0aXZlLXRpbWVcbiAgICAgICAgICAgICAgICAgIC5oYXNzPSR7dGhpcy5oYXNzfVxuICAgICAgICAgICAgICAgICAgLmRhdGV0aW1lPSR7aXRlbS53aGVuICogMTAwMH1cbiAgICAgICAgICAgICAgICAgIGNhcGl0YWxpemVcbiAgICAgICAgICAgICAgICA+PC9oYS1yZWxhdGl2ZS10aW1lPlxuICAgICAgICAgICAgICAgICR7aXRlbS5jb250ZXh0X3VzZXJfaWQgPyBodG1sYCR7dGhpcy5fcmVuZGVyVXNlcihpdGVtKX1gIDogXCJcIn1cbiAgICAgICAgICAgICAgICAke3RyaWdnZXJEb21haW5zLmluY2x1ZGVzKGl0ZW0uZG9tYWluISkgJiZcbiAgICAgICAgICAgICAgICBpdGVtLmNvbnRleHRfaWQhIGluIHRoaXMudHJhY2VDb250ZXh0c1xuICAgICAgICAgICAgICAgICAgPyBodG1sYFxuICAgICAgICAgICAgICAgICAgICAgIC1cbiAgICAgICAgICAgICAgICAgICAgICA8YVxuICAgICAgICAgICAgICAgICAgICAgICAgaHJlZj0ke2AvY29uZmlnLyR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHJhY2VDb250ZXh0c1tpdGVtLmNvbnRleHRfaWQhXS5kb21haW5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0vdHJhY2UvJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50cmFjZUNvbnRleHRzW2l0ZW0uY29udGV4dF9pZCFdLmRvbWFpbiA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzY3JpcHRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gYHNjcmlwdC4ke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYWNlQ29udGV4dHNbaXRlbS5jb250ZXh0X2lkIV0uaXRlbV9pZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHRoaXMudHJhY2VDb250ZXh0c1tpdGVtLmNvbnRleHRfaWQhXS5pdGVtX2lkXG4gICAgICAgICAgICAgICAgICAgICAgICB9P3J1bl9pZD0ke1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYWNlQ29udGV4dHNbaXRlbS5jb250ZXh0X2lkIV0ucnVuX2lkXG4gICAgICAgICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgIEBjbGljaz0ke3RoaXMuX2Nsb3NlfVxuICAgICAgICAgICAgICAgICAgICAgICAgPiR7dGhpcy5oYXNzLmxvY2FsaXplKFxuICAgICAgICAgICAgICAgICAgICAgICAgICBcInVpLmNvbXBvbmVudHMubG9nYm9vay5zaG93X3RyYWNlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICl9PC9hXG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICBgXG4gICAgICAgICAgICAgICAgICA6IFwiXCJ9XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgYDtcbiAgfTtcblxuICBAZXZlbnRPcHRpb25zKHsgcGFzc2l2ZTogdHJ1ZSB9KVxuICBwcml2YXRlIF9zYXZlU2Nyb2xsUG9zKGU6IEV2ZW50KSB7XG4gICAgdGhpcy5fc2F2ZWRTY3JvbGxQb3MgPSAoZS50YXJnZXQgYXMgSFRNTERpdkVsZW1lbnQpLnNjcm9sbFRvcDtcbiAgfVxuXG4gIEBldmVudE9wdGlvbnMoeyBwYXNzaXZlOiB0cnVlIH0pXG4gIHByaXZhdGUgX3Zpc2liaWxpdHlDaGFuZ2VkKGU6IFZpc2liaWxpdHlDaGFuZ2VkRXZlbnQpIHtcbiAgICBmaXJlRXZlbnQodGhpcywgXCJoYXNzLWxvZ2Jvb2stbGl2ZVwiLCB7XG4gICAgICBlbmFibGU6IGUuZmlyc3QgPT09IDAsXG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIF9yZW5kZXJNZXNzYWdlKFxuICAgIGl0ZW06IExvZ2Jvb2tFbnRyeSxcbiAgICBzZWVuRW50aXR5SWRzOiBzdHJpbmdbXSxcbiAgICBkb21haW4/OiBzdHJpbmcsXG4gICAgaGlzdG9yaWNTdGF0ZU9iaj86IEhhc3NFbnRpdHlcbiAgKSB7XG4gICAgaWYgKGl0ZW0uZW50aXR5X2lkKSB7XG4gICAgICBpZiAoaXRlbS5zdGF0ZSkge1xuICAgICAgICByZXR1cm4gaGlzdG9yaWNTdGF0ZU9ialxuICAgICAgICAgID8gbG9jYWxpemVTdGF0ZU1lc3NhZ2UoXG4gICAgICAgICAgICAgIHRoaXMuaGFzcyxcbiAgICAgICAgICAgICAgdGhpcy5oYXNzLmxvY2FsaXplLFxuICAgICAgICAgICAgICBpdGVtLnN0YXRlLFxuICAgICAgICAgICAgICBoaXN0b3JpY1N0YXRlT2JqLFxuICAgICAgICAgICAgICBkb21haW4hXG4gICAgICAgICAgICApXG4gICAgICAgICAgOiBpdGVtLnN0YXRlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGl0ZW1IYXNDb250ZXh0ID0gaGFzQ29udGV4dChpdGVtKTtcbiAgICBsZXQgbWVzc2FnZSA9IGl0ZW0ubWVzc2FnZTtcbiAgICBpZiAodHJpZ2dlckRvbWFpbnMuaW5jbHVkZXMoZG9tYWluISkgJiYgaXRlbS5zb3VyY2UpIHtcbiAgICAgIGlmIChpdGVtSGFzQ29udGV4dCkge1xuICAgICAgICAvLyBUaGVzZSBkb21haW5zIGluY2x1ZGUgdGhlIHRyaWdnZXIgc291cmNlIGluIHRoZSBtZXNzYWdlXG4gICAgICAgIC8vIGJ1dCBpZiB3ZSBoYXZlIHRoZSBjb250ZXh0IHdlIHdhbnQgdG8gZGlzcGxheSB0aGF0IGluc3RlYWRcbiAgICAgICAgLy8gYXMgb3RoZXJ3aXNlIHdlIGRpc3BsYXkgZHVwbGljYXRlIHRyaWdnZXJzXG4gICAgICAgIHJldHVybiBcIlwiO1xuICAgICAgfVxuICAgICAgbWVzc2FnZSA9IGxvY2FsaXplVHJpZ2dlclNvdXJjZSh0aGlzLmhhc3MubG9jYWxpemUsIGl0ZW0uc291cmNlKTtcbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2VcbiAgICAgID8gdGhpcy5fZm9ybWF0TWVzc2FnZVdpdGhQb3NzaWJsZUVudGl0eShcbiAgICAgICAgICBpdGVtSGFzQ29udGV4dFxuICAgICAgICAgICAgPyBzdHJpcEVudGl0eUlkKG1lc3NhZ2UsIGl0ZW0uY29udGV4dF9lbnRpdHlfaWQpXG4gICAgICAgICAgICA6IG1lc3NhZ2UsXG4gICAgICAgICAgc2VlbkVudGl0eUlkcyxcbiAgICAgICAgICB1bmRlZmluZWRcbiAgICAgICAgKVxuICAgICAgOiBcIlwiO1xuICB9XG5cbiAgcHJpdmF0ZSBfcmVuZGVyVXNlcihpdGVtOiBMb2dib29rRW50cnkpIHtcbiAgICBjb25zdCBpdGVtX3VzZXJuYW1lID1cbiAgICAgIGl0ZW0uY29udGV4dF91c2VyX2lkICYmIHRoaXMudXNlcklkVG9OYW1lW2l0ZW0uY29udGV4dF91c2VyX2lkXTtcbiAgICBpZiAoaXRlbV91c2VybmFtZSkge1xuICAgICAgcmV0dXJuIGAtICR7aXRlbV91c2VybmFtZX1gO1xuICAgIH1cbiAgICByZXR1cm4gXCJcIjtcbiAgfVxuXG4gIHByaXZhdGUgX3JlbmRlclVuc2VlbkNvbnRleHRTb3VyY2VFbnRpdHkoXG4gICAgaXRlbTogTG9nYm9va0VudHJ5LFxuICAgIHNlZW5FbnRpdHlJZHM6IHN0cmluZ1tdXG4gICkge1xuICAgIGlmIChcbiAgICAgICFpdGVtLmNvbnRleHRfZW50aXR5X2lkIHx8XG4gICAgICBzZWVuRW50aXR5SWRzLmluY2x1ZGVzKGl0ZW0uY29udGV4dF9lbnRpdHlfaWQhKVxuICAgICkge1xuICAgICAgcmV0dXJuIFwiXCI7XG4gICAgfVxuICAgIC8vIFdlIGRvbid0IGtub3cgd2hhdCBjYXVzZWQgdGhpcyBlbnRpdHlcbiAgICAvLyB0byBiZSBpbmNsdWRlZCBzaW5jZSBpdHMgYW4gaW50ZWdyYXRpb25cbiAgICAvLyBkZXNjcmliZWQgZXZlbnQuXG4gICAgcmV0dXJuIGh0bWxgICgke3RoaXMuX3JlbmRlckVudGl0eShcbiAgICAgIGl0ZW0uY29udGV4dF9lbnRpdHlfaWQsXG4gICAgICBpdGVtLmNvbnRleHRfZW50aXR5X2lkX25hbWVcbiAgICApfSlgO1xuICB9XG5cbiAgcHJpdmF0ZSBfcmVuZGVyQ29udGV4dE1lc3NhZ2UoaXRlbTogTG9nYm9va0VudHJ5LCBzZWVuRW50aXR5SWRzOiBzdHJpbmdbXSkge1xuICAgIC8vIFN0YXRlIGNoYW5nZVxuICAgIGlmIChpdGVtLmNvbnRleHRfc3RhdGUpIHtcbiAgICAgIGNvbnN0IGhpc3RvcmljU3RhdGVPYmogPVxuICAgICAgICBpdGVtLmNvbnRleHRfZW50aXR5X2lkICYmIGl0ZW0uY29udGV4dF9lbnRpdHlfaWQgaW4gdGhpcy5oYXNzLnN0YXRlc1xuICAgICAgICAgID8gY3JlYXRlSGlzdG9yaWNTdGF0ZShcbiAgICAgICAgICAgICAgdGhpcy5oYXNzLnN0YXRlc1tpdGVtLmNvbnRleHRfZW50aXR5X2lkXSxcbiAgICAgICAgICAgICAgaXRlbS5jb250ZXh0X3N0YXRlXG4gICAgICAgICAgICApXG4gICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICByZXR1cm4gaHRtbGAke3RoaXMuaGFzcy5sb2NhbGl6ZShcbiAgICAgICAgXCJ1aS5jb21wb25lbnRzLmxvZ2Jvb2sudHJpZ2dlcmVkX2J5X3N0YXRlX29mXCJcbiAgICAgICl9XG4gICAgICAke3RoaXMuX3JlbmRlckVudGl0eShpdGVtLmNvbnRleHRfZW50aXR5X2lkLCBpdGVtLmNvbnRleHRfZW50aXR5X2lkX25hbWUpfVxuICAgICAgJHtoaXN0b3JpY1N0YXRlT2JqXG4gICAgICAgID8gbG9jYWxpemVTdGF0ZU1lc3NhZ2UoXG4gICAgICAgICAgICB0aGlzLmhhc3MsXG4gICAgICAgICAgICB0aGlzLmhhc3MubG9jYWxpemUsXG4gICAgICAgICAgICBpdGVtLmNvbnRleHRfc3RhdGUsXG4gICAgICAgICAgICBoaXN0b3JpY1N0YXRlT2JqLFxuICAgICAgICAgICAgY29tcHV0ZURvbWFpbihpdGVtLmNvbnRleHRfZW50aXR5X2lkISlcbiAgICAgICAgICApXG4gICAgICAgIDogaXRlbS5jb250ZXh0X3N0YXRlfWA7XG4gICAgfVxuICAgIC8vIFNlcnZpY2UgY2FsbFxuICAgIGlmIChpdGVtLmNvbnRleHRfZXZlbnRfdHlwZSA9PT0gXCJjYWxsX3NlcnZpY2VcIikge1xuICAgICAgcmV0dXJuIGh0bWxgJHt0aGlzLmhhc3MubG9jYWxpemUoXG4gICAgICAgIFwidWkuY29tcG9uZW50cy5sb2dib29rLnRyaWdnZXJlZF9ieV9zZXJ2aWNlXCJcbiAgICAgICl9XG4gICAgICAke2l0ZW0uY29udGV4dF9kb21haW59LiR7aXRlbS5jb250ZXh0X3NlcnZpY2V9YDtcbiAgICB9XG4gICAgaWYgKFxuICAgICAgIWl0ZW0uY29udGV4dF9tZXNzYWdlIHx8XG4gICAgICBzZWVuRW50aXR5SWRzLmluY2x1ZGVzKGl0ZW0uY29udGV4dF9lbnRpdHlfaWQhKVxuICAgICkge1xuICAgICAgcmV0dXJuIFwiXCI7XG4gICAgfVxuICAgIC8vIEF1dG9tYXRpb24gb3Igc2NyaXB0XG4gICAgaWYgKFxuICAgICAgaXRlbS5jb250ZXh0X2V2ZW50X3R5cGUgPT09IFwiYXV0b21hdGlvbl90cmlnZ2VyZWRcIiB8fFxuICAgICAgaXRlbS5jb250ZXh0X2V2ZW50X3R5cGUgPT09IFwic2NyaXB0X3N0YXJ0ZWRcIlxuICAgICkge1xuICAgICAgLy8gY29udGV4dF9zb3VyY2UgaXMgYXZhaWxhYmxlIGluIDIwMjIuNiBhbmQgbGF0ZXJcbiAgICAgIGNvbnN0IHRyaWdnZXJNc2cgPSBpdGVtLmNvbnRleHRfc291cmNlXG4gICAgICAgID8gaXRlbS5jb250ZXh0X3NvdXJjZVxuICAgICAgICA6IGl0ZW0uY29udGV4dF9tZXNzYWdlLnJlcGxhY2UoXCJ0cmlnZ2VyZWQgYnkgXCIsIFwiXCIpO1xuICAgICAgY29uc3QgY29udGV4dFRyaWdnZXJTb3VyY2UgPSBsb2NhbGl6ZVRyaWdnZXJTb3VyY2UoXG4gICAgICAgIHRoaXMuaGFzcy5sb2NhbGl6ZSxcbiAgICAgICAgdHJpZ2dlck1zZ1xuICAgICAgKTtcbiAgICAgIHJldHVybiBodG1sYCR7dGhpcy5oYXNzLmxvY2FsaXplKFxuICAgICAgICBpdGVtLmNvbnRleHRfZXZlbnRfdHlwZSA9PT0gXCJhdXRvbWF0aW9uX3RyaWdnZXJlZFwiXG4gICAgICAgICAgPyBcInVpLmNvbXBvbmVudHMubG9nYm9vay50cmlnZ2VyZWRfYnlfYXV0b21hdGlvblwiXG4gICAgICAgICAgOiBcInVpLmNvbXBvbmVudHMubG9nYm9vay50cmlnZ2VyZWRfYnlfc2NyaXB0XCJcbiAgICAgICl9XG4gICAgICAke3RoaXMuX3JlbmRlckVudGl0eShpdGVtLmNvbnRleHRfZW50aXR5X2lkLCBpdGVtLmNvbnRleHRfZW50aXR5X2lkX25hbWUpfVxuICAgICAgJHtpdGVtLmNvbnRleHRfbWVzc2FnZVxuICAgICAgICA/IHRoaXMuX2Zvcm1hdE1lc3NhZ2VXaXRoUG9zc2libGVFbnRpdHkoXG4gICAgICAgICAgICBjb250ZXh0VHJpZ2dlclNvdXJjZSxcbiAgICAgICAgICAgIHNlZW5FbnRpdHlJZHNcbiAgICAgICAgICApXG4gICAgICAgIDogXCJcIn1gO1xuICAgIH1cbiAgICAvLyBHZW5lcmljIGV4dGVybmFsbHkgZGVzY3JpYmVkIGxvZ2Jvb2sgcGxhdGZvcm1cbiAgICAvLyBUaGVzZSBhcmUgbm90IGxvY2FsaXphYmxlXG4gICAgcmV0dXJuIGh0bWxgICR7dGhpcy5oYXNzLmxvY2FsaXplKFwidWkuY29tcG9uZW50cy5sb2dib29rLnRyaWdnZXJlZF9ieVwiKX1cbiAgICAke2l0ZW0uY29udGV4dF9uYW1lfVxuICAgICR7dGhpcy5fZm9ybWF0TWVzc2FnZVdpdGhQb3NzaWJsZUVudGl0eShcbiAgICAgIGl0ZW0uY29udGV4dF9tZXNzYWdlLFxuICAgICAgc2VlbkVudGl0eUlkcyxcbiAgICAgIGl0ZW0uY29udGV4dF9lbnRpdHlfaWRcbiAgICApfVxuICAgICR7dGhpcy5fcmVuZGVyVW5zZWVuQ29udGV4dFNvdXJjZUVudGl0eShpdGVtLCBzZWVuRW50aXR5SWRzKX1gO1xuICB9XG5cbiAgcHJpdmF0ZSBfcmVuZGVyRW50aXR5KFxuICAgIGVudGl0eUlkOiBzdHJpbmcgfCB1bmRlZmluZWQsXG4gICAgZW50aXR5TmFtZTogc3RyaW5nIHwgdW5kZWZpbmVkXG4gICkge1xuICAgIGNvbnN0IGhhc1N0YXRlID0gZW50aXR5SWQgJiYgZW50aXR5SWQgaW4gdGhpcy5oYXNzLnN0YXRlcztcbiAgICBjb25zdCBkaXNwbGF5TmFtZSA9XG4gICAgICBlbnRpdHlOYW1lIHx8XG4gICAgICAoaGFzU3RhdGVcbiAgICAgICAgPyB0aGlzLmhhc3Muc3RhdGVzW2VudGl0eUlkXS5hdHRyaWJ1dGVzLmZyaWVuZGx5X25hbWUgfHwgZW50aXR5SWRcbiAgICAgICAgOiBlbnRpdHlJZCk7XG4gICAgaWYgKCFoYXNTdGF0ZSkge1xuICAgICAgcmV0dXJuIGRpc3BsYXlOYW1lO1xuICAgIH1cbiAgICByZXR1cm4gaHRtbGA8YnV0dG9uXG4gICAgICBjbGFzcz1cImxpbmtcIlxuICAgICAgQGNsaWNrPSR7dGhpcy5fZW50aXR5Q2xpY2tlZH1cbiAgICAgIC5lbnRpdHlJZD0ke2VudGl0eUlkfVxuICAgID5cbiAgICAgICR7ZGlzcGxheU5hbWV9XG4gICAgPC9idXR0b24+YDtcbiAgfVxuXG4gIHByaXZhdGUgX2Zvcm1hdE1lc3NhZ2VXaXRoUG9zc2libGVFbnRpdHkoXG4gICAgbWVzc2FnZTogc3RyaW5nLFxuICAgIHNlZW5FbnRpdGllczogc3RyaW5nW10sXG4gICAgcG9zc2libGVFbnRpdHk/OiBzdHJpbmdcbiAgKSB7XG4gICAgLy9cbiAgICAvLyBBcyB3ZSBhcmUgbG9va2luZyBhdCBhIGxvZyhib29rKSwgd2UgYXJlIGRvaW5nIGVudGl0eV9pZFxuICAgIC8vIFwiaGlnaGxpZ2h0aW5nXCIvXCJjb2xvcml6aW5nXCIuIFRoZSBnb2FsIGlzIHRvIG1ha2UgaXQgZWFzeSBmb3JcbiAgICAvLyB0aGUgdXNlciB0byBhY2Nlc3MgdGhlIGVudGl0eSB0aGF0IGNhdXNlZCB0aGUgZXZlbnQuXG4gICAgLy9cbiAgICAvLyBJZiB0aGVyZSBpcyBhbiBlbnRpdHlfaWQgaW4gdGhlIG1lc3NhZ2UgdGhhdCBpcyBhbHNvIGluIHRoZVxuICAgIC8vIHN0YXRlIG1hY2hpbmUsIHdlIHNlYXJjaCB0aGUgbWVzc2FnZSBmb3IgdGhlIGVudGl0eV9pZCBhbmRcbiAgICAvLyByZXBsYWNlIGl0IHdpdGggX3JlbmRlckVudGl0eVxuICAgIC8vXG4gICAgaWYgKG1lc3NhZ2UuaW5kZXhPZihcIi5cIikgIT09IC0xKSB7XG4gICAgICBjb25zdCBtZXNzYWdlUGFydHMgPSBtZXNzYWdlLnNwbGl0KFwiIFwiKTtcbiAgICAgIGZvciAobGV0IGkgPSAwLCBzaXplID0gbWVzc2FnZVBhcnRzLmxlbmd0aDsgaSA8IHNpemU7IGkrKykge1xuICAgICAgICBpZiAobWVzc2FnZVBhcnRzW2ldIGluIHRoaXMuaGFzcy5zdGF0ZXMpIHtcbiAgICAgICAgICBjb25zdCBlbnRpdHlJZCA9IG1lc3NhZ2VQYXJ0c1tpXTtcbiAgICAgICAgICBpZiAoc2VlbkVudGl0aWVzLmluY2x1ZGVzKGVudGl0eUlkKSkge1xuICAgICAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgICAgICAgfVxuICAgICAgICAgIHNlZW5FbnRpdGllcy5wdXNoKGVudGl0eUlkKTtcbiAgICAgICAgICBjb25zdCBtZXNzYWdlRW5kID0gbWVzc2FnZVBhcnRzLnNwbGljZShpKTtcbiAgICAgICAgICBtZXNzYWdlRW5kLnNoaWZ0KCk7IC8vIHJlbW92ZSB0aGUgZW50aXR5XG4gICAgICAgICAgcmV0dXJuIGh0bWxgJHttZXNzYWdlUGFydHMuam9pbihcIiBcIil9XG4gICAgICAgICAgJHt0aGlzLl9yZW5kZXJFbnRpdHkoXG4gICAgICAgICAgICBlbnRpdHlJZCxcbiAgICAgICAgICAgIHRoaXMuaGFzcy5zdGF0ZXNbZW50aXR5SWRdLmF0dHJpYnV0ZXMuZnJpZW5kbHlfbmFtZVxuICAgICAgICAgICl9XG4gICAgICAgICAgJHttZXNzYWdlRW5kLmpvaW4oXCIgXCIpfWA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgLy9cbiAgICAvLyBXaGVuIHdlIGhhdmUgYSBtZXNzYWdlIGhhcyBhIHNwZWNpZmljIGVudGl0eV9pZCBhdHRhY2hlZCB0b1xuICAgIC8vIGl0LCBhbmQgdGhlIGVudGl0eV9pZCBpcyBub3QgaW4gdGhlIG1lc3NhZ2UsIHdlIGxvb2tcbiAgICAvLyBmb3IgdGhlIGZyaWVuZGx5IG5hbWUgb2YgdGhlIGVudGl0eSBhbmQgcmVwbGFjZSB0aGF0IHdpdGhcbiAgICAvLyBfcmVuZGVyRW50aXR5IGlmIGl0cyB0aGVyZSBzbyB0aGUgdXNlciBjYW4gcXVpY2tseSBnZXQgdG9cbiAgICAvLyB0aGF0IGVudGl0eS5cbiAgICAvL1xuICAgIGlmIChwb3NzaWJsZUVudGl0eSAmJiBwb3NzaWJsZUVudGl0eSBpbiB0aGlzLmhhc3Muc3RhdGVzKSB7XG4gICAgICBjb25zdCBwb3NzaWJsZUVudGl0eU5hbWUgPVxuICAgICAgICB0aGlzLmhhc3Muc3RhdGVzW3Bvc3NpYmxlRW50aXR5XS5hdHRyaWJ1dGVzLmZyaWVuZGx5X25hbWU7XG4gICAgICBpZiAocG9zc2libGVFbnRpdHlOYW1lICYmIG1lc3NhZ2UuZW5kc1dpdGgocG9zc2libGVFbnRpdHlOYW1lKSkge1xuICAgICAgICBpZiAoc2VlbkVudGl0aWVzLmluY2x1ZGVzKHBvc3NpYmxlRW50aXR5KSkge1xuICAgICAgICAgIHJldHVybiBcIlwiO1xuICAgICAgICB9XG4gICAgICAgIHNlZW5FbnRpdGllcy5wdXNoKHBvc3NpYmxlRW50aXR5KTtcbiAgICAgICAgbWVzc2FnZSA9IG1lc3NhZ2Uuc3Vic3RyaW5nKFxuICAgICAgICAgIDAsXG4gICAgICAgICAgbWVzc2FnZS5sZW5ndGggLSBwb3NzaWJsZUVudGl0eU5hbWUubGVuZ3RoXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiBodG1sYCR7bWVzc2FnZX1cbiAgICAgICAgJHt0aGlzLl9yZW5kZXJFbnRpdHkocG9zc2libGVFbnRpdHksIHBvc3NpYmxlRW50aXR5TmFtZSl9YDtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH1cblxuICBwcml2YXRlIF9lbnRpdHlDbGlja2VkKGV2OiBFdmVudCkge1xuICAgIGNvbnN0IGVudGl0eUlkID0gKGV2LmN1cnJlbnRUYXJnZXQgYXMgYW55KS5lbnRpdHlJZDtcbiAgICBpZiAoIWVudGl0eUlkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICBldi5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBmaXJlRXZlbnQodGhpcywgXCJoYXNzLW1vcmUtaW5mb1wiLCB7XG4gICAgICBlbnRpdHlJZDogZW50aXR5SWQsXG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIF9jbG9zZSgpOiB2b2lkIHtcbiAgICBzZXRUaW1lb3V0KCgpID0+IGZpcmVFdmVudCh0aGlzLCBcImNsb3NlZFwiKSwgNTAwKTtcbiAgfVxuXG4gIHN0YXRpYyBnZXQgc3R5bGVzKCk6IENTU1Jlc3VsdEdyb3VwIHtcbiAgICByZXR1cm4gW1xuICAgICAgaGFTdHlsZSxcbiAgICAgIGhhU3R5bGVTY3JvbGxiYXIsXG4gICAgICBidXR0b25MaW5rU3R5bGUsXG4gICAgICBjc3NgXG4gICAgICAgIDpob3N0KFt2aXJ0dWFsaXplXSkge1xuICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgfVxuXG4gICAgICAgIC5lbnRyeS1jb250YWluZXIge1xuICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICB9XG5cbiAgICAgICAgLmVudHJ5IHtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgIGxpbmUtaGVpZ2h0OiAyZW07XG4gICAgICAgICAgcGFkZGluZzogOHB4IDE2cHg7XG4gICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgICAgICAgICBib3JkZXItdG9wOiAxcHggc29saWQgdmFyKC0tZGl2aWRlci1jb2xvcik7XG4gICAgICAgIH1cblxuICAgICAgICAuZW50cnkubm8tZW50aXR5LFxuICAgICAgICAubm8tbmFtZSAuZW50cnkge1xuICAgICAgICAgIGN1cnNvcjogZGVmYXVsdDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5lbnRyeTpob3ZlciB7XG4gICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSh2YXIoLS1yZ2ItcHJpbWFyeS10ZXh0LWNvbG9yKSwgMC4wNCk7XG4gICAgICAgIH1cblxuICAgICAgICAubmFycm93Om5vdCgubm8taWNvbikgLnRpbWUge1xuICAgICAgICAgIG1hcmdpbi1sZWZ0OiAzMnB4O1xuICAgICAgICAgIG1hcmdpbi1pbmxpbmUtc3RhcnQ6IDMycHg7XG4gICAgICAgICAgbWFyZ2luLWlubGluZS1lbmQ6IGluaXRpYWw7XG4gICAgICAgICAgZGlyZWN0aW9uOiB2YXIoLS1kaXJlY3Rpb24pO1xuICAgICAgICB9XG5cbiAgICAgICAgLm1lc3NhZ2UtcmVsYXRpdmVfdGltZSB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICB9XG5cbiAgICAgICAgLnNlY29uZGFyeSB7XG4gICAgICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjc7XG4gICAgICAgIH1cblxuICAgICAgICAuc2Vjb25kYXJ5IGEge1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS1zZWNvbmRhcnktdGV4dC1jb2xvcik7XG4gICAgICAgIH1cblxuICAgICAgICAuZGF0ZSB7XG4gICAgICAgICAgbWFyZ2luOiA4cHggMDtcbiAgICAgICAgICBwYWRkaW5nOiAwIDE2cHg7XG4gICAgICAgIH1cblxuICAgICAgICAuaWNvbi1tZXNzYWdlIHtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIH1cblxuICAgICAgICAubm8tZW50cmllcyB7XG4gICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS1zZWNvbmRhcnktdGV4dC1jb2xvcik7XG4gICAgICAgIH1cblxuICAgICAgICBzdGF0ZS1iYWRnZSB7XG4gICAgICAgICAgbWFyZ2luLXJpZ2h0OiAxNnB4O1xuICAgICAgICAgIG1hcmdpbi1pbmxpbmUtc3RhcnQ6IGluaXRpYWw7XG4gICAgICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXN0YXRlLWljb24tY29sb3IpO1xuICAgICAgICAgIG1hcmdpbi1pbmxpbmUtZW5kOiAxNnB4O1xuICAgICAgICAgIGRpcmVjdGlvbjogdmFyKC0tZGlyZWN0aW9uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC5tZXNzYWdlIHtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tcHJpbWFyeS10ZXh0LWNvbG9yKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC5uby1uYW1lIC5tZXNzYWdlOmZpcnN0LWxldHRlciB7XG4gICAgICAgICAgdGV4dC10cmFuc2Zvcm06IGNhcGl0YWxpemU7XG4gICAgICAgIH1cblxuICAgICAgICBhIHtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tcHJpbWFyeS1jb2xvcik7XG4gICAgICAgICAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xuICAgICAgICB9XG5cbiAgICAgICAgYnV0dG9uLmxpbmsge1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS1wYXBlci1pdGVtLWljb24tY29sb3IpO1xuICAgICAgICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC5jb250YWluZXIge1xuICAgICAgICAgIG1heC1oZWlnaHQ6IHZhcigtLWxvZ2Jvb2stbWF4LWhlaWdodCk7XG4gICAgICAgIH1cblxuICAgICAgICAuY29udGFpbmVyLFxuICAgICAgICBsaXQtdmlydHVhbGl6ZXIge1xuICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxpdC12aXJ0dWFsaXplciB7XG4gICAgICAgICAgY29udGFpbjogc2l6ZSBsYXlvdXQgIWltcG9ydGFudDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5uYXJyb3cgLmVudHJ5IHtcbiAgICAgICAgICBsaW5lLWhlaWdodDogMS41O1xuICAgICAgICB9XG5cbiAgICAgICAgLm5hcnJvdyAuaWNvbi1tZXNzYWdlIHN0YXRlLWJhZGdlIHtcbiAgICAgICAgICBtYXJnaW4tbGVmdDogMDtcbiAgICAgICAgICBtYXJnaW4taW5saW5lLXN0YXJ0OiAwO1xuICAgICAgICAgIG1hcmdpbi1pbmxpbmUtZW5kOiBpbml0aWFsO1xuICAgICAgICAgIGRpcmVjdGlvbjogdmFyKC0tZGlyZWN0aW9uKTtcbiAgICAgICAgfVxuICAgICAgYCxcbiAgICBdO1xuICB9XG59XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIEhUTUxFbGVtZW50VGFnTmFtZU1hcCB7XG4gICAgXCJoYS1sb2dib29rLXJlbmRlcmVyXCI6IEhhTG9nYm9va1JlbmRlcmVyO1xuICB9XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/panels/logbook/ha-logbook-renderer.ts\n");

/***/ })

}]);