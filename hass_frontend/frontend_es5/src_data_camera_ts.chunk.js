"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkhome_assistant_frontend"] = self["webpackChunkhome_assistant_frontend"] || []).push([["src_data_camera_ts"],{

/***/ "./src/common/util/time-cache-entity-promise-func.ts":
/*!***********************************************************!*\
  !*** ./src/common/util/time-cache-entity-promise-func.ts ***!
  \***********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"timeCacheEntityPromiseFunc\": function() { return /* binding */ timeCacheEntityPromiseFunc; }\n/* harmony export */ });\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\n/**\n * Call a function with result caching per entity.\n * @param cacheKey key to store the cache on hass object\n * @param cacheTime time to cache the results\n * @param func function to fetch the data\n * @param hass Home Assistant object\n * @param entityId entity to fetch data for\n * @param args extra arguments to pass to the function to fetch the data\n * @returns\n */\nvar timeCacheEntityPromiseFunc = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(cacheKey, cacheTime, func, hass, entityId) {\n    var _len,\n        args,\n        _key,\n        cache,\n        lastResult,\n        result,\n        _args = arguments;\n\n    return regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            for (_len = _args.length, args = new Array(_len > 5 ? _len - 5 : 0), _key = 5; _key < _len; _key++) {\n              args[_key - 5] = _args[_key];\n            }\n\n            cache = hass[cacheKey];\n\n            if (!cache) {\n              cache = hass[cacheKey] = {};\n            }\n\n            lastResult = cache[entityId];\n\n            if (!lastResult) {\n              _context.next = 6;\n              break;\n            }\n\n            return _context.abrupt(\"return\", lastResult);\n\n          case 6:\n            result = func.apply(void 0, [hass, entityId].concat(args));\n            cache[entityId] = result;\n            result.then( // When successful, set timer to clear cache\n            function () {\n              return setTimeout(function () {\n                cache[entityId] = undefined;\n              }, cacheTime);\n            }, // On failure, clear cache right away\n            function () {\n              cache[entityId] = undefined;\n            });\n            return _context.abrupt(\"return\", result);\n\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function timeCacheEntityPromiseFunc(_x, _x2, _x3, _x4, _x5) {\n    return _ref.apply(this, arguments);\n  };\n}();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tbW9uL3V0aWwvdGltZS1jYWNoZS1lbnRpdHktcHJvbWlzZS1mdW5jLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQU1BO0FBTkE7O0FBUUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQWRBO0FBQUE7QUFBQTtBQUFBOztBQUFBOztBQUFBO0FBb0JBO0FBQ0E7QUFFQTtBQUVBO0FBQUE7QUFFQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFoQ0E7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ob21lLWFzc2lzdGFudC1mcm9udGVuZC8uL3NyYy9jb21tb24vdXRpbC90aW1lLWNhY2hlLWVudGl0eS1wcm9taXNlLWZ1bmMudHM/YTg4MSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBIb21lQXNzaXN0YW50IH0gZnJvbSBcIi4uLy4uL3R5cGVzXCI7XG5cbmludGVyZmFjZSBSZXN1bHRDYWNoZTxUPiB7XG4gIFtlbnRpdHlJZDogc3RyaW5nXTogUHJvbWlzZTxUPiB8IHVuZGVmaW5lZDtcbn1cblxuLyoqXG4gKiBDYWxsIGEgZnVuY3Rpb24gd2l0aCByZXN1bHQgY2FjaGluZyBwZXIgZW50aXR5LlxuICogQHBhcmFtIGNhY2hlS2V5IGtleSB0byBzdG9yZSB0aGUgY2FjaGUgb24gaGFzcyBvYmplY3RcbiAqIEBwYXJhbSBjYWNoZVRpbWUgdGltZSB0byBjYWNoZSB0aGUgcmVzdWx0c1xuICogQHBhcmFtIGZ1bmMgZnVuY3Rpb24gdG8gZmV0Y2ggdGhlIGRhdGFcbiAqIEBwYXJhbSBoYXNzIEhvbWUgQXNzaXN0YW50IG9iamVjdFxuICogQHBhcmFtIGVudGl0eUlkIGVudGl0eSB0byBmZXRjaCBkYXRhIGZvclxuICogQHBhcmFtIGFyZ3MgZXh0cmEgYXJndW1lbnRzIHRvIHBhc3MgdG8gdGhlIGZ1bmN0aW9uIHRvIGZldGNoIHRoZSBkYXRhXG4gKiBAcmV0dXJuc1xuICovXG5leHBvcnQgY29uc3QgdGltZUNhY2hlRW50aXR5UHJvbWlzZUZ1bmMgPSBhc3luYyA8VD4oXG4gIGNhY2hlS2V5OiBzdHJpbmcsXG4gIGNhY2hlVGltZTogbnVtYmVyLFxuICBmdW5jOiAoaGFzczogSG9tZUFzc2lzdGFudCwgZW50aXR5SWQ6IHN0cmluZywgLi4uYXJnczogYW55W10pID0+IFByb21pc2U8VD4sXG4gIGhhc3M6IEhvbWVBc3Npc3RhbnQsXG4gIGVudGl0eUlkOiBzdHJpbmcsXG4gIC4uLmFyZ3M6IGFueVtdXG4pOiBQcm9taXNlPFQ+ID0+IHtcbiAgbGV0IGNhY2hlOiBSZXN1bHRDYWNoZTxUPiB8IHVuZGVmaW5lZCA9IChoYXNzIGFzIGFueSlbY2FjaGVLZXldO1xuXG4gIGlmICghY2FjaGUpIHtcbiAgICBjYWNoZSA9IGhhc3NbY2FjaGVLZXldID0ge307XG4gIH1cblxuICBjb25zdCBsYXN0UmVzdWx0ID0gY2FjaGVbZW50aXR5SWRdO1xuXG4gIGlmIChsYXN0UmVzdWx0KSB7XG4gICAgcmV0dXJuIGxhc3RSZXN1bHQ7XG4gIH1cblxuICBjb25zdCByZXN1bHQgPSBmdW5jKGhhc3MsIGVudGl0eUlkLCAuLi5hcmdzKTtcbiAgY2FjaGVbZW50aXR5SWRdID0gcmVzdWx0O1xuXG4gIHJlc3VsdC50aGVuKFxuICAgIC8vIFdoZW4gc3VjY2Vzc2Z1bCwgc2V0IHRpbWVyIHRvIGNsZWFyIGNhY2hlXG4gICAgKCkgPT5cbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBjYWNoZSFbZW50aXR5SWRdID0gdW5kZWZpbmVkO1xuICAgICAgfSwgY2FjaGVUaW1lKSxcbiAgICAvLyBPbiBmYWlsdXJlLCBjbGVhciBjYWNoZSByaWdodCBhd2F5XG4gICAgKCkgPT4ge1xuICAgICAgY2FjaGUhW2VudGl0eUlkXSA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICk7XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/common/util/time-cache-entity-promise-func.ts\n");

/***/ }),

/***/ "./src/data/auth.ts":
/*!**************************!*\
  !*** ./src/data/auth.ts ***!
  \**************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"hassUrl\": function() { return /* binding */ hassUrl; },\n/* harmony export */   \"getSignedPath\": function() { return /* binding */ getSignedPath; },\n/* harmony export */   \"fetchAuthProviders\": function() { return /* binding */ fetchAuthProviders; },\n/* harmony export */   \"createAuthForUser\": function() { return /* binding */ createAuthForUser; },\n/* harmony export */   \"adminChangePassword\": function() { return /* binding */ adminChangePassword; }\n/* harmony export */ });\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nvar hassUrl = \"\".concat(location.protocol, \"//\").concat(location.host);\nvar getSignedPath = function getSignedPath(hass, path) {\n  return hass.callWS({\n    type: \"auth/sign_path\",\n    path: path\n  });\n};\nvar fetchAuthProviders = function fetchAuthProviders() {\n  return fetch(\"/auth/providers\", {\n    credentials: \"same-origin\"\n  });\n};\nvar createAuthForUser = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(hass, userId, username, password) {\n    return regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            return _context.abrupt(\"return\", hass.callWS({\n              type: \"config/auth_provider/homeassistant/create\",\n              user_id: userId,\n              username: username,\n              password: password\n            }));\n\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function createAuthForUser(_x, _x2, _x3, _x4) {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar adminChangePassword = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(hass, userId, password) {\n    return regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            return _context2.abrupt(\"return\", hass.callWS({\n              type: \"config/auth_provider/homeassistant/admin_change_password\",\n              user_id: userId,\n              password: password\n            }));\n\n          case 1:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n\n  return function adminChangePassword(_x5, _x6, _x7) {\n    return _ref2.apply(this, arguments);\n  };\n}();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZGF0YS9hdXRoLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQXNCQTtBQUVBO0FBQUE7QUFHQTtBQUFBO0FBQUE7QUFIQTtBQUtBO0FBQUE7QUFFQTtBQURBO0FBREE7QUFLQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBSkE7O0FBTkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFhQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQU1BO0FBQ0E7QUFDQTtBQUhBOztBQUxBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaG9tZS1hc3Npc3RhbnQtZnJvbnRlbmQvLi9zcmMvZGF0YS9hdXRoLnRzP2NkNWYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSG9tZUFzc2lzdGFudCB9IGZyb20gXCIuLi90eXBlc1wiO1xuXG5leHBvcnQgaW50ZXJmYWNlIEF1dGhVcmxTZWFyY2hQYXJhbXMge1xuICBjbGllbnRfaWQ/OiBzdHJpbmc7XG4gIHJlZGlyZWN0X3VyaT86IHN0cmluZztcbiAgc3RhdGU/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQXV0aFByb3ZpZGVyIHtcbiAgbmFtZTogc3RyaW5nO1xuICBpZDogc3RyaW5nO1xuICB0eXBlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ3JlZGVudGlhbCB7XG4gIHR5cGU6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTaWduZWRQYXRoIHtcbiAgcGF0aDogc3RyaW5nO1xufVxuXG5leHBvcnQgY29uc3QgaGFzc1VybCA9IGAke2xvY2F0aW9uLnByb3RvY29sfS8vJHtsb2NhdGlvbi5ob3N0fWA7XG5cbmV4cG9ydCBjb25zdCBnZXRTaWduZWRQYXRoID0gKFxuICBoYXNzOiBIb21lQXNzaXN0YW50LFxuICBwYXRoOiBzdHJpbmdcbik6IFByb21pc2U8U2lnbmVkUGF0aD4gPT4gaGFzcy5jYWxsV1MoeyB0eXBlOiBcImF1dGgvc2lnbl9wYXRoXCIsIHBhdGggfSk7XG5cbmV4cG9ydCBjb25zdCBmZXRjaEF1dGhQcm92aWRlcnMgPSAoKSA9PlxuICBmZXRjaChcIi9hdXRoL3Byb3ZpZGVyc1wiLCB7XG4gICAgY3JlZGVudGlhbHM6IFwic2FtZS1vcmlnaW5cIixcbiAgfSk7XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVBdXRoRm9yVXNlciA9IGFzeW5jIChcbiAgaGFzczogSG9tZUFzc2lzdGFudCxcbiAgdXNlcklkOiBzdHJpbmcsXG4gIHVzZXJuYW1lOiBzdHJpbmcsXG4gIHBhc3N3b3JkOiBzdHJpbmdcbikgPT5cbiAgaGFzcy5jYWxsV1Moe1xuICAgIHR5cGU6IFwiY29uZmlnL2F1dGhfcHJvdmlkZXIvaG9tZWFzc2lzdGFudC9jcmVhdGVcIixcbiAgICB1c2VyX2lkOiB1c2VySWQsXG4gICAgdXNlcm5hbWUsXG4gICAgcGFzc3dvcmQsXG4gIH0pO1xuXG5leHBvcnQgY29uc3QgYWRtaW5DaGFuZ2VQYXNzd29yZCA9IGFzeW5jIChcbiAgaGFzczogSG9tZUFzc2lzdGFudCxcbiAgdXNlcklkOiBzdHJpbmcsXG4gIHBhc3N3b3JkOiBzdHJpbmdcbikgPT5cbiAgaGFzcy5jYWxsV1M8dm9pZD4oe1xuICAgIHR5cGU6IFwiY29uZmlnL2F1dGhfcHJvdmlkZXIvaG9tZWFzc2lzdGFudC9hZG1pbl9jaGFuZ2VfcGFzc3dvcmRcIixcbiAgICB1c2VyX2lkOiB1c2VySWQsXG4gICAgcGFzc3dvcmQsXG4gIH0pO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/data/auth.ts\n");

/***/ }),

/***/ "./src/data/camera.ts":
/*!****************************!*\
  !*** ./src/data/camera.ts ***!
  \****************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"CAMERA_SUPPORT_ON_OFF\": function() { return /* binding */ CAMERA_SUPPORT_ON_OFF; },\n/* harmony export */   \"CAMERA_SUPPORT_STREAM\": function() { return /* binding */ CAMERA_SUPPORT_STREAM; },\n/* harmony export */   \"STREAM_TYPE_HLS\": function() { return /* binding */ STREAM_TYPE_HLS; },\n/* harmony export */   \"STREAM_TYPE_WEB_RTC\": function() { return /* binding */ STREAM_TYPE_WEB_RTC; },\n/* harmony export */   \"cameraUrlWithWidthHeight\": function() { return /* binding */ cameraUrlWithWidthHeight; },\n/* harmony export */   \"computeMJPEGStreamUrl\": function() { return /* binding */ computeMJPEGStreamUrl; },\n/* harmony export */   \"fetchThumbnailUrlWithCache\": function() { return /* binding */ fetchThumbnailUrlWithCache; },\n/* harmony export */   \"fetchThumbnailUrl\": function() { return /* binding */ fetchThumbnailUrl; },\n/* harmony export */   \"fetchStreamUrl\": function() { return /* binding */ fetchStreamUrl; },\n/* harmony export */   \"handleWebRtcOffer\": function() { return /* binding */ handleWebRtcOffer; },\n/* harmony export */   \"fetchCameraPrefs\": function() { return /* binding */ fetchCameraPrefs; },\n/* harmony export */   \"updateCameraPrefs\": function() { return /* binding */ updateCameraPrefs; },\n/* harmony export */   \"isCameraMediaSource\": function() { return /* binding */ isCameraMediaSource; },\n/* harmony export */   \"getEntityIdFromCameraMediaSource\": function() { return /* binding */ getEntityIdFromCameraMediaSource; }\n/* harmony export */ });\n/* harmony import */ var _common_util_time_cache_entity_promise_func__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/util/time-cache-entity-promise-func */ \"./src/common/util/time-cache-entity-promise-func.ts\");\n/* harmony import */ var _auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./auth */ \"./src/data/auth.ts\");\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\n\n\nvar CAMERA_SUPPORT_ON_OFF = 1;\nvar CAMERA_SUPPORT_STREAM = 2;\nvar STREAM_TYPE_HLS = \"hls\";\nvar STREAM_TYPE_WEB_RTC = \"web_rtc\";\nvar cameraUrlWithWidthHeight = function cameraUrlWithWidthHeight(base_url, width, height) {\n  return \"\".concat(base_url, \"&width=\").concat(width, \"&height=\").concat(height);\n};\nvar computeMJPEGStreamUrl = function computeMJPEGStreamUrl(entity) {\n  return \"/api/camera_proxy_stream/\".concat(entity.entity_id, \"?token=\").concat(entity.attributes.access_token);\n};\nvar fetchThumbnailUrlWithCache = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(hass, entityId, width, height) {\n    var base_url;\n    return regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return (0,_common_util_time_cache_entity_promise_func__WEBPACK_IMPORTED_MODULE_0__.timeCacheEntityPromiseFunc)(\"_cameraTmbUrl\", 9000, fetchThumbnailUrl, hass, entityId);\n\n          case 2:\n            base_url = _context.sent;\n            return _context.abrupt(\"return\", cameraUrlWithWidthHeight(base_url, width, height));\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function fetchThumbnailUrlWithCache(_x, _x2, _x3, _x4) {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar fetchThumbnailUrl = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(hass, entityId) {\n    var path;\n    return regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return (0,_auth__WEBPACK_IMPORTED_MODULE_1__.getSignedPath)(hass, \"/api/camera_proxy/\".concat(entityId));\n\n          case 2:\n            path = _context2.sent;\n            return _context2.abrupt(\"return\", hass.hassUrl(path.path));\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n\n  return function fetchThumbnailUrl(_x5, _x6) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nvar fetchStreamUrl = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(hass, entityId, format) {\n    var data, stream;\n    return regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            data = {\n              type: \"camera/stream\",\n              entity_id: entityId\n            };\n\n            if (format) {\n              // @ts-ignore\n              data.format = format;\n            }\n\n            _context3.next = 4;\n            return hass.callWS(data);\n\n          case 4:\n            stream = _context3.sent;\n            stream.url = hass.hassUrl(stream.url);\n            return _context3.abrupt(\"return\", stream);\n\n          case 7:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n\n  return function fetchStreamUrl(_x7, _x8, _x9) {\n    return _ref3.apply(this, arguments);\n  };\n}();\nvar handleWebRtcOffer = function handleWebRtcOffer(hass, entityId, offer) {\n  return hass.callWS({\n    type: \"camera/web_rtc_offer\",\n    entity_id: entityId,\n    offer: offer\n  });\n};\nvar fetchCameraPrefs = function fetchCameraPrefs(hass, entityId) {\n  return hass.callWS({\n    type: \"camera/get_prefs\",\n    entity_id: entityId\n  });\n};\nvar updateCameraPrefs = function updateCameraPrefs(hass, entityId, prefs) {\n  return hass.callWS(Object.assign({\n    type: \"camera/update_prefs\",\n    entity_id: entityId\n  }, prefs));\n};\nvar CAMERA_MEDIA_SOURCE_PREFIX = \"media-source://camera/\";\nvar isCameraMediaSource = function isCameraMediaSource(mediaContentId) {\n  return mediaContentId.startsWith(CAMERA_MEDIA_SOURCE_PREFIX);\n};\nvar getEntityIdFromCameraMediaSource = function getEntityIdFromCameraMediaSource(mediaContentId) {\n  return mediaContentId.substring(CAMERA_MEDIA_SOURCE_PREFIX.length);\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZGF0YS9jYW1lcmEudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFJQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUErQkE7QUFBQTtBQUFBO0FBTUE7QUFBQTtBQUFBO0FBR0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBTUE7QUFOQTs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQWdCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFJQTtBQUpBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBUUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFLQTtBQUNBO0FBQ0E7QUFGQTs7QUFJQTtBQUNBO0FBQ0E7QUFDQTs7QUFaQTtBQUFBOztBQUFBO0FBYUE7QUFDQTtBQWRBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBa0JBO0FBQUE7QUFNQTtBQUNBO0FBQ0E7QUFIQTtBQUxBO0FBV0E7QUFBQTtBQUVBO0FBQ0E7QUFGQTtBQURBO0FBTUE7QUFBQTtBQVFBO0FBQ0E7QUFGQTtBQVBBO0FBYUE7QUFFQTtBQUFBO0FBQUE7QUFHQTtBQUFBO0FBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ob21lLWFzc2lzdGFudC1mcm9udGVuZC8uL3NyYy9kYXRhL2NhbWVyYS50cz8wODYyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIEhhc3NFbnRpdHlBdHRyaWJ1dGVCYXNlLFxuICBIYXNzRW50aXR5QmFzZSxcbn0gZnJvbSBcImhvbWUtYXNzaXN0YW50LWpzLXdlYnNvY2tldFwiO1xuaW1wb3J0IHsgdGltZUNhY2hlRW50aXR5UHJvbWlzZUZ1bmMgfSBmcm9tIFwiLi4vY29tbW9uL3V0aWwvdGltZS1jYWNoZS1lbnRpdHktcHJvbWlzZS1mdW5jXCI7XG5pbXBvcnQgeyBIb21lQXNzaXN0YW50IH0gZnJvbSBcIi4uL3R5cGVzXCI7XG5pbXBvcnQgeyBnZXRTaWduZWRQYXRoIH0gZnJvbSBcIi4vYXV0aFwiO1xuXG5leHBvcnQgY29uc3QgQ0FNRVJBX1NVUFBPUlRfT05fT0ZGID0gMTtcbmV4cG9ydCBjb25zdCBDQU1FUkFfU1VQUE9SVF9TVFJFQU0gPSAyO1xuXG5leHBvcnQgY29uc3QgU1RSRUFNX1RZUEVfSExTID0gXCJobHNcIjtcbmV4cG9ydCBjb25zdCBTVFJFQU1fVFlQRV9XRUJfUlRDID0gXCJ3ZWJfcnRjXCI7XG5cbmludGVyZmFjZSBDYW1lcmFFbnRpdHlBdHRyaWJ1dGVzIGV4dGVuZHMgSGFzc0VudGl0eUF0dHJpYnV0ZUJhc2Uge1xuICBtb2RlbF9uYW1lOiBzdHJpbmc7XG4gIGFjY2Vzc190b2tlbjogc3RyaW5nO1xuICBicmFuZDogc3RyaW5nO1xuICBtb3Rpb25fZGV0ZWN0aW9uOiBib29sZWFuO1xuICBmcm9udGVuZF9zdHJlYW1fdHlwZTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENhbWVyYUVudGl0eSBleHRlbmRzIEhhc3NFbnRpdHlCYXNlIHtcbiAgYXR0cmlidXRlczogQ2FtZXJhRW50aXR5QXR0cmlidXRlcztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDYW1lcmFQcmVmZXJlbmNlcyB7XG4gIHByZWxvYWRfc3RyZWFtOiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENhbWVyYVRodW1ibmFpbCB7XG4gIGNvbnRlbnRfdHlwZTogc3RyaW5nO1xuICBjb250ZW50OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RyZWFtIHtcbiAgdXJsOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgV2ViUnRjQW5zd2VyIHtcbiAgYW5zd2VyOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjb25zdCBjYW1lcmFVcmxXaXRoV2lkdGhIZWlnaHQgPSAoXG4gIGJhc2VfdXJsOiBzdHJpbmcsXG4gIHdpZHRoOiBudW1iZXIsXG4gIGhlaWdodDogbnVtYmVyXG4pID0+IGAke2Jhc2VfdXJsfSZ3aWR0aD0ke3dpZHRofSZoZWlnaHQ9JHtoZWlnaHR9YDtcblxuZXhwb3J0IGNvbnN0IGNvbXB1dGVNSlBFR1N0cmVhbVVybCA9IChlbnRpdHk6IENhbWVyYUVudGl0eSkgPT5cbiAgYC9hcGkvY2FtZXJhX3Byb3h5X3N0cmVhbS8ke2VudGl0eS5lbnRpdHlfaWR9P3Rva2VuPSR7ZW50aXR5LmF0dHJpYnV0ZXMuYWNjZXNzX3Rva2VufWA7XG5cbmV4cG9ydCBjb25zdCBmZXRjaFRodW1ibmFpbFVybFdpdGhDYWNoZSA9IGFzeW5jIChcbiAgaGFzczogSG9tZUFzc2lzdGFudCxcbiAgZW50aXR5SWQ6IHN0cmluZyxcbiAgd2lkdGg6IG51bWJlcixcbiAgaGVpZ2h0OiBudW1iZXJcbikgPT4ge1xuICBjb25zdCBiYXNlX3VybCA9IGF3YWl0IHRpbWVDYWNoZUVudGl0eVByb21pc2VGdW5jKFxuICAgIFwiX2NhbWVyYVRtYlVybFwiLFxuICAgIDkwMDAsXG4gICAgZmV0Y2hUaHVtYm5haWxVcmwsXG4gICAgaGFzcyxcbiAgICBlbnRpdHlJZFxuICApO1xuICByZXR1cm4gY2FtZXJhVXJsV2l0aFdpZHRoSGVpZ2h0KGJhc2VfdXJsLCB3aWR0aCwgaGVpZ2h0KTtcbn07XG5cbmV4cG9ydCBjb25zdCBmZXRjaFRodW1ibmFpbFVybCA9IGFzeW5jIChcbiAgaGFzczogSG9tZUFzc2lzdGFudCxcbiAgZW50aXR5SWQ6IHN0cmluZ1xuKSA9PiB7XG4gIGNvbnN0IHBhdGggPSBhd2FpdCBnZXRTaWduZWRQYXRoKGhhc3MsIGAvYXBpL2NhbWVyYV9wcm94eS8ke2VudGl0eUlkfWApO1xuICByZXR1cm4gaGFzcy5oYXNzVXJsKHBhdGgucGF0aCk7XG59O1xuXG5leHBvcnQgY29uc3QgZmV0Y2hTdHJlYW1VcmwgPSBhc3luYyAoXG4gIGhhc3M6IEhvbWVBc3Npc3RhbnQsXG4gIGVudGl0eUlkOiBzdHJpbmcsXG4gIGZvcm1hdD86IFwiaGxzXCJcbikgPT4ge1xuICBjb25zdCBkYXRhID0ge1xuICAgIHR5cGU6IFwiY2FtZXJhL3N0cmVhbVwiLFxuICAgIGVudGl0eV9pZDogZW50aXR5SWQsXG4gIH07XG4gIGlmIChmb3JtYXQpIHtcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgZGF0YS5mb3JtYXQgPSBmb3JtYXQ7XG4gIH1cbiAgY29uc3Qgc3RyZWFtID0gYXdhaXQgaGFzcy5jYWxsV1M8U3RyZWFtPihkYXRhKTtcbiAgc3RyZWFtLnVybCA9IGhhc3MuaGFzc1VybChzdHJlYW0udXJsKTtcbiAgcmV0dXJuIHN0cmVhbTtcbn07XG5cbmV4cG9ydCBjb25zdCBoYW5kbGVXZWJSdGNPZmZlciA9IChcbiAgaGFzczogSG9tZUFzc2lzdGFudCxcbiAgZW50aXR5SWQ6IHN0cmluZyxcbiAgb2ZmZXI6IHN0cmluZ1xuKSA9PlxuICBoYXNzLmNhbGxXUzxXZWJSdGNBbnN3ZXI+KHtcbiAgICB0eXBlOiBcImNhbWVyYS93ZWJfcnRjX29mZmVyXCIsXG4gICAgZW50aXR5X2lkOiBlbnRpdHlJZCxcbiAgICBvZmZlcjogb2ZmZXIsXG4gIH0pO1xuXG5leHBvcnQgY29uc3QgZmV0Y2hDYW1lcmFQcmVmcyA9IChoYXNzOiBIb21lQXNzaXN0YW50LCBlbnRpdHlJZDogc3RyaW5nKSA9PlxuICBoYXNzLmNhbGxXUzxDYW1lcmFQcmVmZXJlbmNlcz4oe1xuICAgIHR5cGU6IFwiY2FtZXJhL2dldF9wcmVmc1wiLFxuICAgIGVudGl0eV9pZDogZW50aXR5SWQsXG4gIH0pO1xuXG5leHBvcnQgY29uc3QgdXBkYXRlQ2FtZXJhUHJlZnMgPSAoXG4gIGhhc3M6IEhvbWVBc3Npc3RhbnQsXG4gIGVudGl0eUlkOiBzdHJpbmcsXG4gIHByZWZzOiB7XG4gICAgcHJlbG9hZF9zdHJlYW0/OiBib29sZWFuO1xuICB9XG4pID0+XG4gIGhhc3MuY2FsbFdTPENhbWVyYVByZWZlcmVuY2VzPih7XG4gICAgdHlwZTogXCJjYW1lcmEvdXBkYXRlX3ByZWZzXCIsXG4gICAgZW50aXR5X2lkOiBlbnRpdHlJZCxcbiAgICAuLi5wcmVmcyxcbiAgfSk7XG5cbmNvbnN0IENBTUVSQV9NRURJQV9TT1VSQ0VfUFJFRklYID0gXCJtZWRpYS1zb3VyY2U6Ly9jYW1lcmEvXCI7XG5cbmV4cG9ydCBjb25zdCBpc0NhbWVyYU1lZGlhU291cmNlID0gKG1lZGlhQ29udGVudElkOiBzdHJpbmcpID0+XG4gIG1lZGlhQ29udGVudElkLnN0YXJ0c1dpdGgoQ0FNRVJBX01FRElBX1NPVVJDRV9QUkVGSVgpO1xuXG5leHBvcnQgY29uc3QgZ2V0RW50aXR5SWRGcm9tQ2FtZXJhTWVkaWFTb3VyY2UgPSAobWVkaWFDb250ZW50SWQ6IHN0cmluZykgPT5cbiAgbWVkaWFDb250ZW50SWQuc3Vic3RyaW5nKENBTUVSQV9NRURJQV9TT1VSQ0VfUFJFRklYLmxlbmd0aCk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/data/camera.ts\n");

/***/ })

}]);