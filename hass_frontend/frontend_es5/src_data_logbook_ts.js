"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkhome_assistant_frontend"] = self["webpackChunkhome_assistant_frontend"] || []).push([["src_data_logbook_ts"],{

/***/ "./src/data/logbook.ts":
/*!*****************************!*\
  !*** ./src/data/logbook.ts ***!
  \*****************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CONTINUOUS_DOMAINS: function() { return /* binding */ CONTINUOUS_DOMAINS; },\n/* harmony export */   clearLogbookCache: function() { return /* binding */ clearLogbookCache; },\n/* harmony export */   createHistoricState: function() { return /* binding */ createHistoricState; },\n/* harmony export */   filterLogbookCompatibleEntities: function() { return /* binding */ filterLogbookCompatibleEntities; },\n/* harmony export */   getLogbookData: function() { return /* binding */ getLogbookData; },\n/* harmony export */   getLogbookDataForContext: function() { return /* binding */ getLogbookDataForContext; },\n/* harmony export */   localizeStateMessage: function() { return /* binding */ localizeStateMessage; },\n/* harmony export */   localizeTriggerSource: function() { return /* binding */ localizeTriggerSource; },\n/* harmony export */   subscribeLogbook: function() { return /* binding */ subscribeLogbook; }\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_regeneratorRuntime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/regeneratorRuntime */ \"./node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ \"./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\");\n/* harmony import */ var _common_const__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common/const */ \"./src/common/const.ts\");\n/* harmony import */ var _common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../common/entity/compute_domain */ \"./src/common/entity/compute_domain.ts\");\n/* harmony import */ var _common_entity_compute_state_display__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../common/entity/compute_state_display */ \"./src/common/entity/compute_state_display.ts\");\n/* harmony import */ var _common_entity_compute_state_domain__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../common/entity/compute_state_domain */ \"./src/common/entity/compute_state_domain.ts\");\n/* harmony import */ var _entity__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./entity */ \"./src/data/entity.ts\");\n\n\n\n\n\n\n\nvar LOGBOOK_LOCALIZE_PATH = \"ui.components.logbook.messages\";\nvar CONTINUOUS_DOMAINS = [\"counter\", \"proximity\", \"sensor\", \"zone\"];\n//\n// Localization mapping for all the triggers in core\n// in homeassistant.components.homeassistant.triggers\n//\nvar triggerPhrases = {\n  \"numeric state of\": \"triggered_by_numeric_state_of\",\n  // number state trigger\n  \"state of\": \"triggered_by_state_of\",\n  // state trigger\n  event: \"triggered_by_event\",\n  // event trigger\n  time: \"triggered_by_time\",\n  // time trigger\n  \"time pattern\": \"triggered_by_time_pattern\",\n  // time trigger\n  \"ioBroker stopping\": \"triggered_by_homeassistant_stopping\",\n  // stop event\n  \"ioBroker starting\": \"triggered_by_homeassistant_starting\" // start event\n};\n\nvar DATA_CACHE = {};\nvar getLogbookDataForContext = /*#__PURE__*/function () {\n  var _ref = (0,_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__[\"default\"])( /*#__PURE__*/(0,_babel_runtime_helpers_regeneratorRuntime__WEBPACK_IMPORTED_MODULE_0__[\"default\"])().mark(function _callee(hass, startDate, contextId) {\n    return (0,_babel_runtime_helpers_regeneratorRuntime__WEBPACK_IMPORTED_MODULE_0__[\"default\"])().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return hass.loadBackendTranslation(\"device_class\");\n        case 2:\n          return _context.abrupt(\"return\", getLogbookDataFromServer(hass, startDate, undefined, undefined, contextId));\n        case 3:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function getLogbookDataForContext(_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar getLogbookData = /*#__PURE__*/function () {\n  var _ref2 = (0,_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__[\"default\"])( /*#__PURE__*/(0,_babel_runtime_helpers_regeneratorRuntime__WEBPACK_IMPORTED_MODULE_0__[\"default\"])().mark(function _callee2(hass, startDate, endDate, entityIds, deviceIds) {\n    return (0,_babel_runtime_helpers_regeneratorRuntime__WEBPACK_IMPORTED_MODULE_0__[\"default\"])().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.next = 2;\n          return hass.loadBackendTranslation(\"device_class\");\n        case 2:\n          return _context2.abrupt(\"return\", deviceIds !== null && deviceIds !== void 0 && deviceIds.length ? getLogbookDataFromServer(hass, startDate, endDate, entityIds, undefined, deviceIds) : getLogbookDataCache(hass, startDate, endDate, entityIds));\n        case 3:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2);\n  }));\n  return function getLogbookData(_x4, _x5, _x6, _x7, _x8) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nvar getLogbookDataCache = /*#__PURE__*/function () {\n  var _ref3 = (0,_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__[\"default\"])( /*#__PURE__*/(0,_babel_runtime_helpers_regeneratorRuntime__WEBPACK_IMPORTED_MODULE_0__[\"default\"])().mark(function _callee3(hass, startDate, endDate, entityId) {\n    var ALL_ENTITIES, entityIdKey, cacheKey, entities;\n    return (0,_babel_runtime_helpers_regeneratorRuntime__WEBPACK_IMPORTED_MODULE_0__[\"default\"])().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          ALL_ENTITIES = \"*\";\n          entityIdKey = entityId ? entityId.toString() : ALL_ENTITIES;\n          cacheKey = \"\".concat(startDate).concat(endDate);\n          if (!DATA_CACHE[cacheKey]) {\n            DATA_CACHE[cacheKey] = {};\n          }\n          if (!(entityIdKey in DATA_CACHE[cacheKey])) {\n            _context3.next = 6;\n            break;\n          }\n          return _context3.abrupt(\"return\", DATA_CACHE[cacheKey][entityIdKey]);\n        case 6:\n          if (!(entityId && DATA_CACHE[cacheKey][ALL_ENTITIES])) {\n            _context3.next = 11;\n            break;\n          }\n          _context3.next = 9;\n          return DATA_CACHE[cacheKey][ALL_ENTITIES];\n        case 9:\n          entities = _context3.sent;\n          return _context3.abrupt(\"return\", entities.filter(function (entity) {\n            return entity.entity_id && entityId.includes(entity.entity_id);\n          }));\n        case 11:\n          DATA_CACHE[cacheKey][entityIdKey] = getLogbookDataFromServer(hass, startDate, endDate, entityId);\n          return _context3.abrupt(\"return\", DATA_CACHE[cacheKey][entityIdKey]);\n        case 13:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3);\n  }));\n  return function getLogbookDataCache(_x9, _x10, _x11, _x12) {\n    return _ref3.apply(this, arguments);\n  };\n}();\nvar getLogbookDataFromServer = function getLogbookDataFromServer(hass, startDate, endDate, entityIds, contextId, deviceIds) {\n  // If all specified filters are empty lists, we can return an empty list.\n  if ((entityIds || deviceIds) && (!entityIds || entityIds.length === 0) && (!deviceIds || deviceIds.length === 0)) {\n    return Promise.resolve([]);\n  }\n  var params = {\n    type: \"logbook/get_events\",\n    start_time: startDate\n  };\n  if (endDate) {\n    params.end_time = endDate;\n  }\n  if (entityIds !== null && entityIds !== void 0 && entityIds.length) {\n    params.entity_ids = entityIds;\n  }\n  if (deviceIds !== null && deviceIds !== void 0 && deviceIds.length) {\n    params.device_ids = deviceIds;\n  }\n  if (contextId) {\n    params.context_id = contextId;\n  }\n  return hass.callWS(params);\n};\nvar subscribeLogbook = function subscribeLogbook(hass, callbackFunction, startDate, endDate, entityIds, deviceIds) {\n  // If all specified filters are empty lists, we can return an empty list.\n  if ((entityIds || deviceIds) && (!entityIds || entityIds.length === 0) && (!deviceIds || deviceIds.length === 0)) {\n    return Promise.reject(\"No entities or devices\");\n  }\n  var params = {\n    type: \"logbook/event_stream\",\n    start_time: startDate,\n    end_time: endDate\n  };\n  if (entityIds !== null && entityIds !== void 0 && entityIds.length) {\n    params.entity_ids = entityIds;\n  }\n  if (deviceIds !== null && deviceIds !== void 0 && deviceIds.length) {\n    params.device_ids = deviceIds;\n  }\n  return hass.connection.subscribeMessage(function (message) {\n    return callbackFunction(message);\n  }, params);\n};\nvar clearLogbookCache = function clearLogbookCache(startDate, endDate) {\n  DATA_CACHE[\"\".concat(startDate).concat(endDate)] = {};\n};\nvar createHistoricState = function createHistoricState(currentStateObj, state) {\n  return {\n    entity_id: currentStateObj.entity_id,\n    state: state,\n    attributes: {\n      // Rebuild the historical state by copying static attributes only\n      device_class: currentStateObj === null || currentStateObj === void 0 ? void 0 : currentStateObj.attributes.device_class,\n      source_type: currentStateObj === null || currentStateObj === void 0 ? void 0 : currentStateObj.attributes.source_type,\n      has_date: currentStateObj === null || currentStateObj === void 0 ? void 0 : currentStateObj.attributes.has_date,\n      has_time: currentStateObj === null || currentStateObj === void 0 ? void 0 : currentStateObj.attributes.has_time,\n      // We do not want to use dynamic entity pictures (e.g., from media player) for the log book rendering,\n      // as they would present a false state in the log (played media right now vs actual historic data).\n      entity_picture_local: _common_const__WEBPACK_IMPORTED_MODULE_2__.DOMAINS_WITH_DYNAMIC_PICTURE.has((0,_common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_3__.computeDomain)(currentStateObj.entity_id)) ? undefined : currentStateObj === null || currentStateObj === void 0 ? void 0 : currentStateObj.attributes.entity_picture_local,\n      entity_picture: _common_const__WEBPACK_IMPORTED_MODULE_2__.DOMAINS_WITH_DYNAMIC_PICTURE.has((0,_common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_3__.computeDomain)(currentStateObj.entity_id)) ? undefined : currentStateObj === null || currentStateObj === void 0 ? void 0 : currentStateObj.attributes.entity_picture\n    }\n  };\n};\nvar localizeTriggerSource = function localizeTriggerSource(localize, source) {\n  for (var triggerPhrase in triggerPhrases) {\n    if (source.startsWith(triggerPhrase)) {\n      return source.replace(triggerPhrase, \"\".concat(localize(\"ui.components.logbook.\".concat(triggerPhrases[triggerPhrase]))));\n    }\n  }\n  return source;\n};\nvar localizeStateMessage = function localizeStateMessage(hass, localize, state, stateObj, domain) {\n  switch (domain) {\n    case \"device_tracker\":\n    case \"person\":\n      if (state === \"not_home\") {\n        return localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".was_away\"));\n      }\n      if (state === \"home\") {\n        return localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".was_at_home\"));\n      }\n      return localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".was_at_state\"), \"state\", state);\n    case \"sun\":\n      return state === \"above_horizon\" ? localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".rose\")) : localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".set\"));\n    case \"binary_sensor\":\n      {\n        var isOn = state === _common_const__WEBPACK_IMPORTED_MODULE_2__.BINARY_STATE_ON;\n        var isOff = state === _common_const__WEBPACK_IMPORTED_MODULE_2__.BINARY_STATE_OFF;\n        var device_class = stateObj.attributes.device_class;\n        switch (device_class) {\n          case \"battery\":\n            if (isOn) {\n              return localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".was_low\"));\n            }\n            if (isOff) {\n              return localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".was_normal\"));\n            }\n            break;\n          case \"connectivity\":\n            if (isOn) {\n              return localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".was_connected\"));\n            }\n            if (isOff) {\n              return localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".was_disconnected\"));\n            }\n            break;\n          case \"door\":\n          case \"garage_door\":\n          case \"opening\":\n          case \"window\":\n            if (isOn) {\n              return localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".was_opened\"));\n            }\n            if (isOff) {\n              return localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".was_closed\"));\n            }\n            break;\n          case \"lock\":\n            if (isOn) {\n              return localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".was_unlocked\"));\n            }\n            if (isOff) {\n              return localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".was_locked\"));\n            }\n            break;\n          case \"plug\":\n            if (isOn) {\n              return localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".was_plugged_in\"));\n            }\n            if (isOff) {\n              return localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".was_unplugged\"));\n            }\n            break;\n          case \"presence\":\n            if (isOn) {\n              return localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".was_at_home\"));\n            }\n            if (isOff) {\n              return localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".was_away\"));\n            }\n            break;\n          case \"safety\":\n            if (isOn) {\n              return localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".was_unsafe\"));\n            }\n            if (isOff) {\n              return localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".was_safe\"));\n            }\n            break;\n          case \"cold\":\n          case \"gas\":\n          case \"heat\":\n          case \"moisture\":\n          case \"motion\":\n          case \"occupancy\":\n          case \"power\":\n          case \"problem\":\n          case \"smoke\":\n          case \"sound\":\n          case \"vibration\":\n            if (isOn) {\n              return localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".detected_device_class\"), {\n                device_class: localize(\"component.binary_sensor.device_class.\".concat(device_class))\n              });\n            }\n            if (isOff) {\n              return localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".cleared_device_class\"), {\n                device_class: localize(\"component.binary_sensor.device_class.\".concat(device_class))\n              });\n            }\n            break;\n          case \"tamper\":\n            if (isOn) {\n              return localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".detected_tampering\"));\n            }\n            if (isOff) {\n              return localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".cleared_tampering\"));\n            }\n            break;\n        }\n        break;\n      }\n    case \"cover\":\n      switch (state) {\n        case \"open\":\n          return localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".was_opened\"));\n        case \"opening\":\n          return localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".is_opening\"));\n        case \"closing\":\n          return localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".is_closing\"));\n        case \"closed\":\n          return localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".was_closed\"));\n      }\n      break;\n    case \"lock\":\n      switch (state) {\n        case \"unlocked\":\n          return localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".was_unlocked\"));\n        case \"locking\":\n          return localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".is_locking\"));\n        case \"unlocking\":\n          return localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".is_unlocking\"));\n        case \"locked\":\n          return localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".was_locked\"));\n        case \"jammed\":\n          return localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".is_jammed\"));\n      }\n      break;\n  }\n  if (state === _common_const__WEBPACK_IMPORTED_MODULE_2__.BINARY_STATE_ON) {\n    return localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".turned_on\"));\n  }\n  if (state === _common_const__WEBPACK_IMPORTED_MODULE_2__.BINARY_STATE_OFF) {\n    return localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".turned_off\"));\n  }\n  if (state === _entity__WEBPACK_IMPORTED_MODULE_6__.UNKNOWN) {\n    return localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".became_unknown\"));\n  }\n  if (state === _entity__WEBPACK_IMPORTED_MODULE_6__.UNAVAILABLE) {\n    return localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".became_unavailable\"));\n  }\n  return hass.localize(\"\".concat(LOGBOOK_LOCALIZE_PATH, \".changed_to_state\"), \"state\", stateObj ? (0,_common_entity_compute_state_display__WEBPACK_IMPORTED_MODULE_4__.computeStateDisplay)(localize, stateObj, hass.locale, hass.entities, state) : state);\n};\nvar filterLogbookCompatibleEntities = function filterLogbookCompatibleEntities(entity) {\n  return (0,_common_entity_compute_state_domain__WEBPACK_IMPORTED_MODULE_5__.computeStateDomain)(entity) !== \"sensor\" || entity.attributes.unit_of_measurement === undefined && entity.attributes.state_class === undefined;\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZGF0YS9sb2dib29rLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUNBO0FBS0E7QUFDQTtBQUNBO0FBSUE7QUFFQTtBQUNBO0FBaUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBOztBQUVBO0FBTUE7QUFBQTtBQUdBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBT0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFiQTtBQUFBO0FBQUE7QUFlQTtBQUFBO0FBS0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFVQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQWxCQTtBQUFBO0FBQUE7QUFvQkE7QUFBQTtBQUlBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFHQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUNBO0FBR0E7QUFLQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBakNBO0FBQUE7QUFBQTtBQW1DQTtBQVFBO0FBQ0E7QUFLQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFRQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFLQTtBQUNBO0FBQUE7QUFFQTtBQUlBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFJQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFhQTtBQUVBO0FBQ0E7QUFJQSIsInNvdXJjZXMiOlsid2VicGFjazovL2hvbWUtYXNzaXN0YW50LWZyb250ZW5kLy4vc3JjL2RhdGEvbG9nYm9vay50cz82MjhhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEhhc3NFbnRpdHkgfSBmcm9tIFwiaG9tZS1hc3Npc3RhbnQtanMtd2Vic29ja2V0XCI7XG5pbXBvcnQge1xuICBCSU5BUllfU1RBVEVfT0ZGLFxuICBCSU5BUllfU1RBVEVfT04sXG4gIERPTUFJTlNfV0lUSF9EWU5BTUlDX1BJQ1RVUkUsXG59IGZyb20gXCIuLi9jb21tb24vY29uc3RcIjtcbmltcG9ydCB7IGNvbXB1dGVEb21haW4gfSBmcm9tIFwiLi4vY29tbW9uL2VudGl0eS9jb21wdXRlX2RvbWFpblwiO1xuaW1wb3J0IHsgY29tcHV0ZVN0YXRlRGlzcGxheSB9IGZyb20gXCIuLi9jb21tb24vZW50aXR5L2NvbXB1dGVfc3RhdGVfZGlzcGxheVwiO1xuaW1wb3J0IHsgY29tcHV0ZVN0YXRlRG9tYWluIH0gZnJvbSBcIi4uL2NvbW1vbi9lbnRpdHkvY29tcHV0ZV9zdGF0ZV9kb21haW5cIjtcbmltcG9ydCB7IExvY2FsaXplRnVuYyB9IGZyb20gXCIuLi9jb21tb24vdHJhbnNsYXRpb25zL2xvY2FsaXplXCI7XG5pbXBvcnQgeyBIYUVudGl0eVBpY2tlckVudGl0eUZpbHRlckZ1bmMgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9lbnRpdHkvaGEtZW50aXR5LXBpY2tlclwiO1xuaW1wb3J0IHsgSG9tZUFzc2lzdGFudCB9IGZyb20gXCIuLi90eXBlc1wiO1xuaW1wb3J0IHsgVU5BVkFJTEFCTEUsIFVOS05PV04gfSBmcm9tIFwiLi9lbnRpdHlcIjtcblxuY29uc3QgTE9HQk9PS19MT0NBTElaRV9QQVRIID0gXCJ1aS5jb21wb25lbnRzLmxvZ2Jvb2subWVzc2FnZXNcIjtcbmV4cG9ydCBjb25zdCBDT05USU5VT1VTX0RPTUFJTlMgPSBbXCJjb3VudGVyXCIsIFwicHJveGltaXR5XCIsIFwic2Vuc29yXCIsIFwiem9uZVwiXTtcblxuZXhwb3J0IGludGVyZmFjZSBMb2dib29rU3RyZWFtTWVzc2FnZSB7XG4gIGV2ZW50czogTG9nYm9va0VudHJ5W107XG4gIHN0YXJ0X3RpbWU/OiBudW1iZXI7IC8vIFN0YXJ0IHRpbWUgb2YgdGhpcyBoaXN0b3JpY2FsIGNodW5rXG4gIGVuZF90aW1lPzogbnVtYmVyOyAvLyBFbmQgdGltZSBvZiB0aGlzIGhpc3RvcmljYWwgY2h1bmtcbiAgcGFydGlhbD86IGJvb2xlYW47IC8vIEluZGljaWF0ZXMgbW9yZSBoaXN0b3JpY2FsIGNodW5rcyBhcmUgY29taW5nXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTG9nYm9va0VudHJ5IHtcbiAgLy8gQmFzZSBkYXRhXG4gIHdoZW46IG51bWJlcjsgLy8gUHl0aG9uIHRpbWVzdGFtcC4gRG8gKjEwMDAgdG8gZ2V0IEpTIHRpbWVzdGFtcC5cbiAgbmFtZTogc3RyaW5nO1xuICBtZXNzYWdlPzogc3RyaW5nO1xuICBlbnRpdHlfaWQ/OiBzdHJpbmc7XG4gIGljb24/OiBzdHJpbmc7XG4gIHNvdXJjZT86IHN0cmluZzsgLy8gVGhlIHRyaWdnZXIgc291cmNlXG4gIGRvbWFpbj86IHN0cmluZztcbiAgc3RhdGU/OiBzdHJpbmc7IC8vIFRoZSBzdGF0ZSBvZiB0aGUgZW50aXR5XG4gIC8vIENvbnRleHQgZGF0YVxuICBjb250ZXh0X2lkPzogc3RyaW5nO1xuICBjb250ZXh0X3VzZXJfaWQ/OiBzdHJpbmc7XG4gIGNvbnRleHRfZXZlbnRfdHlwZT86IHN0cmluZztcbiAgY29udGV4dF9kb21haW4/OiBzdHJpbmc7XG4gIGNvbnRleHRfc2VydmljZT86IHN0cmluZzsgLy8gU2VydmljZSBjYWxscyBvbmx5XG4gIGNvbnRleHRfZW50aXR5X2lkPzogc3RyaW5nO1xuICBjb250ZXh0X2VudGl0eV9pZF9uYW1lPzogc3RyaW5nOyAvLyBMZWdhY3ksIG5vdCBsb25nZXIgc2VudFxuICBjb250ZXh0X25hbWU/OiBzdHJpbmc7XG4gIGNvbnRleHRfc3RhdGU/OiBzdHJpbmc7IC8vIFRoZSBzdGF0ZSBvZiB0aGUgZW50aXR5XG4gIGNvbnRleHRfc291cmNlPzogc3RyaW5nOyAvLyBUaGUgdHJpZ2dlciBzb3VyY2VcbiAgY29udGV4dF9tZXNzYWdlPzogc3RyaW5nO1xufVxuXG4vL1xuLy8gTG9jYWxpemF0aW9uIG1hcHBpbmcgZm9yIGFsbCB0aGUgdHJpZ2dlcnMgaW4gY29yZVxuLy8gaW4gaG9tZWFzc2lzdGFudC5jb21wb25lbnRzLmhvbWVhc3Npc3RhbnQudHJpZ2dlcnNcbi8vXG5jb25zdCB0cmlnZ2VyUGhyYXNlcyA9IHtcbiAgXCJudW1lcmljIHN0YXRlIG9mXCI6IFwidHJpZ2dlcmVkX2J5X251bWVyaWNfc3RhdGVfb2ZcIiwgLy8gbnVtYmVyIHN0YXRlIHRyaWdnZXJcbiAgXCJzdGF0ZSBvZlwiOiBcInRyaWdnZXJlZF9ieV9zdGF0ZV9vZlwiLCAvLyBzdGF0ZSB0cmlnZ2VyXG4gIGV2ZW50OiBcInRyaWdnZXJlZF9ieV9ldmVudFwiLCAvLyBldmVudCB0cmlnZ2VyXG4gIHRpbWU6IFwidHJpZ2dlcmVkX2J5X3RpbWVcIiwgLy8gdGltZSB0cmlnZ2VyXG4gIFwidGltZSBwYXR0ZXJuXCI6IFwidHJpZ2dlcmVkX2J5X3RpbWVfcGF0dGVyblwiLCAvLyB0aW1lIHRyaWdnZXJcbiAgXCJIb21lIEFzc2lzdGFudCBzdG9wcGluZ1wiOiBcInRyaWdnZXJlZF9ieV9ob21lYXNzaXN0YW50X3N0b3BwaW5nXCIsIC8vIHN0b3AgZXZlbnRcbiAgXCJIb21lIEFzc2lzdGFudCBzdGFydGluZ1wiOiBcInRyaWdnZXJlZF9ieV9ob21lYXNzaXN0YW50X3N0YXJ0aW5nXCIsIC8vIHN0YXJ0IGV2ZW50XG59O1xuXG5jb25zdCBEQVRBX0NBQ0hFOiB7XG4gIFtjYWNoZUtleTogc3RyaW5nXToge1xuICAgIFtlbnRpdHlJZDogc3RyaW5nXTogUHJvbWlzZTxMb2dib29rRW50cnlbXT4gfCB1bmRlZmluZWQ7XG4gIH07XG59ID0ge307XG5cbmV4cG9ydCBjb25zdCBnZXRMb2dib29rRGF0YUZvckNvbnRleHQgPSBhc3luYyAoXG4gIGhhc3M6IEhvbWVBc3Npc3RhbnQsXG4gIHN0YXJ0RGF0ZTogc3RyaW5nLFxuICBjb250ZXh0SWQ/OiBzdHJpbmdcbik6IFByb21pc2U8TG9nYm9va0VudHJ5W10+ID0+IHtcbiAgYXdhaXQgaGFzcy5sb2FkQmFja2VuZFRyYW5zbGF0aW9uKFwiZGV2aWNlX2NsYXNzXCIpO1xuICByZXR1cm4gZ2V0TG9nYm9va0RhdGFGcm9tU2VydmVyKFxuICAgIGhhc3MsXG4gICAgc3RhcnREYXRlLFxuICAgIHVuZGVmaW5lZCxcbiAgICB1bmRlZmluZWQsXG4gICAgY29udGV4dElkXG4gICk7XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0TG9nYm9va0RhdGEgPSBhc3luYyAoXG4gIGhhc3M6IEhvbWVBc3Npc3RhbnQsXG4gIHN0YXJ0RGF0ZTogc3RyaW5nLFxuICBlbmREYXRlOiBzdHJpbmcsXG4gIGVudGl0eUlkcz86IHN0cmluZ1tdLFxuICBkZXZpY2VJZHM/OiBzdHJpbmdbXVxuKTogUHJvbWlzZTxMb2dib29rRW50cnlbXT4gPT4ge1xuICBhd2FpdCBoYXNzLmxvYWRCYWNrZW5kVHJhbnNsYXRpb24oXCJkZXZpY2VfY2xhc3NcIik7XG4gIHJldHVybiBkZXZpY2VJZHM/Lmxlbmd0aFxuICAgID8gZ2V0TG9nYm9va0RhdGFGcm9tU2VydmVyKFxuICAgICAgICBoYXNzLFxuICAgICAgICBzdGFydERhdGUsXG4gICAgICAgIGVuZERhdGUsXG4gICAgICAgIGVudGl0eUlkcyxcbiAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICBkZXZpY2VJZHNcbiAgICAgIClcbiAgICA6IGdldExvZ2Jvb2tEYXRhQ2FjaGUoaGFzcywgc3RhcnREYXRlLCBlbmREYXRlLCBlbnRpdHlJZHMpO1xufTtcblxuY29uc3QgZ2V0TG9nYm9va0RhdGFDYWNoZSA9IGFzeW5jIChcbiAgaGFzczogSG9tZUFzc2lzdGFudCxcbiAgc3RhcnREYXRlOiBzdHJpbmcsXG4gIGVuZERhdGU6IHN0cmluZyxcbiAgZW50aXR5SWQ/OiBzdHJpbmdbXVxuKSA9PiB7XG4gIGNvbnN0IEFMTF9FTlRJVElFUyA9IFwiKlwiO1xuXG4gIGNvbnN0IGVudGl0eUlkS2V5ID0gZW50aXR5SWQgPyBlbnRpdHlJZC50b1N0cmluZygpIDogQUxMX0VOVElUSUVTO1xuICBjb25zdCBjYWNoZUtleSA9IGAke3N0YXJ0RGF0ZX0ke2VuZERhdGV9YDtcblxuICBpZiAoIURBVEFfQ0FDSEVbY2FjaGVLZXldKSB7XG4gICAgREFUQV9DQUNIRVtjYWNoZUtleV0gPSB7fTtcbiAgfVxuXG4gIGlmIChlbnRpdHlJZEtleSBpbiBEQVRBX0NBQ0hFW2NhY2hlS2V5XSkge1xuICAgIHJldHVybiBEQVRBX0NBQ0hFW2NhY2hlS2V5XVtlbnRpdHlJZEtleV0hO1xuICB9XG5cbiAgaWYgKGVudGl0eUlkICYmIERBVEFfQ0FDSEVbY2FjaGVLZXldW0FMTF9FTlRJVElFU10pIHtcbiAgICBjb25zdCBlbnRpdGllcyA9IGF3YWl0IERBVEFfQ0FDSEVbY2FjaGVLZXldW0FMTF9FTlRJVElFU10hO1xuICAgIHJldHVybiBlbnRpdGllcy5maWx0ZXIoXG4gICAgICAoZW50aXR5KSA9PiBlbnRpdHkuZW50aXR5X2lkICYmIGVudGl0eUlkLmluY2x1ZGVzKGVudGl0eS5lbnRpdHlfaWQpXG4gICAgKTtcbiAgfVxuXG4gIERBVEFfQ0FDSEVbY2FjaGVLZXldW2VudGl0eUlkS2V5XSA9IGdldExvZ2Jvb2tEYXRhRnJvbVNlcnZlcihcbiAgICBoYXNzLFxuICAgIHN0YXJ0RGF0ZSxcbiAgICBlbmREYXRlLFxuICAgIGVudGl0eUlkXG4gICk7XG4gIHJldHVybiBEQVRBX0NBQ0hFW2NhY2hlS2V5XVtlbnRpdHlJZEtleV0hO1xufTtcblxuY29uc3QgZ2V0TG9nYm9va0RhdGFGcm9tU2VydmVyID0gKFxuICBoYXNzOiBIb21lQXNzaXN0YW50LFxuICBzdGFydERhdGU6IHN0cmluZyxcbiAgZW5kRGF0ZT86IHN0cmluZyxcbiAgZW50aXR5SWRzPzogc3RyaW5nW10sXG4gIGNvbnRleHRJZD86IHN0cmluZyxcbiAgZGV2aWNlSWRzPzogc3RyaW5nW11cbik6IFByb21pc2U8TG9nYm9va0VudHJ5W10+ID0+IHtcbiAgLy8gSWYgYWxsIHNwZWNpZmllZCBmaWx0ZXJzIGFyZSBlbXB0eSBsaXN0cywgd2UgY2FuIHJldHVybiBhbiBlbXB0eSBsaXN0LlxuICBpZiAoXG4gICAgKGVudGl0eUlkcyB8fCBkZXZpY2VJZHMpICYmXG4gICAgKCFlbnRpdHlJZHMgfHwgZW50aXR5SWRzLmxlbmd0aCA9PT0gMCkgJiZcbiAgICAoIWRldmljZUlkcyB8fCBkZXZpY2VJZHMubGVuZ3RoID09PSAwKVxuICApIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKFtdKTtcbiAgfVxuXG4gIGNvbnN0IHBhcmFtczogYW55ID0ge1xuICAgIHR5cGU6IFwibG9nYm9vay9nZXRfZXZlbnRzXCIsXG4gICAgc3RhcnRfdGltZTogc3RhcnREYXRlLFxuICB9O1xuICBpZiAoZW5kRGF0ZSkge1xuICAgIHBhcmFtcy5lbmRfdGltZSA9IGVuZERhdGU7XG4gIH1cbiAgaWYgKGVudGl0eUlkcz8ubGVuZ3RoKSB7XG4gICAgcGFyYW1zLmVudGl0eV9pZHMgPSBlbnRpdHlJZHM7XG4gIH1cbiAgaWYgKGRldmljZUlkcz8ubGVuZ3RoKSB7XG4gICAgcGFyYW1zLmRldmljZV9pZHMgPSBkZXZpY2VJZHM7XG4gIH1cbiAgaWYgKGNvbnRleHRJZCkge1xuICAgIHBhcmFtcy5jb250ZXh0X2lkID0gY29udGV4dElkO1xuICB9XG4gIHJldHVybiBoYXNzLmNhbGxXUzxMb2dib29rRW50cnlbXT4ocGFyYW1zKTtcbn07XG5cbmV4cG9ydCBjb25zdCBzdWJzY3JpYmVMb2dib29rID0gKFxuICBoYXNzOiBIb21lQXNzaXN0YW50LFxuICBjYWxsYmFja0Z1bmN0aW9uOiAobWVzc2FnZTogTG9nYm9va1N0cmVhbU1lc3NhZ2UpID0+IHZvaWQsXG4gIHN0YXJ0RGF0ZTogc3RyaW5nLFxuICBlbmREYXRlOiBzdHJpbmcsXG4gIGVudGl0eUlkcz86IHN0cmluZ1tdLFxuICBkZXZpY2VJZHM/OiBzdHJpbmdbXVxuKTogUHJvbWlzZTwoKSA9PiBQcm9taXNlPHZvaWQ+PiA9PiB7XG4gIC8vIElmIGFsbCBzcGVjaWZpZWQgZmlsdGVycyBhcmUgZW1wdHkgbGlzdHMsIHdlIGNhbiByZXR1cm4gYW4gZW1wdHkgbGlzdC5cbiAgaWYgKFxuICAgIChlbnRpdHlJZHMgfHwgZGV2aWNlSWRzKSAmJlxuICAgICghZW50aXR5SWRzIHx8IGVudGl0eUlkcy5sZW5ndGggPT09IDApICYmXG4gICAgKCFkZXZpY2VJZHMgfHwgZGV2aWNlSWRzLmxlbmd0aCA9PT0gMClcbiAgKSB7XG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KFwiTm8gZW50aXRpZXMgb3IgZGV2aWNlc1wiKTtcbiAgfVxuICBjb25zdCBwYXJhbXM6IGFueSA9IHtcbiAgICB0eXBlOiBcImxvZ2Jvb2svZXZlbnRfc3RyZWFtXCIsXG4gICAgc3RhcnRfdGltZTogc3RhcnREYXRlLFxuICAgIGVuZF90aW1lOiBlbmREYXRlLFxuICB9O1xuICBpZiAoZW50aXR5SWRzPy5sZW5ndGgpIHtcbiAgICBwYXJhbXMuZW50aXR5X2lkcyA9IGVudGl0eUlkcztcbiAgfVxuICBpZiAoZGV2aWNlSWRzPy5sZW5ndGgpIHtcbiAgICBwYXJhbXMuZGV2aWNlX2lkcyA9IGRldmljZUlkcztcbiAgfVxuICByZXR1cm4gaGFzcy5jb25uZWN0aW9uLnN1YnNjcmliZU1lc3NhZ2U8TG9nYm9va1N0cmVhbU1lc3NhZ2U+KFxuICAgIChtZXNzYWdlKSA9PiBjYWxsYmFja0Z1bmN0aW9uKG1lc3NhZ2UpLFxuICAgIHBhcmFtc1xuICApO1xufTtcblxuZXhwb3J0IGNvbnN0IGNsZWFyTG9nYm9va0NhY2hlID0gKHN0YXJ0RGF0ZTogc3RyaW5nLCBlbmREYXRlOiBzdHJpbmcpID0+IHtcbiAgREFUQV9DQUNIRVtgJHtzdGFydERhdGV9JHtlbmREYXRlfWBdID0ge307XG59O1xuXG5leHBvcnQgY29uc3QgY3JlYXRlSGlzdG9yaWNTdGF0ZSA9IChcbiAgY3VycmVudFN0YXRlT2JqOiBIYXNzRW50aXR5LFxuICBzdGF0ZT86IHN0cmluZ1xuKTogSGFzc0VudGl0eSA9PiA8SGFzc0VudGl0eT4oPHVua25vd24+e1xuICAgIGVudGl0eV9pZDogY3VycmVudFN0YXRlT2JqLmVudGl0eV9pZCxcbiAgICBzdGF0ZTogc3RhdGUsXG4gICAgYXR0cmlidXRlczoge1xuICAgICAgLy8gUmVidWlsZCB0aGUgaGlzdG9yaWNhbCBzdGF0ZSBieSBjb3B5aW5nIHN0YXRpYyBhdHRyaWJ1dGVzIG9ubHlcbiAgICAgIGRldmljZV9jbGFzczogY3VycmVudFN0YXRlT2JqPy5hdHRyaWJ1dGVzLmRldmljZV9jbGFzcyxcbiAgICAgIHNvdXJjZV90eXBlOiBjdXJyZW50U3RhdGVPYmo/LmF0dHJpYnV0ZXMuc291cmNlX3R5cGUsXG4gICAgICBoYXNfZGF0ZTogY3VycmVudFN0YXRlT2JqPy5hdHRyaWJ1dGVzLmhhc19kYXRlLFxuICAgICAgaGFzX3RpbWU6IGN1cnJlbnRTdGF0ZU9iaj8uYXR0cmlidXRlcy5oYXNfdGltZSxcbiAgICAgIC8vIFdlIGRvIG5vdCB3YW50IHRvIHVzZSBkeW5hbWljIGVudGl0eSBwaWN0dXJlcyAoZS5nLiwgZnJvbSBtZWRpYSBwbGF5ZXIpIGZvciB0aGUgbG9nIGJvb2sgcmVuZGVyaW5nLFxuICAgICAgLy8gYXMgdGhleSB3b3VsZCBwcmVzZW50IGEgZmFsc2Ugc3RhdGUgaW4gdGhlIGxvZyAocGxheWVkIG1lZGlhIHJpZ2h0IG5vdyB2cyBhY3R1YWwgaGlzdG9yaWMgZGF0YSkuXG4gICAgICBlbnRpdHlfcGljdHVyZV9sb2NhbDogRE9NQUlOU19XSVRIX0RZTkFNSUNfUElDVFVSRS5oYXMoXG4gICAgICAgIGNvbXB1dGVEb21haW4oY3VycmVudFN0YXRlT2JqLmVudGl0eV9pZClcbiAgICAgIClcbiAgICAgICAgPyB1bmRlZmluZWRcbiAgICAgICAgOiBjdXJyZW50U3RhdGVPYmo/LmF0dHJpYnV0ZXMuZW50aXR5X3BpY3R1cmVfbG9jYWwsXG4gICAgICBlbnRpdHlfcGljdHVyZTogRE9NQUlOU19XSVRIX0RZTkFNSUNfUElDVFVSRS5oYXMoXG4gICAgICAgIGNvbXB1dGVEb21haW4oY3VycmVudFN0YXRlT2JqLmVudGl0eV9pZClcbiAgICAgIClcbiAgICAgICAgPyB1bmRlZmluZWRcbiAgICAgICAgOiBjdXJyZW50U3RhdGVPYmo/LmF0dHJpYnV0ZXMuZW50aXR5X3BpY3R1cmUsXG4gICAgfSxcbiAgfSk7XG5cbmV4cG9ydCBjb25zdCBsb2NhbGl6ZVRyaWdnZXJTb3VyY2UgPSAoXG4gIGxvY2FsaXplOiBMb2NhbGl6ZUZ1bmMsXG4gIHNvdXJjZTogc3RyaW5nXG4pID0+IHtcbiAgZm9yIChjb25zdCB0cmlnZ2VyUGhyYXNlIGluIHRyaWdnZXJQaHJhc2VzKSB7XG4gICAgaWYgKHNvdXJjZS5zdGFydHNXaXRoKHRyaWdnZXJQaHJhc2UpKSB7XG4gICAgICByZXR1cm4gc291cmNlLnJlcGxhY2UoXG4gICAgICAgIHRyaWdnZXJQaHJhc2UsXG4gICAgICAgIGAke2xvY2FsaXplKGB1aS5jb21wb25lbnRzLmxvZ2Jvb2suJHt0cmlnZ2VyUGhyYXNlc1t0cmlnZ2VyUGhyYXNlXX1gKX1gXG4gICAgICApO1xuICAgIH1cbiAgfVxuICByZXR1cm4gc291cmNlO1xufTtcblxuZXhwb3J0IGNvbnN0IGxvY2FsaXplU3RhdGVNZXNzYWdlID0gKFxuICBoYXNzOiBIb21lQXNzaXN0YW50LFxuICBsb2NhbGl6ZTogTG9jYWxpemVGdW5jLFxuICBzdGF0ZTogc3RyaW5nLFxuICBzdGF0ZU9iajogSGFzc0VudGl0eSxcbiAgZG9tYWluOiBzdHJpbmdcbik6IHN0cmluZyA9PiB7XG4gIHN3aXRjaCAoZG9tYWluKSB7XG4gICAgY2FzZSBcImRldmljZV90cmFja2VyXCI6XG4gICAgY2FzZSBcInBlcnNvblwiOlxuICAgICAgaWYgKHN0YXRlID09PSBcIm5vdF9ob21lXCIpIHtcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplKGAke0xPR0JPT0tfTE9DQUxJWkVfUEFUSH0ud2FzX2F3YXlgKTtcbiAgICAgIH1cbiAgICAgIGlmIChzdGF0ZSA9PT0gXCJob21lXCIpIHtcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplKGAke0xPR0JPT0tfTE9DQUxJWkVfUEFUSH0ud2FzX2F0X2hvbWVgKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBsb2NhbGl6ZShgJHtMT0dCT09LX0xPQ0FMSVpFX1BBVEh9Lndhc19hdF9zdGF0ZWAsIFwic3RhdGVcIiwgc3RhdGUpO1xuXG4gICAgY2FzZSBcInN1blwiOlxuICAgICAgcmV0dXJuIHN0YXRlID09PSBcImFib3ZlX2hvcml6b25cIlxuICAgICAgICA/IGxvY2FsaXplKGAke0xPR0JPT0tfTE9DQUxJWkVfUEFUSH0ucm9zZWApXG4gICAgICAgIDogbG9jYWxpemUoYCR7TE9HQk9PS19MT0NBTElaRV9QQVRIfS5zZXRgKTtcblxuICAgIGNhc2UgXCJiaW5hcnlfc2Vuc29yXCI6IHtcbiAgICAgIGNvbnN0IGlzT24gPSBzdGF0ZSA9PT0gQklOQVJZX1NUQVRFX09OO1xuICAgICAgY29uc3QgaXNPZmYgPSBzdGF0ZSA9PT0gQklOQVJZX1NUQVRFX09GRjtcbiAgICAgIGNvbnN0IGRldmljZV9jbGFzcyA9IHN0YXRlT2JqLmF0dHJpYnV0ZXMuZGV2aWNlX2NsYXNzO1xuXG4gICAgICBzd2l0Y2ggKGRldmljZV9jbGFzcykge1xuICAgICAgICBjYXNlIFwiYmF0dGVyeVwiOlxuICAgICAgICAgIGlmIChpc09uKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxpemUoYCR7TE9HQk9PS19MT0NBTElaRV9QQVRIfS53YXNfbG93YCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChpc09mZikge1xuICAgICAgICAgICAgcmV0dXJuIGxvY2FsaXplKGAke0xPR0JPT0tfTE9DQUxJWkVfUEFUSH0ud2FzX25vcm1hbGApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIFwiY29ubmVjdGl2aXR5XCI6XG4gICAgICAgICAgaWYgKGlzT24pIHtcbiAgICAgICAgICAgIHJldHVybiBsb2NhbGl6ZShgJHtMT0dCT09LX0xPQ0FMSVpFX1BBVEh9Lndhc19jb25uZWN0ZWRgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGlzT2ZmKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxpemUoYCR7TE9HQk9PS19MT0NBTElaRV9QQVRIfS53YXNfZGlzY29ubmVjdGVkYCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgXCJkb29yXCI6XG4gICAgICAgIGNhc2UgXCJnYXJhZ2VfZG9vclwiOlxuICAgICAgICBjYXNlIFwib3BlbmluZ1wiOlxuICAgICAgICBjYXNlIFwid2luZG93XCI6XG4gICAgICAgICAgaWYgKGlzT24pIHtcbiAgICAgICAgICAgIHJldHVybiBsb2NhbGl6ZShgJHtMT0dCT09LX0xPQ0FMSVpFX1BBVEh9Lndhc19vcGVuZWRgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGlzT2ZmKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxpemUoYCR7TE9HQk9PS19MT0NBTElaRV9QQVRIfS53YXNfY2xvc2VkYCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgXCJsb2NrXCI6XG4gICAgICAgICAgaWYgKGlzT24pIHtcbiAgICAgICAgICAgIHJldHVybiBsb2NhbGl6ZShgJHtMT0dCT09LX0xPQ0FMSVpFX1BBVEh9Lndhc191bmxvY2tlZGApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaXNPZmYpIHtcbiAgICAgICAgICAgIHJldHVybiBsb2NhbGl6ZShgJHtMT0dCT09LX0xPQ0FMSVpFX1BBVEh9Lndhc19sb2NrZWRgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBcInBsdWdcIjpcbiAgICAgICAgICBpZiAoaXNPbikge1xuICAgICAgICAgICAgcmV0dXJuIGxvY2FsaXplKGAke0xPR0JPT0tfTE9DQUxJWkVfUEFUSH0ud2FzX3BsdWdnZWRfaW5gKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGlzT2ZmKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxpemUoYCR7TE9HQk9PS19MT0NBTElaRV9QQVRIfS53YXNfdW5wbHVnZ2VkYCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgXCJwcmVzZW5jZVwiOlxuICAgICAgICAgIGlmIChpc09uKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxpemUoYCR7TE9HQk9PS19MT0NBTElaRV9QQVRIfS53YXNfYXRfaG9tZWApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaXNPZmYpIHtcbiAgICAgICAgICAgIHJldHVybiBsb2NhbGl6ZShgJHtMT0dCT09LX0xPQ0FMSVpFX1BBVEh9Lndhc19hd2F5YCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgXCJzYWZldHlcIjpcbiAgICAgICAgICBpZiAoaXNPbikge1xuICAgICAgICAgICAgcmV0dXJuIGxvY2FsaXplKGAke0xPR0JPT0tfTE9DQUxJWkVfUEFUSH0ud2FzX3Vuc2FmZWApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaXNPZmYpIHtcbiAgICAgICAgICAgIHJldHVybiBsb2NhbGl6ZShgJHtMT0dCT09LX0xPQ0FMSVpFX1BBVEh9Lndhc19zYWZlYCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgXCJjb2xkXCI6XG4gICAgICAgIGNhc2UgXCJnYXNcIjpcbiAgICAgICAgY2FzZSBcImhlYXRcIjpcbiAgICAgICAgY2FzZSBcIm1vaXN0dXJlXCI6XG4gICAgICAgIGNhc2UgXCJtb3Rpb25cIjpcbiAgICAgICAgY2FzZSBcIm9jY3VwYW5jeVwiOlxuICAgICAgICBjYXNlIFwicG93ZXJcIjpcbiAgICAgICAgY2FzZSBcInByb2JsZW1cIjpcbiAgICAgICAgY2FzZSBcInNtb2tlXCI6XG4gICAgICAgIGNhc2UgXCJzb3VuZFwiOlxuICAgICAgICBjYXNlIFwidmlicmF0aW9uXCI6XG4gICAgICAgICAgaWYgKGlzT24pIHtcbiAgICAgICAgICAgIHJldHVybiBsb2NhbGl6ZShgJHtMT0dCT09LX0xPQ0FMSVpFX1BBVEh9LmRldGVjdGVkX2RldmljZV9jbGFzc2AsIHtcbiAgICAgICAgICAgICAgZGV2aWNlX2NsYXNzOiBsb2NhbGl6ZShcbiAgICAgICAgICAgICAgICBgY29tcG9uZW50LmJpbmFyeV9zZW5zb3IuZGV2aWNlX2NsYXNzLiR7ZGV2aWNlX2NsYXNzfWBcbiAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaXNPZmYpIHtcbiAgICAgICAgICAgIHJldHVybiBsb2NhbGl6ZShgJHtMT0dCT09LX0xPQ0FMSVpFX1BBVEh9LmNsZWFyZWRfZGV2aWNlX2NsYXNzYCwge1xuICAgICAgICAgICAgICBkZXZpY2VfY2xhc3M6IGxvY2FsaXplKFxuICAgICAgICAgICAgICAgIGBjb21wb25lbnQuYmluYXJ5X3NlbnNvci5kZXZpY2VfY2xhc3MuJHtkZXZpY2VfY2xhc3N9YFxuICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgXCJ0YW1wZXJcIjpcbiAgICAgICAgICBpZiAoaXNPbikge1xuICAgICAgICAgICAgcmV0dXJuIGxvY2FsaXplKGAke0xPR0JPT0tfTE9DQUxJWkVfUEFUSH0uZGV0ZWN0ZWRfdGFtcGVyaW5nYCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChpc09mZikge1xuICAgICAgICAgICAgcmV0dXJuIGxvY2FsaXplKGAke0xPR0JPT0tfTE9DQUxJWkVfUEFUSH0uY2xlYXJlZF90YW1wZXJpbmdgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIGNhc2UgXCJjb3ZlclwiOlxuICAgICAgc3dpdGNoIChzdGF0ZSkge1xuICAgICAgICBjYXNlIFwib3BlblwiOlxuICAgICAgICAgIHJldHVybiBsb2NhbGl6ZShgJHtMT0dCT09LX0xPQ0FMSVpFX1BBVEh9Lndhc19vcGVuZWRgKTtcbiAgICAgICAgY2FzZSBcIm9wZW5pbmdcIjpcbiAgICAgICAgICByZXR1cm4gbG9jYWxpemUoYCR7TE9HQk9PS19MT0NBTElaRV9QQVRIfS5pc19vcGVuaW5nYCk7XG4gICAgICAgIGNhc2UgXCJjbG9zaW5nXCI6XG4gICAgICAgICAgcmV0dXJuIGxvY2FsaXplKGAke0xPR0JPT0tfTE9DQUxJWkVfUEFUSH0uaXNfY2xvc2luZ2ApO1xuICAgICAgICBjYXNlIFwiY2xvc2VkXCI6XG4gICAgICAgICAgcmV0dXJuIGxvY2FsaXplKGAke0xPR0JPT0tfTE9DQUxJWkVfUEFUSH0ud2FzX2Nsb3NlZGApO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlIFwibG9ja1wiOlxuICAgICAgc3dpdGNoIChzdGF0ZSkge1xuICAgICAgICBjYXNlIFwidW5sb2NrZWRcIjpcbiAgICAgICAgICByZXR1cm4gbG9jYWxpemUoYCR7TE9HQk9PS19MT0NBTElaRV9QQVRIfS53YXNfdW5sb2NrZWRgKTtcbiAgICAgICAgY2FzZSBcImxvY2tpbmdcIjpcbiAgICAgICAgICByZXR1cm4gbG9jYWxpemUoYCR7TE9HQk9PS19MT0NBTElaRV9QQVRIfS5pc19sb2NraW5nYCk7XG4gICAgICAgIGNhc2UgXCJ1bmxvY2tpbmdcIjpcbiAgICAgICAgICByZXR1cm4gbG9jYWxpemUoYCR7TE9HQk9PS19MT0NBTElaRV9QQVRIfS5pc191bmxvY2tpbmdgKTtcbiAgICAgICAgY2FzZSBcImxvY2tlZFwiOlxuICAgICAgICAgIHJldHVybiBsb2NhbGl6ZShgJHtMT0dCT09LX0xPQ0FMSVpFX1BBVEh9Lndhc19sb2NrZWRgKTtcbiAgICAgICAgY2FzZSBcImphbW1lZFwiOlxuICAgICAgICAgIHJldHVybiBsb2NhbGl6ZShgJHtMT0dCT09LX0xPQ0FMSVpFX1BBVEh9LmlzX2phbW1lZGApO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gIH1cblxuICBpZiAoc3RhdGUgPT09IEJJTkFSWV9TVEFURV9PTikge1xuICAgIHJldHVybiBsb2NhbGl6ZShgJHtMT0dCT09LX0xPQ0FMSVpFX1BBVEh9LnR1cm5lZF9vbmApO1xuICB9XG5cbiAgaWYgKHN0YXRlID09PSBCSU5BUllfU1RBVEVfT0ZGKSB7XG4gICAgcmV0dXJuIGxvY2FsaXplKGAke0xPR0JPT0tfTE9DQUxJWkVfUEFUSH0udHVybmVkX29mZmApO1xuICB9XG5cbiAgaWYgKHN0YXRlID09PSBVTktOT1dOKSB7XG4gICAgcmV0dXJuIGxvY2FsaXplKGAke0xPR0JPT0tfTE9DQUxJWkVfUEFUSH0uYmVjYW1lX3Vua25vd25gKTtcbiAgfVxuXG4gIGlmIChzdGF0ZSA9PT0gVU5BVkFJTEFCTEUpIHtcbiAgICByZXR1cm4gbG9jYWxpemUoYCR7TE9HQk9PS19MT0NBTElaRV9QQVRIfS5iZWNhbWVfdW5hdmFpbGFibGVgKTtcbiAgfVxuXG4gIHJldHVybiBoYXNzLmxvY2FsaXplKFxuICAgIGAke0xPR0JPT0tfTE9DQUxJWkVfUEFUSH0uY2hhbmdlZF90b19zdGF0ZWAsXG4gICAgXCJzdGF0ZVwiLFxuICAgIHN0YXRlT2JqXG4gICAgICA/IGNvbXB1dGVTdGF0ZURpc3BsYXkoXG4gICAgICAgICAgbG9jYWxpemUsXG4gICAgICAgICAgc3RhdGVPYmosXG4gICAgICAgICAgaGFzcy5sb2NhbGUsXG4gICAgICAgICAgaGFzcy5lbnRpdGllcyxcbiAgICAgICAgICBzdGF0ZVxuICAgICAgICApXG4gICAgICA6IHN0YXRlXG4gICk7XG59O1xuXG5leHBvcnQgY29uc3QgZmlsdGVyTG9nYm9va0NvbXBhdGlibGVFbnRpdGllczogSGFFbnRpdHlQaWNrZXJFbnRpdHlGaWx0ZXJGdW5jID0gKFxuICBlbnRpdHlcbikgPT5cbiAgY29tcHV0ZVN0YXRlRG9tYWluKGVudGl0eSkgIT09IFwic2Vuc29yXCIgfHxcbiAgKGVudGl0eS5hdHRyaWJ1dGVzLnVuaXRfb2ZfbWVhc3VyZW1lbnQgPT09IHVuZGVmaW5lZCAmJlxuICAgIGVudGl0eS5hdHRyaWJ1dGVzLnN0YXRlX2NsYXNzID09PSB1bmRlZmluZWQpO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/data/logbook.ts\n");

/***/ })

}]);