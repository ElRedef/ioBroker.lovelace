"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkhome_assistant_frontend"] = self["webpackChunkhome_assistant_frontend"] || []).push([["src_common_number_clamp_ts-src_components_chart_timeline-chart_timeline-color_ts-src_panels_h-81c542"],{

/***/ "./src/common/array/ensure-array.ts":
/*!******************************************!*\
  !*** ./src/common/array/ensure-array.ts ***!
  \******************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ensureArray: function() { return /* binding */ ensureArray; }\n/* harmony export */ });\nfunction ensureArray(value) {\n  if (value === undefined || Array.isArray(value)) {\n    return value;\n  }\n  return [value];\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tbW9uL2FycmF5L2Vuc3VyZS1hcnJheS50cy5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaG9tZS1hc3Npc3RhbnQtZnJvbnRlbmQvLi9zcmMvY29tbW9uL2FycmF5L2Vuc3VyZS1hcnJheS50cz81Y2QwIl0sInNvdXJjZXNDb250ZW50IjpbInR5cGUgTm9uVW5kZWZpbmVkPFQ+ID0gVCBleHRlbmRzIHVuZGVmaW5lZCA/IG5ldmVyIDogVDtcblxuZXhwb3J0IGZ1bmN0aW9uIGVuc3VyZUFycmF5KHZhbHVlOiB1bmRlZmluZWQpOiB1bmRlZmluZWQ7XG5leHBvcnQgZnVuY3Rpb24gZW5zdXJlQXJyYXk8VD4odmFsdWU6IFQgfCBUW10pOiBOb25VbmRlZmluZWQ8VD5bXTtcbmV4cG9ydCBmdW5jdGlvbiBlbnN1cmVBcnJheTxUPih2YWx1ZTogVCB8IHJlYWRvbmx5IFRbXSk6IE5vblVuZGVmaW5lZDxUPltdO1xuZXhwb3J0IGZ1bmN0aW9uIGVuc3VyZUFycmF5KHZhbHVlKSB7XG4gIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8IEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIHJldHVybiBbdmFsdWVdO1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/common/array/ensure-array.ts\n");

/***/ }),

/***/ "./src/common/decorators/local-storage.ts":
/*!************************************************!*\
  !*** ./src/common/decorators/local-storage.ts ***!
  \************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LocalStorage: function() { return /* binding */ LocalStorage; }\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ \"./node_modules/@babel/runtime/helpers/esm/classCallCheck.js\");\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ \"./node_modules/@babel/runtime/helpers/esm/createClass.js\");\n\n\nvar Storage = /*#__PURE__*/function () {\n  function Storage() {\n    var _this = this;\n    var subscribe = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    var storage = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : window.localStorage;\n    (0,_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(this, Storage);\n    this.storage = void 0;\n    this._storage = {};\n    this._listeners = {};\n    this.storage = storage;\n    if (!subscribe) {\n      return;\n    }\n    window.addEventListener(\"storage\", function (ev) {\n      if (ev.key && _this.hasKey(ev.key)) {\n        _this._storage[ev.key] = ev.newValue ? JSON.parse(ev.newValue) : ev.newValue;\n        if (_this._listeners[ev.key]) {\n          _this._listeners[ev.key].forEach(function (listener) {\n            return listener(ev.oldValue ? JSON.parse(ev.oldValue) : ev.oldValue, _this._storage[ev.key]);\n          });\n        }\n      }\n    });\n  }\n  (0,_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(Storage, [{\n    key: \"addFromStorage\",\n    value: function addFromStorage(storageKey) {\n      if (!this._storage[storageKey]) {\n        var data = this.storage.getItem(storageKey);\n        if (data) {\n          this._storage[storageKey] = JSON.parse(data);\n        }\n      }\n    }\n  }, {\n    key: \"subscribeChanges\",\n    value: function subscribeChanges(storageKey, callback) {\n      var _this2 = this;\n      if (this._listeners[storageKey]) {\n        this._listeners[storageKey].push(callback);\n      } else {\n        this._listeners[storageKey] = [callback];\n      }\n      return function () {\n        _this2.unsubscribeChanges(storageKey, callback);\n      };\n    }\n  }, {\n    key: \"unsubscribeChanges\",\n    value: function unsubscribeChanges(storageKey, callback) {\n      if (!(storageKey in this._listeners)) {\n        return;\n      }\n      var index = this._listeners[storageKey].indexOf(callback);\n      if (index !== -1) {\n        this._listeners[storageKey].splice(index, 1);\n      }\n    }\n  }, {\n    key: \"hasKey\",\n    value: function hasKey(storageKey) {\n      return storageKey in this._storage;\n    }\n  }, {\n    key: \"getValue\",\n    value: function getValue(storageKey) {\n      return this._storage[storageKey];\n    }\n  }, {\n    key: \"setValue\",\n    value: function setValue(storageKey, value) {\n      this._storage[storageKey] = value;\n      try {\n        if (value === undefined) {\n          this.storage.removeItem(storageKey);\n        } else {\n          this.storage.setItem(storageKey, JSON.stringify(value));\n        }\n      } catch (err) {\n        // Safari in private mode doesn't allow localstorage\n      }\n    }\n  }]);\n  return Storage;\n}();\nvar subscribeStorage = new Storage();\nvar LocalStorage = function LocalStorage(storageKey, property) {\n  var subscribe = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n  var storageType = arguments.length > 3 ? arguments[3] : undefined;\n  var propertyOptions = arguments.length > 4 ? arguments[4] : undefined;\n  return function (clsElement) {\n    var storage = subscribe && !storageType ? subscribeStorage : new Storage(subscribe, storageType);\n    var key = String(clsElement.key);\n    storageKey = storageKey || String(clsElement.key);\n    var initVal = clsElement.initializer ? clsElement.initializer() : undefined;\n    storage.addFromStorage(storageKey);\n    var subscribeChanges = function subscribeChanges(el) {\n      return storage.subscribeChanges(storageKey, function (oldValue) {\n        el.requestUpdate(clsElement.key, oldValue);\n      });\n    };\n    var getValue = function getValue() {\n      return storage.hasKey(storageKey) ? storage.getValue(storageKey) : initVal;\n    };\n    var setValue = function setValue(el, value) {\n      var oldValue;\n      if (property) {\n        oldValue = getValue();\n      }\n      storage.setValue(storageKey, value);\n      if (property) {\n        el.requestUpdate(clsElement.key, oldValue);\n      }\n    };\n    return {\n      kind: \"method\",\n      placement: \"prototype\",\n      key: clsElement.key,\n      descriptor: {\n        set: function set(value) {\n          setValue(this, value);\n        },\n        get: function get() {\n          return getValue();\n        },\n        enumerable: true,\n        configurable: true\n      },\n      finisher: function finisher(cls) {\n        if (property && subscribe) {\n          var connectedCallback = cls.prototype.connectedCallback;\n          var disconnectedCallback = cls.prototype.disconnectedCallback;\n          cls.prototype.connectedCallback = function () {\n            connectedCallback.call(this);\n            this[\"__unbsubLocalStorage\".concat(key)] = subscribeChanges(this);\n          };\n          cls.prototype.disconnectedCallback = function () {\n            disconnectedCallback.call(this);\n            this[\"__unbsubLocalStorage\".concat(key)]();\n          };\n        }\n        if (property) {\n          cls.createProperty(clsElement.key, Object.assign({\n            noAccessor: true\n          }, propertyOptions));\n        }\n      }\n    };\n  };\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tbW9uL2RlY29yYXRvcnMvbG9jYWwtc3RvcmFnZS50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQU1BO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBc0JBO0FBRUE7QUF2QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQUE7QUFJQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBV0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUtBO0FBQ0E7QUFDQTtBQUlBO0FBRUE7QUFBQTtBQUVBO0FBQ0E7QUFBQTtBQUVBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaG9tZS1hc3Npc3RhbnQtZnJvbnRlbmQvLi9zcmMvY29tbW9uL2RlY29yYXRvcnMvbG9jYWwtc3RvcmFnZS50cz8zMTI0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFVuc3Vic2NyaWJlRnVuYyB9IGZyb20gXCJob21lLWFzc2lzdGFudC1qcy13ZWJzb2NrZXRcIjtcbmltcG9ydCB7IFByb3BlcnR5RGVjbGFyYXRpb24sIFJlYWN0aXZlRWxlbWVudCB9IGZyb20gXCJsaXRcIjtcbmltcG9ydCB0eXBlIHsgQ2xhc3NFbGVtZW50IH0gZnJvbSBcIi4uLy4uL3R5cGVzXCI7XG5cbnR5cGUgQ2FsbGJhY2sgPSAob2xkVmFsdWU6IGFueSwgbmV3VmFsdWU6IGFueSkgPT4gdm9pZDtcblxuY2xhc3MgU3RvcmFnZSB7XG4gIGNvbnN0cnVjdG9yKHN1YnNjcmliZSA9IHRydWUsIHN0b3JhZ2UgPSB3aW5kb3cubG9jYWxTdG9yYWdlKSB7XG4gICAgdGhpcy5zdG9yYWdlID0gc3RvcmFnZTtcbiAgICBpZiAoIXN1YnNjcmliZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInN0b3JhZ2VcIiwgKGV2OiBTdG9yYWdlRXZlbnQpID0+IHtcbiAgICAgIGlmIChldi5rZXkgJiYgdGhpcy5oYXNLZXkoZXYua2V5KSkge1xuICAgICAgICB0aGlzLl9zdG9yYWdlW2V2LmtleV0gPSBldi5uZXdWYWx1ZVxuICAgICAgICAgID8gSlNPTi5wYXJzZShldi5uZXdWYWx1ZSlcbiAgICAgICAgICA6IGV2Lm5ld1ZhbHVlO1xuICAgICAgICBpZiAodGhpcy5fbGlzdGVuZXJzW2V2LmtleV0pIHtcbiAgICAgICAgICB0aGlzLl9saXN0ZW5lcnNbZXYua2V5XS5mb3JFYWNoKChsaXN0ZW5lcikgPT5cbiAgICAgICAgICAgIGxpc3RlbmVyKFxuICAgICAgICAgICAgICBldi5vbGRWYWx1ZSA/IEpTT04ucGFyc2UoZXYub2xkVmFsdWUpIDogZXYub2xkVmFsdWUsXG4gICAgICAgICAgICAgIHRoaXMuX3N0b3JhZ2VbZXYua2V5IV1cbiAgICAgICAgICAgIClcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgc3RvcmFnZTogZ2xvYmFsVGhpcy5TdG9yYWdlO1xuXG4gIHByaXZhdGUgX3N0b3JhZ2U6IHsgW3N0b3JhZ2VLZXk6IHN0cmluZ106IGFueSB9ID0ge307XG5cbiAgcHJpdmF0ZSBfbGlzdGVuZXJzOiB7XG4gICAgW3N0b3JhZ2VLZXk6IHN0cmluZ106IENhbGxiYWNrW107XG4gIH0gPSB7fTtcblxuICBwdWJsaWMgYWRkRnJvbVN0b3JhZ2Uoc3RvcmFnZUtleTogYW55KTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9zdG9yYWdlW3N0b3JhZ2VLZXldKSB7XG4gICAgICBjb25zdCBkYXRhID0gdGhpcy5zdG9yYWdlLmdldEl0ZW0oc3RvcmFnZUtleSk7XG4gICAgICBpZiAoZGF0YSkge1xuICAgICAgICB0aGlzLl9zdG9yYWdlW3N0b3JhZ2VLZXldID0gSlNPTi5wYXJzZShkYXRhKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgc3Vic2NyaWJlQ2hhbmdlcyhcbiAgICBzdG9yYWdlS2V5OiBzdHJpbmcsXG4gICAgY2FsbGJhY2s6IENhbGxiYWNrXG4gICk6IFVuc3Vic2NyaWJlRnVuYyB7XG4gICAgaWYgKHRoaXMuX2xpc3RlbmVyc1tzdG9yYWdlS2V5XSkge1xuICAgICAgdGhpcy5fbGlzdGVuZXJzW3N0b3JhZ2VLZXldLnB1c2goY2FsbGJhY2spO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9saXN0ZW5lcnNbc3RvcmFnZUtleV0gPSBbY2FsbGJhY2tdO1xuICAgIH1cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgdGhpcy51bnN1YnNjcmliZUNoYW5nZXMoc3RvcmFnZUtleSwgY2FsbGJhY2spO1xuICAgIH07XG4gIH1cblxuICBwdWJsaWMgdW5zdWJzY3JpYmVDaGFuZ2VzKHN0b3JhZ2VLZXk6IHN0cmluZywgY2FsbGJhY2s6IENhbGxiYWNrKSB7XG4gICAgaWYgKCEoc3RvcmFnZUtleSBpbiB0aGlzLl9saXN0ZW5lcnMpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5fbGlzdGVuZXJzW3N0b3JhZ2VLZXldLmluZGV4T2YoY2FsbGJhY2spO1xuICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgIHRoaXMuX2xpc3RlbmVyc1tzdG9yYWdlS2V5XS5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBoYXNLZXkoc3RvcmFnZUtleTogc3RyaW5nKTogYW55IHtcbiAgICByZXR1cm4gc3RvcmFnZUtleSBpbiB0aGlzLl9zdG9yYWdlO1xuICB9XG5cbiAgcHVibGljIGdldFZhbHVlKHN0b3JhZ2VLZXk6IHN0cmluZyk6IGFueSB7XG4gICAgcmV0dXJuIHRoaXMuX3N0b3JhZ2Vbc3RvcmFnZUtleV07XG4gIH1cblxuICBwdWJsaWMgc2V0VmFsdWUoc3RvcmFnZUtleTogc3RyaW5nLCB2YWx1ZTogYW55KTogYW55IHtcbiAgICB0aGlzLl9zdG9yYWdlW3N0b3JhZ2VLZXldID0gdmFsdWU7XG4gICAgdHJ5IHtcbiAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRoaXMuc3RvcmFnZS5yZW1vdmVJdGVtKHN0b3JhZ2VLZXkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5zdG9yYWdlLnNldEl0ZW0oc3RvcmFnZUtleSwgSlNPTi5zdHJpbmdpZnkodmFsdWUpKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnI6IGFueSkge1xuICAgICAgLy8gU2FmYXJpIGluIHByaXZhdGUgbW9kZSBkb2Vzbid0IGFsbG93IGxvY2Fsc3RvcmFnZVxuICAgIH1cbiAgfVxufVxuXG5jb25zdCBzdWJzY3JpYmVTdG9yYWdlID0gbmV3IFN0b3JhZ2UoKTtcblxuZXhwb3J0IGNvbnN0IExvY2FsU3RvcmFnZSA9XG4gIChcbiAgICBzdG9yYWdlS2V5Pzogc3RyaW5nLFxuICAgIHByb3BlcnR5PzogYm9vbGVhbixcbiAgICBzdWJzY3JpYmUgPSB0cnVlLFxuICAgIHN0b3JhZ2VUeXBlPzogZ2xvYmFsVGhpcy5TdG9yYWdlLFxuICAgIHByb3BlcnR5T3B0aW9ucz86IFByb3BlcnR5RGVjbGFyYXRpb25cbiAgKTogYW55ID0+XG4gIChjbHNFbGVtZW50OiBDbGFzc0VsZW1lbnQpID0+IHtcbiAgICBjb25zdCBzdG9yYWdlID1cbiAgICAgIHN1YnNjcmliZSAmJiAhc3RvcmFnZVR5cGVcbiAgICAgICAgPyBzdWJzY3JpYmVTdG9yYWdlXG4gICAgICAgIDogbmV3IFN0b3JhZ2Uoc3Vic2NyaWJlLCBzdG9yYWdlVHlwZSk7XG5cbiAgICBjb25zdCBrZXkgPSBTdHJpbmcoY2xzRWxlbWVudC5rZXkpO1xuICAgIHN0b3JhZ2VLZXkgPSBzdG9yYWdlS2V5IHx8IFN0cmluZyhjbHNFbGVtZW50LmtleSk7XG4gICAgY29uc3QgaW5pdFZhbCA9IGNsc0VsZW1lbnQuaW5pdGlhbGl6ZXJcbiAgICAgID8gY2xzRWxlbWVudC5pbml0aWFsaXplcigpXG4gICAgICA6IHVuZGVmaW5lZDtcblxuICAgIHN0b3JhZ2UuYWRkRnJvbVN0b3JhZ2Uoc3RvcmFnZUtleSk7XG5cbiAgICBjb25zdCBzdWJzY3JpYmVDaGFuZ2VzID0gKGVsOiBSZWFjdGl2ZUVsZW1lbnQpOiBVbnN1YnNjcmliZUZ1bmMgPT5cbiAgICAgIHN0b3JhZ2Uuc3Vic2NyaWJlQ2hhbmdlcyhzdG9yYWdlS2V5ISwgKG9sZFZhbHVlKSA9PiB7XG4gICAgICAgIGVsLnJlcXVlc3RVcGRhdGUoY2xzRWxlbWVudC5rZXksIG9sZFZhbHVlKTtcbiAgICAgIH0pO1xuXG4gICAgY29uc3QgZ2V0VmFsdWUgPSAoKTogYW55ID0+XG4gICAgICBzdG9yYWdlLmhhc0tleShzdG9yYWdlS2V5ISkgPyBzdG9yYWdlLmdldFZhbHVlKHN0b3JhZ2VLZXkhKSA6IGluaXRWYWw7XG5cbiAgICBjb25zdCBzZXRWYWx1ZSA9IChlbDogUmVhY3RpdmVFbGVtZW50LCB2YWx1ZTogYW55KSA9PiB7XG4gICAgICBsZXQgb2xkVmFsdWU6IHVua25vd24gfCB1bmRlZmluZWQ7XG4gICAgICBpZiAocHJvcGVydHkpIHtcbiAgICAgICAgb2xkVmFsdWUgPSBnZXRWYWx1ZSgpO1xuICAgICAgfVxuICAgICAgc3RvcmFnZS5zZXRWYWx1ZShzdG9yYWdlS2V5ISwgdmFsdWUpO1xuICAgICAgaWYgKHByb3BlcnR5KSB7XG4gICAgICAgIGVsLnJlcXVlc3RVcGRhdGUoY2xzRWxlbWVudC5rZXksIG9sZFZhbHVlKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGtpbmQ6IFwibWV0aG9kXCIsXG4gICAgICBwbGFjZW1lbnQ6IFwicHJvdG90eXBlXCIsXG4gICAgICBrZXk6IGNsc0VsZW1lbnQua2V5LFxuICAgICAgZGVzY3JpcHRvcjoge1xuICAgICAgICBzZXQodGhpczogUmVhY3RpdmVFbGVtZW50LCB2YWx1ZTogdW5rbm93bikge1xuICAgICAgICAgIHNldFZhbHVlKHRoaXMsIHZhbHVlKTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0KCkge1xuICAgICAgICAgIHJldHVybiBnZXRWYWx1ZSgpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICB9LFxuICAgICAgZmluaXNoZXIoY2xzOiB0eXBlb2YgUmVhY3RpdmVFbGVtZW50KSB7XG4gICAgICAgIGlmIChwcm9wZXJ0eSAmJiBzdWJzY3JpYmUpIHtcbiAgICAgICAgICBjb25zdCBjb25uZWN0ZWRDYWxsYmFjayA9IGNscy5wcm90b3R5cGUuY29ubmVjdGVkQ2FsbGJhY2s7XG4gICAgICAgICAgY29uc3QgZGlzY29ubmVjdGVkQ2FsbGJhY2sgPSBjbHMucHJvdG90eXBlLmRpc2Nvbm5lY3RlZENhbGxiYWNrO1xuICAgICAgICAgIGNscy5wcm90b3R5cGUuY29ubmVjdGVkQ2FsbGJhY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjb25uZWN0ZWRDYWxsYmFjay5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgdGhpc1tgX191bmJzdWJMb2NhbFN0b3JhZ2Uke2tleX1gXSA9IHN1YnNjcmliZUNoYW5nZXModGhpcyk7XG4gICAgICAgICAgfTtcbiAgICAgICAgICBjbHMucHJvdG90eXBlLmRpc2Nvbm5lY3RlZENhbGxiYWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZGlzY29ubmVjdGVkQ2FsbGJhY2suY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIHRoaXNbYF9fdW5ic3ViTG9jYWxTdG9yYWdlJHtrZXl9YF0oKTtcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcm9wZXJ0eSkge1xuICAgICAgICAgIGNscy5jcmVhdGVQcm9wZXJ0eShjbHNFbGVtZW50LmtleSwge1xuICAgICAgICAgICAgbm9BY2Nlc3NvcjogdHJ1ZSxcbiAgICAgICAgICAgIC4uLnByb3BlcnR5T3B0aW9ucyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICB9O1xuICB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/common/decorators/local-storage.ts\n");

/***/ }),

/***/ "./src/common/number/clamp.ts":
/*!************************************!*\
  !*** ./src/common/number/clamp.ts ***!
  \************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clamp: function() { return /* binding */ clamp; },\n/* harmony export */   conditionalClamp: function() { return /* binding */ conditionalClamp; }\n/* harmony export */ });\nvar clamp = function clamp(value, min, max) {\n  return Math.min(Math.max(value, min), max);\n};\n\n// Variant that only applies the clamping to a border if the border is defined\nvar conditionalClamp = function conditionalClamp(value, min, max) {\n  var result;\n  result = min ? Math.max(value, min) : value;\n  result = max ? Math.min(result, max) : result;\n  return result;\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tbW9uL251bWJlci9jbGFtcC50cy5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2hvbWUtYXNzaXN0YW50LWZyb250ZW5kLy4vc3JjL2NvbW1vbi9udW1iZXIvY2xhbXAudHM/NzY3MiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgY2xhbXAgPSAodmFsdWU6IG51bWJlciwgbWluOiBudW1iZXIsIG1heDogbnVtYmVyKSA9PlxuICBNYXRoLm1pbihNYXRoLm1heCh2YWx1ZSwgbWluKSwgbWF4KTtcblxuLy8gVmFyaWFudCB0aGF0IG9ubHkgYXBwbGllcyB0aGUgY2xhbXBpbmcgdG8gYSBib3JkZXIgaWYgdGhlIGJvcmRlciBpcyBkZWZpbmVkXG5leHBvcnQgY29uc3QgY29uZGl0aW9uYWxDbGFtcCA9ICh2YWx1ZTogbnVtYmVyLCBtaW4/OiBudW1iZXIsIG1heD86IG51bWJlcikgPT4ge1xuICBsZXQgcmVzdWx0OiBudW1iZXI7XG4gIHJlc3VsdCA9IG1pbiA/IE1hdGgubWF4KHZhbHVlLCBtaW4pIDogdmFsdWU7XG4gIHJlc3VsdCA9IG1heCA/IE1hdGgubWluKHJlc3VsdCwgbWF4KSA6IHJlc3VsdDtcbiAgcmV0dXJuIHJlc3VsdDtcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/common/number/clamp.ts\n");

/***/ }),

/***/ "./src/components/chart/timeline-chart/timeline-color.ts":
/*!***************************************************************!*\
  !*** ./src/components/chart/timeline-chart/timeline-color.ts ***!
  \***************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   computeTimelineColor: function() { return /* binding */ computeTimelineColor; }\n/* harmony export */ });\n/* harmony import */ var _common_color_colors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../common/color/colors */ \"./src/common/color/colors.ts\");\n/* harmony import */ var _common_color_convert_color__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../common/color/convert-color */ \"./src/common/color/convert-color.ts\");\n/* harmony import */ var _common_color_lab__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../common/color/lab */ \"./src/common/color/lab.ts\");\n/* harmony import */ var _common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../common/entity/compute_domain */ \"./src/common/entity/compute_domain.ts\");\n/* harmony import */ var _common_entity_state_color__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../common/entity/state_color */ \"./src/common/entity/state_color.ts\");\n/* harmony import */ var _data_entity__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../data/entity */ \"./src/data/entity.ts\");\n/* harmony import */ var _resources_css_variables__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../resources/css-variables */ \"./src/resources/css-variables.ts\");\n\n\n\n\n\n\n\nvar DOMAIN_STATE_SHADES = {\n  media_player: {\n    paused: 0.5,\n    idle: 1\n  },\n  vacuum: {\n    returning: 0.5\n  }\n};\nfunction computeTimelineStateColor(state, computedStyles, stateObj) {\n  var _DOMAIN_STATE_SHADES$;\n  if (!stateObj || state === _data_entity__WEBPACK_IMPORTED_MODULE_5__.UNAVAILABLE) {\n    return (0,_resources_css_variables__WEBPACK_IMPORTED_MODULE_6__.computeCssValue)(\"--history-unavailable-color\", computedStyles);\n  }\n  if (state === _data_entity__WEBPACK_IMPORTED_MODULE_5__.UNKNOWN) {\n    return (0,_resources_css_variables__WEBPACK_IMPORTED_MODULE_6__.computeCssValue)(\"--history-unknown-color\", computedStyles);\n  }\n  var properties = (0,_common_entity_state_color__WEBPACK_IMPORTED_MODULE_4__.stateColorProperties)(stateObj, state);\n  if (!properties) {\n    return undefined;\n  }\n  var rgb = (0,_resources_css_variables__WEBPACK_IMPORTED_MODULE_6__.computeCssValue)(properties, computedStyles);\n  if (!rgb) return undefined;\n  var domain = (0,_common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_3__.computeDomain)(stateObj.entity_id);\n  var shade = (_DOMAIN_STATE_SHADES$ = DOMAIN_STATE_SHADES[domain]) === null || _DOMAIN_STATE_SHADES$ === void 0 ? void 0 : _DOMAIN_STATE_SHADES$[state];\n  if (!shade) {\n    return rgb;\n  }\n  return (0,_common_color_convert_color__WEBPACK_IMPORTED_MODULE_1__.lab2hex)((0,_common_color_lab__WEBPACK_IMPORTED_MODULE_2__.labBrighten)((0,_common_color_convert_color__WEBPACK_IMPORTED_MODULE_1__.rgb2lab)((0,_common_color_convert_color__WEBPACK_IMPORTED_MODULE_1__.hex2rgb)(rgb)), shade));\n}\nvar colorIndex = 0;\nvar stateColorMap = new Map();\nfunction computeTimeLineGenericColor(state, computedStyles) {\n  if (stateColorMap.has(state)) {\n    return stateColorMap.get(state);\n  }\n  var color = (0,_common_color_colors__WEBPACK_IMPORTED_MODULE_0__.getGraphColorByIndex)(colorIndex, computedStyles);\n  colorIndex++;\n  stateColorMap.set(state, color);\n  return color;\n}\nfunction computeTimelineColor(state, computedStyles, stateObj) {\n  return computeTimelineStateColor(state, computedStyles, stateObj) || computeTimeLineGenericColor(state, computedStyles);\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9jaGFydC90aW1lbGluZS1jaGFydC90aW1lbGluZS1jb2xvci50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBS0E7QUFJQSIsInNvdXJjZXMiOlsid2VicGFjazovL2hvbWUtYXNzaXN0YW50LWZyb250ZW5kLy4vc3JjL2NvbXBvbmVudHMvY2hhcnQvdGltZWxpbmUtY2hhcnQvdGltZWxpbmUtY29sb3IudHM/NzM2MCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBIYXNzRW50aXR5IH0gZnJvbSBcImhvbWUtYXNzaXN0YW50LWpzLXdlYnNvY2tldFwiO1xuaW1wb3J0IHsgZ2V0R3JhcGhDb2xvckJ5SW5kZXggfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2NvbG9yL2NvbG9yc1wiO1xuaW1wb3J0IHsgaGV4MnJnYiwgbGFiMmhleCwgcmdiMmxhYiB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vY29sb3IvY29udmVydC1jb2xvclwiO1xuaW1wb3J0IHsgbGFiQnJpZ2h0ZW4gfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2NvbG9yL2xhYlwiO1xuaW1wb3J0IHsgY29tcHV0ZURvbWFpbiB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZW50aXR5L2NvbXB1dGVfZG9tYWluXCI7XG5pbXBvcnQgeyBzdGF0ZUNvbG9yUHJvcGVydGllcyB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZW50aXR5L3N0YXRlX2NvbG9yXCI7XG5pbXBvcnQgeyBVTkFWQUlMQUJMRSwgVU5LTk9XTiB9IGZyb20gXCIuLi8uLi8uLi9kYXRhL2VudGl0eVwiO1xuaW1wb3J0IHsgY29tcHV0ZUNzc1ZhbHVlIH0gZnJvbSBcIi4uLy4uLy4uL3Jlc291cmNlcy9jc3MtdmFyaWFibGVzXCI7XG5cbmNvbnN0IERPTUFJTl9TVEFURV9TSEFERVM6IFJlY29yZDxzdHJpbmcsIFJlY29yZDxzdHJpbmcsIG51bWJlcj4+ID0ge1xuICBtZWRpYV9wbGF5ZXI6IHtcbiAgICBwYXVzZWQ6IDAuNSxcbiAgICBpZGxlOiAxLFxuICB9LFxuICB2YWN1dW06IHtcbiAgICByZXR1cm5pbmc6IDAuNSxcbiAgfSxcbn07XG5cbmZ1bmN0aW9uIGNvbXB1dGVUaW1lbGluZVN0YXRlQ29sb3IoXG4gIHN0YXRlOiBzdHJpbmcsXG4gIGNvbXB1dGVkU3R5bGVzOiBDU1NTdHlsZURlY2xhcmF0aW9uLFxuICBzdGF0ZU9iaj86IEhhc3NFbnRpdHlcbik6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gIGlmICghc3RhdGVPYmogfHwgc3RhdGUgPT09IFVOQVZBSUxBQkxFKSB7XG4gICAgcmV0dXJuIGNvbXB1dGVDc3NWYWx1ZShcIi0taGlzdG9yeS11bmF2YWlsYWJsZS1jb2xvclwiLCBjb21wdXRlZFN0eWxlcyk7XG4gIH1cblxuICBpZiAoc3RhdGUgPT09IFVOS05PV04pIHtcbiAgICByZXR1cm4gY29tcHV0ZUNzc1ZhbHVlKFwiLS1oaXN0b3J5LXVua25vd24tY29sb3JcIiwgY29tcHV0ZWRTdHlsZXMpO1xuICB9XG5cbiAgY29uc3QgcHJvcGVydGllcyA9IHN0YXRlQ29sb3JQcm9wZXJ0aWVzKHN0YXRlT2JqLCBzdGF0ZSk7XG5cbiAgaWYgKCFwcm9wZXJ0aWVzKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIGNvbnN0IHJnYiA9IGNvbXB1dGVDc3NWYWx1ZShwcm9wZXJ0aWVzLCBjb21wdXRlZFN0eWxlcyk7XG5cbiAgaWYgKCFyZ2IpIHJldHVybiB1bmRlZmluZWQ7XG5cbiAgY29uc3QgZG9tYWluID0gY29tcHV0ZURvbWFpbihzdGF0ZU9iai5lbnRpdHlfaWQpO1xuICBjb25zdCBzaGFkZSA9IERPTUFJTl9TVEFURV9TSEFERVNbZG9tYWluXT8uW3N0YXRlXSBhcyBudW1iZXIgfCBudW1iZXI7XG4gIGlmICghc2hhZGUpIHtcbiAgICByZXR1cm4gcmdiO1xuICB9XG4gIHJldHVybiBsYWIyaGV4KGxhYkJyaWdodGVuKHJnYjJsYWIoaGV4MnJnYihyZ2IpKSwgc2hhZGUpKTtcbn1cblxubGV0IGNvbG9ySW5kZXggPSAwO1xuY29uc3Qgc3RhdGVDb2xvck1hcDogTWFwPHN0cmluZywgc3RyaW5nPiA9IG5ldyBNYXAoKTtcblxuZnVuY3Rpb24gY29tcHV0ZVRpbWVMaW5lR2VuZXJpY0NvbG9yKFxuICBzdGF0ZTogc3RyaW5nLFxuICBjb21wdXRlZFN0eWxlczogQ1NTU3R5bGVEZWNsYXJhdGlvblxuKTogc3RyaW5nIHtcbiAgaWYgKHN0YXRlQ29sb3JNYXAuaGFzKHN0YXRlKSkge1xuICAgIHJldHVybiBzdGF0ZUNvbG9yTWFwLmdldChzdGF0ZSkhO1xuICB9XG4gIGNvbnN0IGNvbG9yID0gZ2V0R3JhcGhDb2xvckJ5SW5kZXgoY29sb3JJbmRleCwgY29tcHV0ZWRTdHlsZXMpO1xuICBjb2xvckluZGV4Kys7XG4gIHN0YXRlQ29sb3JNYXAuc2V0KHN0YXRlLCBjb2xvcik7XG4gIHJldHVybiBjb2xvcjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbXB1dGVUaW1lbGluZUNvbG9yKFxuICBzdGF0ZTogc3RyaW5nLFxuICBjb21wdXRlZFN0eWxlczogQ1NTU3R5bGVEZWNsYXJhdGlvbixcbiAgc3RhdGVPYmo/OiBIYXNzRW50aXR5XG4pOiBzdHJpbmcge1xuICByZXR1cm4gKFxuICAgIGNvbXB1dGVUaW1lbGluZVN0YXRlQ29sb3Ioc3RhdGUsIGNvbXB1dGVkU3R5bGVzLCBzdGF0ZU9iaikgfHxcbiAgICBjb21wdXRlVGltZUxpbmVHZW5lcmljQ29sb3Ioc3RhdGUsIGNvbXB1dGVkU3R5bGVzKVxuICApO1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/components/chart/timeline-chart/timeline-color.ts\n");

/***/ }),

/***/ "./src/components/ha-circular-progress.ts":
/*!************************************************!*\
  !*** ./src/components/ha-circular-progress.ts ***!
  \************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HaCircularProgress: function() { return /* binding */ HaCircularProgress; }\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/taggedTemplateLiteral */ \"./node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\");\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ \"./node_modules/@babel/runtime/helpers/esm/createClass.js\");\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ \"./node_modules/@babel/runtime/helpers/esm/classCallCheck.js\");\n/* harmony import */ var _babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/assertThisInitialized */ \"./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\");\n/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/inherits */ \"./node_modules/@babel/runtime/helpers/esm/inherits.js\");\n/* harmony import */ var _babel_runtime_helpers_createSuper__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/createSuper */ \"./node_modules/@babel/runtime/helpers/esm/createSuper.js\");\n/* harmony import */ var _babel_runtime_helpers_decorate__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/decorate */ \"./node_modules/@babel/runtime/helpers/esm/decorate.js\");\n/* harmony import */ var _babel_runtime_helpers_get__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime/helpers/get */ \"./node_modules/@babel/runtime/helpers/esm/get.js\");\n/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime/helpers/getPrototypeOf */ \"./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\");\n/* harmony import */ var _material_mwc_circular_progress__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @material/mwc-circular-progress */ \"./node_modules/@material/mwc-circular-progress/mwc-circular-progress.js\");\n/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! lit */ \"./node_modules/lit/index.js\");\n/* harmony import */ var lit_decorators__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! lit/decorators */ \"./node_modules/lit/decorators.js\");\n\n\n\n\n\n\n\n\n\nvar _templateObject;\n\n\n\nvar HaCircularProgress = (0,_babel_runtime_helpers_decorate__WEBPACK_IMPORTED_MODULE_6__[\"default\"])([(0,lit_decorators__WEBPACK_IMPORTED_MODULE_11__.customElement)(\"ha-circular-progress\")], function (_initialize, _CircularProgress) {\n  var HaCircularProgress = /*#__PURE__*/function (_CircularProgress2) {\n    (0,_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(HaCircularProgress, _CircularProgress2);\n    var _super = (0,_babel_runtime_helpers_createSuper__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(HaCircularProgress);\n    function HaCircularProgress() {\n      var _this;\n      (0,_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(this, HaCircularProgress);\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      _this = _super.call.apply(_super, [this].concat(args));\n      _initialize((0,_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(_this));\n      return _this;\n    }\n    return (0,_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(HaCircularProgress);\n  }(_CircularProgress);\n  return {\n    F: HaCircularProgress,\n    d: [{\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_11__.property)({\n        type: Boolean\n      })],\n      key: \"active\",\n      value: function value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_11__.property)()],\n      key: \"alt\",\n      value: function value() {\n        return \"Loading\";\n      }\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_11__.property)()],\n      key: \"size\",\n      value: function value() {\n        return \"medium\";\n      }\n    }, {\n      kind: \"set\",\n      key: \"density\",\n      value:\n      // @ts-ignore\n      function density(_) {\n        // just a dummy\n      }\n    }, {\n      kind: \"get\",\n      key: \"density\",\n      value: function density() {\n        switch (this.size) {\n          case \"tiny\":\n            return -8;\n          case \"small\":\n            return -5;\n          case \"medium\":\n            return 0;\n          case \"large\":\n            return 5;\n          default:\n            return 0;\n        }\n      }\n\n      // @ts-ignore\n    }, {\n      kind: \"set\",\n      key: \"indeterminate\",\n      value: function indeterminate(_) {\n        // just a dummy\n      }\n    }, {\n      kind: \"get\",\n      key: \"indeterminate\",\n      value: function indeterminate() {\n        return this.active;\n      }\n    }, {\n      kind: \"get\",\n      static: true,\n      key: \"styles\",\n      value: function styles() {\n        return [(0,_babel_runtime_helpers_get__WEBPACK_IMPORTED_MODULE_7__[\"default\"])((0,_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(HaCircularProgress), \"styles\", this), (0,lit__WEBPACK_IMPORTED_MODULE_10__.css)(_templateObject || (_templateObject = (0,_babel_runtime_helpers_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_0__[\"default\"])([\"\\n        :host {\\n          overflow: hidden;\\n        }\\n      \"])))];\n      }\n    }]\n  };\n}, _material_mwc_circular_progress__WEBPACK_IMPORTED_MODULE_9__.CircularProgress);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9oYS1jaXJjdWxhci1wcm9ncmVzcy50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQVFBO0FBQUE7QUFBQTtBQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaG9tZS1hc3Npc3RhbnQtZnJvbnRlbmQvLi9zcmMvY29tcG9uZW50cy9oYS1jaXJjdWxhci1wcm9ncmVzcy50cz8wNjljIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENpcmN1bGFyUHJvZ3Jlc3MgfSBmcm9tIFwiQG1hdGVyaWFsL213Yy1jaXJjdWxhci1wcm9ncmVzc1wiO1xuaW1wb3J0IHsgQ1NTUmVzdWx0R3JvdXAsIGNzcyB9IGZyb20gXCJsaXRcIjtcbmltcG9ydCB7IGN1c3RvbUVsZW1lbnQsIHByb3BlcnR5IH0gZnJvbSBcImxpdC9kZWNvcmF0b3JzXCI7XG5cbkBjdXN0b21FbGVtZW50KFwiaGEtY2lyY3VsYXItcHJvZ3Jlc3NcIilcbi8vIEB0cy1pZ25vcmVcbmV4cG9ydCBjbGFzcyBIYUNpcmN1bGFyUHJvZ3Jlc3MgZXh0ZW5kcyBDaXJjdWxhclByb2dyZXNzIHtcbiAgQHByb3BlcnR5KHsgdHlwZTogQm9vbGVhbiB9KVxuICBwdWJsaWMgYWN0aXZlID0gZmFsc2U7XG5cbiAgQHByb3BlcnR5KClcbiAgcHVibGljIGFsdCA9IFwiTG9hZGluZ1wiO1xuXG4gIEBwcm9wZXJ0eSgpXG4gIHB1YmxpYyBzaXplOiBcInRpbnlcIiB8IFwic21hbGxcIiB8IFwibWVkaXVtXCIgfCBcImxhcmdlXCIgPSBcIm1lZGl1bVwiO1xuXG4gIC8vIEB0cy1pZ25vcmVcbiAgcHVibGljIHNldCBkZW5zaXR5KF8pIHtcbiAgICAvLyBqdXN0IGEgZHVtbXlcbiAgfVxuXG4gIHB1YmxpYyBnZXQgZGVuc2l0eSgpIHtcbiAgICBzd2l0Y2ggKHRoaXMuc2l6ZSkge1xuICAgICAgY2FzZSBcInRpbnlcIjpcbiAgICAgICAgcmV0dXJuIC04O1xuICAgICAgY2FzZSBcInNtYWxsXCI6XG4gICAgICAgIHJldHVybiAtNTtcbiAgICAgIGNhc2UgXCJtZWRpdW1cIjpcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgICBjYXNlIFwibGFyZ2VcIjpcbiAgICAgICAgcmV0dXJuIDU7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gIH1cblxuICAvLyBAdHMtaWdub3JlXG4gIHB1YmxpYyBzZXQgaW5kZXRlcm1pbmF0ZShfKSB7XG4gICAgLy8ganVzdCBhIGR1bW15XG4gIH1cblxuICBwdWJsaWMgZ2V0IGluZGV0ZXJtaW5hdGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuYWN0aXZlO1xuICB9XG5cbiAgc3RhdGljIGdldCBzdHlsZXMoKTogQ1NTUmVzdWx0R3JvdXAge1xuICAgIHJldHVybiBbXG4gICAgICBzdXBlci5zdHlsZXMsXG4gICAgICBjc3NgXG4gICAgICAgIDpob3N0IHtcbiAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICB9XG4gICAgICBgLFxuICAgIF07XG4gIH1cbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICBpbnRlcmZhY2UgSFRNTEVsZW1lbnRUYWdOYW1lTWFwIHtcbiAgICBcImhhLWNpcmN1bGFyLXByb2dyZXNzXCI6IEhhQ2lyY3VsYXJQcm9ncmVzcztcbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/components/ha-circular-progress.ts\n");

/***/ }),

/***/ "./src/panels/history/ha-panel-history.ts":
/*!************************************************!*\
  !*** ./src/panels/history/ha-panel-history.ts ***!
  \************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/toConsumableArray */ \"./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\");\n/* harmony import */ var _babel_runtime_helpers_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/createForOfIteratorHelper */ \"./node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\");\n/* harmony import */ var _babel_runtime_helpers_regeneratorRuntime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/regeneratorRuntime */ \"./node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ \"./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ \"./node_modules/@babel/runtime/helpers/esm/defineProperty.js\");\n/* harmony import */ var _babel_runtime_helpers_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/taggedTemplateLiteral */ \"./node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\");\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ \"./node_modules/@babel/runtime/helpers/esm/createClass.js\");\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ \"./node_modules/@babel/runtime/helpers/esm/classCallCheck.js\");\n/* harmony import */ var _babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime/helpers/assertThisInitialized */ \"./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\");\n/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @babel/runtime/helpers/inherits */ \"./node_modules/@babel/runtime/helpers/esm/inherits.js\");\n/* harmony import */ var _babel_runtime_helpers_createSuper__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @babel/runtime/helpers/createSuper */ \"./node_modules/@babel/runtime/helpers/esm/createSuper.js\");\n/* harmony import */ var _babel_runtime_helpers_decorate__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @babel/runtime/helpers/decorate */ \"./node_modules/@babel/runtime/helpers/esm/decorate.js\");\n/* harmony import */ var _babel_runtime_helpers_get__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @babel/runtime/helpers/get */ \"./node_modules/@babel/runtime/helpers/esm/get.js\");\n/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @babel/runtime/helpers/getPrototypeOf */ \"./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\");\n/* harmony import */ var date_fns_esm__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! date-fns/esm */ \"./node_modules/date-fns/esm/startOfWeek/index.js\");\n/* harmony import */ var date_fns_esm__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! date-fns/esm */ \"./node_modules/date-fns/esm/endOfWeek/index.js\");\n/* harmony import */ var date_fns_esm__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! date-fns/esm */ \"./node_modules/date-fns/esm/startOfToday/index.js\");\n/* harmony import */ var date_fns_esm__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! date-fns/esm */ \"./node_modules/date-fns/esm/endOfToday/index.js\");\n/* harmony import */ var date_fns_esm__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! date-fns/esm */ \"./node_modules/date-fns/esm/startOfYesterday/index.js\");\n/* harmony import */ var date_fns_esm__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(/*! date-fns/esm */ \"./node_modules/date-fns/esm/endOfYesterday/index.js\");\n/* harmony import */ var date_fns_esm__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__(/*! date-fns/esm */ \"./node_modules/date-fns/esm/addDays/index.js\");\n/* harmony import */ var date_fns_esm__WEBPACK_IMPORTED_MODULE_45__ = __webpack_require__(/*! date-fns/esm */ \"./node_modules/date-fns/esm/differenceInHours/index.js\");\n/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! lit */ \"./node_modules/lit/index.js\");\n/* harmony import */ var lit_decorators__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! lit/decorators */ \"./node_modules/lit/decorators.js\");\n/* harmony import */ var _common_array_ensure_array__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../common/array/ensure-array */ \"./src/common/array/ensure-array.ts\");\n/* harmony import */ var _common_datetime_first_weekday__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../common/datetime/first_weekday */ \"./src/common/datetime/first_weekday.ts\");\n/* harmony import */ var _common_decorators_local_storage__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../common/decorators/local-storage */ \"./src/common/decorators/local-storage.ts\");\n/* harmony import */ var _common_navigate__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../common/navigate */ \"./src/common/navigate.ts\");\n/* harmony import */ var _common_url_construct_url__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../common/url/construct-url */ \"./src/common/url/construct-url.ts\");\n/* harmony import */ var _common_url_search_params__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../common/url/search-params */ \"./src/common/url/search-params.ts\");\n/* harmony import */ var _common_util_compute_rtl__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../../common/util/compute_rtl */ \"./src/common/util/compute_rtl.ts\");\n/* harmony import */ var _components_chart_ha_chart_base__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../../components/chart/ha-chart-base */ \"./src/components/chart/ha-chart-base.ts\");\n/* harmony import */ var _components_chart_state_history_charts__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../../components/chart/state-history-charts */ \"./src/components/chart/state-history-charts.ts\");\n/* harmony import */ var _components_ha_circular_progress__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../../components/ha-circular-progress */ \"./src/components/ha-circular-progress.ts\");\n/* harmony import */ var _components_ha_date_range_picker__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ../../components/ha-date-range-picker */ \"./src/components/ha-date-range-picker.ts\");\n/* harmony import */ var _components_ha_icon_button__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ../../components/ha-icon-button */ \"./src/components/ha-icon-button.ts\");\n/* harmony import */ var _components_ha_menu_button__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ../../components/ha-menu-button */ \"./src/components/ha-menu-button.ts\");\n/* harmony import */ var _components_ha_target_picker__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ../../components/ha-target-picker */ \"./src/components/ha-target-picker.ts\");\n/* harmony import */ var _data_area_registry__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ../../data/area_registry */ \"./src/data/area_registry.ts\");\n/* harmony import */ var _data_device_registry__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ../../data/device_registry */ \"./src/data/device_registry.ts\");\n/* harmony import */ var _data_entity_registry__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ../../data/entity_registry */ \"./src/data/entity_registry.ts\");\n/* harmony import */ var _data_history__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ../../data/history */ \"./src/data/history.ts\");\n/* harmony import */ var _mixins_subscribe_mixin__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ../../mixins/subscribe-mixin */ \"./src/mixins/subscribe-mixin.ts\");\n/* harmony import */ var _resources_styles__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ../../resources/styles */ \"./src/resources/styles.ts\");\n/* harmony import */ var _components_ha_top_app_bar_fixed__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ../../components/ha-top-app-bar-fixed */ \"./src/components/ha-top-app-bar-fixed.ts\");\n/* harmony import */ var _components_ha_icon_button_arrow_prev__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ../../components/ha-icon-button-arrow-prev */ \"./src/components/ha-icon-button-arrow-prev.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5, _templateObject6, _templateObject7, _templateObject8;\nvar mdiFilterRemove = \"M14.76,20.83L17.6,18L14.76,15.17L16.17,13.76L19,16.57L21.83,13.76L23.24,15.17L20.43,18L23.24,20.83L21.83,22.24L19,19.4L16.17,22.24L14.76,20.83M12,12V19.88C12.04,20.18 11.94,20.5 11.71,20.71C11.32,21.1 10.69,21.1 10.3,20.71L8.29,18.7C8.06,18.47 7.96,18.16 8,17.87V12H7.97L2.21,4.62C1.87,4.19 1.95,3.56 2.38,3.22C2.57,3.08 2.78,3 3,3V3H17V3C17.22,3 17.43,3.08 17.62,3.22C18.05,3.56 18.13,4.19 17.79,4.62L12.03,12H12Z\";\nvar mdiRefresh = \"M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z\";\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar HaPanelHistory = (0,_babel_runtime_helpers_decorate__WEBPACK_IMPORTED_MODULE_11__[\"default\"])(null, function (_initialize, _SubscribeMixin) {\n  var HaPanelHistory = /*#__PURE__*/function (_SubscribeMixin2) {\n    (0,_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(HaPanelHistory, _SubscribeMixin2);\n    var _super = (0,_babel_runtime_helpers_createSuper__WEBPACK_IMPORTED_MODULE_10__[\"default\"])(HaPanelHistory);\n    function HaPanelHistory() {\n      var _this;\n      (0,_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(this, HaPanelHistory);\n      _this = _super.call(this);\n      _initialize((0,_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(_this));\n      var start = new Date();\n      start.setHours(start.getHours() - 1, 0, 0, 0);\n      _this._startDate = start;\n      var end = new Date();\n      end.setHours(end.getHours() + 2, 0, 0, 0);\n      _this._endDate = end;\n      return _this;\n    }\n    return (0,_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(HaPanelHistory);\n  }(_SubscribeMixin);\n  return {\n    F: HaPanelHistory,\n    d: [{\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_15__.property)({\n        attribute: false\n      })],\n      key: \"hass\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_15__.property)({\n        reflect: true,\n        type: Boolean\n      })],\n      key: \"narrow\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_15__.property)({\n        reflect: true,\n        type: Boolean\n      })],\n      key: \"rtl\",\n      value: function value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_15__.state)()],\n      key: \"_startDate\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_15__.state)()],\n      key: \"_endDate\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,_common_decorators_local_storage__WEBPACK_IMPORTED_MODULE_18__.LocalStorage)(\"historyPickedValue\", true, false)],\n      key: \"_targetPickerValue\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_15__.state)()],\n      key: \"_isLoading\",\n      value: function value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_15__.state)()],\n      key: \"_stateHistory\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_15__.state)()],\n      key: \"_ranges\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_15__.state)()],\n      key: \"_deviceEntityLookup\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_15__.state)()],\n      key: \"_areaEntityLookup\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_15__.state)()],\n      key: \"_areaDeviceLookup\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_15__.state)()],\n      key: \"_showBack\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_15__.query)(\"state-history-charts\")],\n      key: \"_stateHistoryCharts\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      key: \"_subscribed\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      key: \"_interval\",\n      value: void 0\n    }, {\n      kind: \"method\",\n      key: \"connectedCallback\",\n      value: function connectedCallback() {\n        (0,_babel_runtime_helpers_get__WEBPACK_IMPORTED_MODULE_12__[\"default\"])((0,_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_13__[\"default\"])(HaPanelHistory.prototype), \"connectedCallback\", this).call(this);\n        if (this.hasUpdated) {\n          this._getHistory();\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"disconnectedCallback\",\n      value: function disconnectedCallback() {\n        (0,_babel_runtime_helpers_get__WEBPACK_IMPORTED_MODULE_12__[\"default\"])((0,_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_13__[\"default\"])(HaPanelHistory.prototype), \"disconnectedCallback\", this).call(this);\n        this._unsubscribeHistory();\n      }\n    }, {\n      kind: \"method\",\n      key: \"hassSubscribe\",\n      value: function hassSubscribe() {\n        var _this2 = this;\n        return [(0,_data_entity_registry__WEBPACK_IMPORTED_MODULE_32__.subscribeEntityRegistry)(this.hass.connection, function (entities) {\n          _this2._deviceEntityLookup = (0,_data_device_registry__WEBPACK_IMPORTED_MODULE_31__.getDeviceEntityLookup)(entities);\n          _this2._areaEntityLookup = (0,_data_area_registry__WEBPACK_IMPORTED_MODULE_30__.getAreaEntityLookup)(entities);\n        }), (0,_data_device_registry__WEBPACK_IMPORTED_MODULE_31__.subscribeDeviceRegistry)(this.hass.connection, function (devices) {\n          _this2._areaDeviceLookup = (0,_data_area_registry__WEBPACK_IMPORTED_MODULE_30__.getAreaDeviceLookup)(devices);\n        })];\n      }\n    }, {\n      kind: \"method\",\n      key: \"_goBack\",\n      value: function _goBack() {\n        history.back();\n      }\n    }, {\n      kind: \"method\",\n      key: \"render\",\n      value: function render() {\n        return (0,lit__WEBPACK_IMPORTED_MODULE_14__.html)(_templateObject || (_templateObject = (0,_babel_runtime_helpers_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_5__[\"default\"])([\"\\n      <ha-top-app-bar-fixed>\\n        \", \"\\n        <div slot=\\\"title\\\">\", \"</div>\\n        \", \"\\n        <ha-icon-button\\n          slot=\\\"actionItems\\\"\\n          @click=\", \"\\n          .disabled=\", \"\\n          .path=\", \"\\n          .label=\", \"\\n        ></ha-icon-button>\\n\\n        <div class=\\\"flex content\\\">\\n          <div class=\\\"filters\\\">\\n            <ha-date-range-picker\\n              .hass=\", \"\\n              ?disabled=\", \"\\n              .startDate=\", \"\\n              .endDate=\", \"\\n              .ranges=\", \"\\n              @change=\", \"\\n            ></ha-date-range-picker>\\n            <ha-target-picker\\n              .hass=\", \"\\n              .value=\", \"\\n              .disabled=\", \"\\n              addOnTop\\n              @value-changed=\", \"\\n            ></ha-target-picker>\\n          </div>\\n          \", \"\\n        </div>\\n      </ha-top-app-bar-fixed>\\n    \"])), this._showBack ? (0,lit__WEBPACK_IMPORTED_MODULE_14__.html)(_templateObject2 || (_templateObject2 = (0,_babel_runtime_helpers_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_5__[\"default\"])([\"\\n              <ha-icon-button-arrow-prev\\n                slot=\\\"navigationIcon\\\"\\n                @click=\", \"\\n              ></ha-icon-button-arrow-prev>\\n            \"])), this._goBack) : (0,lit__WEBPACK_IMPORTED_MODULE_14__.html)(_templateObject3 || (_templateObject3 = (0,_babel_runtime_helpers_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_5__[\"default\"])([\"\\n              <ha-menu-button\\n                slot=\\\"navigationIcon\\\"\\n                .hass=\", \"\\n                .narrow=\", \"\\n              ></ha-menu-button>\\n            \"])), this.hass, this.narrow), this.hass.localize(\"panel.history\"), this._targetPickerValue ? (0,lit__WEBPACK_IMPORTED_MODULE_14__.html)(_templateObject4 || (_templateObject4 = (0,_babel_runtime_helpers_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_5__[\"default\"])([\"\\n              <ha-icon-button\\n                slot=\\\"actionItems\\\"\\n                @click=\", \"\\n                .disabled=\", \"\\n                .path=\", \"\\n                .label=\", \"\\n              ></ha-icon-button>\\n            \"])), this._removeAll, this._isLoading, mdiFilterRemove, this.hass.localize(\"ui.panel.history.remove_all\")) : \"\", this._getHistory, this._isLoading || !this._targetPickerValue, mdiRefresh, this.hass.localize(\"ui.common.refresh\"), this.hass, this._isLoading, this._startDate, this._endDate, this._ranges, this._dateRangeChanged, this.hass, this._targetPickerValue, this._isLoading, this._targetsChanged, this._isLoading ? (0,lit__WEBPACK_IMPORTED_MODULE_14__.html)(_templateObject5 || (_templateObject5 = (0,_babel_runtime_helpers_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_5__[\"default\"])([\"<div class=\\\"progress-wrapper\\\">\\n                <ha-circular-progress\\n                  active\\n                  alt=\", \"\\n                ></ha-circular-progress>\\n              </div>\"])), this.hass.localize(\"ui.common.loading\")) : !this._targetPickerValue ? (0,lit__WEBPACK_IMPORTED_MODULE_14__.html)(_templateObject6 || (_templateObject6 = (0,_babel_runtime_helpers_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_5__[\"default\"])([\"<div class=\\\"start-search\\\">\\n                \", \"\\n              </div>\"])), this.hass.localize(\"ui.panel.history.start_search\")) : (0,lit__WEBPACK_IMPORTED_MODULE_14__.html)(_templateObject7 || (_templateObject7 = (0,_babel_runtime_helpers_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_5__[\"default\"])([\"\\n                <state-history-charts\\n                  .hass=\", \"\\n                  .historyData=\", \"\\n                  .endTime=\", \"\\n                >\\n                </state-history-charts>\\n              \"])), this.hass, this._stateHistory, this._endDate));\n      }\n    }, {\n      kind: \"method\",\n      key: \"willUpdate\",\n      value: function willUpdate(changedProps) {\n        var _this$_ranges;\n        (0,_babel_runtime_helpers_get__WEBPACK_IMPORTED_MODULE_12__[\"default\"])((0,_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_13__[\"default\"])(HaPanelHistory.prototype), \"willUpdate\", this).call(this, changedProps);\n        if (this.hasUpdated) {\n          return;\n        }\n        var today = new Date();\n        var weekStartsOn = (0,_common_datetime_first_weekday__WEBPACK_IMPORTED_MODULE_17__.firstWeekdayIndex)(this.hass.locale);\n        var weekStart = (0,date_fns_esm__WEBPACK_IMPORTED_MODULE_38__[\"default\"])(today, {\n          weekStartsOn: weekStartsOn\n        });\n        var weekEnd = (0,date_fns_esm__WEBPACK_IMPORTED_MODULE_39__[\"default\"])(today, {\n          weekStartsOn: weekStartsOn\n        });\n        this._ranges = (_this$_ranges = {}, (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(_this$_ranges, this.hass.localize(\"ui.components.date-range-picker.ranges.today\"), [(0,date_fns_esm__WEBPACK_IMPORTED_MODULE_40__[\"default\"])(), (0,date_fns_esm__WEBPACK_IMPORTED_MODULE_41__[\"default\"])()]), (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(_this$_ranges, this.hass.localize(\"ui.components.date-range-picker.ranges.yesterday\"), [(0,date_fns_esm__WEBPACK_IMPORTED_MODULE_42__[\"default\"])(), (0,date_fns_esm__WEBPACK_IMPORTED_MODULE_43__[\"default\"])()]), (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(_this$_ranges, this.hass.localize(\"ui.components.date-range-picker.ranges.this_week\"), [weekStart, weekEnd]), (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(_this$_ranges, this.hass.localize(\"ui.components.date-range-picker.ranges.last_week\"), [(0,date_fns_esm__WEBPACK_IMPORTED_MODULE_44__[\"default\"])(weekStart, -7), (0,date_fns_esm__WEBPACK_IMPORTED_MODULE_44__[\"default\"])(weekEnd, -7)]), _this$_ranges);\n        var searchParams = (0,_common_url_search_params__WEBPACK_IMPORTED_MODULE_21__.extractSearchParamsObject)();\n        var entityIds = searchParams.entity_id;\n        var deviceIds = searchParams.device_id;\n        var areaIds = searchParams.area_id;\n        if (entityIds || deviceIds || areaIds) {\n          this._targetPickerValue = {};\n        }\n        if (entityIds) {\n          var splitIds = entityIds.split(\",\");\n          this._targetPickerValue.entity_id = splitIds;\n        }\n        if (deviceIds) {\n          var _splitIds = deviceIds.split(\",\");\n          this._targetPickerValue.device_id = _splitIds;\n        }\n        if (areaIds) {\n          var _splitIds2 = areaIds.split(\",\");\n          this._targetPickerValue.area_id = _splitIds2;\n        }\n        var startDate = searchParams.start_date;\n        if (startDate) {\n          this._startDate = new Date(startDate);\n        }\n        var endDate = searchParams.end_date;\n        if (endDate) {\n          this._endDate = new Date(endDate);\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"firstUpdated\",\n      value: function firstUpdated(changedProps) {\n        (0,_babel_runtime_helpers_get__WEBPACK_IMPORTED_MODULE_12__[\"default\"])((0,_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_13__[\"default\"])(HaPanelHistory.prototype), \"firstUpdated\", this).call(this, changedProps);\n        var searchParams = (0,_common_url_search_params__WEBPACK_IMPORTED_MODULE_21__.extractSearchParamsObject)();\n        if (searchParams.back === \"1\" && history.length > 1) {\n          this._showBack = true;\n          (0,_common_navigate__WEBPACK_IMPORTED_MODULE_19__.navigate)((0,_common_url_construct_url__WEBPACK_IMPORTED_MODULE_20__.constructUrlCurrentPath)((0,_common_url_search_params__WEBPACK_IMPORTED_MODULE_21__.removeSearchParam)(\"back\")), {\n            replace: true\n          });\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"updated\",\n      value: function updated(changedProps) {\n        if (this._targetPickerValue && (changedProps.has(\"_startDate\") || changedProps.has(\"_endDate\") || changedProps.has(\"_targetPickerValue\") || !this._stateHistory && (changedProps.has(\"_deviceEntityLookup\") || changedProps.has(\"_areaEntityLookup\") || changedProps.has(\"_areaDeviceLookup\")))) {\n          this._getHistory();\n        }\n        if (!changedProps.has(\"hass\") && !changedProps.has(\"_entities\")) {\n          return;\n        }\n        var oldHass = changedProps.get(\"hass\");\n        if (!oldHass || oldHass.language !== this.hass.language) {\n          this.rtl = (0,_common_util_compute_rtl__WEBPACK_IMPORTED_MODULE_22__.computeRTL)(this.hass);\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"_removeAll\",\n      value: function _removeAll() {\n        this._targetPickerValue = undefined;\n        this._updatePath();\n      }\n    }, {\n      kind: \"method\",\n      key: \"_getHistory\",\n      value: function () {\n        var _getHistory2 = (0,_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__[\"default\"])( /*#__PURE__*/(0,_babel_runtime_helpers_regeneratorRuntime__WEBPACK_IMPORTED_MODULE_2__[\"default\"])().mark(function _callee() {\n          var _this3 = this;\n          var entityIds, now;\n          return (0,_babel_runtime_helpers_regeneratorRuntime__WEBPACK_IMPORTED_MODULE_2__[\"default\"])().wrap(function _callee$(_context) {\n            while (1) switch (_context.prev = _context.next) {\n              case 0:\n                if (this._targetPickerValue) {\n                  _context.next = 2;\n                  break;\n                }\n                return _context.abrupt(\"return\");\n              case 2:\n                this._isLoading = true;\n                entityIds = this._getEntityIds();\n                if (!(entityIds === undefined)) {\n                  _context.next = 8;\n                  break;\n                }\n                this._isLoading = false;\n                this._stateHistory = undefined;\n                return _context.abrupt(\"return\");\n              case 8:\n                if (!(entityIds.length === 0)) {\n                  _context.next = 12;\n                  break;\n                }\n                this._isLoading = false;\n                this._stateHistory = {\n                  line: [],\n                  timeline: []\n                };\n                return _context.abrupt(\"return\");\n              case 12:\n                if (this._subscribed) {\n                  this._unsubscribeHistory();\n                }\n                now = new Date();\n                this._subscribed = (0,_data_history__WEBPACK_IMPORTED_MODULE_33__.subscribeHistory)(this.hass, function (history) {\n                  _this3._isLoading = false;\n                  _this3._stateHistory = (0,_data_history__WEBPACK_IMPORTED_MODULE_33__.computeHistory)(_this3.hass, history, _this3.hass.localize);\n                }, this._startDate, this._endDate, entityIds);\n                this._subscribed.catch(function () {\n                  _this3._isLoading = false;\n                  _this3._unsubscribeHistory();\n                });\n                if (this._endDate > now) {\n                  this._setRedrawTimer();\n                }\n              case 17:\n              case \"end\":\n                return _context.stop();\n            }\n          }, _callee, this);\n        }));\n        function _getHistory() {\n          return _getHistory2.apply(this, arguments);\n        }\n        return _getHistory;\n      }()\n    }, {\n      kind: \"method\",\n      key: \"_setRedrawTimer\",\n      value: function _setRedrawTimer() {\n        var _this4 = this;\n        clearInterval(this._interval);\n        var now = new Date();\n        var end = this._endDate > now ? now : this._endDate;\n        var timespan = (0,date_fns_esm__WEBPACK_IMPORTED_MODULE_45__[\"default\"])(end, this._startDate);\n        this._interval = window.setInterval(function () {\n          var _this4$_stateHistoryC;\n          return (_this4$_stateHistoryC = _this4._stateHistoryCharts) === null || _this4$_stateHistoryC === void 0 ? void 0 : _this4$_stateHistoryC.requestUpdate();\n        },\n        // if timespan smaller than 1 hour, update every 10 seconds, smaller than 5 hours, redraw every minute, otherwise every 5 minutes\n        timespan < 2 ? 10000 : timespan < 10 ? 60 * 1000 : _components_chart_ha_chart_base__WEBPACK_IMPORTED_MODULE_23__.MIN_TIME_BETWEEN_UPDATES);\n      }\n    }, {\n      kind: \"method\",\n      key: \"_unsubscribeHistory\",\n      value: function _unsubscribeHistory() {\n        if (this._interval) {\n          clearInterval(this._interval);\n          this._interval = undefined;\n        }\n        if (this._subscribed) {\n          this._subscribed.then(function (unsub) {\n            return unsub === null || unsub === void 0 ? void 0 : unsub();\n          });\n          this._subscribed = undefined;\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"_getEntityIds\",\n      value: function _getEntityIds() {\n        if (!this._targetPickerValue || this._deviceEntityLookup === undefined || this._areaEntityLookup === undefined || this._areaDeviceLookup === undefined) {\n          return undefined;\n        }\n        var entityIds = new Set();\n        var _this$_targetPickerVa = this._targetPickerValue,\n          searchingAreaId = _this$_targetPickerVa.area_id,\n          searchingDeviceId = _this$_targetPickerVa.device_id,\n          searchingEntityId = _this$_targetPickerVa.entity_id;\n        if (searchingAreaId) {\n          searchingAreaId = (0,_common_array_ensure_array__WEBPACK_IMPORTED_MODULE_16__.ensureArray)(searchingAreaId);\n          var _iterator = (0,_babel_runtime_helpers_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(searchingAreaId),\n            _step;\n          try {\n            for (_iterator.s(); !(_step = _iterator.n()).done;) {\n              var singleSearchingAreaId = _step.value;\n              var foundEntities = this._areaEntityLookup[singleSearchingAreaId];\n              if (foundEntities !== null && foundEntities !== void 0 && foundEntities.length) {\n                var _iterator2 = (0,_babel_runtime_helpers_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(foundEntities),\n                  _step2;\n                try {\n                  for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n                    var foundEntity = _step2.value;\n                    if (foundEntity.entity_category === null) {\n                      entityIds.add(foundEntity.entity_id);\n                    }\n                  }\n                } catch (err) {\n                  _iterator2.e(err);\n                } finally {\n                  _iterator2.f();\n                }\n              }\n              var foundDevices = this._areaDeviceLookup[singleSearchingAreaId];\n              if (!(foundDevices !== null && foundDevices !== void 0 && foundDevices.length)) {\n                continue;\n              }\n              var _iterator3 = (0,_babel_runtime_helpers_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(foundDevices),\n                _step3;\n              try {\n                for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n                  var foundDevice = _step3.value;\n                  var foundDeviceEntities = this._deviceEntityLookup[foundDevice.id];\n                  if (!(foundDeviceEntities !== null && foundDeviceEntities !== void 0 && foundDeviceEntities.length)) {\n                    continue;\n                  }\n                  var _iterator4 = (0,_babel_runtime_helpers_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(foundDeviceEntities),\n                    _step4;\n                  try {\n                    for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n                      var foundDeviceEntity = _step4.value;\n                      if ((!foundDeviceEntity.area_id || foundDeviceEntity.area_id === singleSearchingAreaId) && foundDeviceEntity.entity_category === null) {\n                        entityIds.add(foundDeviceEntity.entity_id);\n                      }\n                    }\n                  } catch (err) {\n                    _iterator4.e(err);\n                  } finally {\n                    _iterator4.f();\n                  }\n                }\n              } catch (err) {\n                _iterator3.e(err);\n              } finally {\n                _iterator3.f();\n              }\n            }\n          } catch (err) {\n            _iterator.e(err);\n          } finally {\n            _iterator.f();\n          }\n        }\n        if (searchingDeviceId) {\n          searchingDeviceId = (0,_common_array_ensure_array__WEBPACK_IMPORTED_MODULE_16__.ensureArray)(searchingDeviceId);\n          var _iterator5 = (0,_babel_runtime_helpers_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(searchingDeviceId),\n            _step5;\n          try {\n            for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n              var singleSearchingDeviceId = _step5.value;\n              var _foundEntities = this._deviceEntityLookup[singleSearchingDeviceId];\n              if (!(_foundEntities !== null && _foundEntities !== void 0 && _foundEntities.length)) {\n                continue;\n              }\n              var _iterator6 = (0,_babel_runtime_helpers_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(_foundEntities),\n                _step6;\n              try {\n                for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n                  var _foundEntity = _step6.value;\n                  if (_foundEntity.entity_category === null) {\n                    entityIds.add(_foundEntity.entity_id);\n                  }\n                }\n              } catch (err) {\n                _iterator6.e(err);\n              } finally {\n                _iterator6.f();\n              }\n            }\n          } catch (err) {\n            _iterator5.e(err);\n          } finally {\n            _iterator5.f();\n          }\n        }\n        if (searchingEntityId) {\n          searchingEntityId = (0,_common_array_ensure_array__WEBPACK_IMPORTED_MODULE_16__.ensureArray)(searchingEntityId);\n          var _iterator7 = (0,_babel_runtime_helpers_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(searchingEntityId),\n            _step7;\n          try {\n            for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {\n              var singleSearchingEntityId = _step7.value;\n              entityIds.add(singleSearchingEntityId);\n            }\n          } catch (err) {\n            _iterator7.e(err);\n          } finally {\n            _iterator7.f();\n          }\n        }\n        return (0,_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(entityIds);\n      }\n    }, {\n      kind: \"method\",\n      key: \"_dateRangeChanged\",\n      value: function _dateRangeChanged(ev) {\n        this._startDate = ev.detail.startDate;\n        var endDate = ev.detail.endDate;\n        if (endDate.getHours() === 0 && endDate.getMinutes() === 0) {\n          endDate.setDate(endDate.getDate() + 1);\n          endDate.setMilliseconds(endDate.getMilliseconds() - 1);\n        }\n        this._endDate = endDate;\n        this._updatePath();\n      }\n    }, {\n      kind: \"method\",\n      key: \"_targetsChanged\",\n      value: function _targetsChanged(ev) {\n        this._targetPickerValue = ev.detail.value;\n        this._updatePath();\n      }\n    }, {\n      kind: \"method\",\n      key: \"_updatePath\",\n      value: function _updatePath() {\n        var params = {};\n        if (this._targetPickerValue) {\n          if (this._targetPickerValue.entity_id) {\n            params.entity_id = (0,_common_array_ensure_array__WEBPACK_IMPORTED_MODULE_16__.ensureArray)(this._targetPickerValue.entity_id).join(\",\");\n          }\n          if (this._targetPickerValue.area_id) {\n            params.area_id = (0,_common_array_ensure_array__WEBPACK_IMPORTED_MODULE_16__.ensureArray)(this._targetPickerValue.area_id).join(\",\");\n          }\n          if (this._targetPickerValue.device_id) {\n            params.device_id = (0,_common_array_ensure_array__WEBPACK_IMPORTED_MODULE_16__.ensureArray)(this._targetPickerValue.device_id).join(\",\");\n          }\n        }\n        if (this._startDate) {\n          params.start_date = this._startDate.toISOString();\n        }\n        if (this._endDate) {\n          params.end_date = this._endDate.toISOString();\n        }\n        (0,_common_navigate__WEBPACK_IMPORTED_MODULE_19__.navigate)(\"/history?\".concat((0,_common_url_search_params__WEBPACK_IMPORTED_MODULE_21__.createSearchParam)(params)), {\n          replace: true\n        });\n      }\n    }, {\n      kind: \"get\",\n      static: true,\n      key: \"styles\",\n      value: function styles() {\n        return [_resources_styles__WEBPACK_IMPORTED_MODULE_35__.haStyle, (0,lit__WEBPACK_IMPORTED_MODULE_14__.css)(_templateObject8 || (_templateObject8 = (0,_babel_runtime_helpers_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_5__[\"default\"])([\"\\n        .content {\\n          padding: 0 16px 16px;\\n          padding-bottom: max(env(safe-area-inset-bottom), 16px);\\n        }\\n\\n        :host([virtualize]) {\\n          height: 100%;\\n        }\\n\\n        .progress-wrapper {\\n          position: relative;\\n          display: flex;\\n          align-items: center;\\n          flex-direction: column;\\n          padding: 16px;\\n        }\\n\\n        .filters {\\n          display: flex;\\n          align-items: flex-start;\\n          margin-top: 16px;\\n        }\\n\\n        ha-date-range-picker {\\n          margin-right: 16px;\\n          margin-inline-end: 16px;\\n          margin-inline-start: initial;\\n          max-width: 100%;\\n          direction: var(--direction);\\n        }\\n\\n        @media all and (max-width: 1025px) {\\n          .filters {\\n            flex-direction: column;\\n          }\\n          ha-date-range-picker {\\n            margin-right: 0;\\n            margin-inline-end: 0;\\n            width: 100%;\\n          }\\n        }\\n\\n        .start-search {\\n          padding-top: 16px;\\n          text-align: center;\\n          color: var(--secondary-text-color);\\n        }\\n      \"])))];\n      }\n    }]\n  };\n}, (0,_mixins_subscribe_mixin__WEBPACK_IMPORTED_MODULE_34__.SubscribeMixin)(lit__WEBPACK_IMPORTED_MODULE_14__.LitElement));\ncustomElements.define(\"ha-panel-history\", HaPanelHistory);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcGFuZWxzL2hpc3RvcnkvaGEtcGFuZWwtaGlzdG9yeS50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ0E7QUFjQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFLQTtBQUNBO0FBS0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQW9DQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBOUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBb0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUE0RUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFhQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQVVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUlBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFHQTtBQUNBO0FBS0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFNQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFNQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQW9EQTtBQUFBO0FBQUE7QUFBQTtBQUdBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaG9tZS1hc3Npc3RhbnQtZnJvbnRlbmQvLi9zcmMvcGFuZWxzL2hpc3RvcnkvaGEtcGFuZWwtaGlzdG9yeS50cz8wNTMyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IG1kaUZpbHRlclJlbW92ZSwgbWRpUmVmcmVzaCB9IGZyb20gXCJAbWRpL2pzXCI7XG5pbXBvcnQge1xuICBhZGREYXlzLFxuICBkaWZmZXJlbmNlSW5Ib3VycyxcbiAgZW5kT2ZUb2RheSxcbiAgZW5kT2ZXZWVrLFxuICBlbmRPZlllc3RlcmRheSxcbiAgc3RhcnRPZlRvZGF5LFxuICBzdGFydE9mV2VlayxcbiAgc3RhcnRPZlllc3RlcmRheSxcbn0gZnJvbSBcImRhdGUtZm5zL2VzbVwiO1xuaW1wb3J0IHtcbiAgSGFzc1NlcnZpY2VUYXJnZXQsXG4gIFVuc3Vic2NyaWJlRnVuYyxcbn0gZnJvbSBcImhvbWUtYXNzaXN0YW50LWpzLXdlYnNvY2tldC9kaXN0L3R5cGVzXCI7XG5pbXBvcnQgeyBjc3MsIGh0bWwsIExpdEVsZW1lbnQsIFByb3BlcnR5VmFsdWVzIH0gZnJvbSBcImxpdFwiO1xuaW1wb3J0IHsgcHJvcGVydHksIHF1ZXJ5LCBzdGF0ZSB9IGZyb20gXCJsaXQvZGVjb3JhdG9yc1wiO1xuaW1wb3J0IHsgZW5zdXJlQXJyYXkgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FycmF5L2Vuc3VyZS1hcnJheVwiO1xuaW1wb3J0IHsgZmlyc3RXZWVrZGF5SW5kZXggfSBmcm9tIFwiLi4vLi4vY29tbW9uL2RhdGV0aW1lL2ZpcnN0X3dlZWtkYXlcIjtcbmltcG9ydCB7IExvY2FsU3RvcmFnZSB9IGZyb20gXCIuLi8uLi9jb21tb24vZGVjb3JhdG9ycy9sb2NhbC1zdG9yYWdlXCI7XG5pbXBvcnQgeyBuYXZpZ2F0ZSB9IGZyb20gXCIuLi8uLi9jb21tb24vbmF2aWdhdGVcIjtcbmltcG9ydCB7IGNvbnN0cnVjdFVybEN1cnJlbnRQYXRoIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi91cmwvY29uc3RydWN0LXVybFwiO1xuaW1wb3J0IHtcbiAgY3JlYXRlU2VhcmNoUGFyYW0sXG4gIGV4dHJhY3RTZWFyY2hQYXJhbXNPYmplY3QsXG4gIHJlbW92ZVNlYXJjaFBhcmFtLFxufSBmcm9tIFwiLi4vLi4vY29tbW9uL3VybC9zZWFyY2gtcGFyYW1zXCI7XG5pbXBvcnQgeyBjb21wdXRlUlRMIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi91dGlsL2NvbXB1dGVfcnRsXCI7XG5pbXBvcnQgeyBNSU5fVElNRV9CRVRXRUVOX1VQREFURVMgfSBmcm9tIFwiLi4vLi4vY29tcG9uZW50cy9jaGFydC9oYS1jaGFydC1iYXNlXCI7XG5pbXBvcnQgXCIuLi8uLi9jb21wb25lbnRzL2NoYXJ0L3N0YXRlLWhpc3RvcnktY2hhcnRzXCI7XG5pbXBvcnQgdHlwZSB7IFN0YXRlSGlzdG9yeUNoYXJ0cyB9IGZyb20gXCIuLi8uLi9jb21wb25lbnRzL2NoYXJ0L3N0YXRlLWhpc3RvcnktY2hhcnRzXCI7XG5pbXBvcnQgXCIuLi8uLi9jb21wb25lbnRzL2hhLWNpcmN1bGFyLXByb2dyZXNzXCI7XG5pbXBvcnQgXCIuLi8uLi9jb21wb25lbnRzL2hhLWRhdGUtcmFuZ2UtcGlja2VyXCI7XG5pbXBvcnQgdHlwZSB7IERhdGVSYW5nZVBpY2tlclJhbmdlcyB9IGZyb20gXCIuLi8uLi9jb21wb25lbnRzL2hhLWRhdGUtcmFuZ2UtcGlja2VyXCI7XG5pbXBvcnQgXCIuLi8uLi9jb21wb25lbnRzL2hhLWljb24tYnV0dG9uXCI7XG5pbXBvcnQgXCIuLi8uLi9jb21wb25lbnRzL2hhLW1lbnUtYnV0dG9uXCI7XG5pbXBvcnQgXCIuLi8uLi9jb21wb25lbnRzL2hhLXRhcmdldC1waWNrZXJcIjtcbmltcG9ydCB7XG4gIEFyZWFEZXZpY2VMb29rdXAsXG4gIEFyZWFFbnRpdHlMb29rdXAsXG4gIGdldEFyZWFEZXZpY2VMb29rdXAsXG4gIGdldEFyZWFFbnRpdHlMb29rdXAsXG59IGZyb20gXCIuLi8uLi9kYXRhL2FyZWFfcmVnaXN0cnlcIjtcbmltcG9ydCB7XG4gIERldmljZUVudGl0eUxvb2t1cCxcbiAgZ2V0RGV2aWNlRW50aXR5TG9va3VwLFxuICBzdWJzY3JpYmVEZXZpY2VSZWdpc3RyeSxcbn0gZnJvbSBcIi4uLy4uL2RhdGEvZGV2aWNlX3JlZ2lzdHJ5XCI7XG5pbXBvcnQgeyBzdWJzY3JpYmVFbnRpdHlSZWdpc3RyeSB9IGZyb20gXCIuLi8uLi9kYXRhL2VudGl0eV9yZWdpc3RyeVwiO1xuaW1wb3J0IHtcbiAgY29tcHV0ZUhpc3RvcnksXG4gIEhpc3RvcnlSZXN1bHQsXG4gIHN1YnNjcmliZUhpc3RvcnksXG59IGZyb20gXCIuLi8uLi9kYXRhL2hpc3RvcnlcIjtcbmltcG9ydCB7IFN1YnNjcmliZU1peGluIH0gZnJvbSBcIi4uLy4uL21peGlucy9zdWJzY3JpYmUtbWl4aW5cIjtcbmltcG9ydCB7IGhhU3R5bGUgfSBmcm9tIFwiLi4vLi4vcmVzb3VyY2VzL3N0eWxlc1wiO1xuaW1wb3J0IHsgSG9tZUFzc2lzdGFudCB9IGZyb20gXCIuLi8uLi90eXBlc1wiO1xuaW1wb3J0IFwiLi4vLi4vY29tcG9uZW50cy9oYS10b3AtYXBwLWJhci1maXhlZFwiO1xuaW1wb3J0IFwiLi4vLi4vY29tcG9uZW50cy9oYS1pY29uLWJ1dHRvbi1hcnJvdy1wcmV2XCI7XG5cbmNsYXNzIEhhUGFuZWxIaXN0b3J5IGV4dGVuZHMgU3Vic2NyaWJlTWl4aW4oTGl0RWxlbWVudCkge1xuICBAcHJvcGVydHkoeyBhdHRyaWJ1dGU6IGZhbHNlIH0pIGhhc3MhOiBIb21lQXNzaXN0YW50O1xuXG4gIEBwcm9wZXJ0eSh7IHJlZmxlY3Q6IHRydWUsIHR5cGU6IEJvb2xlYW4gfSkgbmFycm93ITogYm9vbGVhbjtcblxuICBAcHJvcGVydHkoeyByZWZsZWN0OiB0cnVlLCB0eXBlOiBCb29sZWFuIH0pIHJ0bCA9IGZhbHNlO1xuXG4gIEBzdGF0ZSgpIHByaXZhdGUgX3N0YXJ0RGF0ZTogRGF0ZTtcblxuICBAc3RhdGUoKSBwcml2YXRlIF9lbmREYXRlOiBEYXRlO1xuXG4gIEBMb2NhbFN0b3JhZ2UoXCJoaXN0b3J5UGlja2VkVmFsdWVcIiwgdHJ1ZSwgZmFsc2UpXG4gIHByaXZhdGUgX3RhcmdldFBpY2tlclZhbHVlPzogSGFzc1NlcnZpY2VUYXJnZXQ7XG5cbiAgQHN0YXRlKCkgcHJpdmF0ZSBfaXNMb2FkaW5nID0gZmFsc2U7XG5cbiAgQHN0YXRlKCkgcHJpdmF0ZSBfc3RhdGVIaXN0b3J5PzogSGlzdG9yeVJlc3VsdDtcblxuICBAc3RhdGUoKSBwcml2YXRlIF9yYW5nZXM/OiBEYXRlUmFuZ2VQaWNrZXJSYW5nZXM7XG5cbiAgQHN0YXRlKCkgcHJpdmF0ZSBfZGV2aWNlRW50aXR5TG9va3VwPzogRGV2aWNlRW50aXR5TG9va3VwO1xuXG4gIEBzdGF0ZSgpIHByaXZhdGUgX2FyZWFFbnRpdHlMb29rdXA/OiBBcmVhRW50aXR5TG9va3VwO1xuXG4gIEBzdGF0ZSgpIHByaXZhdGUgX2FyZWFEZXZpY2VMb29rdXA/OiBBcmVhRGV2aWNlTG9va3VwO1xuXG4gIEBzdGF0ZSgpXG4gIHByaXZhdGUgX3Nob3dCYWNrPzogYm9vbGVhbjtcblxuICBAcXVlcnkoXCJzdGF0ZS1oaXN0b3J5LWNoYXJ0c1wiKVxuICBwcml2YXRlIF9zdGF0ZUhpc3RvcnlDaGFydHM/OiBTdGF0ZUhpc3RvcnlDaGFydHM7XG5cbiAgcHJpdmF0ZSBfc3Vic2NyaWJlZD86IFByb21pc2U8VW5zdWJzY3JpYmVGdW5jPjtcblxuICBwcml2YXRlIF9pbnRlcnZhbD86IG51bWJlcjtcblxuICBwdWJsaWMgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIGNvbnN0IHN0YXJ0ID0gbmV3IERhdGUoKTtcbiAgICBzdGFydC5zZXRIb3VycyhzdGFydC5nZXRIb3VycygpIC0gMSwgMCwgMCwgMCk7XG4gICAgdGhpcy5fc3RhcnREYXRlID0gc3RhcnQ7XG5cbiAgICBjb25zdCBlbmQgPSBuZXcgRGF0ZSgpO1xuICAgIGVuZC5zZXRIb3VycyhlbmQuZ2V0SG91cnMoKSArIDIsIDAsIDAsIDApO1xuICAgIHRoaXMuX2VuZERhdGUgPSBlbmQ7XG4gIH1cblxuICBwdWJsaWMgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICBpZiAodGhpcy5oYXNVcGRhdGVkKSB7XG4gICAgICB0aGlzLl9nZXRIaXN0b3J5KCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIHN1cGVyLmRpc2Nvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgdGhpcy5fdW5zdWJzY3JpYmVIaXN0b3J5KCk7XG4gIH1cblxuICBwdWJsaWMgaGFzc1N1YnNjcmliZSgpOiBVbnN1YnNjcmliZUZ1bmNbXSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIHN1YnNjcmliZUVudGl0eVJlZ2lzdHJ5KHRoaXMuaGFzcy5jb25uZWN0aW9uISwgKGVudGl0aWVzKSA9PiB7XG4gICAgICAgIHRoaXMuX2RldmljZUVudGl0eUxvb2t1cCA9IGdldERldmljZUVudGl0eUxvb2t1cChlbnRpdGllcyk7XG4gICAgICAgIHRoaXMuX2FyZWFFbnRpdHlMb29rdXAgPSBnZXRBcmVhRW50aXR5TG9va3VwKGVudGl0aWVzKTtcbiAgICAgIH0pLFxuICAgICAgc3Vic2NyaWJlRGV2aWNlUmVnaXN0cnkodGhpcy5oYXNzLmNvbm5lY3Rpb24hLCAoZGV2aWNlcykgPT4ge1xuICAgICAgICB0aGlzLl9hcmVhRGV2aWNlTG9va3VwID0gZ2V0QXJlYURldmljZUxvb2t1cChkZXZpY2VzKTtcbiAgICAgIH0pLFxuICAgIF07XG4gIH1cblxuICBwcml2YXRlIF9nb0JhY2soKTogdm9pZCB7XG4gICAgaGlzdG9yeS5iYWNrKCk7XG4gIH1cblxuICBwcm90ZWN0ZWQgcmVuZGVyKCkge1xuICAgIHJldHVybiBodG1sYFxuICAgICAgPGhhLXRvcC1hcHAtYmFyLWZpeGVkPlxuICAgICAgICAke3RoaXMuX3Nob3dCYWNrXG4gICAgICAgICAgPyBodG1sYFxuICAgICAgICAgICAgICA8aGEtaWNvbi1idXR0b24tYXJyb3ctcHJldlxuICAgICAgICAgICAgICAgIHNsb3Q9XCJuYXZpZ2F0aW9uSWNvblwiXG4gICAgICAgICAgICAgICAgQGNsaWNrPSR7dGhpcy5fZ29CYWNrfVxuICAgICAgICAgICAgICA+PC9oYS1pY29uLWJ1dHRvbi1hcnJvdy1wcmV2PlxuICAgICAgICAgICAgYFxuICAgICAgICAgIDogaHRtbGBcbiAgICAgICAgICAgICAgPGhhLW1lbnUtYnV0dG9uXG4gICAgICAgICAgICAgICAgc2xvdD1cIm5hdmlnYXRpb25JY29uXCJcbiAgICAgICAgICAgICAgICAuaGFzcz0ke3RoaXMuaGFzc31cbiAgICAgICAgICAgICAgICAubmFycm93PSR7dGhpcy5uYXJyb3d9XG4gICAgICAgICAgICAgID48L2hhLW1lbnUtYnV0dG9uPlxuICAgICAgICAgICAgYH1cbiAgICAgICAgPGRpdiBzbG90PVwidGl0bGVcIj4ke3RoaXMuaGFzcy5sb2NhbGl6ZShcInBhbmVsLmhpc3RvcnlcIil9PC9kaXY+XG4gICAgICAgICR7dGhpcy5fdGFyZ2V0UGlja2VyVmFsdWVcbiAgICAgICAgICA/IGh0bWxgXG4gICAgICAgICAgICAgIDxoYS1pY29uLWJ1dHRvblxuICAgICAgICAgICAgICAgIHNsb3Q9XCJhY3Rpb25JdGVtc1wiXG4gICAgICAgICAgICAgICAgQGNsaWNrPSR7dGhpcy5fcmVtb3ZlQWxsfVxuICAgICAgICAgICAgICAgIC5kaXNhYmxlZD0ke3RoaXMuX2lzTG9hZGluZ31cbiAgICAgICAgICAgICAgICAucGF0aD0ke21kaUZpbHRlclJlbW92ZX1cbiAgICAgICAgICAgICAgICAubGFiZWw9JHt0aGlzLmhhc3MubG9jYWxpemUoXCJ1aS5wYW5lbC5oaXN0b3J5LnJlbW92ZV9hbGxcIil9XG4gICAgICAgICAgICAgID48L2hhLWljb24tYnV0dG9uPlxuICAgICAgICAgICAgYFxuICAgICAgICAgIDogXCJcIn1cbiAgICAgICAgPGhhLWljb24tYnV0dG9uXG4gICAgICAgICAgc2xvdD1cImFjdGlvbkl0ZW1zXCJcbiAgICAgICAgICBAY2xpY2s9JHt0aGlzLl9nZXRIaXN0b3J5fVxuICAgICAgICAgIC5kaXNhYmxlZD0ke3RoaXMuX2lzTG9hZGluZyB8fCAhdGhpcy5fdGFyZ2V0UGlja2VyVmFsdWV9XG4gICAgICAgICAgLnBhdGg9JHttZGlSZWZyZXNofVxuICAgICAgICAgIC5sYWJlbD0ke3RoaXMuaGFzcy5sb2NhbGl6ZShcInVpLmNvbW1vbi5yZWZyZXNoXCIpfVxuICAgICAgICA+PC9oYS1pY29uLWJ1dHRvbj5cblxuICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleCBjb250ZW50XCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImZpbHRlcnNcIj5cbiAgICAgICAgICAgIDxoYS1kYXRlLXJhbmdlLXBpY2tlclxuICAgICAgICAgICAgICAuaGFzcz0ke3RoaXMuaGFzc31cbiAgICAgICAgICAgICAgP2Rpc2FibGVkPSR7dGhpcy5faXNMb2FkaW5nfVxuICAgICAgICAgICAgICAuc3RhcnREYXRlPSR7dGhpcy5fc3RhcnREYXRlfVxuICAgICAgICAgICAgICAuZW5kRGF0ZT0ke3RoaXMuX2VuZERhdGV9XG4gICAgICAgICAgICAgIC5yYW5nZXM9JHt0aGlzLl9yYW5nZXN9XG4gICAgICAgICAgICAgIEBjaGFuZ2U9JHt0aGlzLl9kYXRlUmFuZ2VDaGFuZ2VkfVxuICAgICAgICAgICAgPjwvaGEtZGF0ZS1yYW5nZS1waWNrZXI+XG4gICAgICAgICAgICA8aGEtdGFyZ2V0LXBpY2tlclxuICAgICAgICAgICAgICAuaGFzcz0ke3RoaXMuaGFzc31cbiAgICAgICAgICAgICAgLnZhbHVlPSR7dGhpcy5fdGFyZ2V0UGlja2VyVmFsdWV9XG4gICAgICAgICAgICAgIC5kaXNhYmxlZD0ke3RoaXMuX2lzTG9hZGluZ31cbiAgICAgICAgICAgICAgYWRkT25Ub3BcbiAgICAgICAgICAgICAgQHZhbHVlLWNoYW5nZWQ9JHt0aGlzLl90YXJnZXRzQ2hhbmdlZH1cbiAgICAgICAgICAgID48L2hhLXRhcmdldC1waWNrZXI+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgJHt0aGlzLl9pc0xvYWRpbmdcbiAgICAgICAgICAgID8gaHRtbGA8ZGl2IGNsYXNzPVwicHJvZ3Jlc3Mtd3JhcHBlclwiPlxuICAgICAgICAgICAgICAgIDxoYS1jaXJjdWxhci1wcm9ncmVzc1xuICAgICAgICAgICAgICAgICAgYWN0aXZlXG4gICAgICAgICAgICAgICAgICBhbHQ9JHt0aGlzLmhhc3MubG9jYWxpemUoXCJ1aS5jb21tb24ubG9hZGluZ1wiKX1cbiAgICAgICAgICAgICAgICA+PC9oYS1jaXJjdWxhci1wcm9ncmVzcz5cbiAgICAgICAgICAgICAgPC9kaXY+YFxuICAgICAgICAgICAgOiAhdGhpcy5fdGFyZ2V0UGlja2VyVmFsdWVcbiAgICAgICAgICAgID8gaHRtbGA8ZGl2IGNsYXNzPVwic3RhcnQtc2VhcmNoXCI+XG4gICAgICAgICAgICAgICAgJHt0aGlzLmhhc3MubG9jYWxpemUoXCJ1aS5wYW5lbC5oaXN0b3J5LnN0YXJ0X3NlYXJjaFwiKX1cbiAgICAgICAgICAgICAgPC9kaXY+YFxuICAgICAgICAgICAgOiBodG1sYFxuICAgICAgICAgICAgICAgIDxzdGF0ZS1oaXN0b3J5LWNoYXJ0c1xuICAgICAgICAgICAgICAgICAgLmhhc3M9JHt0aGlzLmhhc3N9XG4gICAgICAgICAgICAgICAgICAuaGlzdG9yeURhdGE9JHt0aGlzLl9zdGF0ZUhpc3Rvcnl9XG4gICAgICAgICAgICAgICAgICAuZW5kVGltZT0ke3RoaXMuX2VuZERhdGV9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDwvc3RhdGUtaGlzdG9yeS1jaGFydHM+XG4gICAgICAgICAgICAgIGB9XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9oYS10b3AtYXBwLWJhci1maXhlZD5cbiAgICBgO1xuICB9XG5cbiAgcHVibGljIHdpbGxVcGRhdGUoY2hhbmdlZFByb3BzOiBQcm9wZXJ0eVZhbHVlcykge1xuICAgIHN1cGVyLndpbGxVcGRhdGUoY2hhbmdlZFByb3BzKTtcblxuICAgIGlmICh0aGlzLmhhc1VwZGF0ZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7XG4gICAgY29uc3Qgd2Vla1N0YXJ0c09uID0gZmlyc3RXZWVrZGF5SW5kZXgodGhpcy5oYXNzLmxvY2FsZSk7XG4gICAgY29uc3Qgd2Vla1N0YXJ0ID0gc3RhcnRPZldlZWsodG9kYXksIHsgd2Vla1N0YXJ0c09uIH0pO1xuICAgIGNvbnN0IHdlZWtFbmQgPSBlbmRPZldlZWsodG9kYXksIHsgd2Vla1N0YXJ0c09uIH0pO1xuXG4gICAgdGhpcy5fcmFuZ2VzID0ge1xuICAgICAgW3RoaXMuaGFzcy5sb2NhbGl6ZShcInVpLmNvbXBvbmVudHMuZGF0ZS1yYW5nZS1waWNrZXIucmFuZ2VzLnRvZGF5XCIpXTogW1xuICAgICAgICBzdGFydE9mVG9kYXkoKSxcbiAgICAgICAgZW5kT2ZUb2RheSgpLFxuICAgICAgXSxcbiAgICAgIFt0aGlzLmhhc3MubG9jYWxpemUoXCJ1aS5jb21wb25lbnRzLmRhdGUtcmFuZ2UtcGlja2VyLnJhbmdlcy55ZXN0ZXJkYXlcIildOlxuICAgICAgICBbc3RhcnRPZlllc3RlcmRheSgpLCBlbmRPZlllc3RlcmRheSgpXSxcbiAgICAgIFt0aGlzLmhhc3MubG9jYWxpemUoXCJ1aS5jb21wb25lbnRzLmRhdGUtcmFuZ2UtcGlja2VyLnJhbmdlcy50aGlzX3dlZWtcIildOlxuICAgICAgICBbd2Vla1N0YXJ0LCB3ZWVrRW5kXSxcbiAgICAgIFt0aGlzLmhhc3MubG9jYWxpemUoXCJ1aS5jb21wb25lbnRzLmRhdGUtcmFuZ2UtcGlja2VyLnJhbmdlcy5sYXN0X3dlZWtcIildOlxuICAgICAgICBbYWRkRGF5cyh3ZWVrU3RhcnQsIC03KSwgYWRkRGF5cyh3ZWVrRW5kLCAtNyldLFxuICAgIH07XG5cbiAgICBjb25zdCBzZWFyY2hQYXJhbXMgPSBleHRyYWN0U2VhcmNoUGFyYW1zT2JqZWN0KCk7XG4gICAgY29uc3QgZW50aXR5SWRzID0gc2VhcmNoUGFyYW1zLmVudGl0eV9pZDtcbiAgICBjb25zdCBkZXZpY2VJZHMgPSBzZWFyY2hQYXJhbXMuZGV2aWNlX2lkO1xuICAgIGNvbnN0IGFyZWFJZHMgPSBzZWFyY2hQYXJhbXMuYXJlYV9pZDtcbiAgICBpZiAoZW50aXR5SWRzIHx8IGRldmljZUlkcyB8fCBhcmVhSWRzKSB7XG4gICAgICB0aGlzLl90YXJnZXRQaWNrZXJWYWx1ZSA9IHt9O1xuICAgIH1cbiAgICBpZiAoZW50aXR5SWRzKSB7XG4gICAgICBjb25zdCBzcGxpdElkcyA9IGVudGl0eUlkcy5zcGxpdChcIixcIik7XG4gICAgICB0aGlzLl90YXJnZXRQaWNrZXJWYWx1ZSEuZW50aXR5X2lkID0gc3BsaXRJZHM7XG4gICAgfVxuICAgIGlmIChkZXZpY2VJZHMpIHtcbiAgICAgIGNvbnN0IHNwbGl0SWRzID0gZGV2aWNlSWRzLnNwbGl0KFwiLFwiKTtcbiAgICAgIHRoaXMuX3RhcmdldFBpY2tlclZhbHVlIS5kZXZpY2VfaWQgPSBzcGxpdElkcztcbiAgICB9XG4gICAgaWYgKGFyZWFJZHMpIHtcbiAgICAgIGNvbnN0IHNwbGl0SWRzID0gYXJlYUlkcy5zcGxpdChcIixcIik7XG4gICAgICB0aGlzLl90YXJnZXRQaWNrZXJWYWx1ZSEuYXJlYV9pZCA9IHNwbGl0SWRzO1xuICAgIH1cblxuICAgIGNvbnN0IHN0YXJ0RGF0ZSA9IHNlYXJjaFBhcmFtcy5zdGFydF9kYXRlO1xuICAgIGlmIChzdGFydERhdGUpIHtcbiAgICAgIHRoaXMuX3N0YXJ0RGF0ZSA9IG5ldyBEYXRlKHN0YXJ0RGF0ZSk7XG4gICAgfVxuICAgIGNvbnN0IGVuZERhdGUgPSBzZWFyY2hQYXJhbXMuZW5kX2RhdGU7XG4gICAgaWYgKGVuZERhdGUpIHtcbiAgICAgIHRoaXMuX2VuZERhdGUgPSBuZXcgRGF0ZShlbmREYXRlKTtcbiAgICB9XG4gIH1cblxuICBwcm90ZWN0ZWQgZmlyc3RVcGRhdGVkKGNoYW5nZWRQcm9wczogUHJvcGVydHlWYWx1ZXMpIHtcbiAgICBzdXBlci5maXJzdFVwZGF0ZWQoY2hhbmdlZFByb3BzKTtcbiAgICBjb25zdCBzZWFyY2hQYXJhbXMgPSBleHRyYWN0U2VhcmNoUGFyYW1zT2JqZWN0KCk7XG4gICAgaWYgKHNlYXJjaFBhcmFtcy5iYWNrID09PSBcIjFcIiAmJiBoaXN0b3J5Lmxlbmd0aCA+IDEpIHtcbiAgICAgIHRoaXMuX3Nob3dCYWNrID0gdHJ1ZTtcbiAgICAgIG5hdmlnYXRlKGNvbnN0cnVjdFVybEN1cnJlbnRQYXRoKHJlbW92ZVNlYXJjaFBhcmFtKFwiYmFja1wiKSksIHtcbiAgICAgICAgcmVwbGFjZTogdHJ1ZSxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHByb3RlY3RlZCB1cGRhdGVkKGNoYW5nZWRQcm9wczogUHJvcGVydHlWYWx1ZXMpIHtcbiAgICBpZiAoXG4gICAgICB0aGlzLl90YXJnZXRQaWNrZXJWYWx1ZSAmJlxuICAgICAgKGNoYW5nZWRQcm9wcy5oYXMoXCJfc3RhcnREYXRlXCIpIHx8XG4gICAgICAgIGNoYW5nZWRQcm9wcy5oYXMoXCJfZW5kRGF0ZVwiKSB8fFxuICAgICAgICBjaGFuZ2VkUHJvcHMuaGFzKFwiX3RhcmdldFBpY2tlclZhbHVlXCIpIHx8XG4gICAgICAgICghdGhpcy5fc3RhdGVIaXN0b3J5ICYmXG4gICAgICAgICAgKGNoYW5nZWRQcm9wcy5oYXMoXCJfZGV2aWNlRW50aXR5TG9va3VwXCIpIHx8XG4gICAgICAgICAgICBjaGFuZ2VkUHJvcHMuaGFzKFwiX2FyZWFFbnRpdHlMb29rdXBcIikgfHxcbiAgICAgICAgICAgIGNoYW5nZWRQcm9wcy5oYXMoXCJfYXJlYURldmljZUxvb2t1cFwiKSkpKVxuICAgICkge1xuICAgICAgdGhpcy5fZ2V0SGlzdG9yeSgpO1xuICAgIH1cblxuICAgIGlmICghY2hhbmdlZFByb3BzLmhhcyhcImhhc3NcIikgJiYgIWNoYW5nZWRQcm9wcy5oYXMoXCJfZW50aXRpZXNcIikpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBvbGRIYXNzID0gY2hhbmdlZFByb3BzLmdldChcImhhc3NcIikgYXMgSG9tZUFzc2lzdGFudCB8IHVuZGVmaW5lZDtcbiAgICBpZiAoIW9sZEhhc3MgfHwgb2xkSGFzcy5sYW5ndWFnZSAhPT0gdGhpcy5oYXNzLmxhbmd1YWdlKSB7XG4gICAgICB0aGlzLnJ0bCA9IGNvbXB1dGVSVEwodGhpcy5oYXNzKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9yZW1vdmVBbGwoKSB7XG4gICAgdGhpcy5fdGFyZ2V0UGlja2VyVmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fdXBkYXRlUGF0aCgpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBfZ2V0SGlzdG9yeSgpIHtcbiAgICBpZiAoIXRoaXMuX3RhcmdldFBpY2tlclZhbHVlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX2lzTG9hZGluZyA9IHRydWU7XG4gICAgY29uc3QgZW50aXR5SWRzID0gdGhpcy5fZ2V0RW50aXR5SWRzKCk7XG5cbiAgICBpZiAoZW50aXR5SWRzID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuX2lzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgdGhpcy5fc3RhdGVIaXN0b3J5ID0gdW5kZWZpbmVkO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChlbnRpdHlJZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aGlzLl9pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICAgIHRoaXMuX3N0YXRlSGlzdG9yeSA9IHsgbGluZTogW10sIHRpbWVsaW5lOiBbXSB9O1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9zdWJzY3JpYmVkKSB7XG4gICAgICB0aGlzLl91bnN1YnNjcmliZUhpc3RvcnkoKTtcbiAgICB9XG5cbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuXG4gICAgdGhpcy5fc3Vic2NyaWJlZCA9IHN1YnNjcmliZUhpc3RvcnkoXG4gICAgICB0aGlzLmhhc3MsXG4gICAgICAoaGlzdG9yeSkgPT4ge1xuICAgICAgICB0aGlzLl9pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fc3RhdGVIaXN0b3J5ID0gY29tcHV0ZUhpc3RvcnkoXG4gICAgICAgICAgdGhpcy5oYXNzLFxuICAgICAgICAgIGhpc3RvcnksXG4gICAgICAgICAgdGhpcy5oYXNzLmxvY2FsaXplXG4gICAgICAgICk7XG4gICAgICB9LFxuICAgICAgdGhpcy5fc3RhcnREYXRlLFxuICAgICAgdGhpcy5fZW5kRGF0ZSxcbiAgICAgIGVudGl0eUlkc1xuICAgICk7XG4gICAgdGhpcy5fc3Vic2NyaWJlZC5jYXRjaCgoKSA9PiB7XG4gICAgICB0aGlzLl9pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICAgIHRoaXMuX3Vuc3Vic2NyaWJlSGlzdG9yeSgpO1xuICAgIH0pO1xuICAgIGlmICh0aGlzLl9lbmREYXRlID4gbm93KSB7XG4gICAgICB0aGlzLl9zZXRSZWRyYXdUaW1lcigpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX3NldFJlZHJhd1RpbWVyKCkge1xuICAgIGNsZWFySW50ZXJ2YWwodGhpcy5faW50ZXJ2YWwpO1xuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgY29uc3QgZW5kID0gdGhpcy5fZW5kRGF0ZSA+IG5vdyA/IG5vdyA6IHRoaXMuX2VuZERhdGU7XG4gICAgY29uc3QgdGltZXNwYW4gPSBkaWZmZXJlbmNlSW5Ib3VycyhlbmQsIHRoaXMuX3N0YXJ0RGF0ZSk7XG4gICAgdGhpcy5faW50ZXJ2YWwgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoXG4gICAgICAoKSA9PiB0aGlzLl9zdGF0ZUhpc3RvcnlDaGFydHM/LnJlcXVlc3RVcGRhdGUoKSxcbiAgICAgIC8vIGlmIHRpbWVzcGFuIHNtYWxsZXIgdGhhbiAxIGhvdXIsIHVwZGF0ZSBldmVyeSAxMCBzZWNvbmRzLCBzbWFsbGVyIHRoYW4gNSBob3VycywgcmVkcmF3IGV2ZXJ5IG1pbnV0ZSwgb3RoZXJ3aXNlIGV2ZXJ5IDUgbWludXRlc1xuICAgICAgdGltZXNwYW4gPCAyXG4gICAgICAgID8gMTAwMDBcbiAgICAgICAgOiB0aW1lc3BhbiA8IDEwXG4gICAgICAgID8gNjAgKiAxMDAwXG4gICAgICAgIDogTUlOX1RJTUVfQkVUV0VFTl9VUERBVEVTXG4gICAgKTtcbiAgfVxuXG4gIHByaXZhdGUgX3Vuc3Vic2NyaWJlSGlzdG9yeSgpIHtcbiAgICBpZiAodGhpcy5faW50ZXJ2YWwpIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5faW50ZXJ2YWwpO1xuICAgICAgdGhpcy5faW50ZXJ2YWwgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmICh0aGlzLl9zdWJzY3JpYmVkKSB7XG4gICAgICB0aGlzLl9zdWJzY3JpYmVkLnRoZW4oKHVuc3ViKSA9PiB1bnN1Yj8uKCkpO1xuICAgICAgdGhpcy5fc3Vic2NyaWJlZCA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9nZXRFbnRpdHlJZHMoKTogc3RyaW5nW10gfCB1bmRlZmluZWQge1xuICAgIGlmIChcbiAgICAgICF0aGlzLl90YXJnZXRQaWNrZXJWYWx1ZSB8fFxuICAgICAgdGhpcy5fZGV2aWNlRW50aXR5TG9va3VwID09PSB1bmRlZmluZWQgfHxcbiAgICAgIHRoaXMuX2FyZWFFbnRpdHlMb29rdXAgPT09IHVuZGVmaW5lZCB8fFxuICAgICAgdGhpcy5fYXJlYURldmljZUxvb2t1cCA9PT0gdW5kZWZpbmVkXG4gICAgKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGNvbnN0IGVudGl0eUlkcyA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICAgIGxldCB7XG4gICAgICBhcmVhX2lkOiBzZWFyY2hpbmdBcmVhSWQsXG4gICAgICBkZXZpY2VfaWQ6IHNlYXJjaGluZ0RldmljZUlkLFxuICAgICAgZW50aXR5X2lkOiBzZWFyY2hpbmdFbnRpdHlJZCxcbiAgICB9ID0gdGhpcy5fdGFyZ2V0UGlja2VyVmFsdWU7XG5cbiAgICBpZiAoc2VhcmNoaW5nQXJlYUlkKSB7XG4gICAgICBzZWFyY2hpbmdBcmVhSWQgPSBlbnN1cmVBcnJheShzZWFyY2hpbmdBcmVhSWQpO1xuICAgICAgZm9yIChjb25zdCBzaW5nbGVTZWFyY2hpbmdBcmVhSWQgb2Ygc2VhcmNoaW5nQXJlYUlkKSB7XG4gICAgICAgIGNvbnN0IGZvdW5kRW50aXRpZXMgPSB0aGlzLl9hcmVhRW50aXR5TG9va3VwW3NpbmdsZVNlYXJjaGluZ0FyZWFJZF07XG4gICAgICAgIGlmIChmb3VuZEVudGl0aWVzPy5sZW5ndGgpIHtcbiAgICAgICAgICBmb3IgKGNvbnN0IGZvdW5kRW50aXR5IG9mIGZvdW5kRW50aXRpZXMpIHtcbiAgICAgICAgICAgIGlmIChmb3VuZEVudGl0eS5lbnRpdHlfY2F0ZWdvcnkgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgZW50aXR5SWRzLmFkZChmb3VuZEVudGl0eS5lbnRpdHlfaWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGZvdW5kRGV2aWNlcyA9IHRoaXMuX2FyZWFEZXZpY2VMb29rdXBbc2luZ2xlU2VhcmNoaW5nQXJlYUlkXTtcbiAgICAgICAgaWYgKCFmb3VuZERldmljZXM/Lmxlbmd0aCkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChjb25zdCBmb3VuZERldmljZSBvZiBmb3VuZERldmljZXMpIHtcbiAgICAgICAgICBjb25zdCBmb3VuZERldmljZUVudGl0aWVzID0gdGhpcy5fZGV2aWNlRW50aXR5TG9va3VwW2ZvdW5kRGV2aWNlLmlkXTtcbiAgICAgICAgICBpZiAoIWZvdW5kRGV2aWNlRW50aXRpZXM/Lmxlbmd0aCkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZm9yIChjb25zdCBmb3VuZERldmljZUVudGl0eSBvZiBmb3VuZERldmljZUVudGl0aWVzKSB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICghZm91bmREZXZpY2VFbnRpdHkuYXJlYV9pZCB8fFxuICAgICAgICAgICAgICAgIGZvdW5kRGV2aWNlRW50aXR5LmFyZWFfaWQgPT09IHNpbmdsZVNlYXJjaGluZ0FyZWFJZCkgJiZcbiAgICAgICAgICAgICAgZm91bmREZXZpY2VFbnRpdHkuZW50aXR5X2NhdGVnb3J5ID09PSBudWxsXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgZW50aXR5SWRzLmFkZChmb3VuZERldmljZUVudGl0eS5lbnRpdHlfaWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChzZWFyY2hpbmdEZXZpY2VJZCkge1xuICAgICAgc2VhcmNoaW5nRGV2aWNlSWQgPSBlbnN1cmVBcnJheShzZWFyY2hpbmdEZXZpY2VJZCk7XG4gICAgICBmb3IgKGNvbnN0IHNpbmdsZVNlYXJjaGluZ0RldmljZUlkIG9mIHNlYXJjaGluZ0RldmljZUlkKSB7XG4gICAgICAgIGNvbnN0IGZvdW5kRW50aXRpZXMgPSB0aGlzLl9kZXZpY2VFbnRpdHlMb29rdXBbc2luZ2xlU2VhcmNoaW5nRGV2aWNlSWRdO1xuICAgICAgICBpZiAoIWZvdW5kRW50aXRpZXM/Lmxlbmd0aCkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChjb25zdCBmb3VuZEVudGl0eSBvZiBmb3VuZEVudGl0aWVzKSB7XG4gICAgICAgICAgaWYgKGZvdW5kRW50aXR5LmVudGl0eV9jYXRlZ29yeSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgZW50aXR5SWRzLmFkZChmb3VuZEVudGl0eS5lbnRpdHlfaWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChzZWFyY2hpbmdFbnRpdHlJZCkge1xuICAgICAgc2VhcmNoaW5nRW50aXR5SWQgPSBlbnN1cmVBcnJheShzZWFyY2hpbmdFbnRpdHlJZCk7XG4gICAgICBmb3IgKGNvbnN0IHNpbmdsZVNlYXJjaGluZ0VudGl0eUlkIG9mIHNlYXJjaGluZ0VudGl0eUlkKSB7XG4gICAgICAgIGVudGl0eUlkcy5hZGQoc2luZ2xlU2VhcmNoaW5nRW50aXR5SWQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBbLi4uZW50aXR5SWRzXTtcbiAgfVxuXG4gIHByaXZhdGUgX2RhdGVSYW5nZUNoYW5nZWQoZXYpIHtcbiAgICB0aGlzLl9zdGFydERhdGUgPSBldi5kZXRhaWwuc3RhcnREYXRlO1xuICAgIGNvbnN0IGVuZERhdGUgPSBldi5kZXRhaWwuZW5kRGF0ZTtcbiAgICBpZiAoZW5kRGF0ZS5nZXRIb3VycygpID09PSAwICYmIGVuZERhdGUuZ2V0TWludXRlcygpID09PSAwKSB7XG4gICAgICBlbmREYXRlLnNldERhdGUoZW5kRGF0ZS5nZXREYXRlKCkgKyAxKTtcbiAgICAgIGVuZERhdGUuc2V0TWlsbGlzZWNvbmRzKGVuZERhdGUuZ2V0TWlsbGlzZWNvbmRzKCkgLSAxKTtcbiAgICB9XG4gICAgdGhpcy5fZW5kRGF0ZSA9IGVuZERhdGU7XG5cbiAgICB0aGlzLl91cGRhdGVQYXRoKCk7XG4gIH1cblxuICBwcml2YXRlIF90YXJnZXRzQ2hhbmdlZChldikge1xuICAgIHRoaXMuX3RhcmdldFBpY2tlclZhbHVlID0gZXYuZGV0YWlsLnZhbHVlO1xuICAgIHRoaXMuX3VwZGF0ZVBhdGgoKTtcbiAgfVxuXG4gIHByaXZhdGUgX3VwZGF0ZVBhdGgoKSB7XG4gICAgY29uc3QgcGFyYW1zOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge307XG5cbiAgICBpZiAodGhpcy5fdGFyZ2V0UGlja2VyVmFsdWUpIHtcbiAgICAgIGlmICh0aGlzLl90YXJnZXRQaWNrZXJWYWx1ZS5lbnRpdHlfaWQpIHtcbiAgICAgICAgcGFyYW1zLmVudGl0eV9pZCA9IGVuc3VyZUFycmF5KHRoaXMuX3RhcmdldFBpY2tlclZhbHVlLmVudGl0eV9pZCkuam9pbihcbiAgICAgICAgICBcIixcIlxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuX3RhcmdldFBpY2tlclZhbHVlLmFyZWFfaWQpIHtcbiAgICAgICAgcGFyYW1zLmFyZWFfaWQgPSBlbnN1cmVBcnJheSh0aGlzLl90YXJnZXRQaWNrZXJWYWx1ZS5hcmVhX2lkKS5qb2luKFwiLFwiKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLl90YXJnZXRQaWNrZXJWYWx1ZS5kZXZpY2VfaWQpIHtcbiAgICAgICAgcGFyYW1zLmRldmljZV9pZCA9IGVuc3VyZUFycmF5KHRoaXMuX3RhcmdldFBpY2tlclZhbHVlLmRldmljZV9pZCkuam9pbihcbiAgICAgICAgICBcIixcIlxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLl9zdGFydERhdGUpIHtcbiAgICAgIHBhcmFtcy5zdGFydF9kYXRlID0gdGhpcy5fc3RhcnREYXRlLnRvSVNPU3RyaW5nKCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2VuZERhdGUpIHtcbiAgICAgIHBhcmFtcy5lbmRfZGF0ZSA9IHRoaXMuX2VuZERhdGUudG9JU09TdHJpbmcoKTtcbiAgICB9XG5cbiAgICBuYXZpZ2F0ZShgL2hpc3Rvcnk/JHtjcmVhdGVTZWFyY2hQYXJhbShwYXJhbXMpfWAsIHsgcmVwbGFjZTogdHJ1ZSB9KTtcbiAgfVxuXG4gIHN0YXRpYyBnZXQgc3R5bGVzKCkge1xuICAgIHJldHVybiBbXG4gICAgICBoYVN0eWxlLFxuICAgICAgY3NzYFxuICAgICAgICAuY29udGVudCB7XG4gICAgICAgICAgcGFkZGluZzogMCAxNnB4IDE2cHg7XG4gICAgICAgICAgcGFkZGluZy1ib3R0b206IG1heChlbnYoc2FmZS1hcmVhLWluc2V0LWJvdHRvbSksIDE2cHgpO1xuICAgICAgICB9XG5cbiAgICAgICAgOmhvc3QoW3ZpcnR1YWxpemVdKSB7XG4gICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICB9XG5cbiAgICAgICAgLnByb2dyZXNzLXdyYXBwZXIge1xuICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICBwYWRkaW5nOiAxNnB4O1xuICAgICAgICB9XG5cbiAgICAgICAgLmZpbHRlcnMge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgYWxpZ24taXRlbXM6IGZsZXgtc3RhcnQ7XG4gICAgICAgICAgbWFyZ2luLXRvcDogMTZweDtcbiAgICAgICAgfVxuXG4gICAgICAgIGhhLWRhdGUtcmFuZ2UtcGlja2VyIHtcbiAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDE2cHg7XG4gICAgICAgICAgbWFyZ2luLWlubGluZS1lbmQ6IDE2cHg7XG4gICAgICAgICAgbWFyZ2luLWlubGluZS1zdGFydDogaW5pdGlhbDtcbiAgICAgICAgICBtYXgtd2lkdGg6IDEwMCU7XG4gICAgICAgICAgZGlyZWN0aW9uOiB2YXIoLS1kaXJlY3Rpb24pO1xuICAgICAgICB9XG5cbiAgICAgICAgQG1lZGlhIGFsbCBhbmQgKG1heC13aWR0aDogMTAyNXB4KSB7XG4gICAgICAgICAgLmZpbHRlcnMge1xuICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICB9XG4gICAgICAgICAgaGEtZGF0ZS1yYW5nZS1waWNrZXIge1xuICAgICAgICAgICAgbWFyZ2luLXJpZ2h0OiAwO1xuICAgICAgICAgICAgbWFyZ2luLWlubGluZS1lbmQ6IDA7XG4gICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAuc3RhcnQtc2VhcmNoIHtcbiAgICAgICAgICBwYWRkaW5nLXRvcDogMTZweDtcbiAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXNlY29uZGFyeS10ZXh0LWNvbG9yKTtcbiAgICAgICAgfVxuICAgICAgYCxcbiAgICBdO1xuICB9XG59XG5cbmN1c3RvbUVsZW1lbnRzLmRlZmluZShcImhhLXBhbmVsLWhpc3RvcnlcIiwgSGFQYW5lbEhpc3RvcnkpO1xuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIGludGVyZmFjZSBIVE1MRWxlbWVudFRhZ05hbWVNYXAge1xuICAgIFwiaGEtcGFuZWwtaGlzdG9yeVwiOiBIYVBhbmVsSGlzdG9yeTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/panels/history/ha-panel-history.ts\n");

/***/ })

}]);