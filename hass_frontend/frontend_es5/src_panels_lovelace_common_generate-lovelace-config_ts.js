"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkhome_assistant_frontend"] = self["webpackChunkhome_assistant_frontend"] || []).push([["src_panels_lovelace_common_generate-lovelace-config_ts"],{

/***/ "./src/common/entity/split_by_groups.ts":
/*!**********************************************!*\
  !*** ./src/common/entity/split_by_groups.ts ***!
  \**********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   splitByGroups: function() { return /* binding */ splitByGroups; }\n/* harmony export */ });\n/* harmony import */ var _compute_domain__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./compute_domain */ \"./src/common/entity/compute_domain.ts\");\n\n\n// Split a collection into a list of groups and a 'rest' list of ungrouped\n// entities.\n// Returns { groups: [], ungrouped: {} }\nvar splitByGroups = function splitByGroups(entities) {\n  var groups = [];\n  var ungrouped = {};\n  Object.keys(entities).forEach(function (entityId) {\n    var entity = entities[entityId];\n    if ((0,_compute_domain__WEBPACK_IMPORTED_MODULE_0__.computeDomain)(entityId) === \"group\") {\n      groups.push(entity);\n    } else {\n      ungrouped[entityId] = entity;\n    }\n  });\n  groups.forEach(function (group) {\n    return group.attributes.entity_id.forEach(function (entityId) {\n      delete ungrouped[entityId];\n    });\n  });\n  return {\n    groups: groups,\n    ungrouped: ungrouped\n  };\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tbW9uL2VudGl0eS9zcGxpdF9ieV9ncm91cHMudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUVBO0FBQ0E7QUFBQTtBQUdBO0FBQUE7QUFBQTtBQUFBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ob21lLWFzc2lzdGFudC1mcm9udGVuZC8uL3NyYy9jb21tb24vZW50aXR5L3NwbGl0X2J5X2dyb3Vwcy50cz80Njg3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEhhc3NFbnRpdGllcyB9IGZyb20gXCJob21lLWFzc2lzdGFudC1qcy13ZWJzb2NrZXRcIjtcbmltcG9ydCB7IEdyb3VwRW50aXR5IH0gZnJvbSBcIi4uLy4uL2RhdGEvZ3JvdXBcIjtcbmltcG9ydCB7IGNvbXB1dGVEb21haW4gfSBmcm9tIFwiLi9jb21wdXRlX2RvbWFpblwiO1xuXG4vLyBTcGxpdCBhIGNvbGxlY3Rpb24gaW50byBhIGxpc3Qgb2YgZ3JvdXBzIGFuZCBhICdyZXN0JyBsaXN0IG9mIHVuZ3JvdXBlZFxuLy8gZW50aXRpZXMuXG4vLyBSZXR1cm5zIHsgZ3JvdXBzOiBbXSwgdW5ncm91cGVkOiB7fSB9XG5leHBvcnQgY29uc3Qgc3BsaXRCeUdyb3VwcyA9IChlbnRpdGllczogSGFzc0VudGl0aWVzKSA9PiB7XG4gIGNvbnN0IGdyb3VwczogR3JvdXBFbnRpdHlbXSA9IFtdO1xuICBjb25zdCB1bmdyb3VwZWQ6IEhhc3NFbnRpdGllcyA9IHt9O1xuXG4gIE9iamVjdC5rZXlzKGVudGl0aWVzKS5mb3JFYWNoKChlbnRpdHlJZCkgPT4ge1xuICAgIGNvbnN0IGVudGl0eSA9IGVudGl0aWVzW2VudGl0eUlkXTtcblxuICAgIGlmIChjb21wdXRlRG9tYWluKGVudGl0eUlkKSA9PT0gXCJncm91cFwiKSB7XG4gICAgICBncm91cHMucHVzaChlbnRpdHkgYXMgR3JvdXBFbnRpdHkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB1bmdyb3VwZWRbZW50aXR5SWRdID0gZW50aXR5O1xuICAgIH1cbiAgfSk7XG5cbiAgZ3JvdXBzLmZvckVhY2goKGdyb3VwKSA9PlxuICAgIGdyb3VwLmF0dHJpYnV0ZXMuZW50aXR5X2lkLmZvckVhY2goKGVudGl0eUlkKSA9PiB7XG4gICAgICBkZWxldGUgdW5ncm91cGVkW2VudGl0eUlkXTtcbiAgICB9KVxuICApO1xuXG4gIHJldHVybiB7IGdyb3VwcywgdW5ncm91cGVkIH07XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/common/entity/split_by_groups.ts\n");

/***/ }),

/***/ "./src/common/entity/strip_prefix_from_entity_name.ts":
/*!************************************************************!*\
  !*** ./src/common/entity/strip_prefix_from_entity_name.ts ***!
  \************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   stripPrefixFromEntityName: function() { return /* binding */ stripPrefixFromEntityName; }\n/* harmony export */ });\nvar SUFFIXES = [\" \", \": \"];\n\n/**\n * Strips a device name from an entity name.\n * @param entityName the entity name\n * @param lowerCasedPrefix the prefix to strip, lower cased\n * @returns\n */\nvar stripPrefixFromEntityName = function stripPrefixFromEntityName(entityName, lowerCasedPrefix) {\n  var lowerCasedEntityName = entityName.toLowerCase();\n  for (var _i = 0, _SUFFIXES = SUFFIXES; _i < _SUFFIXES.length; _i++) {\n    var suffix = _SUFFIXES[_i];\n    var lowerCasedPrefixWithSuffix = \"\".concat(lowerCasedPrefix).concat(suffix);\n    if (lowerCasedEntityName.startsWith(lowerCasedPrefixWithSuffix)) {\n      var newName = entityName.substring(lowerCasedPrefixWithSuffix.length);\n\n      // If first word already has an upper case letter (e.g. from brand name)\n      // leave as-is, otherwise capitalize the first word.\n      return hasUpperCase(newName.substr(0, newName.indexOf(\" \"))) ? newName : newName[0].toUpperCase() + newName.slice(1);\n    }\n  }\n  return undefined;\n};\nvar hasUpperCase = function hasUpperCase(str) {\n  return str.toLowerCase() !== str;\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tbW9uL2VudGl0eS9zdHJpcF9wcmVmaXhfZnJvbV9lbnRpdHlfbmFtZS50cy5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUVBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUFBO0FBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ob21lLWFzc2lzdGFudC1mcm9udGVuZC8uL3NyYy9jb21tb24vZW50aXR5L3N0cmlwX3ByZWZpeF9mcm9tX2VudGl0eV9uYW1lLnRzP2IxNDYiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgU1VGRklYRVMgPSBbXCIgXCIsIFwiOiBcIl07XG5cbi8qKlxuICogU3RyaXBzIGEgZGV2aWNlIG5hbWUgZnJvbSBhbiBlbnRpdHkgbmFtZS5cbiAqIEBwYXJhbSBlbnRpdHlOYW1lIHRoZSBlbnRpdHkgbmFtZVxuICogQHBhcmFtIGxvd2VyQ2FzZWRQcmVmaXggdGhlIHByZWZpeCB0byBzdHJpcCwgbG93ZXIgY2FzZWRcbiAqIEByZXR1cm5zXG4gKi9cbmV4cG9ydCBjb25zdCBzdHJpcFByZWZpeEZyb21FbnRpdHlOYW1lID0gKFxuICBlbnRpdHlOYW1lOiBzdHJpbmcsXG4gIGxvd2VyQ2FzZWRQcmVmaXg6IHN0cmluZ1xuKSA9PiB7XG4gIGNvbnN0IGxvd2VyQ2FzZWRFbnRpdHlOYW1lID0gZW50aXR5TmFtZS50b0xvd2VyQ2FzZSgpO1xuXG4gIGZvciAoY29uc3Qgc3VmZml4IG9mIFNVRkZJWEVTKSB7XG4gICAgY29uc3QgbG93ZXJDYXNlZFByZWZpeFdpdGhTdWZmaXggPSBgJHtsb3dlckNhc2VkUHJlZml4fSR7c3VmZml4fWA7XG5cbiAgICBpZiAobG93ZXJDYXNlZEVudGl0eU5hbWUuc3RhcnRzV2l0aChsb3dlckNhc2VkUHJlZml4V2l0aFN1ZmZpeCkpIHtcbiAgICAgIGNvbnN0IG5ld05hbWUgPSBlbnRpdHlOYW1lLnN1YnN0cmluZyhsb3dlckNhc2VkUHJlZml4V2l0aFN1ZmZpeC5sZW5ndGgpO1xuXG4gICAgICAvLyBJZiBmaXJzdCB3b3JkIGFscmVhZHkgaGFzIGFuIHVwcGVyIGNhc2UgbGV0dGVyIChlLmcuIGZyb20gYnJhbmQgbmFtZSlcbiAgICAgIC8vIGxlYXZlIGFzLWlzLCBvdGhlcndpc2UgY2FwaXRhbGl6ZSB0aGUgZmlyc3Qgd29yZC5cbiAgICAgIHJldHVybiBoYXNVcHBlckNhc2UobmV3TmFtZS5zdWJzdHIoMCwgbmV3TmFtZS5pbmRleE9mKFwiIFwiKSkpXG4gICAgICAgID8gbmV3TmFtZVxuICAgICAgICA6IG5ld05hbWVbMF0udG9VcHBlckNhc2UoKSArIG5ld05hbWUuc2xpY2UoMSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn07XG5cbmNvbnN0IGhhc1VwcGVyQ2FzZSA9IChzdHI6IHN0cmluZyk6IGJvb2xlYW4gPT4gc3RyLnRvTG93ZXJDYXNlKCkgIT09IHN0cjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/common/entity/strip_prefix_from_entity_name.ts\n");

/***/ }),

/***/ "./src/data/user.ts":
/*!**************************!*\
  !*** ./src/data/user.ts ***!
  \**************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GROUPS: function() { return /* binding */ GROUPS; },\n/* harmony export */   SYSTEM_GROUP_ID_ADMIN: function() { return /* binding */ SYSTEM_GROUP_ID_ADMIN; },\n/* harmony export */   SYSTEM_GROUP_ID_READ_ONLY: function() { return /* binding */ SYSTEM_GROUP_ID_READ_ONLY; },\n/* harmony export */   SYSTEM_GROUP_ID_USER: function() { return /* binding */ SYSTEM_GROUP_ID_USER; },\n/* harmony export */   computeUserBadges: function() { return /* binding */ computeUserBadges; },\n/* harmony export */   computeUserInitials: function() { return /* binding */ computeUserInitials; },\n/* harmony export */   createUser: function() { return /* binding */ createUser; },\n/* harmony export */   deleteUser: function() { return /* binding */ deleteUser; },\n/* harmony export */   fetchUsers: function() { return /* binding */ fetchUsers; },\n/* harmony export */   updateUser: function() { return /* binding */ updateUser; }\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_regeneratorRuntime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/regeneratorRuntime */ \"./node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ \"./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\");\n\n\nvar mdiCrownCircleOutline = \"M12 2C6.47 2 2 6.5 2 12C2 17.5 6.5 22 12 22S22 17.5 22 12 17.5 2 12 2M12 20C7.58 20 4 16.42 4 12C4 7.58 7.58 4 12 4S20 7.58 20 12C20 16.42 16.42 20 12 20M8 14L7 8L10 10L12 7L14 10L17 8L16 14H8M8.56 16C8.22 16 8 15.78 8 15.44V15H16V15.44C16 15.78 15.78 16 15.44 16H8.56Z\";\nvar mdiAlphaSCircleOutline = \"M11,7H15V9H11V11H13A2,2 0 0,1 15,13V15A2,2 0 0,1 13,17H9V15H13V13H11A2,2 0 0,1 9,11V9A2,2 0 0,1 11,7M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4Z\";\nvar mdiHomeCircleOutline = \"M12 20C7.6 20 4 16.4 4 12S7.6 4 12 4 20 7.6 20 12 16.4 20 12 20M12 2C6.5 2 2 6.5 2 12S6.5 22 12 22 22 17.5 22 12 17.5 2 12 2M11 14H13V17H16V12H18L12 7L6 12H8V17H11V14\";\nvar mdiCancel = \"M12 2C17.5 2 22 6.5 22 12S17.5 22 12 22 2 17.5 2 12 6.5 2 12 2M12 4C10.1 4 8.4 4.6 7.1 5.7L18.3 16.9C19.3 15.5 20 13.8 20 12C20 7.6 16.4 4 12 4M16.9 18.3L5.7 7.1C4.6 8.4 4 10.1 4 12C4 16.4 7.6 20 12 20C13.9 20 15.6 19.4 16.9 18.3Z\";\nvar SYSTEM_GROUP_ID_ADMIN = \"system-admin\";\nvar SYSTEM_GROUP_ID_USER = \"system-users\";\nvar SYSTEM_GROUP_ID_READ_ONLY = \"system-read-only\";\nvar GROUPS = [SYSTEM_GROUP_ID_USER, SYSTEM_GROUP_ID_ADMIN];\nvar fetchUsers = /*#__PURE__*/function () {\n  var _ref = (0,_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__[\"default\"])( /*#__PURE__*/(0,_babel_runtime_helpers_regeneratorRuntime__WEBPACK_IMPORTED_MODULE_0__[\"default\"])().mark(function _callee(hass) {\n    return (0,_babel_runtime_helpers_regeneratorRuntime__WEBPACK_IMPORTED_MODULE_0__[\"default\"])().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          return _context.abrupt(\"return\", hass.callWS({\n            type: \"config/auth/list\"\n          }));\n        case 1:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function fetchUsers(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar createUser = /*#__PURE__*/function () {\n  var _ref2 = (0,_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__[\"default\"])( /*#__PURE__*/(0,_babel_runtime_helpers_regeneratorRuntime__WEBPACK_IMPORTED_MODULE_0__[\"default\"])().mark(function _callee2(hass, name, group_ids, local_only) {\n    return (0,_babel_runtime_helpers_regeneratorRuntime__WEBPACK_IMPORTED_MODULE_0__[\"default\"])().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          return _context2.abrupt(\"return\", hass.callWS({\n            type: \"config/auth/create\",\n            name: name,\n            group_ids: group_ids,\n            local_only: local_only\n          }));\n        case 1:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2);\n  }));\n  return function createUser(_x2, _x3, _x4, _x5) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nvar updateUser = /*#__PURE__*/function () {\n  var _ref3 = (0,_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__[\"default\"])( /*#__PURE__*/(0,_babel_runtime_helpers_regeneratorRuntime__WEBPACK_IMPORTED_MODULE_0__[\"default\"])().mark(function _callee3(hass, userId, params) {\n    return (0,_babel_runtime_helpers_regeneratorRuntime__WEBPACK_IMPORTED_MODULE_0__[\"default\"])().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          return _context3.abrupt(\"return\", hass.callWS(Object.assign(Object.assign({}, params), {}, {\n            type: \"config/auth/update\",\n            user_id: userId\n          })));\n        case 1:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3);\n  }));\n  return function updateUser(_x6, _x7, _x8) {\n    return _ref3.apply(this, arguments);\n  };\n}();\nvar deleteUser = /*#__PURE__*/function () {\n  var _ref4 = (0,_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__[\"default\"])( /*#__PURE__*/(0,_babel_runtime_helpers_regeneratorRuntime__WEBPACK_IMPORTED_MODULE_0__[\"default\"])().mark(function _callee4(hass, userId) {\n    return (0,_babel_runtime_helpers_regeneratorRuntime__WEBPACK_IMPORTED_MODULE_0__[\"default\"])().wrap(function _callee4$(_context4) {\n      while (1) switch (_context4.prev = _context4.next) {\n        case 0:\n          return _context4.abrupt(\"return\", hass.callWS({\n            type: \"config/auth/delete\",\n            user_id: userId\n          }));\n        case 1:\n        case \"end\":\n          return _context4.stop();\n      }\n    }, _callee4);\n  }));\n  return function deleteUser(_x9, _x10) {\n    return _ref4.apply(this, arguments);\n  };\n}();\nvar computeUserInitials = function computeUserInitials(name) {\n  if (!name) {\n    return \"?\";\n  }\n  return name.trim()\n  // Split by space and take first 3 words\n  .split(\" \").slice(0, 3)\n  // Of each word, take first letter\n  .map(function (s) {\n    return s.substring(0, 1);\n  }).join(\"\");\n};\nvar OWNER_ICON = mdiCrownCircleOutline;\nvar SYSTEM_ICON = mdiAlphaSCircleOutline;\nvar LOCAL_ICON = mdiHomeCircleOutline;\nvar DISABLED_ICON = mdiCancel;\nvar computeUserBadges = function computeUserBadges(hass, user, includeSystem) {\n  var labels = [];\n  var translate = function translate(key) {\n    return hass.localize(\"ui.panel.config.users.\".concat(key));\n  };\n  if (user.is_owner) {\n    labels.push([OWNER_ICON, translate(\"is_owner\")]);\n  }\n  if (includeSystem && user.system_generated) {\n    labels.push([SYSTEM_ICON, translate(\"is_system\")]);\n  }\n  if (user.local_only) {\n    labels.push([LOCAL_ICON, translate(\"is_local\")]);\n  }\n  if (!user.is_active) {\n    labels.push([DISABLED_ICON, translate(\"is_not_active\")]);\n  }\n  return labels;\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZGF0YS91c2VyLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQVNBO0FBQ0E7QUFDQTtBQUVBO0FBcUJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUhBO0FBQUE7QUFBQTtBQUtBO0FBQUE7QUFLQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQVpBO0FBQUE7QUFBQTtBQWNBO0FBQUE7QUFHQTtBQUFBO0FBQUE7QUFBQTtBQUlBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBVEE7QUFBQTtBQUFBO0FBV0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFKQTtBQUFBO0FBQUE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFBQTtBQUdBO0FBQUE7QUFDQTtBQUFBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBS0E7QUFDQTtBQUlBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaG9tZS1hc3Npc3RhbnQtZnJvbnRlbmQvLi9zcmMvZGF0YS91c2VyLnRzP2VmYjciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgbWRpQ3Jvd25DaXJjbGVPdXRsaW5lLFxuICBtZGlBbHBoYVNDaXJjbGVPdXRsaW5lLFxuICBtZGlIb21lQ2lyY2xlT3V0bGluZSxcbiAgbWRpQ2FuY2VsLFxufSBmcm9tIFwiQG1kaS9qc1wiO1xuaW1wb3J0IHsgSG9tZUFzc2lzdGFudCwgVHJhbnNsYXRpb25EaWN0IH0gZnJvbSBcIi4uL3R5cGVzXCI7XG5pbXBvcnQgeyBDcmVkZW50aWFsIH0gZnJvbSBcIi4vYXV0aFwiO1xuXG5leHBvcnQgY29uc3QgU1lTVEVNX0dST1VQX0lEX0FETUlOID0gXCJzeXN0ZW0tYWRtaW5cIjtcbmV4cG9ydCBjb25zdCBTWVNURU1fR1JPVVBfSURfVVNFUiA9IFwic3lzdGVtLXVzZXJzXCI7XG5leHBvcnQgY29uc3QgU1lTVEVNX0dST1VQX0lEX1JFQURfT05MWSA9IFwic3lzdGVtLXJlYWQtb25seVwiO1xuXG5leHBvcnQgY29uc3QgR1JPVVBTID0gW1NZU1RFTV9HUk9VUF9JRF9VU0VSLCBTWVNURU1fR1JPVVBfSURfQURNSU5dO1xuXG5leHBvcnQgaW50ZXJmYWNlIFVzZXIge1xuICBpZDogc3RyaW5nO1xuICB1c2VybmFtZTogc3RyaW5nIHwgbnVsbDtcbiAgbmFtZTogc3RyaW5nO1xuICBpc19vd25lcjogYm9vbGVhbjtcbiAgaXNfYWN0aXZlOiBib29sZWFuO1xuICBsb2NhbF9vbmx5OiBib29sZWFuO1xuICBzeXN0ZW1fZ2VuZXJhdGVkOiBib29sZWFuO1xuICBncm91cF9pZHM6IChrZXlvZiBUcmFuc2xhdGlvbkRpY3RbXCJncm91cHNcIl0pW107XG4gIGNyZWRlbnRpYWxzOiBDcmVkZW50aWFsW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVXBkYXRlVXNlclBhcmFtcyB7XG4gIG5hbWU/OiBVc2VyW1wibmFtZVwiXTtcbiAgaXNfYWN0aXZlPzogVXNlcltcImlzX2FjdGl2ZVwiXTtcbiAgZ3JvdXBfaWRzPzogVXNlcltcImdyb3VwX2lkc1wiXTtcbiAgbG9jYWxfb25seT86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBjb25zdCBmZXRjaFVzZXJzID0gYXN5bmMgKGhhc3M6IEhvbWVBc3Npc3RhbnQpID0+XG4gIGhhc3MuY2FsbFdTPFVzZXJbXT4oe1xuICAgIHR5cGU6IFwiY29uZmlnL2F1dGgvbGlzdFwiLFxuICB9KTtcblxuZXhwb3J0IGNvbnN0IGNyZWF0ZVVzZXIgPSBhc3luYyAoXG4gIGhhc3M6IEhvbWVBc3Npc3RhbnQsXG4gIG5hbWU6IHN0cmluZyxcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lOiB2YXJpYWJsZS1uYW1lXG4gIGdyb3VwX2lkcz86IFVzZXJbXCJncm91cF9pZHNcIl0sXG4gIGxvY2FsX29ubHk/OiBib29sZWFuXG4pID0+XG4gIGhhc3MuY2FsbFdTPHsgdXNlcjogVXNlciB9Pih7XG4gICAgdHlwZTogXCJjb25maWcvYXV0aC9jcmVhdGVcIixcbiAgICBuYW1lLFxuICAgIGdyb3VwX2lkcyxcbiAgICBsb2NhbF9vbmx5LFxuICB9KTtcblxuZXhwb3J0IGNvbnN0IHVwZGF0ZVVzZXIgPSBhc3luYyAoXG4gIGhhc3M6IEhvbWVBc3Npc3RhbnQsXG4gIHVzZXJJZDogc3RyaW5nLFxuICBwYXJhbXM6IFVwZGF0ZVVzZXJQYXJhbXNcbikgPT5cbiAgaGFzcy5jYWxsV1M8eyB1c2VyOiBVc2VyIH0+KHtcbiAgICAuLi5wYXJhbXMsXG4gICAgdHlwZTogXCJjb25maWcvYXV0aC91cGRhdGVcIixcbiAgICB1c2VyX2lkOiB1c2VySWQsXG4gIH0pO1xuXG5leHBvcnQgY29uc3QgZGVsZXRlVXNlciA9IGFzeW5jIChoYXNzOiBIb21lQXNzaXN0YW50LCB1c2VySWQ6IHN0cmluZykgPT5cbiAgaGFzcy5jYWxsV1M8dm9pZD4oe1xuICAgIHR5cGU6IFwiY29uZmlnL2F1dGgvZGVsZXRlXCIsXG4gICAgdXNlcl9pZDogdXNlcklkLFxuICB9KTtcblxuZXhwb3J0IGNvbnN0IGNvbXB1dGVVc2VySW5pdGlhbHMgPSAobmFtZTogc3RyaW5nKSA9PiB7XG4gIGlmICghbmFtZSkge1xuICAgIHJldHVybiBcIj9cIjtcbiAgfVxuICByZXR1cm4gKFxuICAgIG5hbWVcbiAgICAgIC50cmltKClcbiAgICAgIC8vIFNwbGl0IGJ5IHNwYWNlIGFuZCB0YWtlIGZpcnN0IDMgd29yZHNcbiAgICAgIC5zcGxpdChcIiBcIilcbiAgICAgIC5zbGljZSgwLCAzKVxuICAgICAgLy8gT2YgZWFjaCB3b3JkLCB0YWtlIGZpcnN0IGxldHRlclxuICAgICAgLm1hcCgocykgPT4gcy5zdWJzdHJpbmcoMCwgMSkpXG4gICAgICAuam9pbihcIlwiKVxuICApO1xufTtcblxuY29uc3QgT1dORVJfSUNPTiA9IG1kaUNyb3duQ2lyY2xlT3V0bGluZTtcbmNvbnN0IFNZU1RFTV9JQ09OID0gbWRpQWxwaGFTQ2lyY2xlT3V0bGluZTtcbmNvbnN0IExPQ0FMX0lDT04gPSBtZGlIb21lQ2lyY2xlT3V0bGluZTtcbmNvbnN0IERJU0FCTEVEX0lDT04gPSBtZGlDYW5jZWw7XG5cbmV4cG9ydCBjb25zdCBjb21wdXRlVXNlckJhZGdlcyA9IChcbiAgaGFzczogSG9tZUFzc2lzdGFudCxcbiAgdXNlcjogVXNlcixcbiAgaW5jbHVkZVN5c3RlbTogYm9vbGVhblxuKSA9PiB7XG4gIGNvbnN0IGxhYmVsczogW3N0cmluZywgc3RyaW5nXVtdID0gW107XG4gIGNvbnN0IHRyYW5zbGF0ZSA9IChcbiAgICBrZXk6IEV4dHJhY3Q8XG4gICAgICBrZXlvZiBUcmFuc2xhdGlvbkRpY3RbXCJ1aVwiXVtcInBhbmVsXCJdW1wiY29uZmlnXCJdW1widXNlcnNcIl0sXG4gICAgICBgaXNfJHtzdHJpbmd9YFxuICAgID5cbiAgKSA9PiBoYXNzLmxvY2FsaXplKGB1aS5wYW5lbC5jb25maWcudXNlcnMuJHtrZXl9YCk7XG5cbiAgaWYgKHVzZXIuaXNfb3duZXIpIHtcbiAgICBsYWJlbHMucHVzaChbT1dORVJfSUNPTiwgdHJhbnNsYXRlKFwiaXNfb3duZXJcIildKTtcbiAgfVxuICBpZiAoaW5jbHVkZVN5c3RlbSAmJiB1c2VyLnN5c3RlbV9nZW5lcmF0ZWQpIHtcbiAgICBsYWJlbHMucHVzaChbU1lTVEVNX0lDT04sIHRyYW5zbGF0ZShcImlzX3N5c3RlbVwiKV0pO1xuICB9XG4gIGlmICh1c2VyLmxvY2FsX29ubHkpIHtcbiAgICBsYWJlbHMucHVzaChbTE9DQUxfSUNPTiwgdHJhbnNsYXRlKFwiaXNfbG9jYWxcIildKTtcbiAgfVxuICBpZiAoIXVzZXIuaXNfYWN0aXZlKSB7XG4gICAgbGFiZWxzLnB1c2goW0RJU0FCTEVEX0lDT04sIHRyYW5zbGF0ZShcImlzX25vdF9hY3RpdmVcIildKTtcbiAgfVxuXG4gIHJldHVybiBsYWJlbHM7XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/data/user.ts\n");

/***/ }),

/***/ "./src/panels/config/helpers/const.ts":
/*!********************************************!*\
  !*** ./src/panels/config/helpers/const.ts ***!
  \********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HELPER_DOMAINS: function() { return /* binding */ HELPER_DOMAINS; },\n/* harmony export */   isHelperDomain: function() { return /* binding */ isHelperDomain; }\n/* harmony export */ });\n/* harmony import */ var _common_array_literal_includes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../common/array/literal-includes */ \"./src/common/array/literal-includes.ts\");\n\nvar HELPER_DOMAINS = [\"input_boolean\", \"input_button\", \"input_text\", \"input_number\", \"input_datetime\", \"input_select\", \"counter\", \"timer\", \"schedule\"];\nvar isHelperDomain = (0,_common_array_literal_includes__WEBPACK_IMPORTED_MODULE_0__.arrayLiteralIncludes)(HELPER_DOMAINS);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcGFuZWxzL2NvbmZpZy9oZWxwZXJzL2NvbnN0LnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBV0E7QUFhQSIsInNvdXJjZXMiOlsid2VicGFjazovL2hvbWUtYXNzaXN0YW50LWZyb250ZW5kLy4vc3JjL3BhbmVscy9jb25maWcvaGVscGVycy9jb25zdC50cz81MzE5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGFycmF5TGl0ZXJhbEluY2x1ZGVzIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9hcnJheS9saXRlcmFsLWluY2x1ZGVzXCI7XG5pbXBvcnQgdHlwZSB7IENvdW50ZXIgfSBmcm9tIFwiLi4vLi4vLi4vZGF0YS9jb3VudGVyXCI7XG5pbXBvcnQgdHlwZSB7IElucHV0Qm9vbGVhbiB9IGZyb20gXCIuLi8uLi8uLi9kYXRhL2lucHV0X2Jvb2xlYW5cIjtcbmltcG9ydCB0eXBlIHsgSW5wdXRCdXR0b24gfSBmcm9tIFwiLi4vLi4vLi4vZGF0YS9pbnB1dF9idXR0b25cIjtcbmltcG9ydCB0eXBlIHsgSW5wdXREYXRlVGltZSB9IGZyb20gXCIuLi8uLi8uLi9kYXRhL2lucHV0X2RhdGV0aW1lXCI7XG5pbXBvcnQgdHlwZSB7IElucHV0TnVtYmVyIH0gZnJvbSBcIi4uLy4uLy4uL2RhdGEvaW5wdXRfbnVtYmVyXCI7XG5pbXBvcnQgdHlwZSB7IElucHV0U2VsZWN0IH0gZnJvbSBcIi4uLy4uLy4uL2RhdGEvaW5wdXRfc2VsZWN0XCI7XG5pbXBvcnQgdHlwZSB7IElucHV0VGV4dCB9IGZyb20gXCIuLi8uLi8uLi9kYXRhL2lucHV0X3RleHRcIjtcbmltcG9ydCB0eXBlIHsgU2NoZWR1bGUgfSBmcm9tIFwiLi4vLi4vLi4vZGF0YS9zY2hlZHVsZVwiO1xuaW1wb3J0IHR5cGUgeyBUaW1lciB9IGZyb20gXCIuLi8uLi8uLi9kYXRhL3RpbWVyXCI7XG5cbmV4cG9ydCBjb25zdCBIRUxQRVJfRE9NQUlOUyA9IFtcbiAgXCJpbnB1dF9ib29sZWFuXCIsXG4gIFwiaW5wdXRfYnV0dG9uXCIsXG4gIFwiaW5wdXRfdGV4dFwiLFxuICBcImlucHV0X251bWJlclwiLFxuICBcImlucHV0X2RhdGV0aW1lXCIsXG4gIFwiaW5wdXRfc2VsZWN0XCIsXG4gIFwiY291bnRlclwiLFxuICBcInRpbWVyXCIsXG4gIFwic2NoZWR1bGVcIixcbl0gYXMgY29uc3Q7XG5cbmV4cG9ydCB0eXBlIEhlbHBlckRvbWFpbiA9ICh0eXBlb2YgSEVMUEVSX0RPTUFJTlMpW251bWJlcl07XG5leHBvcnQgY29uc3QgaXNIZWxwZXJEb21haW4gPSBhcnJheUxpdGVyYWxJbmNsdWRlcyhIRUxQRVJfRE9NQUlOUyk7XG5cbmV4cG9ydCB0eXBlIEhlbHBlciA9XG4gIHwgSW5wdXRCb29sZWFuXG4gIHwgSW5wdXRCdXR0b25cbiAgfCBJbnB1dFRleHRcbiAgfCBJbnB1dE51bWJlclxuICB8IElucHV0U2VsZWN0XG4gIHwgSW5wdXREYXRlVGltZVxuICB8IENvdW50ZXJcbiAgfCBUaW1lclxuICB8IFNjaGVkdWxlO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/panels/config/helpers/const.ts\n");

/***/ }),

/***/ "./src/panels/lovelace/common/generate-lovelace-config.ts":
/*!****************************************************************!*\
  !*** ./src/panels/lovelace/common/generate-lovelace-config.ts ***!
  \****************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   computeCards: function() { return /* binding */ computeCards; },\n/* harmony export */   generateDefaultViewConfig: function() { return /* binding */ generateDefaultViewConfig; },\n/* harmony export */   generateViewConfig: function() { return /* binding */ generateViewConfig; }\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/toConsumableArray */ \"./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\");\n/* harmony import */ var _babel_runtime_helpers_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/createForOfIteratorHelper */ \"./node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ \"./node_modules/@babel/runtime/helpers/esm/slicedToArray.js\");\n/* harmony import */ var _common_const__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../common/const */ \"./src/common/const.ts\");\n/* harmony import */ var _common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../common/entity/compute_domain */ \"./src/common/entity/compute_domain.ts\");\n/* harmony import */ var _common_entity_compute_state_domain__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../common/entity/compute_state_domain */ \"./src/common/entity/compute_state_domain.ts\");\n/* harmony import */ var _common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../common/entity/compute_state_name */ \"./src/common/entity/compute_state_name.ts\");\n/* harmony import */ var _common_entity_split_by_groups__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../common/entity/split_by_groups */ \"./src/common/entity/split_by_groups.ts\");\n/* harmony import */ var _common_entity_strip_prefix_from_entity_name__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../common/entity/strip_prefix_from_entity_name */ \"./src/common/entity/strip_prefix_from_entity_name.ts\");\n/* harmony import */ var _common_string_compare__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../common/string/compare */ \"./src/common/string/compare.ts\");\n/* harmony import */ var _data_integration__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../data/integration */ \"./src/data/integration.ts\");\n/* harmony import */ var _data_user__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../data/user */ \"./src/data/user.ts\");\n/* harmony import */ var _config_helpers_const__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../config/helpers/const */ \"./src/panels/config/helpers/const.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar HIDE_DOMAIN = new Set([\"automation\", \"configurator\", \"device_tracker\", \"geo_location\", \"persistent_notification\", \"script\", \"sun\", \"zone\"]);\nvar HIDE_PLATFORM = new Set([\"mobile_app\"]);\nvar splitByAreaDevice = function splitByAreaDevice(areaEntries, deviceEntries, entityEntries, entities) {\n  var allEntities = Object.assign({}, entities);\n  var areasWithEntities = {};\n  var devicesWithEntities = {};\n  for (var _i = 0, _Object$values = Object.values(entityEntries); _i < _Object$values.length; _i++) {\n    var _deviceEntries$entity;\n    var entity = _Object$values[_i];\n    var _areaId = entity.area_id || entity.device_id && ((_deviceEntries$entity = deviceEntries[entity.device_id]) === null || _deviceEntries$entity === void 0 ? void 0 : _deviceEntries$entity.area_id);\n    if (_areaId && _areaId in areaEntries && entity.entity_id in allEntities) {\n      if (!(_areaId in areasWithEntities)) {\n        areasWithEntities[_areaId] = [];\n      }\n      areasWithEntities[_areaId].push(allEntities[entity.entity_id]);\n      delete allEntities[entity.entity_id];\n    } else if (entity.device_id && entity.device_id in deviceEntries && entity.entity_id in allEntities) {\n      if (!(entity.device_id in devicesWithEntities)) {\n        devicesWithEntities[entity.device_id] = [];\n      }\n      devicesWithEntities[entity.device_id].push(allEntities[entity.entity_id]);\n      delete allEntities[entity.entity_id];\n    }\n  }\n  for (var _i2 = 0, _Object$entries = Object.entries(devicesWithEntities); _i2 < _Object$entries.length; _i2++) {\n    var _Object$entries$_i = (0,_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(_Object$entries[_i2], 2),\n      _deviceId = _Object$entries$_i[0],\n      deviceEntities = _Object$entries$_i[1];\n    if (deviceEntities.length === 1) {\n      allEntities[deviceEntities[0].entity_id] = deviceEntities[0];\n      delete devicesWithEntities[_deviceId];\n    }\n  }\n  return {\n    areasWithEntities: areasWithEntities,\n    devicesWithEntities: devicesWithEntities,\n    otherEntities: allEntities\n  };\n};\nvar computeCards = function computeCards(states, entityIds, entityCardOptions) {\n  var renderFooterEntities = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n  var cards = [];\n\n  // For entity card\n  var entitiesConf = [];\n  var titlePrefix = entityCardOptions.title ? entityCardOptions.title.toLowerCase() : undefined;\n  var footerEntities = [];\n  var _iterator = (0,_babel_runtime_helpers_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(entityIds),\n    _step;\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var entityId = _step.value;\n      var stateObj = states[entityId];\n      var _domain = (0,_common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_4__.computeDomain)(entityId);\n      if (_domain === \"alarm_control_panel\") {\n        var cardConfig = {\n          type: \"alarm-panel\",\n          entity: entityId\n        };\n        cards.push(cardConfig);\n      } else if (_domain === \"camera\") {\n        var _cardConfig = {\n          type: \"picture-entity\",\n          entity: entityId\n        };\n        cards.push(_cardConfig);\n      } else if (_domain === \"climate\") {\n        var _cardConfig2 = {\n          type: \"thermostat\",\n          entity: entityId\n        };\n        cards.push(_cardConfig2);\n      } else if (_domain === \"humidifier\") {\n        var _cardConfig3 = {\n          type: \"humidifier\",\n          entity: entityId\n        };\n        cards.push(_cardConfig3);\n      } else if (_domain === \"media_player\") {\n        var _cardConfig4 = {\n          type: \"media-control\",\n          entity: entityId\n        };\n        cards.push(_cardConfig4);\n      } else if (_domain === \"plant\") {\n        var _cardConfig5 = {\n          type: \"plant-status\",\n          entity: entityId\n        };\n        cards.push(_cardConfig5);\n      } else if (_domain === \"weather\") {\n        var _cardConfig6 = {\n          type: \"weather-forecast\",\n          entity: entityId,\n          show_forecast: false\n        };\n        cards.push(_cardConfig6);\n      } else if (renderFooterEntities && (_domain === \"scene\" || _domain === \"script\")) {\n        var conf = {\n          entity: entityId,\n          show_icon: true,\n          show_name: true\n        };\n        var name = void 0;\n        if (titlePrefix && stateObj && (\n        // eslint-disable-next-line no-cond-assign\n        name = (0,_common_entity_strip_prefix_from_entity_name__WEBPACK_IMPORTED_MODULE_8__.stripPrefixFromEntityName)((0,_common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_6__.computeStateName)(stateObj), titlePrefix))) {\n          conf.name = name;\n        }\n        footerEntities.push(conf);\n      } else {\n        var _name = void 0;\n        var entityConf = titlePrefix && stateObj && (\n        // eslint-disable-next-line no-cond-assign\n        _name = (0,_common_entity_strip_prefix_from_entity_name__WEBPACK_IMPORTED_MODULE_8__.stripPrefixFromEntityName)((0,_common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_6__.computeStateName)(stateObj), titlePrefix)) ? {\n          entity: entityId,\n          name: _name\n        } : entityId;\n        entitiesConf.push(entityConf);\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n  entitiesConf.sort(function (a, b) {\n    var entityIdA = typeof a === \"string\" ? a : a.entity;\n    var entityIdB = typeof b === \"string\" ? b : b.entity;\n    var categoryA = _common_const__WEBPACK_IMPORTED_MODULE_3__.SENSOR_ENTITIES.includes((0,_common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_4__.computeDomain)(entityIdA)) ? \"sensor\" : \"control\";\n    var categoryB = _common_const__WEBPACK_IMPORTED_MODULE_3__.SENSOR_ENTITIES.includes((0,_common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_4__.computeDomain)(entityIdB)) ? \"sensor\" : \"control\";\n    if (categoryA !== categoryB) {\n      return categoryA === \"sensor\" ? 1 : -1;\n    }\n    return (0,_common_string_compare__WEBPACK_IMPORTED_MODULE_9__.stringCompare)(typeof a === \"string\" ? states[a] ? (0,_common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_6__.computeStateName)(states[a]) : \"\" : a.name || \"\", typeof b === \"string\" ? states[b] ? (0,_common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_6__.computeStateName)(states[b]) : \"\" : b.name || \"\");\n  });\n\n  // If we ended up with footer entities but no normal entities,\n  // render the footer entities as normal entities.\n  if (entitiesConf.length === 0 && footerEntities.length > 0) {\n    return computeCards(states, entityIds, entityCardOptions, false);\n  }\n  if (entitiesConf.length > 0 || footerEntities.length > 0) {\n    var card = Object.assign({\n      type: \"entities\",\n      entities: entitiesConf\n    }, entityCardOptions);\n    if (footerEntities.length > 0) {\n      card.footer = {\n        type: \"buttons\",\n        entities: footerEntities\n      };\n    }\n    cards.unshift(card);\n  }\n  if (cards.length < 2) {\n    return cards;\n  }\n  return [{\n    type: \"grid\",\n    square: false,\n    columns: 1,\n    cards: cards\n  }];\n};\nvar computeDefaultViewStates = function computeDefaultViewStates(entities, entityEntries) {\n  var states = {};\n  var hiddenEntities = new Set(Object.values(entityEntries).filter(function (entry) {\n    return entry.entity_category || entry.platform && HIDE_PLATFORM.has(entry.platform) || entry.hidden;\n  }).map(function (entry) {\n    return entry.entity_id;\n  }));\n  for (var _i3 = 0, _Object$keys = Object.keys(entities); _i3 < _Object$keys.length; _i3++) {\n    var entityId = _Object$keys[_i3];\n    var stateObj = entities[entityId];\n    if (!HIDE_DOMAIN.has((0,_common_entity_compute_state_domain__WEBPACK_IMPORTED_MODULE_5__.computeStateDomain)(stateObj)) && !hiddenEntities.has(stateObj.entity_id)) {\n      states[entityId] = entities[entityId];\n    }\n  }\n  return states;\n};\nvar generateViewConfig = function generateViewConfig(localize, path, title, icon, entities) {\n  var ungroupedEntitites = {};\n\n  // Organize ungrouped entities in ungrouped things\n  for (var _i4 = 0, _Object$keys2 = Object.keys(entities); _i4 < _Object$keys2.length; _i4++) {\n    var entityId = _Object$keys2[_i4];\n    var state = entities[entityId];\n    var _domain2 = (0,_common_entity_compute_state_domain__WEBPACK_IMPORTED_MODULE_5__.computeStateDomain)(state);\n    if (!(_domain2 in ungroupedEntitites)) {\n      ungroupedEntitites[_domain2] = [];\n    }\n    ungroupedEntitites[_domain2].push(state.entity_id);\n  }\n  var cards = [];\n  if (\"person\" in ungroupedEntitites) {\n    var personCards = [];\n    if (ungroupedEntitites.person.length === 1) {\n      cards.push({\n        type: \"entities\",\n        entities: ungroupedEntitites.person\n      });\n    } else {\n      var backgroundColor;\n      var foregroundColor = \"\";\n      var _iterator2 = (0,_babel_runtime_helpers_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(ungroupedEntitites.person),\n        _step2;\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var personEntityId = _step2.value;\n          var stateObj = entities[personEntityId];\n          var image = stateObj.attributes.entity_picture;\n          if (!image) {\n            if (backgroundColor === undefined) {\n              var computedStyle = getComputedStyle(document.body);\n              backgroundColor = encodeURIComponent(computedStyle.getPropertyValue(\"--light-primary-color\").trim());\n              foregroundColor = encodeURIComponent((computedStyle.getPropertyValue(\"--text-light-primary-color\") || computedStyle.getPropertyValue(\"--primary-text-color\")).trim());\n            }\n            var initials = (0,_data_user__WEBPACK_IMPORTED_MODULE_11__.computeUserInitials)(stateObj.attributes.friendly_name || \"\");\n            image = \"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 50 50' width='50' height='50' style='background-color:\".concat(backgroundColor, \"'%3E%3Cg%3E%3Ctext font-family='roboto' x='50%25' y='50%25' text-anchor='middle' stroke='\").concat(foregroundColor, \"' font-size='1.3em' dy='.3em'%3E\").concat(initials, \"%3C/text%3E%3C/g%3E%3C/svg%3E\");\n          }\n          personCards.push({\n            type: \"picture-entity\",\n            entity: personEntityId,\n            aspect_ratio: \"1\",\n            show_name: false,\n            image: image\n          });\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n      cards.push({\n        type: \"grid\",\n        square: true,\n        columns: 3,\n        cards: personCards\n      });\n    }\n    delete ungroupedEntitites.person;\n  }\n\n  // Group helper entities in a single card\n  var helperEntities = [];\n  var _iterator3 = (0,_babel_runtime_helpers_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(_config_helpers_const__WEBPACK_IMPORTED_MODULE_12__.HELPER_DOMAINS),\n    _step3;\n  try {\n    for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n      var _domain4 = _step3.value;\n      if (!(_domain4 in ungroupedEntitites)) {\n        continue;\n      }\n      helperEntities.push.apply(helperEntities, (0,_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(ungroupedEntitites[_domain4]));\n      delete ungroupedEntitites[_domain4];\n    }\n\n    // Prepare translations for cards\n  } catch (err) {\n    _iterator3.e(err);\n  } finally {\n    _iterator3.f();\n  }\n  var domainTranslations = {};\n  for (var _i5 = 0, _Object$keys3 = Object.keys(ungroupedEntitites); _i5 < _Object$keys3.length; _i5++) {\n    var _domain3 = _Object$keys3[_i5];\n    domainTranslations[_domain3] = (0,_data_integration__WEBPACK_IMPORTED_MODULE_10__.domainToName)(localize, _domain3);\n  }\n  if (helperEntities.length) {\n    ungroupedEntitites._helpers = helperEntities;\n    domainTranslations._helpers = localize(\"ui.panel.lovelace.strategy.original-states.helpers\");\n  }\n  Object.keys(ungroupedEntitites).sort(function (domain1, domain2) {\n    return (0,_common_string_compare__WEBPACK_IMPORTED_MODULE_9__.stringCompare)(domainTranslations[domain1], domainTranslations[domain2]);\n  }).forEach(function (domain) {\n    cards.push.apply(cards, (0,_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(computeCards(entities, ungroupedEntitites[domain].sort(function (a, b) {\n      return (0,_common_string_compare__WEBPACK_IMPORTED_MODULE_9__.stringCompare)((0,_common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_6__.computeStateName)(entities[a]), (0,_common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_6__.computeStateName)(entities[b]));\n    }), {\n      title: domainTranslations[domain]\n    })));\n  });\n  var view = {\n    path: path,\n    title: title,\n    cards: cards\n  };\n  if (icon) {\n    view.icon = icon;\n  }\n  return view;\n};\nvar generateDefaultViewConfig = function generateDefaultViewConfig(areaEntries, deviceEntries, entityEntries, entities, localize, energyPrefs) {\n  var _ref, _ref2;\n  var states = computeDefaultViewStates(entities, entityEntries);\n  var path = \"default_view\";\n  var title = \"Home\";\n  var icon = undefined;\n\n  // In the case of a default view, we want to use the group order attribute\n  var groupOrders = {};\n  for (var _i6 = 0, _Object$keys4 = Object.keys(states); _i6 < _Object$keys4.length; _i6++) {\n    var entityId = _Object$keys4[_i6];\n    var stateObj = states[entityId];\n    if (stateObj.attributes.order) {\n      groupOrders[entityId] = stateObj.attributes.order;\n    }\n  }\n  var splittedByAreaDevice = splitByAreaDevice(areaEntries, deviceEntries, entityEntries, states);\n  var splittedByGroups = (0,_common_entity_split_by_groups__WEBPACK_IMPORTED_MODULE_7__.splitByGroups)(splittedByAreaDevice.otherEntities);\n  splittedByGroups.groups.sort(function (gr1, gr2) {\n    return groupOrders[gr1.entity_id] - groupOrders[gr2.entity_id];\n  });\n  var groupCards = [];\n  var _iterator4 = (0,_babel_runtime_helpers_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(splittedByGroups.groups),\n    _step4;\n  try {\n    for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n      var groupEntity = _step4.value;\n      groupCards.push.apply(groupCards, (0,_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(computeCards(entities, groupEntity.attributes.entity_id, {\n        title: (0,_common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_6__.computeStateName)(groupEntity),\n        show_header_toggle: groupEntity.attributes.control !== \"hidden\"\n      })));\n    }\n  } catch (err) {\n    _iterator4.e(err);\n  } finally {\n    _iterator4.f();\n  }\n  var config = generateViewConfig(localize, path, title, icon, splittedByGroups.ungrouped);\n  var areaCards = [];\n  var sortedAreas = Object.entries(splittedByAreaDevice.areasWithEntities).sort(function (a, b) {\n    var areaA = areaEntries[a[0]];\n    var areaB = areaEntries[b[0]];\n    return (0,_common_string_compare__WEBPACK_IMPORTED_MODULE_9__.stringCompare)(areaA.name, areaB.name);\n  });\n  var _iterator5 = (0,_babel_runtime_helpers_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(sortedAreas),\n    _step5;\n  try {\n    for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n      var _step5$value = (0,_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(_step5.value, 2),\n        _areaId2 = _step5$value[0],\n        areaEntities = _step5$value[1];\n      var area = areaEntries[_areaId2];\n      areaCards.push.apply(areaCards, (0,_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(computeCards(entities, areaEntities.map(function (entity) {\n        return entity.entity_id;\n      }), {\n        title: area.name\n      })));\n    }\n  } catch (err) {\n    _iterator5.e(err);\n  } finally {\n    _iterator5.f();\n  }\n  var deviceCards = [];\n  var sortedDevices = Object.entries(splittedByAreaDevice.devicesWithEntities).sort(function (a, b) {\n    var deviceA = deviceEntries[a[0]];\n    var deviceB = deviceEntries[b[0]];\n    return (0,_common_string_compare__WEBPACK_IMPORTED_MODULE_9__.stringCompare)(deviceA.name_by_user || deviceA.name || \"\", deviceB.name_by_user || deviceB.name || \"\");\n  });\n  var _iterator6 = (0,_babel_runtime_helpers_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(sortedDevices),\n    _step6;\n  try {\n    for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n      var _step6$value = (0,_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(_step6.value, 2),\n        _deviceId2 = _step6$value[0],\n        deviceEntities = _step6$value[1];\n      var device = deviceEntries[_deviceId2];\n      deviceCards.push.apply(deviceCards, (0,_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(computeCards(entities, deviceEntities.map(function (entity) {\n        return entity.entity_id;\n      }), {\n        title: device.name_by_user || device.name || localize(\"ui.panel.config.devices.unnamed_device\", \"type\", localize(\"ui.panel.config.devices.type.\".concat(device.entry_type || \"device\")))\n      })));\n    }\n  } catch (err) {\n    _iterator6.e(err);\n  } finally {\n    _iterator6.f();\n  }\n  var energyCard;\n  if (energyPrefs) {\n    // Distribution card requires the grid to be configured\n    var grid = energyPrefs.energy_sources.find(function (source) {\n      return source.type === \"grid\";\n    });\n    if (grid && grid.flow_from.length > 0) {\n      energyCard = {\n        title: localize(\"ui.panel.lovelace.cards.energy.energy_distribution.title_today\"),\n        type: \"energy-distribution\",\n        link_dashboard: true\n      };\n    }\n  }\n  (_ref = config.cards).unshift.apply(_ref, areaCards.concat(groupCards, (0,_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(energyCard ? [energyCard] : [])));\n  (_ref2 = config.cards).push.apply(_ref2, deviceCards);\n  return config;\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2NvbW1vbi9nZW5lcmF0ZS1sb3ZlbGFjZS1jb25maWcudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFFQTtBQUVBO0FBV0E7QUFXQTtBQVFBO0FBTUE7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFLQTtBQUNBOztBQUVBO0FBQ0E7QUFFQTtBQUlBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUdBO0FBSUE7QUFDQTtBQUNBO0FBRUE7QUFZQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBSUE7QUFDQTtBQUdBO0FBR0E7QUFFQTtBQUFBO0FBR0E7QUFBQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFPQTs7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFNQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBR0E7QUFJQTtBQUdBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBT0E7QUFDQTtBQUNBO0FBQUE7QUFHQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBUUE7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBR0E7QUFBQTtBQUVBO0FBQ0E7QUFHQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBSUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFHQTtBQUFBO0FBRUE7QUFVQTtBQUdBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQU1BO0FBRUE7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2hvbWUtYXNzaXN0YW50LWZyb250ZW5kLy4vc3JjL3BhbmVscy9sb3ZlbGFjZS9jb21tb24vZ2VuZXJhdGUtbG92ZWxhY2UtY29uZmlnLnRzPzg0MWQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSGFzc0VudGl0aWVzLCBIYXNzRW50aXR5IH0gZnJvbSBcImhvbWUtYXNzaXN0YW50LWpzLXdlYnNvY2tldFwiO1xuaW1wb3J0IHsgU0VOU09SX0VOVElUSUVTIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9jb25zdFwiO1xuaW1wb3J0IHsgY29tcHV0ZURvbWFpbiB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZW50aXR5L2NvbXB1dGVfZG9tYWluXCI7XG5pbXBvcnQgeyBjb21wdXRlU3RhdGVEb21haW4gfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2VudGl0eS9jb21wdXRlX3N0YXRlX2RvbWFpblwiO1xuaW1wb3J0IHsgY29tcHV0ZVN0YXRlTmFtZSB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZW50aXR5L2NvbXB1dGVfc3RhdGVfbmFtZVwiO1xuaW1wb3J0IHsgc3BsaXRCeUdyb3VwcyB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZW50aXR5L3NwbGl0X2J5X2dyb3Vwc1wiO1xuaW1wb3J0IHsgc3RyaXBQcmVmaXhGcm9tRW50aXR5TmFtZSB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZW50aXR5L3N0cmlwX3ByZWZpeF9mcm9tX2VudGl0eV9uYW1lXCI7XG5pbXBvcnQgeyBzdHJpbmdDb21wYXJlIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9zdHJpbmcvY29tcGFyZVwiO1xuaW1wb3J0IHsgTG9jYWxpemVGdW5jIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi90cmFuc2xhdGlvbnMvbG9jYWxpemVcIjtcbmltcG9ydCB7XG4gIEVuZXJneVByZWZlcmVuY2VzLFxuICBHcmlkU291cmNlVHlwZUVuZXJneVByZWZlcmVuY2UsXG59IGZyb20gXCIuLi8uLi8uLi9kYXRhL2VuZXJneVwiO1xuaW1wb3J0IHsgZG9tYWluVG9OYW1lIH0gZnJvbSBcIi4uLy4uLy4uL2RhdGEvaW50ZWdyYXRpb25cIjtcbmltcG9ydCB7IExvdmVsYWNlQ2FyZENvbmZpZywgTG92ZWxhY2VWaWV3Q29uZmlnIH0gZnJvbSBcIi4uLy4uLy4uL2RhdGEvbG92ZWxhY2VcIjtcbmltcG9ydCB7IGNvbXB1dGVVc2VySW5pdGlhbHMgfSBmcm9tIFwiLi4vLi4vLi4vZGF0YS91c2VyXCI7XG5pbXBvcnQgeyBIb21lQXNzaXN0YW50IH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBIRUxQRVJfRE9NQUlOUyB9IGZyb20gXCIuLi8uLi9jb25maWcvaGVscGVycy9jb25zdFwiO1xuaW1wb3J0IHtcbiAgQWxhcm1QYW5lbENhcmRDb25maWcsXG4gIEVudGl0aWVzQ2FyZENvbmZpZyxcbiAgSHVtaWRpZmllckNhcmRDb25maWcsXG4gIFBpY3R1cmVFbnRpdHlDYXJkQ29uZmlnLFxuICBUaGVybW9zdGF0Q2FyZENvbmZpZyxcbn0gZnJvbSBcIi4uL2NhcmRzL3R5cGVzXCI7XG5pbXBvcnQgeyBFbnRpdHlDb25maWcgfSBmcm9tIFwiLi4vZW50aXR5LXJvd3MvdHlwZXNcIjtcbmltcG9ydCB7IEJ1dHRvbnNIZWFkZXJGb290ZXJDb25maWcgfSBmcm9tIFwiLi4vaGVhZGVyLWZvb3Rlci90eXBlc1wiO1xuXG5jb25zdCBISURFX0RPTUFJTiA9IG5ldyBTZXQoW1xuICBcImF1dG9tYXRpb25cIixcbiAgXCJjb25maWd1cmF0b3JcIixcbiAgXCJkZXZpY2VfdHJhY2tlclwiLFxuICBcImdlb19sb2NhdGlvblwiLFxuICBcInBlcnNpc3RlbnRfbm90aWZpY2F0aW9uXCIsXG4gIFwic2NyaXB0XCIsXG4gIFwic3VuXCIsXG4gIFwiem9uZVwiLFxuXSk7XG5cbmNvbnN0IEhJREVfUExBVEZPUk0gPSBuZXcgU2V0KFtcIm1vYmlsZV9hcHBcIl0pO1xuXG5pbnRlcmZhY2UgU3BsaXR0ZWRCeUFyZWFEZXZpY2Uge1xuICBhcmVhc1dpdGhFbnRpdGllczogeyBbYXJlYUlkOiBzdHJpbmddOiBIYXNzRW50aXR5W10gfTtcbiAgZGV2aWNlc1dpdGhFbnRpdGllczogeyBbZGV2aWNlSWQ6IHN0cmluZ106IEhhc3NFbnRpdHlbXSB9O1xuICBvdGhlckVudGl0aWVzOiBIYXNzRW50aXRpZXM7XG59XG5cbmNvbnN0IHNwbGl0QnlBcmVhRGV2aWNlID0gKFxuICBhcmVhRW50cmllczogSG9tZUFzc2lzdGFudFtcImFyZWFzXCJdLFxuICBkZXZpY2VFbnRyaWVzOiBIb21lQXNzaXN0YW50W1wiZGV2aWNlc1wiXSxcbiAgZW50aXR5RW50cmllczogSG9tZUFzc2lzdGFudFtcImVudGl0aWVzXCJdLFxuICBlbnRpdGllczogSGFzc0VudGl0aWVzXG4pOiBTcGxpdHRlZEJ5QXJlYURldmljZSA9PiB7XG4gIGNvbnN0IGFsbEVudGl0aWVzID0geyAuLi5lbnRpdGllcyB9O1xuICBjb25zdCBhcmVhc1dpdGhFbnRpdGllczogU3BsaXR0ZWRCeUFyZWFEZXZpY2VbXCJhcmVhc1dpdGhFbnRpdGllc1wiXSA9IHt9O1xuICBjb25zdCBkZXZpY2VzV2l0aEVudGl0aWVzOiBTcGxpdHRlZEJ5QXJlYURldmljZVtcImRldmljZXNXaXRoRW50aXRpZXNcIl0gPSB7fTtcblxuICBmb3IgKGNvbnN0IGVudGl0eSBvZiBPYmplY3QudmFsdWVzKGVudGl0eUVudHJpZXMpKSB7XG4gICAgY29uc3QgYXJlYUlkID1cbiAgICAgIGVudGl0eS5hcmVhX2lkIHx8XG4gICAgICAoZW50aXR5LmRldmljZV9pZCAmJiBkZXZpY2VFbnRyaWVzW2VudGl0eS5kZXZpY2VfaWRdPy5hcmVhX2lkKTtcbiAgICBpZiAoYXJlYUlkICYmIGFyZWFJZCBpbiBhcmVhRW50cmllcyAmJiBlbnRpdHkuZW50aXR5X2lkIGluIGFsbEVudGl0aWVzKSB7XG4gICAgICBpZiAoIShhcmVhSWQgaW4gYXJlYXNXaXRoRW50aXRpZXMpKSB7XG4gICAgICAgIGFyZWFzV2l0aEVudGl0aWVzW2FyZWFJZF0gPSBbXTtcbiAgICAgIH1cbiAgICAgIGFyZWFzV2l0aEVudGl0aWVzW2FyZWFJZF0ucHVzaChhbGxFbnRpdGllc1tlbnRpdHkuZW50aXR5X2lkXSk7XG4gICAgICBkZWxldGUgYWxsRW50aXRpZXNbZW50aXR5LmVudGl0eV9pZF07XG4gICAgfSBlbHNlIGlmIChcbiAgICAgIGVudGl0eS5kZXZpY2VfaWQgJiZcbiAgICAgIGVudGl0eS5kZXZpY2VfaWQgaW4gZGV2aWNlRW50cmllcyAmJlxuICAgICAgZW50aXR5LmVudGl0eV9pZCBpbiBhbGxFbnRpdGllc1xuICAgICkge1xuICAgICAgaWYgKCEoZW50aXR5LmRldmljZV9pZCBpbiBkZXZpY2VzV2l0aEVudGl0aWVzKSkge1xuICAgICAgICBkZXZpY2VzV2l0aEVudGl0aWVzW2VudGl0eS5kZXZpY2VfaWRdID0gW107XG4gICAgICB9XG4gICAgICBkZXZpY2VzV2l0aEVudGl0aWVzW2VudGl0eS5kZXZpY2VfaWRdLnB1c2goYWxsRW50aXRpZXNbZW50aXR5LmVudGl0eV9pZF0pO1xuICAgICAgZGVsZXRlIGFsbEVudGl0aWVzW2VudGl0eS5lbnRpdHlfaWRdO1xuICAgIH1cbiAgfVxuICBmb3IgKGNvbnN0IFtkZXZpY2VJZCwgZGV2aWNlRW50aXRpZXNdIG9mIE9iamVjdC5lbnRyaWVzKFxuICAgIGRldmljZXNXaXRoRW50aXRpZXNcbiAgKSkge1xuICAgIGlmIChkZXZpY2VFbnRpdGllcy5sZW5ndGggPT09IDEpIHtcbiAgICAgIGFsbEVudGl0aWVzW2RldmljZUVudGl0aWVzWzBdLmVudGl0eV9pZF0gPSBkZXZpY2VFbnRpdGllc1swXTtcbiAgICAgIGRlbGV0ZSBkZXZpY2VzV2l0aEVudGl0aWVzW2RldmljZUlkXTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBhcmVhc1dpdGhFbnRpdGllcyxcbiAgICBkZXZpY2VzV2l0aEVudGl0aWVzLFxuICAgIG90aGVyRW50aXRpZXM6IGFsbEVudGl0aWVzLFxuICB9O1xufTtcblxuZXhwb3J0IGNvbnN0IGNvbXB1dGVDYXJkcyA9IChcbiAgc3RhdGVzOiBIYXNzRW50aXRpZXMsXG4gIGVudGl0eUlkczogc3RyaW5nW10sXG4gIGVudGl0eUNhcmRPcHRpb25zOiBQYXJ0aWFsPEVudGl0aWVzQ2FyZENvbmZpZz4sXG4gIHJlbmRlckZvb3RlckVudGl0aWVzID0gdHJ1ZVxuKTogTG92ZWxhY2VDYXJkQ29uZmlnW10gPT4ge1xuICBjb25zdCBjYXJkczogTG92ZWxhY2VDYXJkQ29uZmlnW10gPSBbXTtcblxuICAvLyBGb3IgZW50aXR5IGNhcmRcbiAgY29uc3QgZW50aXRpZXNDb25mOiBBcnJheTxzdHJpbmcgfCBFbnRpdHlDb25maWc+ID0gW107XG5cbiAgY29uc3QgdGl0bGVQcmVmaXggPSBlbnRpdHlDYXJkT3B0aW9ucy50aXRsZVxuICAgID8gZW50aXR5Q2FyZE9wdGlvbnMudGl0bGUudG9Mb3dlckNhc2UoKVxuICAgIDogdW5kZWZpbmVkO1xuXG4gIGNvbnN0IGZvb3RlckVudGl0aWVzOiBCdXR0b25zSGVhZGVyRm9vdGVyQ29uZmlnW1wiZW50aXRpZXNcIl0gPSBbXTtcblxuICBmb3IgKGNvbnN0IGVudGl0eUlkIG9mIGVudGl0eUlkcykge1xuICAgIGNvbnN0IHN0YXRlT2JqID0gc3RhdGVzW2VudGl0eUlkXTtcbiAgICBjb25zdCBkb21haW4gPSBjb21wdXRlRG9tYWluKGVudGl0eUlkKTtcblxuICAgIGlmIChkb21haW4gPT09IFwiYWxhcm1fY29udHJvbF9wYW5lbFwiKSB7XG4gICAgICBjb25zdCBjYXJkQ29uZmlnOiBBbGFybVBhbmVsQ2FyZENvbmZpZyA9IHtcbiAgICAgICAgdHlwZTogXCJhbGFybS1wYW5lbFwiLFxuICAgICAgICBlbnRpdHk6IGVudGl0eUlkLFxuICAgICAgfTtcbiAgICAgIGNhcmRzLnB1c2goY2FyZENvbmZpZyk7XG4gICAgfSBlbHNlIGlmIChkb21haW4gPT09IFwiY2FtZXJhXCIpIHtcbiAgICAgIGNvbnN0IGNhcmRDb25maWc6IFBpY3R1cmVFbnRpdHlDYXJkQ29uZmlnID0ge1xuICAgICAgICB0eXBlOiBcInBpY3R1cmUtZW50aXR5XCIsXG4gICAgICAgIGVudGl0eTogZW50aXR5SWQsXG4gICAgICB9O1xuICAgICAgY2FyZHMucHVzaChjYXJkQ29uZmlnKTtcbiAgICB9IGVsc2UgaWYgKGRvbWFpbiA9PT0gXCJjbGltYXRlXCIpIHtcbiAgICAgIGNvbnN0IGNhcmRDb25maWc6IFRoZXJtb3N0YXRDYXJkQ29uZmlnID0ge1xuICAgICAgICB0eXBlOiBcInRoZXJtb3N0YXRcIixcbiAgICAgICAgZW50aXR5OiBlbnRpdHlJZCxcbiAgICAgIH07XG4gICAgICBjYXJkcy5wdXNoKGNhcmRDb25maWcpO1xuICAgIH0gZWxzZSBpZiAoZG9tYWluID09PSBcImh1bWlkaWZpZXJcIikge1xuICAgICAgY29uc3QgY2FyZENvbmZpZzogSHVtaWRpZmllckNhcmRDb25maWcgPSB7XG4gICAgICAgIHR5cGU6IFwiaHVtaWRpZmllclwiLFxuICAgICAgICBlbnRpdHk6IGVudGl0eUlkLFxuICAgICAgfTtcbiAgICAgIGNhcmRzLnB1c2goY2FyZENvbmZpZyk7XG4gICAgfSBlbHNlIGlmIChkb21haW4gPT09IFwibWVkaWFfcGxheWVyXCIpIHtcbiAgICAgIGNvbnN0IGNhcmRDb25maWcgPSB7XG4gICAgICAgIHR5cGU6IFwibWVkaWEtY29udHJvbFwiLFxuICAgICAgICBlbnRpdHk6IGVudGl0eUlkLFxuICAgICAgfTtcbiAgICAgIGNhcmRzLnB1c2goY2FyZENvbmZpZyk7XG4gICAgfSBlbHNlIGlmIChkb21haW4gPT09IFwicGxhbnRcIikge1xuICAgICAgY29uc3QgY2FyZENvbmZpZyA9IHtcbiAgICAgICAgdHlwZTogXCJwbGFudC1zdGF0dXNcIixcbiAgICAgICAgZW50aXR5OiBlbnRpdHlJZCxcbiAgICAgIH07XG4gICAgICBjYXJkcy5wdXNoKGNhcmRDb25maWcpO1xuICAgIH0gZWxzZSBpZiAoZG9tYWluID09PSBcIndlYXRoZXJcIikge1xuICAgICAgY29uc3QgY2FyZENvbmZpZyA9IHtcbiAgICAgICAgdHlwZTogXCJ3ZWF0aGVyLWZvcmVjYXN0XCIsXG4gICAgICAgIGVudGl0eTogZW50aXR5SWQsXG4gICAgICAgIHNob3dfZm9yZWNhc3Q6IGZhbHNlLFxuICAgICAgfTtcbiAgICAgIGNhcmRzLnB1c2goY2FyZENvbmZpZyk7XG4gICAgfSBlbHNlIGlmIChcbiAgICAgIHJlbmRlckZvb3RlckVudGl0aWVzICYmXG4gICAgICAoZG9tYWluID09PSBcInNjZW5lXCIgfHwgZG9tYWluID09PSBcInNjcmlwdFwiKVxuICAgICkge1xuICAgICAgY29uc3QgY29uZjogKHR5cGVvZiBmb290ZXJFbnRpdGllcylbMF0gPSB7XG4gICAgICAgIGVudGl0eTogZW50aXR5SWQsXG4gICAgICAgIHNob3dfaWNvbjogdHJ1ZSxcbiAgICAgICAgc2hvd19uYW1lOiB0cnVlLFxuICAgICAgfTtcbiAgICAgIGxldCBuYW1lOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gICAgICBpZiAoXG4gICAgICAgIHRpdGxlUHJlZml4ICYmXG4gICAgICAgIHN0YXRlT2JqICYmXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25kLWFzc2lnblxuICAgICAgICAobmFtZSA9IHN0cmlwUHJlZml4RnJvbUVudGl0eU5hbWUoXG4gICAgICAgICAgY29tcHV0ZVN0YXRlTmFtZShzdGF0ZU9iaiksXG4gICAgICAgICAgdGl0bGVQcmVmaXhcbiAgICAgICAgKSlcbiAgICAgICkge1xuICAgICAgICBjb25mLm5hbWUgPSBuYW1lO1xuICAgICAgfVxuICAgICAgZm9vdGVyRW50aXRpZXMucHVzaChjb25mKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IG5hbWU6IHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgICAgIGNvbnN0IGVudGl0eUNvbmYgPVxuICAgICAgICB0aXRsZVByZWZpeCAmJlxuICAgICAgICBzdGF0ZU9iaiAmJlxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uZC1hc3NpZ25cbiAgICAgICAgKG5hbWUgPSBzdHJpcFByZWZpeEZyb21FbnRpdHlOYW1lKFxuICAgICAgICAgIGNvbXB1dGVTdGF0ZU5hbWUoc3RhdGVPYmopLFxuICAgICAgICAgIHRpdGxlUHJlZml4XG4gICAgICAgICkpXG4gICAgICAgICAgPyB7XG4gICAgICAgICAgICAgIGVudGl0eTogZW50aXR5SWQsXG4gICAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgOiBlbnRpdHlJZDtcblxuICAgICAgZW50aXRpZXNDb25mLnB1c2goZW50aXR5Q29uZik7XG4gICAgfVxuICB9XG5cbiAgZW50aXRpZXNDb25mLnNvcnQoKGEsIGIpID0+IHtcbiAgICBjb25zdCBlbnRpdHlJZEEgPSB0eXBlb2YgYSA9PT0gXCJzdHJpbmdcIiA/IGEgOiBhLmVudGl0eTtcbiAgICBjb25zdCBlbnRpdHlJZEIgPSB0eXBlb2YgYiA9PT0gXCJzdHJpbmdcIiA/IGIgOiBiLmVudGl0eTtcblxuICAgIGNvbnN0IGNhdGVnb3J5QSA9IFNFTlNPUl9FTlRJVElFUy5pbmNsdWRlcyhjb21wdXRlRG9tYWluKGVudGl0eUlkQSkpXG4gICAgICA/IFwic2Vuc29yXCJcbiAgICAgIDogXCJjb250cm9sXCI7XG4gICAgY29uc3QgY2F0ZWdvcnlCID0gU0VOU09SX0VOVElUSUVTLmluY2x1ZGVzKGNvbXB1dGVEb21haW4oZW50aXR5SWRCKSlcbiAgICAgID8gXCJzZW5zb3JcIlxuICAgICAgOiBcImNvbnRyb2xcIjtcblxuICAgIGlmIChjYXRlZ29yeUEgIT09IGNhdGVnb3J5Qikge1xuICAgICAgcmV0dXJuIGNhdGVnb3J5QSA9PT0gXCJzZW5zb3JcIiA/IDEgOiAtMTtcbiAgICB9XG5cbiAgICByZXR1cm4gc3RyaW5nQ29tcGFyZShcbiAgICAgIHR5cGVvZiBhID09PSBcInN0cmluZ1wiXG4gICAgICAgID8gc3RhdGVzW2FdXG4gICAgICAgICAgPyBjb21wdXRlU3RhdGVOYW1lKHN0YXRlc1thXSlcbiAgICAgICAgICA6IFwiXCJcbiAgICAgICAgOiBhLm5hbWUgfHwgXCJcIixcbiAgICAgIHR5cGVvZiBiID09PSBcInN0cmluZ1wiXG4gICAgICAgID8gc3RhdGVzW2JdXG4gICAgICAgICAgPyBjb21wdXRlU3RhdGVOYW1lKHN0YXRlc1tiXSlcbiAgICAgICAgICA6IFwiXCJcbiAgICAgICAgOiBiLm5hbWUgfHwgXCJcIlxuICAgICk7XG4gIH0pO1xuXG4gIC8vIElmIHdlIGVuZGVkIHVwIHdpdGggZm9vdGVyIGVudGl0aWVzIGJ1dCBubyBub3JtYWwgZW50aXRpZXMsXG4gIC8vIHJlbmRlciB0aGUgZm9vdGVyIGVudGl0aWVzIGFzIG5vcm1hbCBlbnRpdGllcy5cbiAgaWYgKGVudGl0aWVzQ29uZi5sZW5ndGggPT09IDAgJiYgZm9vdGVyRW50aXRpZXMubGVuZ3RoID4gMCkge1xuICAgIHJldHVybiBjb21wdXRlQ2FyZHMoc3RhdGVzLCBlbnRpdHlJZHMsIGVudGl0eUNhcmRPcHRpb25zLCBmYWxzZSk7XG4gIH1cblxuICBpZiAoZW50aXRpZXNDb25mLmxlbmd0aCA+IDAgfHwgZm9vdGVyRW50aXRpZXMubGVuZ3RoID4gMCkge1xuICAgIGNvbnN0IGNhcmQ6IEVudGl0aWVzQ2FyZENvbmZpZyA9IHtcbiAgICAgIHR5cGU6IFwiZW50aXRpZXNcIixcbiAgICAgIGVudGl0aWVzOiBlbnRpdGllc0NvbmYsXG4gICAgICAuLi5lbnRpdHlDYXJkT3B0aW9ucyxcbiAgICB9O1xuICAgIGlmIChmb290ZXJFbnRpdGllcy5sZW5ndGggPiAwKSB7XG4gICAgICBjYXJkLmZvb3RlciA9IHtcbiAgICAgICAgdHlwZTogXCJidXR0b25zXCIsXG4gICAgICAgIGVudGl0aWVzOiBmb290ZXJFbnRpdGllcyxcbiAgICAgIH0gYXMgQnV0dG9uc0hlYWRlckZvb3RlckNvbmZpZztcbiAgICB9XG4gICAgY2FyZHMudW5zaGlmdChjYXJkKTtcbiAgfVxuXG4gIGlmIChjYXJkcy5sZW5ndGggPCAyKSB7XG4gICAgcmV0dXJuIGNhcmRzO1xuICB9XG5cbiAgcmV0dXJuIFtcbiAgICB7XG4gICAgICB0eXBlOiBcImdyaWRcIixcbiAgICAgIHNxdWFyZTogZmFsc2UsXG4gICAgICBjb2x1bW5zOiAxLFxuICAgICAgY2FyZHMsXG4gICAgfSxcbiAgXTtcbn07XG5cbmNvbnN0IGNvbXB1dGVEZWZhdWx0Vmlld1N0YXRlcyA9IChcbiAgZW50aXRpZXM6IEhhc3NFbnRpdGllcyxcbiAgZW50aXR5RW50cmllczogSG9tZUFzc2lzdGFudFtcImVudGl0aWVzXCJdXG4pOiBIYXNzRW50aXRpZXMgPT4ge1xuICBjb25zdCBzdGF0ZXMgPSB7fTtcbiAgY29uc3QgaGlkZGVuRW50aXRpZXMgPSBuZXcgU2V0KFxuICAgIE9iamVjdC52YWx1ZXMoZW50aXR5RW50cmllcylcbiAgICAgIC5maWx0ZXIoXG4gICAgICAgIChlbnRyeSkgPT5cbiAgICAgICAgICBlbnRyeS5lbnRpdHlfY2F0ZWdvcnkgfHxcbiAgICAgICAgICAoZW50cnkucGxhdGZvcm0gJiYgSElERV9QTEFURk9STS5oYXMoZW50cnkucGxhdGZvcm0pKSB8fFxuICAgICAgICAgIGVudHJ5LmhpZGRlblxuICAgICAgKVxuICAgICAgLm1hcCgoZW50cnkpID0+IGVudHJ5LmVudGl0eV9pZClcbiAgKTtcblxuICBmb3IgKGNvbnN0IGVudGl0eUlkIG9mIE9iamVjdC5rZXlzKGVudGl0aWVzKSkge1xuICAgIGNvbnN0IHN0YXRlT2JqID0gZW50aXRpZXNbZW50aXR5SWRdO1xuICAgIGlmIChcbiAgICAgICFISURFX0RPTUFJTi5oYXMoY29tcHV0ZVN0YXRlRG9tYWluKHN0YXRlT2JqKSkgJiZcbiAgICAgICFoaWRkZW5FbnRpdGllcy5oYXMoc3RhdGVPYmouZW50aXR5X2lkKVxuICAgICkge1xuICAgICAgc3RhdGVzW2VudGl0eUlkXSA9IGVudGl0aWVzW2VudGl0eUlkXTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHN0YXRlcztcbn07XG5cbmV4cG9ydCBjb25zdCBnZW5lcmF0ZVZpZXdDb25maWcgPSAoXG4gIGxvY2FsaXplOiBMb2NhbGl6ZUZ1bmMsXG4gIHBhdGg6IHN0cmluZyxcbiAgdGl0bGU6IHN0cmluZyB8IHVuZGVmaW5lZCxcbiAgaWNvbjogc3RyaW5nIHwgdW5kZWZpbmVkLFxuICBlbnRpdGllczogSGFzc0VudGl0aWVzXG4pOiBMb3ZlbGFjZVZpZXdDb25maWcgPT4ge1xuICBjb25zdCB1bmdyb3VwZWRFbnRpdGl0ZXM6IHsgW2RvbWFpbjogc3RyaW5nXTogc3RyaW5nW10gfSA9IHt9O1xuXG4gIC8vIE9yZ2FuaXplIHVuZ3JvdXBlZCBlbnRpdGllcyBpbiB1bmdyb3VwZWQgdGhpbmdzXG4gIGZvciAoY29uc3QgZW50aXR5SWQgb2YgT2JqZWN0LmtleXMoZW50aXRpZXMpKSB7XG4gICAgY29uc3Qgc3RhdGUgPSBlbnRpdGllc1tlbnRpdHlJZF07XG4gICAgY29uc3QgZG9tYWluID0gY29tcHV0ZVN0YXRlRG9tYWluKHN0YXRlKTtcblxuICAgIGlmICghKGRvbWFpbiBpbiB1bmdyb3VwZWRFbnRpdGl0ZXMpKSB7XG4gICAgICB1bmdyb3VwZWRFbnRpdGl0ZXNbZG9tYWluXSA9IFtdO1xuICAgIH1cblxuICAgIHVuZ3JvdXBlZEVudGl0aXRlc1tkb21haW5dLnB1c2goc3RhdGUuZW50aXR5X2lkKTtcbiAgfVxuXG4gIGNvbnN0IGNhcmRzOiBMb3ZlbGFjZUNhcmRDb25maWdbXSA9IFtdO1xuXG4gIGlmIChcInBlcnNvblwiIGluIHVuZ3JvdXBlZEVudGl0aXRlcykge1xuICAgIGNvbnN0IHBlcnNvbkNhcmRzOiBMb3ZlbGFjZUNhcmRDb25maWdbXSA9IFtdO1xuXG4gICAgaWYgKHVuZ3JvdXBlZEVudGl0aXRlcy5wZXJzb24ubGVuZ3RoID09PSAxKSB7XG4gICAgICBjYXJkcy5wdXNoKHtcbiAgICAgICAgdHlwZTogXCJlbnRpdGllc1wiLFxuICAgICAgICBlbnRpdGllczogdW5ncm91cGVkRW50aXRpdGVzLnBlcnNvbixcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgYmFja2dyb3VuZENvbG9yOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gICAgICBsZXQgZm9yZWdyb3VuZENvbG9yID0gXCJcIjtcblxuICAgICAgZm9yIChjb25zdCBwZXJzb25FbnRpdHlJZCBvZiB1bmdyb3VwZWRFbnRpdGl0ZXMucGVyc29uKSB7XG4gICAgICAgIGNvbnN0IHN0YXRlT2JqID0gZW50aXRpZXNbcGVyc29uRW50aXR5SWRdO1xuXG4gICAgICAgIGxldCBpbWFnZSA9IHN0YXRlT2JqLmF0dHJpYnV0ZXMuZW50aXR5X3BpY3R1cmU7XG5cbiAgICAgICAgaWYgKCFpbWFnZSkge1xuICAgICAgICAgIGlmIChiYWNrZ3JvdW5kQ29sb3IgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3QgY29tcHV0ZWRTdHlsZSA9IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSk7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3IgPSBlbmNvZGVVUklDb21wb25lbnQoXG4gICAgICAgICAgICAgIGNvbXB1dGVkU3R5bGUuZ2V0UHJvcGVydHlWYWx1ZShcIi0tbGlnaHQtcHJpbWFyeS1jb2xvclwiKS50cmltKClcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBmb3JlZ3JvdW5kQ29sb3IgPSBlbmNvZGVVUklDb21wb25lbnQoXG4gICAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgICBjb21wdXRlZFN0eWxlLmdldFByb3BlcnR5VmFsdWUoXCItLXRleHQtbGlnaHQtcHJpbWFyeS1jb2xvclwiKSB8fFxuICAgICAgICAgICAgICAgIGNvbXB1dGVkU3R5bGUuZ2V0UHJvcGVydHlWYWx1ZShcIi0tcHJpbWFyeS10ZXh0LWNvbG9yXCIpXG4gICAgICAgICAgICAgICkudHJpbSgpXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBpbml0aWFscyA9IGNvbXB1dGVVc2VySW5pdGlhbHMoXG4gICAgICAgICAgICBzdGF0ZU9iai5hdHRyaWJ1dGVzLmZyaWVuZGx5X25hbWUgfHwgXCJcIlxuICAgICAgICAgICk7XG4gICAgICAgICAgaW1hZ2UgPSBgZGF0YTppbWFnZS9zdmcreG1sLCUzQ3N2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCA1MCA1MCcgd2lkdGg9JzUwJyBoZWlnaHQ9JzUwJyBzdHlsZT0nYmFja2dyb3VuZC1jb2xvcjoke2JhY2tncm91bmRDb2xvcn0nJTNFJTNDZyUzRSUzQ3RleHQgZm9udC1mYW1pbHk9J3JvYm90bycgeD0nNTAlMjUnIHk9JzUwJTI1JyB0ZXh0LWFuY2hvcj0nbWlkZGxlJyBzdHJva2U9JyR7Zm9yZWdyb3VuZENvbG9yfScgZm9udC1zaXplPScxLjNlbScgZHk9Jy4zZW0nJTNFJHtpbml0aWFsc30lM0MvdGV4dCUzRSUzQy9nJTNFJTNDL3N2ZyUzRWA7XG4gICAgICAgIH1cblxuICAgICAgICBwZXJzb25DYXJkcy5wdXNoKHtcbiAgICAgICAgICB0eXBlOiBcInBpY3R1cmUtZW50aXR5XCIsXG4gICAgICAgICAgZW50aXR5OiBwZXJzb25FbnRpdHlJZCxcbiAgICAgICAgICBhc3BlY3RfcmF0aW86IFwiMVwiLFxuICAgICAgICAgIHNob3dfbmFtZTogZmFsc2UsXG4gICAgICAgICAgaW1hZ2UsXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBjYXJkcy5wdXNoKHtcbiAgICAgICAgdHlwZTogXCJncmlkXCIsXG4gICAgICAgIHNxdWFyZTogdHJ1ZSxcbiAgICAgICAgY29sdW1uczogMyxcbiAgICAgICAgY2FyZHM6IHBlcnNvbkNhcmRzLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZGVsZXRlIHVuZ3JvdXBlZEVudGl0aXRlcy5wZXJzb247XG4gIH1cblxuICAvLyBHcm91cCBoZWxwZXIgZW50aXRpZXMgaW4gYSBzaW5nbGUgY2FyZFxuICBjb25zdCBoZWxwZXJFbnRpdGllczogc3RyaW5nW10gPSBbXTtcblxuICBmb3IgKGNvbnN0IGRvbWFpbiBvZiBIRUxQRVJfRE9NQUlOUykge1xuICAgIGlmICghKGRvbWFpbiBpbiB1bmdyb3VwZWRFbnRpdGl0ZXMpKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgaGVscGVyRW50aXRpZXMucHVzaCguLi51bmdyb3VwZWRFbnRpdGl0ZXNbZG9tYWluXSk7XG4gICAgZGVsZXRlIHVuZ3JvdXBlZEVudGl0aXRlc1tkb21haW5dO1xuICB9XG5cbiAgLy8gUHJlcGFyZSB0cmFuc2xhdGlvbnMgZm9yIGNhcmRzXG4gIGNvbnN0IGRvbWFpblRyYW5zbGF0aW9uczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHt9O1xuXG4gIGZvciAoY29uc3QgZG9tYWluIG9mIE9iamVjdC5rZXlzKHVuZ3JvdXBlZEVudGl0aXRlcykpIHtcbiAgICBkb21haW5UcmFuc2xhdGlvbnNbZG9tYWluXSA9IGRvbWFpblRvTmFtZShsb2NhbGl6ZSwgZG9tYWluKTtcbiAgfVxuXG4gIGlmIChoZWxwZXJFbnRpdGllcy5sZW5ndGgpIHtcbiAgICB1bmdyb3VwZWRFbnRpdGl0ZXMuX2hlbHBlcnMgPSBoZWxwZXJFbnRpdGllcztcbiAgICBkb21haW5UcmFuc2xhdGlvbnMuX2hlbHBlcnMgPSBsb2NhbGl6ZShcbiAgICAgIFwidWkucGFuZWwubG92ZWxhY2Uuc3RyYXRlZ3kub3JpZ2luYWwtc3RhdGVzLmhlbHBlcnNcIlxuICAgICk7XG4gIH1cblxuICBPYmplY3Qua2V5cyh1bmdyb3VwZWRFbnRpdGl0ZXMpXG4gICAgLnNvcnQoKGRvbWFpbjEsIGRvbWFpbjIpID0+XG4gICAgICBzdHJpbmdDb21wYXJlKGRvbWFpblRyYW5zbGF0aW9uc1tkb21haW4xXSwgZG9tYWluVHJhbnNsYXRpb25zW2RvbWFpbjJdKVxuICAgIClcbiAgICAuZm9yRWFjaCgoZG9tYWluKSA9PiB7XG4gICAgICBjYXJkcy5wdXNoKFxuICAgICAgICAuLi5jb21wdXRlQ2FyZHMoXG4gICAgICAgICAgZW50aXRpZXMsXG4gICAgICAgICAgdW5ncm91cGVkRW50aXRpdGVzW2RvbWFpbl0uc29ydCgoYSwgYikgPT5cbiAgICAgICAgICAgIHN0cmluZ0NvbXBhcmUoXG4gICAgICAgICAgICAgIGNvbXB1dGVTdGF0ZU5hbWUoZW50aXRpZXNbYV0pLFxuICAgICAgICAgICAgICBjb21wdXRlU3RhdGVOYW1lKGVudGl0aWVzW2JdKVxuICAgICAgICAgICAgKVxuICAgICAgICAgICksXG4gICAgICAgICAge1xuICAgICAgICAgICAgdGl0bGU6IGRvbWFpblRyYW5zbGF0aW9uc1tkb21haW5dLFxuICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgKTtcbiAgICB9KTtcblxuICBjb25zdCB2aWV3OiBMb3ZlbGFjZVZpZXdDb25maWcgPSB7XG4gICAgcGF0aCxcbiAgICB0aXRsZSxcbiAgICBjYXJkcyxcbiAgfTtcblxuICBpZiAoaWNvbikge1xuICAgIHZpZXcuaWNvbiA9IGljb247XG4gIH1cblxuICByZXR1cm4gdmlldztcbn07XG5cbmV4cG9ydCBjb25zdCBnZW5lcmF0ZURlZmF1bHRWaWV3Q29uZmlnID0gKFxuICBhcmVhRW50cmllczogSG9tZUFzc2lzdGFudFtcImFyZWFzXCJdLFxuICBkZXZpY2VFbnRyaWVzOiBIb21lQXNzaXN0YW50W1wiZGV2aWNlc1wiXSxcbiAgZW50aXR5RW50cmllczogSG9tZUFzc2lzdGFudFtcImVudGl0aWVzXCJdLFxuICBlbnRpdGllczogSGFzc0VudGl0aWVzLFxuICBsb2NhbGl6ZTogTG9jYWxpemVGdW5jLFxuICBlbmVyZ3lQcmVmcz86IEVuZXJneVByZWZlcmVuY2VzXG4pOiBMb3ZlbGFjZVZpZXdDb25maWcgPT4ge1xuICBjb25zdCBzdGF0ZXMgPSBjb21wdXRlRGVmYXVsdFZpZXdTdGF0ZXMoZW50aXRpZXMsIGVudGl0eUVudHJpZXMpO1xuICBjb25zdCBwYXRoID0gXCJkZWZhdWx0X3ZpZXdcIjtcbiAgY29uc3QgdGl0bGUgPSBcIkhvbWVcIjtcbiAgY29uc3QgaWNvbiA9IHVuZGVmaW5lZDtcblxuICAvLyBJbiB0aGUgY2FzZSBvZiBhIGRlZmF1bHQgdmlldywgd2Ugd2FudCB0byB1c2UgdGhlIGdyb3VwIG9yZGVyIGF0dHJpYnV0ZVxuICBjb25zdCBncm91cE9yZGVycyA9IHt9O1xuICBmb3IgKGNvbnN0IGVudGl0eUlkIG9mIE9iamVjdC5rZXlzKHN0YXRlcykpIHtcbiAgICBjb25zdCBzdGF0ZU9iaiA9IHN0YXRlc1tlbnRpdHlJZF07XG4gICAgaWYgKHN0YXRlT2JqLmF0dHJpYnV0ZXMub3JkZXIpIHtcbiAgICAgIGdyb3VwT3JkZXJzW2VudGl0eUlkXSA9IHN0YXRlT2JqLmF0dHJpYnV0ZXMub3JkZXI7XG4gICAgfVxuICB9XG5cbiAgY29uc3Qgc3BsaXR0ZWRCeUFyZWFEZXZpY2UgPSBzcGxpdEJ5QXJlYURldmljZShcbiAgICBhcmVhRW50cmllcyxcbiAgICBkZXZpY2VFbnRyaWVzLFxuICAgIGVudGl0eUVudHJpZXMsXG4gICAgc3RhdGVzXG4gICk7XG5cbiAgY29uc3Qgc3BsaXR0ZWRCeUdyb3VwcyA9IHNwbGl0QnlHcm91cHMoc3BsaXR0ZWRCeUFyZWFEZXZpY2Uub3RoZXJFbnRpdGllcyk7XG4gIHNwbGl0dGVkQnlHcm91cHMuZ3JvdXBzLnNvcnQoXG4gICAgKGdyMSwgZ3IyKSA9PiBncm91cE9yZGVyc1tncjEuZW50aXR5X2lkXSAtIGdyb3VwT3JkZXJzW2dyMi5lbnRpdHlfaWRdXG4gICk7XG5cbiAgY29uc3QgZ3JvdXBDYXJkczogTG92ZWxhY2VDYXJkQ29uZmlnW10gPSBbXTtcblxuICBmb3IgKGNvbnN0IGdyb3VwRW50aXR5IG9mIHNwbGl0dGVkQnlHcm91cHMuZ3JvdXBzKSB7XG4gICAgZ3JvdXBDYXJkcy5wdXNoKFxuICAgICAgLi4uY29tcHV0ZUNhcmRzKGVudGl0aWVzLCBncm91cEVudGl0eS5hdHRyaWJ1dGVzLmVudGl0eV9pZCwge1xuICAgICAgICB0aXRsZTogY29tcHV0ZVN0YXRlTmFtZShncm91cEVudGl0eSksXG4gICAgICAgIHNob3dfaGVhZGVyX3RvZ2dsZTogZ3JvdXBFbnRpdHkuYXR0cmlidXRlcy5jb250cm9sICE9PSBcImhpZGRlblwiLFxuICAgICAgfSlcbiAgICApO1xuICB9XG5cbiAgY29uc3QgY29uZmlnID0gZ2VuZXJhdGVWaWV3Q29uZmlnKFxuICAgIGxvY2FsaXplLFxuICAgIHBhdGgsXG4gICAgdGl0bGUsXG4gICAgaWNvbixcbiAgICBzcGxpdHRlZEJ5R3JvdXBzLnVuZ3JvdXBlZFxuICApO1xuXG4gIGNvbnN0IGFyZWFDYXJkczogTG92ZWxhY2VDYXJkQ29uZmlnW10gPSBbXTtcblxuICBjb25zdCBzb3J0ZWRBcmVhcyA9IE9iamVjdC5lbnRyaWVzKFxuICAgIHNwbGl0dGVkQnlBcmVhRGV2aWNlLmFyZWFzV2l0aEVudGl0aWVzXG4gICkuc29ydCgoYSwgYikgPT4ge1xuICAgIGNvbnN0IGFyZWFBID0gYXJlYUVudHJpZXNbYVswXV07XG4gICAgY29uc3QgYXJlYUIgPSBhcmVhRW50cmllc1tiWzBdXTtcbiAgICByZXR1cm4gc3RyaW5nQ29tcGFyZShhcmVhQS5uYW1lLCBhcmVhQi5uYW1lKTtcbiAgfSk7XG5cbiAgZm9yIChjb25zdCBbYXJlYUlkLCBhcmVhRW50aXRpZXNdIG9mIHNvcnRlZEFyZWFzKSB7XG4gICAgY29uc3QgYXJlYSA9IGFyZWFFbnRyaWVzW2FyZWFJZF07XG4gICAgYXJlYUNhcmRzLnB1c2goXG4gICAgICAuLi5jb21wdXRlQ2FyZHMoXG4gICAgICAgIGVudGl0aWVzLFxuICAgICAgICBhcmVhRW50aXRpZXMubWFwKChlbnRpdHkpID0+IGVudGl0eS5lbnRpdHlfaWQpLFxuICAgICAgICB7XG4gICAgICAgICAgdGl0bGU6IGFyZWEubmFtZSxcbiAgICAgICAgfVxuICAgICAgKVxuICAgICk7XG4gIH1cblxuICBjb25zdCBkZXZpY2VDYXJkczogTG92ZWxhY2VDYXJkQ29uZmlnW10gPSBbXTtcblxuICBjb25zdCBzb3J0ZWREZXZpY2VzID0gT2JqZWN0LmVudHJpZXMoXG4gICAgc3BsaXR0ZWRCeUFyZWFEZXZpY2UuZGV2aWNlc1dpdGhFbnRpdGllc1xuICApLnNvcnQoKGEsIGIpID0+IHtcbiAgICBjb25zdCBkZXZpY2VBID0gZGV2aWNlRW50cmllc1thWzBdXTtcbiAgICBjb25zdCBkZXZpY2VCID0gZGV2aWNlRW50cmllc1tiWzBdXTtcbiAgICByZXR1cm4gc3RyaW5nQ29tcGFyZShcbiAgICAgIGRldmljZUEubmFtZV9ieV91c2VyIHx8IGRldmljZUEubmFtZSB8fCBcIlwiLFxuICAgICAgZGV2aWNlQi5uYW1lX2J5X3VzZXIgfHwgZGV2aWNlQi5uYW1lIHx8IFwiXCJcbiAgICApO1xuICB9KTtcblxuICBmb3IgKGNvbnN0IFtkZXZpY2VJZCwgZGV2aWNlRW50aXRpZXNdIG9mIHNvcnRlZERldmljZXMpIHtcbiAgICBjb25zdCBkZXZpY2UgPSBkZXZpY2VFbnRyaWVzW2RldmljZUlkXTtcbiAgICBkZXZpY2VDYXJkcy5wdXNoKFxuICAgICAgLi4uY29tcHV0ZUNhcmRzKFxuICAgICAgICBlbnRpdGllcyxcbiAgICAgICAgZGV2aWNlRW50aXRpZXMubWFwKChlbnRpdHkpID0+IGVudGl0eS5lbnRpdHlfaWQpLFxuICAgICAgICB7XG4gICAgICAgICAgdGl0bGU6XG4gICAgICAgICAgICBkZXZpY2UubmFtZV9ieV91c2VyIHx8XG4gICAgICAgICAgICBkZXZpY2UubmFtZSB8fFxuICAgICAgICAgICAgbG9jYWxpemUoXG4gICAgICAgICAgICAgIFwidWkucGFuZWwuY29uZmlnLmRldmljZXMudW5uYW1lZF9kZXZpY2VcIixcbiAgICAgICAgICAgICAgXCJ0eXBlXCIsXG4gICAgICAgICAgICAgIGxvY2FsaXplKFxuICAgICAgICAgICAgICAgIGB1aS5wYW5lbC5jb25maWcuZGV2aWNlcy50eXBlLiR7ZGV2aWNlLmVudHJ5X3R5cGUgfHwgXCJkZXZpY2VcIn1gXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICksXG4gICAgICAgIH1cbiAgICAgIClcbiAgICApO1xuICB9XG5cbiAgbGV0IGVuZXJneUNhcmQ6IExvdmVsYWNlQ2FyZENvbmZpZyB8IHVuZGVmaW5lZDtcblxuICBpZiAoZW5lcmd5UHJlZnMpIHtcbiAgICAvLyBEaXN0cmlidXRpb24gY2FyZCByZXF1aXJlcyB0aGUgZ3JpZCB0byBiZSBjb25maWd1cmVkXG4gICAgY29uc3QgZ3JpZCA9IGVuZXJneVByZWZzLmVuZXJneV9zb3VyY2VzLmZpbmQoXG4gICAgICAoc291cmNlKSA9PiBzb3VyY2UudHlwZSA9PT0gXCJncmlkXCJcbiAgICApIGFzIEdyaWRTb3VyY2VUeXBlRW5lcmd5UHJlZmVyZW5jZSB8IHVuZGVmaW5lZDtcblxuICAgIGlmIChncmlkICYmIGdyaWQuZmxvd19mcm9tLmxlbmd0aCA+IDApIHtcbiAgICAgIGVuZXJneUNhcmQgPSB7XG4gICAgICAgIHRpdGxlOiBsb2NhbGl6ZShcbiAgICAgICAgICBcInVpLnBhbmVsLmxvdmVsYWNlLmNhcmRzLmVuZXJneS5lbmVyZ3lfZGlzdHJpYnV0aW9uLnRpdGxlX3RvZGF5XCJcbiAgICAgICAgKSxcbiAgICAgICAgdHlwZTogXCJlbmVyZ3ktZGlzdHJpYnV0aW9uXCIsXG4gICAgICAgIGxpbmtfZGFzaGJvYXJkOiB0cnVlLFxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICBjb25maWcuY2FyZHMhLnVuc2hpZnQoXG4gICAgLi4uYXJlYUNhcmRzLFxuICAgIC4uLmdyb3VwQ2FyZHMsXG4gICAgLi4uKGVuZXJneUNhcmQgPyBbZW5lcmd5Q2FyZF0gOiBbXSlcbiAgKTtcblxuICBjb25maWcuY2FyZHMhLnB1c2goLi4uZGV2aWNlQ2FyZHMpO1xuXG4gIHJldHVybiBjb25maWc7XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/panels/lovelace/common/generate-lovelace-config.ts\n");

/***/ })

}]);