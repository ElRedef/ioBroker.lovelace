"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkhome_assistant_frontend"] = self["webpackChunkhome_assistant_frontend"] || []).push([["src_data_energy_ts"],{

/***/ "./src/common/util/group-by.ts":
/*!*************************************!*\
  !*** ./src/common/util/group-by.ts ***!
  \*************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"groupBy\": function() { return /* binding */ groupBy; }\n/* harmony export */ });\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nvar groupBy = function groupBy(list, keySelector) {\n  var result = {};\n\n  var _iterator = _createForOfIteratorHelper(list),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var _item = _step.value;\n\n      var _key = keySelector(_item);\n\n      if (_key in result) {\n        result[_key].push(_item);\n      } else {\n        result[_key] = [_item];\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  return result;\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tbW9uL3V0aWwvZ3JvdXAtYnkudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBO0FBSUE7O0FBREE7QUFBQTs7QUFBQTtBQUVBO0FBQUE7O0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVEE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFVQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaG9tZS1hc3Npc3RhbnQtZnJvbnRlbmQvLi9zcmMvY29tbW9uL3V0aWwvZ3JvdXAtYnkudHM/ZjhlMCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgZ3JvdXBCeSA9IDxUPihcbiAgbGlzdDogVFtdLFxuICBrZXlTZWxlY3RvcjogKGl0ZW06IFQpID0+IHN0cmluZ1xuKTogeyBba2V5OiBzdHJpbmddOiBUW10gfSA9PiB7XG4gIGNvbnN0IHJlc3VsdCA9IHt9O1xuICBmb3IgKGNvbnN0IGl0ZW0gb2YgbGlzdCkge1xuICAgIGNvbnN0IGtleSA9IGtleVNlbGVjdG9yKGl0ZW0pO1xuICAgIGlmIChrZXkgaW4gcmVzdWx0KSB7XG4gICAgICByZXN1bHRba2V5XS5wdXNoKGl0ZW0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXN1bHRba2V5XSA9IFtpdGVtXTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/common/util/group-by.ts\n");

/***/ }),

/***/ "./src/common/util/subscribe-one.ts":
/*!******************************************!*\
  !*** ./src/common/util/subscribe-one.ts ***!
  \******************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"subscribeOne\": function() { return /* binding */ subscribeOne; }\n/* harmony export */ });\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nvar subscribeOne = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(conn, subscribe) {\n    return regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            return _context.abrupt(\"return\", new Promise(function (resolve) {\n              var unsub = subscribe(conn, function (items) {\n                unsub();\n                resolve(items);\n              });\n            }));\n\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function subscribeOne(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tbW9uL3V0aWwvc3Vic2NyaWJlLW9uZS50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFaQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFBQSIsInNvdXJjZXMiOlsid2VicGFjazovL2hvbWUtYXNzaXN0YW50LWZyb250ZW5kLy4vc3JjL2NvbW1vbi91dGlsL3N1YnNjcmliZS1vbmUudHM/NzcwMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb25uZWN0aW9uLCBVbnN1YnNjcmliZUZ1bmMgfSBmcm9tIFwiaG9tZS1hc3Npc3RhbnQtanMtd2Vic29ja2V0XCI7XG5cbmV4cG9ydCBjb25zdCBzdWJzY3JpYmVPbmUgPSBhc3luYyA8VD4oXG4gIGNvbm46IENvbm5lY3Rpb24sXG4gIHN1YnNjcmliZTogKFxuICAgIGNvbm4yOiBDb25uZWN0aW9uLFxuICAgIG9uQ2hhbmdlOiAoaXRlbXM6IFQpID0+IHZvaWRcbiAgKSA9PiBVbnN1YnNjcmliZUZ1bmNcbikgPT5cbiAgbmV3IFByb21pc2U8VD4oKHJlc29sdmUpID0+IHtcbiAgICBjb25zdCB1bnN1YiA9IHN1YnNjcmliZShjb25uLCAoaXRlbXMpID0+IHtcbiAgICAgIHVuc3ViKCk7XG4gICAgICByZXNvbHZlKGl0ZW1zKTtcbiAgICB9KTtcbiAgfSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/common/util/subscribe-one.ts\n");

/***/ }),

/***/ "./src/data/config_entries.ts":
/*!************************************!*\
  !*** ./src/data/config_entries.ts ***!
  \************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ERROR_STATES\": function() { return /* binding */ ERROR_STATES; },\n/* harmony export */   \"getConfigEntries\": function() { return /* binding */ getConfigEntries; },\n/* harmony export */   \"updateConfigEntry\": function() { return /* binding */ updateConfigEntry; },\n/* harmony export */   \"deleteConfigEntry\": function() { return /* binding */ deleteConfigEntry; },\n/* harmony export */   \"reloadConfigEntry\": function() { return /* binding */ reloadConfigEntry; },\n/* harmony export */   \"disableConfigEntry\": function() { return /* binding */ disableConfigEntry; },\n/* harmony export */   \"enableConfigEntry\": function() { return /* binding */ enableConfigEntry; }\n/* harmony export */ });\nvar ERROR_STATES = [\"migration_error\", \"setup_error\", \"setup_retry\"];\nvar getConfigEntries = function getConfigEntries(hass, filters) {\n  var params = {};\n\n  if (filters) {\n    if (filters.type) {\n      params.type_filter = filters.type;\n    }\n\n    if (filters.domain) {\n      params.domain = filters.domain;\n    }\n  }\n\n  return hass.callWS(Object.assign({\n    type: \"config_entries/get\"\n  }, params));\n};\nvar updateConfigEntry = function updateConfigEntry(hass, configEntryId, updatedValues) {\n  return hass.callWS(Object.assign({\n    type: \"config_entries/update\",\n    entry_id: configEntryId\n  }, updatedValues));\n};\nvar deleteConfigEntry = function deleteConfigEntry(hass, configEntryId) {\n  return hass.callApi(\"DELETE\", \"config/config_entries/entry/\".concat(configEntryId));\n};\nvar reloadConfigEntry = function reloadConfigEntry(hass, configEntryId) {\n  return hass.callApi(\"POST\", \"config/config_entries/entry/\".concat(configEntryId, \"/reload\"));\n};\nvar disableConfigEntry = function disableConfigEntry(hass, configEntryId) {\n  return hass.callWS({\n    type: \"config_entries/disable\",\n    entry_id: configEntryId,\n    disabled_by: \"user\"\n  });\n};\nvar enableConfigEntry = function enableConfigEntry(hass, configEntryId) {\n  return hass.callWS({\n    type: \"config_entries/disable\",\n    entry_id: configEntryId,\n    disabled_by: null\n  });\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZGF0YS9jb25maWdfZW50cmllcy50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBOEJBO0FBTUE7QUFJQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBREE7QUFJQTtBQUVBO0FBQUE7QUFNQTtBQUNBO0FBRkE7QUFMQTtBQVdBO0FBQUE7QUFBQTtBQUtBO0FBQUE7QUFBQTtBQVNBO0FBQUE7QUFLQTtBQUNBO0FBQ0E7QUFIQTtBQUpBO0FBVUE7QUFBQTtBQUlBO0FBQ0E7QUFDQTtBQUhBO0FBSEEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ob21lLWFzc2lzdGFudC1mcm9udGVuZC8uL3NyYy9kYXRhL2NvbmZpZ19lbnRyaWVzLnRzPzJmMzEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSG9tZUFzc2lzdGFudCB9IGZyb20gXCIuLi90eXBlc1wiO1xuXG5leHBvcnQgaW50ZXJmYWNlIENvbmZpZ0VudHJ5IHtcbiAgZW50cnlfaWQ6IHN0cmluZztcbiAgZG9tYWluOiBzdHJpbmc7XG4gIHRpdGxlOiBzdHJpbmc7XG4gIHNvdXJjZTogc3RyaW5nO1xuICBzdGF0ZTpcbiAgICB8IFwibG9hZGVkXCJcbiAgICB8IFwic2V0dXBfZXJyb3JcIlxuICAgIHwgXCJtaWdyYXRpb25fZXJyb3JcIlxuICAgIHwgXCJzZXR1cF9yZXRyeVwiXG4gICAgfCBcIm5vdF9sb2FkZWRcIlxuICAgIHwgXCJmYWlsZWRfdW5sb2FkXCI7XG4gIHN1cHBvcnRzX29wdGlvbnM6IGJvb2xlYW47XG4gIHN1cHBvcnRzX3JlbW92ZV9kZXZpY2U6IGJvb2xlYW47XG4gIHN1cHBvcnRzX3VubG9hZDogYm9vbGVhbjtcbiAgcHJlZl9kaXNhYmxlX25ld19lbnRpdGllczogYm9vbGVhbjtcbiAgcHJlZl9kaXNhYmxlX3BvbGxpbmc6IGJvb2xlYW47XG4gIGRpc2FibGVkX2J5OiBcInVzZXJcIiB8IG51bGw7XG4gIHJlYXNvbjogc3RyaW5nIHwgbnVsbDtcbn1cblxuZXhwb3J0IHR5cGUgQ29uZmlnRW50cnlNdXRhYmxlUGFyYW1zID0gUGFydGlhbDxcbiAgUGljazxcbiAgICBDb25maWdFbnRyeSxcbiAgICBcInRpdGxlXCIgfCBcInByZWZfZGlzYWJsZV9uZXdfZW50aXRpZXNcIiB8IFwicHJlZl9kaXNhYmxlX3BvbGxpbmdcIlxuICA+XG4+O1xuXG5leHBvcnQgY29uc3QgRVJST1JfU1RBVEVTOiBDb25maWdFbnRyeVtcInN0YXRlXCJdW10gPSBbXG4gIFwibWlncmF0aW9uX2Vycm9yXCIsXG4gIFwic2V0dXBfZXJyb3JcIixcbiAgXCJzZXR1cF9yZXRyeVwiLFxuXTtcblxuZXhwb3J0IGNvbnN0IGdldENvbmZpZ0VudHJpZXMgPSAoXG4gIGhhc3M6IEhvbWVBc3Npc3RhbnQsXG4gIGZpbHRlcnM/OiB7IHR5cGU/OiBcImhlbHBlclwiIHwgXCJpbnRlZ3JhdGlvblwiOyBkb21haW4/OiBzdHJpbmcgfVxuKTogUHJvbWlzZTxDb25maWdFbnRyeVtdPiA9PiB7XG4gIGNvbnN0IHBhcmFtczogYW55ID0ge307XG4gIGlmIChmaWx0ZXJzKSB7XG4gICAgaWYgKGZpbHRlcnMudHlwZSkge1xuICAgICAgcGFyYW1zLnR5cGVfZmlsdGVyID0gZmlsdGVycy50eXBlO1xuICAgIH1cbiAgICBpZiAoZmlsdGVycy5kb21haW4pIHtcbiAgICAgIHBhcmFtcy5kb21haW4gPSBmaWx0ZXJzLmRvbWFpbjtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGhhc3MuY2FsbFdTPENvbmZpZ0VudHJ5W10+KHtcbiAgICB0eXBlOiBcImNvbmZpZ19lbnRyaWVzL2dldFwiLFxuICAgIC4uLnBhcmFtcyxcbiAgfSk7XG59O1xuXG5leHBvcnQgY29uc3QgdXBkYXRlQ29uZmlnRW50cnkgPSAoXG4gIGhhc3M6IEhvbWVBc3Npc3RhbnQsXG4gIGNvbmZpZ0VudHJ5SWQ6IHN0cmluZyxcbiAgdXBkYXRlZFZhbHVlczogQ29uZmlnRW50cnlNdXRhYmxlUGFyYW1zXG4pID0+XG4gIGhhc3MuY2FsbFdTPHsgcmVxdWlyZV9yZXN0YXJ0OiBib29sZWFuOyBjb25maWdfZW50cnk6IENvbmZpZ0VudHJ5IH0+KHtcbiAgICB0eXBlOiBcImNvbmZpZ19lbnRyaWVzL3VwZGF0ZVwiLFxuICAgIGVudHJ5X2lkOiBjb25maWdFbnRyeUlkLFxuICAgIC4uLnVwZGF0ZWRWYWx1ZXMsXG4gIH0pO1xuXG5leHBvcnQgY29uc3QgZGVsZXRlQ29uZmlnRW50cnkgPSAoaGFzczogSG9tZUFzc2lzdGFudCwgY29uZmlnRW50cnlJZDogc3RyaW5nKSA9PlxuICBoYXNzLmNhbGxBcGk8e1xuICAgIHJlcXVpcmVfcmVzdGFydDogYm9vbGVhbjtcbiAgfT4oXCJERUxFVEVcIiwgYGNvbmZpZy9jb25maWdfZW50cmllcy9lbnRyeS8ke2NvbmZpZ0VudHJ5SWR9YCk7XG5cbmV4cG9ydCBjb25zdCByZWxvYWRDb25maWdFbnRyeSA9IChoYXNzOiBIb21lQXNzaXN0YW50LCBjb25maWdFbnRyeUlkOiBzdHJpbmcpID0+XG4gIGhhc3MuY2FsbEFwaTx7XG4gICAgcmVxdWlyZV9yZXN0YXJ0OiBib29sZWFuO1xuICB9PihcIlBPU1RcIiwgYGNvbmZpZy9jb25maWdfZW50cmllcy9lbnRyeS8ke2NvbmZpZ0VudHJ5SWR9L3JlbG9hZGApO1xuXG5leHBvcnQgaW50ZXJmYWNlIERpc2FibGVDb25maWdFbnRyeVJlc3VsdCB7XG4gIHJlcXVpcmVfcmVzdGFydDogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGNvbnN0IGRpc2FibGVDb25maWdFbnRyeSA9IChcbiAgaGFzczogSG9tZUFzc2lzdGFudCxcbiAgY29uZmlnRW50cnlJZDogc3RyaW5nXG4pID0+XG4gIGhhc3MuY2FsbFdTPERpc2FibGVDb25maWdFbnRyeVJlc3VsdD4oe1xuICAgIHR5cGU6IFwiY29uZmlnX2VudHJpZXMvZGlzYWJsZVwiLFxuICAgIGVudHJ5X2lkOiBjb25maWdFbnRyeUlkLFxuICAgIGRpc2FibGVkX2J5OiBcInVzZXJcIixcbiAgfSk7XG5cbmV4cG9ydCBjb25zdCBlbmFibGVDb25maWdFbnRyeSA9IChoYXNzOiBIb21lQXNzaXN0YW50LCBjb25maWdFbnRyeUlkOiBzdHJpbmcpID0+XG4gIGhhc3MuY2FsbFdTPHtcbiAgICByZXF1aXJlX3Jlc3RhcnQ6IGJvb2xlYW47XG4gIH0+KHtcbiAgICB0eXBlOiBcImNvbmZpZ19lbnRyaWVzL2Rpc2FibGVcIixcbiAgICBlbnRyeV9pZDogY29uZmlnRW50cnlJZCxcbiAgICBkaXNhYmxlZF9ieTogbnVsbCxcbiAgfSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/data/config_entries.ts\n");

/***/ }),

/***/ "./src/data/energy.ts":
/*!****************************!*\
  !*** ./src/data/energy.ts ***!
  \****************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"emptyFlowFromGridSourceEnergyPreference\": function() { return /* binding */ emptyFlowFromGridSourceEnergyPreference; },\n/* harmony export */   \"emptyFlowToGridSourceEnergyPreference\": function() { return /* binding */ emptyFlowToGridSourceEnergyPreference; },\n/* harmony export */   \"emptyGridSourceEnergyPreference\": function() { return /* binding */ emptyGridSourceEnergyPreference; },\n/* harmony export */   \"emptySolarEnergyPreference\": function() { return /* binding */ emptySolarEnergyPreference; },\n/* harmony export */   \"emptyBatteryEnergyPreference\": function() { return /* binding */ emptyBatteryEnergyPreference; },\n/* harmony export */   \"emptyGasEnergyPreference\": function() { return /* binding */ emptyGasEnergyPreference; },\n/* harmony export */   \"getEnergyInfo\": function() { return /* binding */ getEnergyInfo; },\n/* harmony export */   \"getEnergyPreferenceValidation\": function() { return /* binding */ getEnergyPreferenceValidation; },\n/* harmony export */   \"getEnergyPreferences\": function() { return /* binding */ getEnergyPreferences; },\n/* harmony export */   \"saveEnergyPreferences\": function() { return /* binding */ saveEnergyPreferences; },\n/* harmony export */   \"getFossilEnergyConsumption\": function() { return /* binding */ getFossilEnergyConsumption; },\n/* harmony export */   \"energySourcesByType\": function() { return /* binding */ energySourcesByType; },\n/* harmony export */   \"getEnergyDataCollection\": function() { return /* binding */ getEnergyDataCollection; },\n/* harmony export */   \"getEnergySolarForecasts\": function() { return /* binding */ getEnergySolarForecasts; },\n/* harmony export */   \"ENERGY_GAS_VOLUME_UNITS\": function() { return /* binding */ ENERGY_GAS_VOLUME_UNITS; },\n/* harmony export */   \"ENERGY_GAS_ENERGY_UNITS\": function() { return /* binding */ ENERGY_GAS_ENERGY_UNITS; },\n/* harmony export */   \"ENERGY_GAS_UNITS\": function() { return /* binding */ ENERGY_GAS_UNITS; },\n/* harmony export */   \"getEnergyGasUnitCategory\": function() { return /* binding */ getEnergyGasUnitCategory; },\n/* harmony export */   \"getEnergyGasUnit\": function() { return /* binding */ getEnergyGasUnit; }\n/* harmony export */ });\n/* harmony import */ var date_fns_esm__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! date-fns/esm */ \"./node_modules/date-fns/esm/differenceInDays/index.js\");\n/* harmony import */ var date_fns_esm__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! date-fns/esm */ \"./node_modules/date-fns/esm/addHours/index.js\");\n/* harmony import */ var date_fns_esm__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! date-fns/esm */ \"./node_modules/date-fns/esm/addMonths/index.js\");\n/* harmony import */ var date_fns_esm__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! date-fns/esm */ \"./node_modules/date-fns/esm/addDays/index.js\");\n/* harmony import */ var date_fns_esm__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! date-fns/esm */ \"./node_modules/date-fns/esm/addMilliseconds/index.js\");\n/* harmony import */ var date_fns_esm__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! date-fns/esm */ \"./node_modules/date-fns/esm/startOfToday/index.js\");\n/* harmony import */ var date_fns_esm__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! date-fns/esm */ \"./node_modules/date-fns/esm/startOfYesterday/index.js\");\n/* harmony import */ var date_fns_esm__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! date-fns/esm */ \"./node_modules/date-fns/esm/endOfToday/index.js\");\n/* harmony import */ var date_fns_esm__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! date-fns/esm */ \"./node_modules/date-fns/esm/endOfYesterday/index.js\");\n/* harmony import */ var home_assistant_js_websocket__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! home-assistant-js-websocket */ \"./node_modules/home-assistant-js-websocket/dist/collection.js\");\n/* harmony import */ var _common_util_group_by__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/util/group-by */ \"./src/common/util/group-by.ts\");\n/* harmony import */ var _common_util_subscribe_one__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common/util/subscribe-one */ \"./src/common/util/subscribe-one.ts\");\n/* harmony import */ var _config_entries__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./config_entries */ \"./src/data/config_entries.ts\");\n/* harmony import */ var _entity_registry__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./entity_registry */ \"./src/data/entity_registry.ts\");\n/* harmony import */ var _history__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./history */ \"./src/data/history.ts\");\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e2) { throw _e2; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e3) { didErr = true; err = _e3; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\n\n\n\n\n\n\n\nvar energyCollectionKeys = [];\nvar emptyFlowFromGridSourceEnergyPreference = function emptyFlowFromGridSourceEnergyPreference() {\n  return {\n    stat_energy_from: \"\",\n    stat_cost: null,\n    entity_energy_from: null,\n    entity_energy_price: null,\n    number_energy_price: null\n  };\n};\nvar emptyFlowToGridSourceEnergyPreference = function emptyFlowToGridSourceEnergyPreference() {\n  return {\n    stat_energy_to: \"\",\n    stat_compensation: null,\n    entity_energy_to: null,\n    entity_energy_price: null,\n    number_energy_price: null\n  };\n};\nvar emptyGridSourceEnergyPreference = function emptyGridSourceEnergyPreference() {\n  return {\n    type: \"grid\",\n    flow_from: [],\n    flow_to: [],\n    cost_adjustment_day: 0\n  };\n};\nvar emptySolarEnergyPreference = function emptySolarEnergyPreference() {\n  return {\n    type: \"solar\",\n    stat_energy_from: \"\",\n    config_entry_solar_forecast: null\n  };\n};\nvar emptyBatteryEnergyPreference = function emptyBatteryEnergyPreference() {\n  return {\n    type: \"battery\",\n    stat_energy_from: \"\",\n    stat_energy_to: \"\"\n  };\n};\nvar emptyGasEnergyPreference = function emptyGasEnergyPreference() {\n  return {\n    type: \"gas\",\n    stat_energy_from: \"\",\n    stat_cost: null,\n    entity_energy_from: null,\n    entity_energy_price: null,\n    number_energy_price: null\n  };\n};\nvar getEnergyInfo = function getEnergyInfo(hass) {\n  return hass.callWS({\n    type: \"energy/info\"\n  });\n};\nvar getEnergyPreferenceValidation = function getEnergyPreferenceValidation(hass) {\n  return hass.callWS({\n    type: \"energy/validate\"\n  });\n};\nvar getEnergyPreferences = function getEnergyPreferences(hass) {\n  return hass.callWS({\n    type: \"energy/get_prefs\"\n  });\n};\nvar saveEnergyPreferences = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(hass, prefs) {\n    var newPrefs;\n    return regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            newPrefs = hass.callWS(Object.assign({\n              type: \"energy/save_prefs\"\n            }, prefs));\n            clearEnergyCollectionPreferences(hass);\n            return _context.abrupt(\"return\", newPrefs);\n\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function saveEnergyPreferences(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar getFossilEnergyConsumption = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(hass, startTime, energy_statistic_ids, co2_statistic_id, endTime) {\n    var period,\n        _args2 = arguments;\n    return regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            period = _args2.length > 5 && _args2[5] !== undefined ? _args2[5] : \"hour\";\n            return _context2.abrupt(\"return\", hass.callWS({\n              type: \"energy/fossil_energy_consumption\",\n              start_time: startTime.toISOString(),\n              end_time: endTime === null || endTime === void 0 ? void 0 : endTime.toISOString(),\n              energy_statistic_ids: energy_statistic_ids,\n              co2_statistic_id: co2_statistic_id,\n              period: period\n            }));\n\n          case 2:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n\n  return function getFossilEnergyConsumption(_x3, _x4, _x5, _x6, _x7) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nvar energySourcesByType = function energySourcesByType(prefs) {\n  return (0,_common_util_group_by__WEBPACK_IMPORTED_MODULE_0__.groupBy)(prefs.energy_sources, function (item) {\n    return item.type;\n  });\n};\n\nvar getEnergyData = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(hass, prefs, start, end, compare) {\n    var _yield$Promise$all, _yield$Promise$all2, configEntries, entityRegistryEntries, info, co2SignalConfigEntry, co2SignalEntity, _iterator, _step, entry, co2State, consumptionStatIDs, statIDs, _iterator2, _step2, source, costStatId, _iterator3, _step3, flowFrom, _costStatId, _iterator4, _step4, flowTo, _costStatId2, dayDifference, period, startMinHour, stats, statsCompare, startCompare, endCompare, compareStartMinHour, fossilEnergyConsumption, fossilEnergyConsumptionCompare, statsMetadataArray, statsMetadata, data;\n\n    return regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.next = 2;\n            return Promise.all([(0,_config_entries__WEBPACK_IMPORTED_MODULE_2__.getConfigEntries)(hass, {\n              domain: \"co2signal\"\n            }), (0,_common_util_subscribe_one__WEBPACK_IMPORTED_MODULE_1__.subscribeOne)(hass.connection, _entity_registry__WEBPACK_IMPORTED_MODULE_3__.subscribeEntityRegistry), getEnergyInfo(hass)]);\n\n          case 2:\n            _yield$Promise$all = _context3.sent;\n            _yield$Promise$all2 = _slicedToArray(_yield$Promise$all, 3);\n            configEntries = _yield$Promise$all2[0];\n            entityRegistryEntries = _yield$Promise$all2[1];\n            info = _yield$Promise$all2[2];\n            co2SignalConfigEntry = configEntries.length ? configEntries[0] : undefined;\n\n            if (!co2SignalConfigEntry) {\n              _context3.next = 31;\n              break;\n            }\n\n            _iterator = _createForOfIteratorHelper(entityRegistryEntries);\n            _context3.prev = 10;\n\n            _iterator.s();\n\n          case 12:\n            if ((_step = _iterator.n()).done) {\n              _context3.next = 23;\n              break;\n            }\n\n            entry = _step.value;\n\n            if (!(entry.config_entry_id !== co2SignalConfigEntry.entry_id)) {\n              _context3.next = 16;\n              break;\n            }\n\n            return _context3.abrupt(\"continue\", 21);\n\n          case 16:\n            // The integration offers 2 entities. We want the % one.\n            co2State = hass.states[entry.entity_id];\n\n            if (!(!co2State || co2State.attributes.unit_of_measurement !== \"%\")) {\n              _context3.next = 19;\n              break;\n            }\n\n            return _context3.abrupt(\"continue\", 21);\n\n          case 19:\n            co2SignalEntity = co2State.entity_id;\n            return _context3.abrupt(\"break\", 23);\n\n          case 21:\n            _context3.next = 12;\n            break;\n\n          case 23:\n            _context3.next = 28;\n            break;\n\n          case 25:\n            _context3.prev = 25;\n            _context3.t0 = _context3[\"catch\"](10);\n\n            _iterator.e(_context3.t0);\n\n          case 28:\n            _context3.prev = 28;\n\n            _iterator.f();\n\n            return _context3.finish(28);\n\n          case 31:\n            consumptionStatIDs = [];\n            statIDs = [];\n            _iterator2 = _createForOfIteratorHelper(prefs.energy_sources);\n            _context3.prev = 34;\n\n            _iterator2.s();\n\n          case 36:\n            if ((_step2 = _iterator2.n()).done) {\n              _context3.next = 57;\n              break;\n            }\n\n            source = _step2.value;\n\n            if (!(source.type === \"solar\")) {\n              _context3.next = 41;\n              break;\n            }\n\n            statIDs.push(source.stat_energy_from);\n            return _context3.abrupt(\"continue\", 55);\n\n          case 41:\n            if (!(source.type === \"gas\")) {\n              _context3.next = 47;\n              break;\n            }\n\n            statIDs.push(source.stat_energy_from);\n\n            if (source.stat_cost) {\n              statIDs.push(source.stat_cost);\n            }\n\n            costStatId = info.cost_sensors[source.stat_energy_from];\n\n            if (costStatId) {\n              statIDs.push(costStatId);\n            }\n\n            return _context3.abrupt(\"continue\", 55);\n\n          case 47:\n            if (!(source.type === \"battery\")) {\n              _context3.next = 51;\n              break;\n            }\n\n            statIDs.push(source.stat_energy_from);\n            statIDs.push(source.stat_energy_to);\n            return _context3.abrupt(\"continue\", 55);\n\n          case 51:\n            // grid source\n            _iterator3 = _createForOfIteratorHelper(source.flow_from);\n\n            try {\n              for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n                flowFrom = _step3.value;\n                consumptionStatIDs.push(flowFrom.stat_energy_from);\n                statIDs.push(flowFrom.stat_energy_from);\n\n                if (flowFrom.stat_cost) {\n                  statIDs.push(flowFrom.stat_cost);\n                }\n\n                _costStatId = info.cost_sensors[flowFrom.stat_energy_from];\n\n                if (_costStatId) {\n                  statIDs.push(_costStatId);\n                }\n              }\n            } catch (err) {\n              _iterator3.e(err);\n            } finally {\n              _iterator3.f();\n            }\n\n            _iterator4 = _createForOfIteratorHelper(source.flow_to);\n\n            try {\n              for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n                flowTo = _step4.value;\n                statIDs.push(flowTo.stat_energy_to);\n\n                if (flowTo.stat_compensation) {\n                  statIDs.push(flowTo.stat_compensation);\n                }\n\n                _costStatId2 = info.cost_sensors[flowTo.stat_energy_to];\n\n                if (_costStatId2) {\n                  statIDs.push(_costStatId2);\n                }\n              }\n            } catch (err) {\n              _iterator4.e(err);\n            } finally {\n              _iterator4.f();\n            }\n\n          case 55:\n            _context3.next = 36;\n            break;\n\n          case 57:\n            _context3.next = 62;\n            break;\n\n          case 59:\n            _context3.prev = 59;\n            _context3.t1 = _context3[\"catch\"](34);\n\n            _iterator2.e(_context3.t1);\n\n          case 62:\n            _context3.prev = 62;\n\n            _iterator2.f();\n\n            return _context3.finish(62);\n\n          case 65:\n            dayDifference = (0,date_fns_esm__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(end || new Date(), start);\n            period = dayDifference > 35 ? \"month\" : dayDifference > 2 ? \"day\" : \"hour\"; // Subtract 1 hour from start to get starting point data\n\n            startMinHour = (0,date_fns_esm__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(start, -1);\n            _context3.next = 70;\n            return (0,_history__WEBPACK_IMPORTED_MODULE_4__.fetchStatistics)(hass, startMinHour, end, statIDs, period);\n\n          case 70:\n            stats = _context3.sent;\n\n            if (!compare) {\n              _context3.next = 78;\n              break;\n            }\n\n            if (dayDifference > 27 && dayDifference < 32) {\n              // When comparing a month, we want to start at the begining of the month\n              startCompare = (0,date_fns_esm__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(start, -1);\n            } else {\n              startCompare = (0,date_fns_esm__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(start, (dayDifference + 1) * -1);\n            }\n\n            compareStartMinHour = (0,date_fns_esm__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(startCompare, -1);\n            endCompare = (0,date_fns_esm__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(start, -1);\n            _context3.next = 77;\n            return (0,_history__WEBPACK_IMPORTED_MODULE_4__.fetchStatistics)(hass, compareStartMinHour, endCompare, statIDs, period);\n\n          case 77:\n            statsCompare = _context3.sent;\n\n          case 78:\n            if (!(co2SignalEntity !== undefined)) {\n              _context3.next = 86;\n              break;\n            }\n\n            _context3.next = 81;\n            return getFossilEnergyConsumption(hass, start, consumptionStatIDs, co2SignalEntity, end, dayDifference > 35 ? \"month\" : dayDifference > 2 ? \"day\" : \"hour\");\n\n          case 81:\n            fossilEnergyConsumption = _context3.sent;\n\n            if (!compare) {\n              _context3.next = 86;\n              break;\n            }\n\n            _context3.next = 85;\n            return getFossilEnergyConsumption(hass, startCompare, consumptionStatIDs, co2SignalEntity, endCompare, dayDifference > 35 ? \"month\" : dayDifference > 2 ? \"day\" : \"hour\");\n\n          case 85:\n            fossilEnergyConsumptionCompare = _context3.sent;\n\n          case 86:\n            Object.values(stats).forEach(function (stat) {\n              // if the start of the first value is after the requested period, we have the first data point, and should add a zero point\n              if (stat.length && new Date(stat[0].start) > startMinHour) {\n                stat.unshift(Object.assign({}, stat[0], {\n                  start: startMinHour.toISOString(),\n                  end: startMinHour.toISOString(),\n                  sum: 0,\n                  state: 0\n                }));\n              }\n            });\n            _context3.next = 89;\n            return (0,_history__WEBPACK_IMPORTED_MODULE_4__.getStatisticMetadata)(hass, statIDs);\n\n          case 89:\n            statsMetadataArray = _context3.sent;\n            statsMetadata = {};\n            statsMetadataArray.forEach(function (x) {\n              statsMetadata[x.statistic_id] = x;\n            });\n            data = {\n              start: start,\n              end: end,\n              startCompare: startCompare,\n              endCompare: endCompare,\n              info: info,\n              prefs: prefs,\n              stats: stats,\n              statsMetadata: statsMetadata,\n              statsCompare: statsCompare,\n              co2SignalConfigEntry: co2SignalConfigEntry,\n              co2SignalEntity: co2SignalEntity,\n              fossilEnergyConsumption: fossilEnergyConsumption,\n              fossilEnergyConsumptionCompare: fossilEnergyConsumptionCompare\n            };\n            return _context3.abrupt(\"return\", data);\n\n          case 94:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3, null, [[10, 25, 28, 31], [34, 59, 62, 65]]);\n  }));\n\n  return function getEnergyData(_x8, _x9, _x10, _x11, _x12) {\n    return _ref3.apply(this, arguments);\n  };\n}();\n\nvar clearEnergyCollectionPreferences = function clearEnergyCollectionPreferences(hass) {\n  energyCollectionKeys.forEach(function (key) {\n    var energyCollection = getEnergyDataCollection(hass, {\n      key: key\n    });\n    energyCollection.clearPrefs();\n\n    if (energyCollection._active) {\n      energyCollection.refresh();\n    }\n  });\n};\n\nvar getEnergyDataCollection = function getEnergyDataCollection(hass) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var key = \"_energy\";\n\n  if (options.key) {\n    if (!options.key.startsWith(\"energy_\")) {\n      throw new Error(\"Key need to start with energy_\");\n    }\n\n    key = \"_\".concat(options.key);\n  }\n\n  if (hass.connection[key]) {\n    return hass.connection[key];\n  }\n\n  energyCollectionKeys.push(options.key);\n  var collection = (0,home_assistant_js_websocket__WEBPACK_IMPORTED_MODULE_10__.getCollection)(hass.connection, key, /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4() {\n    var nextFetch;\n    return regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            if (collection.prefs) {\n              _context4.next = 4;\n              break;\n            }\n\n            _context4.next = 3;\n            return getEnergyPreferences(hass);\n\n          case 3:\n            collection.prefs = _context4.sent;\n\n          case 4:\n            if (collection._refreshTimeout) {\n              clearTimeout(collection._refreshTimeout);\n            }\n\n            if (collection._active && (!collection.end || collection.end > new Date())) {\n              // The stats are created every hour\n              // Schedule a refresh for 20 minutes past the hour\n              // If the end is larger than the current time.\n              nextFetch = new Date();\n\n              if (nextFetch.getMinutes() >= 20) {\n                nextFetch.setHours(nextFetch.getHours() + 1);\n              }\n\n              nextFetch.setMinutes(20, 0, 0);\n              collection._refreshTimeout = window.setTimeout(function () {\n                return collection.refresh();\n              }, nextFetch.getTime() - Date.now());\n            }\n\n            return _context4.abrupt(\"return\", getEnergyData(hass, collection.prefs, collection.start, collection.end, collection.compare));\n\n          case 7:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  })));\n  var origSubscribe = collection.subscribe;\n\n  collection.subscribe = function (subscriber) {\n    var unsub = origSubscribe(subscriber);\n    collection._active++;\n    return function () {\n      collection._active--;\n\n      if (collection._active < 1) {\n        clearTimeout(collection._refreshTimeout);\n        collection._refreshTimeout = undefined;\n      }\n\n      unsub();\n    };\n  };\n\n  collection._active = 0;\n  collection.prefs = options.prefs;\n  var now = new Date(); // Set start to start of today if we have data for today, otherwise yesterday\n\n  collection.start = now.getHours() > 0 ? (0,date_fns_esm__WEBPACK_IMPORTED_MODULE_11__[\"default\"])() : (0,date_fns_esm__WEBPACK_IMPORTED_MODULE_12__[\"default\"])();\n  collection.end = now.getHours() > 0 ? (0,date_fns_esm__WEBPACK_IMPORTED_MODULE_13__[\"default\"])() : (0,date_fns_esm__WEBPACK_IMPORTED_MODULE_14__[\"default\"])();\n\n  var scheduleUpdatePeriod = function scheduleUpdatePeriod() {\n    collection._updatePeriodTimeout = window.setTimeout(function () {\n      collection.start = (0,date_fns_esm__WEBPACK_IMPORTED_MODULE_11__[\"default\"])();\n      collection.end = (0,date_fns_esm__WEBPACK_IMPORTED_MODULE_13__[\"default\"])();\n      scheduleUpdatePeriod();\n    }, (0,date_fns_esm__WEBPACK_IMPORTED_MODULE_6__[\"default\"])((0,date_fns_esm__WEBPACK_IMPORTED_MODULE_13__[\"default\"])(), 1).getTime() - Date.now() // Switch to next day an hour after the day changed\n    );\n  };\n\n  scheduleUpdatePeriod();\n\n  collection.clearPrefs = function () {\n    collection.prefs = undefined;\n  };\n\n  collection.setPeriod = function (newStart, newEnd) {\n    var _collection$end;\n\n    collection.start = newStart;\n    collection.end = newEnd;\n\n    if (collection.start.getTime() === (0,date_fns_esm__WEBPACK_IMPORTED_MODULE_11__[\"default\"])().getTime() && ((_collection$end = collection.end) === null || _collection$end === void 0 ? void 0 : _collection$end.getTime()) === (0,date_fns_esm__WEBPACK_IMPORTED_MODULE_13__[\"default\"])().getTime() && !collection._updatePeriodTimeout) {\n      scheduleUpdatePeriod();\n    } else if (collection._updatePeriodTimeout) {\n      clearTimeout(collection._updatePeriodTimeout);\n      collection._updatePeriodTimeout = undefined;\n    }\n  };\n\n  collection.setCompare = function (compare) {\n    collection.compare = compare;\n  };\n\n  return collection;\n};\nvar getEnergySolarForecasts = function getEnergySolarForecasts(hass) {\n  return hass.callWS({\n    type: \"energy/solar_forecast\"\n  });\n};\nvar ENERGY_GAS_VOLUME_UNITS = [\"m³\", \"ft³\"];\nvar ENERGY_GAS_ENERGY_UNITS = [\"kWh\"];\nvar ENERGY_GAS_UNITS = [].concat(ENERGY_GAS_VOLUME_UNITS, ENERGY_GAS_ENERGY_UNITS);\nvar getEnergyGasUnitCategory = function getEnergyGasUnitCategory(hass, prefs) {\n  var _iterator5 = _createForOfIteratorHelper(prefs.energy_sources),\n      _step5;\n\n  try {\n    for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n      var source = _step5.value;\n\n      if (source.type !== \"gas\") {\n        continue;\n      }\n\n      var entity = hass.states[source.stat_energy_from];\n\n      if (entity) {\n        return ENERGY_GAS_VOLUME_UNITS.includes(entity.attributes.unit_of_measurement) ? \"volume\" : \"energy\";\n      }\n    }\n  } catch (err) {\n    _iterator5.e(err);\n  } finally {\n    _iterator5.f();\n  }\n\n  return undefined;\n};\nvar getEnergyGasUnit = function getEnergyGasUnit(hass, prefs) {\n  var statisticsMetaData = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n  var _iterator6 = _createForOfIteratorHelper(prefs.energy_sources),\n      _step6;\n\n  try {\n    for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n      var source = _step6.value;\n\n      if (source.type !== \"gas\") {\n        continue;\n      }\n\n      var entity = hass.states[source.stat_energy_from];\n\n      if (entity !== null && entity !== void 0 && entity.attributes.unit_of_measurement) {\n        // Wh is normalized to kWh by stats generation\n        return entity.attributes.unit_of_measurement === \"Wh\" ? \"kWh\" : entity.attributes.unit_of_measurement;\n      }\n\n      var statisticIdWithMeta = statisticsMetaData[source.stat_energy_from];\n\n      if (statisticIdWithMeta !== null && statisticIdWithMeta !== void 0 && statisticIdWithMeta.unit_of_measurement) {\n        return statisticIdWithMeta.unit_of_measurement === \"Wh\" ? \"kWh\" : statisticIdWithMeta.unit_of_measurement;\n      }\n    }\n  } catch (err) {\n    _iterator6.e(err);\n  } finally {\n    _iterator6.f();\n  }\n\n  return undefined;\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZGF0YS9lbmVyZ3kudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBV0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBT0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBQUE7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBQUE7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQUFBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBQUE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFBQTtBQUtBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQUFBO0FBK0dBO0FBQUE7QUFFQTtBQURBO0FBREE7QUFLQTtBQUFBO0FBRUE7QUFEQTtBQURBO0FBS0E7QUFBQTtBQUVBO0FBREE7QUFEQTtBQUtBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBSUE7QUFDQTtBQURBO0FBSUE7QUFSQTs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQWdCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBTUE7QUFOQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BOztBQVJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBd0JBO0FBQUE7QUFDQTtBQUFBO0FBREE7O0FBbUJBO0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFRQTtBQUFBOztBQVJBO0FBQUE7QUFBQTtBQU9BO0FBQUE7QUFBQTtBQU1BOztBQWJBO0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7O0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFvQkE7O0FBcEJBO0FBQUE7QUFBQTtBQUFBOztBQUFBOztBQUFBO0FBeUJBO0FBQ0E7O0FBMUJBO0FBQUE7QUFBQTtBQUFBOztBQUFBOztBQUFBO0FBK0JBO0FBL0JBOztBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQUFBOztBQUFBOztBQUFBO0FBQUE7O0FBQUE7O0FBQUE7O0FBQUE7QUFvQ0E7QUFDQTtBQXJDQTtBQUFBOztBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBdUNBOztBQXZDQTtBQUFBO0FBQUE7QUFBQTs7QUF5Q0E7QUF6Q0E7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUE4Q0E7O0FBQ0E7QUFDQTtBQUNBOztBQUNBOztBQUNBO0FBQ0E7QUFDQTs7QUFyREE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUEwREE7QUFDQTtBQTNEQTs7QUFBQTtBQStEQTtBQS9EQTs7QUFBQTtBQWdFQTtBQUFBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUExRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTs7QUFBQTtBQTJFQTtBQUFBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBOztBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBcEZBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7O0FBQUE7O0FBQUE7QUFBQTs7QUFBQTs7QUFBQTs7QUFBQTtBQXVGQTtBQUNBOztBQUlBO0FBNUZBO0FBQUE7O0FBQUE7QUE4RkE7O0FBOUZBO0FBQUE7QUFBQTtBQUFBOztBQTBHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQWxIQTtBQUFBOztBQUFBO0FBb0hBOztBQXBIQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7O0FBQUE7QUFpSUE7O0FBaklBO0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7O0FBQUE7QUEwSUE7O0FBMUlBO0FBcUpBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQU9BO0FBQ0E7QUFoS0E7QUFBQTs7QUFBQTtBQWtLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWJBO0FBeEtBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBOztBQXdNQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUdBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFFQTtBQUdBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBOztBQUFBO0FBSUE7O0FBSkE7QUFPQTtBQUNBO0FBQ0E7O0FBRUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFHQTs7QUE1QkE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUF3Q0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFRQTs7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBQ0E7QUFBQTs7QUFDQTtBQUNBOztBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUVBO0FBREE7QUFEQTtBQUtBO0FBQ0E7QUFDQTtBQU9BO0FBR0E7QUFBQTs7QUFBQTtBQUNBO0FBQUE7O0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBZEE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFlQTtBQUNBO0FBRUE7QUFJQTs7QUFBQTtBQUFBOztBQUFBO0FBQ0E7QUFBQTs7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBR0E7O0FBQ0E7O0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFsQkE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFtQkE7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2hvbWUtYXNzaXN0YW50LWZyb250ZW5kLy4vc3JjL2RhdGEvZW5lcmd5LnRzP2RjNDMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgYWRkRGF5cyxcbiAgYWRkSG91cnMsXG4gIGFkZE1pbGxpc2Vjb25kcyxcbiAgYWRkTW9udGhzLFxuICBkaWZmZXJlbmNlSW5EYXlzLFxuICBlbmRPZlRvZGF5LFxuICBlbmRPZlllc3RlcmRheSxcbiAgc3RhcnRPZlRvZGF5LFxuICBzdGFydE9mWWVzdGVyZGF5LFxufSBmcm9tIFwiZGF0ZS1mbnMvZXNtXCI7XG5pbXBvcnQgeyBDb2xsZWN0aW9uLCBnZXRDb2xsZWN0aW9uIH0gZnJvbSBcImhvbWUtYXNzaXN0YW50LWpzLXdlYnNvY2tldFwiO1xuaW1wb3J0IHsgZ3JvdXBCeSB9IGZyb20gXCIuLi9jb21tb24vdXRpbC9ncm91cC1ieVwiO1xuaW1wb3J0IHsgc3Vic2NyaWJlT25lIH0gZnJvbSBcIi4uL2NvbW1vbi91dGlsL3N1YnNjcmliZS1vbmVcIjtcbmltcG9ydCB7IEhvbWVBc3Npc3RhbnQgfSBmcm9tIFwiLi4vdHlwZXNcIjtcbmltcG9ydCB7IENvbmZpZ0VudHJ5LCBnZXRDb25maWdFbnRyaWVzIH0gZnJvbSBcIi4vY29uZmlnX2VudHJpZXNcIjtcbmltcG9ydCB7IHN1YnNjcmliZUVudGl0eVJlZ2lzdHJ5IH0gZnJvbSBcIi4vZW50aXR5X3JlZ2lzdHJ5XCI7XG5pbXBvcnQge1xuICBmZXRjaFN0YXRpc3RpY3MsXG4gIGdldFN0YXRpc3RpY01ldGFkYXRhLFxuICBTdGF0aXN0aWNzLFxuICBTdGF0aXN0aWNzTWV0YURhdGEsXG59IGZyb20gXCIuL2hpc3RvcnlcIjtcblxuY29uc3QgZW5lcmd5Q29sbGVjdGlvbktleXM6IChzdHJpbmcgfCB1bmRlZmluZWQpW10gPSBbXTtcblxuZXhwb3J0IGNvbnN0IGVtcHR5Rmxvd0Zyb21HcmlkU291cmNlRW5lcmd5UHJlZmVyZW5jZSA9XG4gICgpOiBGbG93RnJvbUdyaWRTb3VyY2VFbmVyZ3lQcmVmZXJlbmNlID0+ICh7XG4gICAgc3RhdF9lbmVyZ3lfZnJvbTogXCJcIixcbiAgICBzdGF0X2Nvc3Q6IG51bGwsXG4gICAgZW50aXR5X2VuZXJneV9mcm9tOiBudWxsLFxuICAgIGVudGl0eV9lbmVyZ3lfcHJpY2U6IG51bGwsXG4gICAgbnVtYmVyX2VuZXJneV9wcmljZTogbnVsbCxcbiAgfSk7XG5cbmV4cG9ydCBjb25zdCBlbXB0eUZsb3dUb0dyaWRTb3VyY2VFbmVyZ3lQcmVmZXJlbmNlID1cbiAgKCk6IEZsb3dUb0dyaWRTb3VyY2VFbmVyZ3lQcmVmZXJlbmNlID0+ICh7XG4gICAgc3RhdF9lbmVyZ3lfdG86IFwiXCIsXG4gICAgc3RhdF9jb21wZW5zYXRpb246IG51bGwsXG4gICAgZW50aXR5X2VuZXJneV90bzogbnVsbCxcbiAgICBlbnRpdHlfZW5lcmd5X3ByaWNlOiBudWxsLFxuICAgIG51bWJlcl9lbmVyZ3lfcHJpY2U6IG51bGwsXG4gIH0pO1xuXG5leHBvcnQgY29uc3QgZW1wdHlHcmlkU291cmNlRW5lcmd5UHJlZmVyZW5jZSA9XG4gICgpOiBHcmlkU291cmNlVHlwZUVuZXJneVByZWZlcmVuY2UgPT4gKHtcbiAgICB0eXBlOiBcImdyaWRcIixcbiAgICBmbG93X2Zyb206IFtdLFxuICAgIGZsb3dfdG86IFtdLFxuICAgIGNvc3RfYWRqdXN0bWVudF9kYXk6IDAsXG4gIH0pO1xuXG5leHBvcnQgY29uc3QgZW1wdHlTb2xhckVuZXJneVByZWZlcmVuY2UgPVxuICAoKTogU29sYXJTb3VyY2VUeXBlRW5lcmd5UHJlZmVyZW5jZSA9PiAoe1xuICAgIHR5cGU6IFwic29sYXJcIixcbiAgICBzdGF0X2VuZXJneV9mcm9tOiBcIlwiLFxuICAgIGNvbmZpZ19lbnRyeV9zb2xhcl9mb3JlY2FzdDogbnVsbCxcbiAgfSk7XG5cbmV4cG9ydCBjb25zdCBlbXB0eUJhdHRlcnlFbmVyZ3lQcmVmZXJlbmNlID1cbiAgKCk6IEJhdHRlcnlTb3VyY2VUeXBlRW5lcmd5UHJlZmVyZW5jZSA9PiAoe1xuICAgIHR5cGU6IFwiYmF0dGVyeVwiLFxuICAgIHN0YXRfZW5lcmd5X2Zyb206IFwiXCIsXG4gICAgc3RhdF9lbmVyZ3lfdG86IFwiXCIsXG4gIH0pO1xuZXhwb3J0IGNvbnN0IGVtcHR5R2FzRW5lcmd5UHJlZmVyZW5jZSA9ICgpOiBHYXNTb3VyY2VUeXBlRW5lcmd5UHJlZmVyZW5jZSA9PiAoe1xuICB0eXBlOiBcImdhc1wiLFxuICBzdGF0X2VuZXJneV9mcm9tOiBcIlwiLFxuICBzdGF0X2Nvc3Q6IG51bGwsXG4gIGVudGl0eV9lbmVyZ3lfZnJvbTogbnVsbCxcbiAgZW50aXR5X2VuZXJneV9wcmljZTogbnVsbCxcbiAgbnVtYmVyX2VuZXJneV9wcmljZTogbnVsbCxcbn0pO1xuXG5pbnRlcmZhY2UgRW5lcmd5U29sYXJGb3JlY2FzdCB7XG4gIHdoX2hvdXJzOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+O1xufVxuZXhwb3J0IHR5cGUgRW5lcmd5U29sYXJGb3JlY2FzdHMgPSB7XG4gIFtjb25maWdfZW50cnlfaWQ6IHN0cmluZ106IEVuZXJneVNvbGFyRm9yZWNhc3Q7XG59O1xuXG5leHBvcnQgaW50ZXJmYWNlIERldmljZUNvbnN1bXB0aW9uRW5lcmd5UHJlZmVyZW5jZSB7XG4gIC8vIFRoaXMgaXMgYW4gZXZlciBpbmNyZWFzaW5nIHZhbHVlXG4gIHN0YXRfY29uc3VtcHRpb246IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBGbG93RnJvbUdyaWRTb3VyY2VFbmVyZ3lQcmVmZXJlbmNlIHtcbiAgLy8ga1doIG1ldGVyXG4gIHN0YXRfZW5lcmd5X2Zyb206IHN0cmluZztcblxuICAvLyAkIG1ldGVyXG4gIHN0YXRfY29zdDogc3RyaW5nIHwgbnVsbDtcblxuICAvLyBDYW4gYmUgdXNlZCB0byBnZW5lcmF0ZSBjb3N0cyBpZiBzdGF0X2Nvc3Qgb21pdHRlZFxuICBlbnRpdHlfZW5lcmd5X2Zyb206IHN0cmluZyB8IG51bGw7XG4gIGVudGl0eV9lbmVyZ3lfcHJpY2U6IHN0cmluZyB8IG51bGw7XG4gIG51bWJlcl9lbmVyZ3lfcHJpY2U6IG51bWJlciB8IG51bGw7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmxvd1RvR3JpZFNvdXJjZUVuZXJneVByZWZlcmVuY2Uge1xuICAvLyBrV2ggbWV0ZXJcbiAgc3RhdF9lbmVyZ3lfdG86IHN0cmluZztcblxuICAvLyAkIG1ldGVyXG4gIHN0YXRfY29tcGVuc2F0aW9uOiBzdHJpbmcgfCBudWxsO1xuXG4gIC8vIENhbiBiZSB1c2VkIHRvIGdlbmVyYXRlIGNvc3RzIGlmIHN0YXRfY29zdCBvbWl0dGVkXG4gIGVudGl0eV9lbmVyZ3lfdG86IHN0cmluZyB8IG51bGw7XG4gIGVudGl0eV9lbmVyZ3lfcHJpY2U6IHN0cmluZyB8IG51bGw7XG4gIG51bWJlcl9lbmVyZ3lfcHJpY2U6IG51bWJlciB8IG51bGw7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgR3JpZFNvdXJjZVR5cGVFbmVyZ3lQcmVmZXJlbmNlIHtcbiAgdHlwZTogXCJncmlkXCI7XG5cbiAgZmxvd19mcm9tOiBGbG93RnJvbUdyaWRTb3VyY2VFbmVyZ3lQcmVmZXJlbmNlW107XG4gIGZsb3dfdG86IEZsb3dUb0dyaWRTb3VyY2VFbmVyZ3lQcmVmZXJlbmNlW107XG5cbiAgY29zdF9hZGp1c3RtZW50X2RheTogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNvbGFyU291cmNlVHlwZUVuZXJneVByZWZlcmVuY2Uge1xuICB0eXBlOiBcInNvbGFyXCI7XG5cbiAgc3RhdF9lbmVyZ3lfZnJvbTogc3RyaW5nO1xuICBjb25maWdfZW50cnlfc29sYXJfZm9yZWNhc3Q6IHN0cmluZ1tdIHwgbnVsbDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCYXR0ZXJ5U291cmNlVHlwZUVuZXJneVByZWZlcmVuY2Uge1xuICB0eXBlOiBcImJhdHRlcnlcIjtcbiAgc3RhdF9lbmVyZ3lfZnJvbTogc3RyaW5nO1xuICBzdGF0X2VuZXJneV90bzogc3RyaW5nO1xufVxuZXhwb3J0IGludGVyZmFjZSBHYXNTb3VyY2VUeXBlRW5lcmd5UHJlZmVyZW5jZSB7XG4gIHR5cGU6IFwiZ2FzXCI7XG5cbiAgLy8ga1doIG1ldGVyXG4gIHN0YXRfZW5lcmd5X2Zyb206IHN0cmluZztcblxuICAvLyAkIG1ldGVyXG4gIHN0YXRfY29zdDogc3RyaW5nIHwgbnVsbDtcblxuICAvLyBDYW4gYmUgdXNlZCB0byBnZW5lcmF0ZSBjb3N0cyBpZiBzdGF0X2Nvc3Qgb21pdHRlZFxuICBlbnRpdHlfZW5lcmd5X2Zyb206IHN0cmluZyB8IG51bGw7XG4gIGVudGl0eV9lbmVyZ3lfcHJpY2U6IHN0cmluZyB8IG51bGw7XG4gIG51bWJlcl9lbmVyZ3lfcHJpY2U6IG51bWJlciB8IG51bGw7XG4gIHVuaXRfb2ZfbWVhc3VyZW1lbnQ/OiBzdHJpbmcgfCBudWxsO1xufVxuXG50eXBlIEVuZXJneVNvdXJjZSA9XG4gIHwgU29sYXJTb3VyY2VUeXBlRW5lcmd5UHJlZmVyZW5jZVxuICB8IEdyaWRTb3VyY2VUeXBlRW5lcmd5UHJlZmVyZW5jZVxuICB8IEJhdHRlcnlTb3VyY2VUeXBlRW5lcmd5UHJlZmVyZW5jZVxuICB8IEdhc1NvdXJjZVR5cGVFbmVyZ3lQcmVmZXJlbmNlO1xuXG5leHBvcnQgaW50ZXJmYWNlIEVuZXJneVByZWZlcmVuY2VzIHtcbiAgZW5lcmd5X3NvdXJjZXM6IEVuZXJneVNvdXJjZVtdO1xuICBkZXZpY2VfY29uc3VtcHRpb246IERldmljZUNvbnN1bXB0aW9uRW5lcmd5UHJlZmVyZW5jZVtdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEVuZXJneUluZm8ge1xuICBjb3N0X3NlbnNvcnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG4gIHNvbGFyX2ZvcmVjYXN0X2RvbWFpbnM6IHN0cmluZ1tdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEVuZXJneVZhbGlkYXRpb25Jc3N1ZSB7XG4gIHR5cGU6IHN0cmluZztcbiAgaWRlbnRpZmllcjogc3RyaW5nO1xuICB2YWx1ZT86IHVua25vd247XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRW5lcmd5UHJlZmVyZW5jZXNWYWxpZGF0aW9uIHtcbiAgZW5lcmd5X3NvdXJjZXM6IEVuZXJneVZhbGlkYXRpb25Jc3N1ZVtdW107XG4gIGRldmljZV9jb25zdW1wdGlvbjogRW5lcmd5VmFsaWRhdGlvbklzc3VlW11bXTtcbn1cblxuZXhwb3J0IGNvbnN0IGdldEVuZXJneUluZm8gPSAoaGFzczogSG9tZUFzc2lzdGFudCkgPT5cbiAgaGFzcy5jYWxsV1M8RW5lcmd5SW5mbz4oe1xuICAgIHR5cGU6IFwiZW5lcmd5L2luZm9cIixcbiAgfSk7XG5cbmV4cG9ydCBjb25zdCBnZXRFbmVyZ3lQcmVmZXJlbmNlVmFsaWRhdGlvbiA9IChoYXNzOiBIb21lQXNzaXN0YW50KSA9PlxuICBoYXNzLmNhbGxXUzxFbmVyZ3lQcmVmZXJlbmNlc1ZhbGlkYXRpb24+KHtcbiAgICB0eXBlOiBcImVuZXJneS92YWxpZGF0ZVwiLFxuICB9KTtcblxuZXhwb3J0IGNvbnN0IGdldEVuZXJneVByZWZlcmVuY2VzID0gKGhhc3M6IEhvbWVBc3Npc3RhbnQpID0+XG4gIGhhc3MuY2FsbFdTPEVuZXJneVByZWZlcmVuY2VzPih7XG4gICAgdHlwZTogXCJlbmVyZ3kvZ2V0X3ByZWZzXCIsXG4gIH0pO1xuXG5leHBvcnQgY29uc3Qgc2F2ZUVuZXJneVByZWZlcmVuY2VzID0gYXN5bmMgKFxuICBoYXNzOiBIb21lQXNzaXN0YW50LFxuICBwcmVmczogUGFydGlhbDxFbmVyZ3lQcmVmZXJlbmNlcz5cbikgPT4ge1xuICBjb25zdCBuZXdQcmVmcyA9IGhhc3MuY2FsbFdTPEVuZXJneVByZWZlcmVuY2VzPih7XG4gICAgdHlwZTogXCJlbmVyZ3kvc2F2ZV9wcmVmc1wiLFxuICAgIC4uLnByZWZzLFxuICB9KTtcbiAgY2xlYXJFbmVyZ3lDb2xsZWN0aW9uUHJlZmVyZW5jZXMoaGFzcyk7XG4gIHJldHVybiBuZXdQcmVmcztcbn07XG5cbmV4cG9ydCBpbnRlcmZhY2UgRm9zc2lsRW5lcmd5Q29uc3VtcHRpb24ge1xuICBbZGF0ZTogc3RyaW5nXTogbnVtYmVyO1xufVxuXG5leHBvcnQgY29uc3QgZ2V0Rm9zc2lsRW5lcmd5Q29uc3VtcHRpb24gPSBhc3luYyAoXG4gIGhhc3M6IEhvbWVBc3Npc3RhbnQsXG4gIHN0YXJ0VGltZTogRGF0ZSxcbiAgZW5lcmd5X3N0YXRpc3RpY19pZHM6IHN0cmluZ1tdLFxuICBjbzJfc3RhdGlzdGljX2lkOiBzdHJpbmcsXG4gIGVuZFRpbWU/OiBEYXRlLFxuICBwZXJpb2Q6IFwiNW1pbnV0ZVwiIHwgXCJob3VyXCIgfCBcImRheVwiIHwgXCJtb250aFwiID0gXCJob3VyXCJcbikgPT5cbiAgaGFzcy5jYWxsV1M8Rm9zc2lsRW5lcmd5Q29uc3VtcHRpb24+KHtcbiAgICB0eXBlOiBcImVuZXJneS9mb3NzaWxfZW5lcmd5X2NvbnN1bXB0aW9uXCIsXG4gICAgc3RhcnRfdGltZTogc3RhcnRUaW1lLnRvSVNPU3RyaW5nKCksXG4gICAgZW5kX3RpbWU6IGVuZFRpbWU/LnRvSVNPU3RyaW5nKCksXG4gICAgZW5lcmd5X3N0YXRpc3RpY19pZHMsXG4gICAgY28yX3N0YXRpc3RpY19pZCxcbiAgICBwZXJpb2QsXG4gIH0pO1xuXG5pbnRlcmZhY2UgRW5lcmd5U291cmNlQnlUeXBlIHtcbiAgZ3JpZD86IEdyaWRTb3VyY2VUeXBlRW5lcmd5UHJlZmVyZW5jZVtdO1xuICBzb2xhcj86IFNvbGFyU291cmNlVHlwZUVuZXJneVByZWZlcmVuY2VbXTtcbiAgYmF0dGVyeT86IEJhdHRlcnlTb3VyY2VUeXBlRW5lcmd5UHJlZmVyZW5jZVtdO1xuICBnYXM/OiBHYXNTb3VyY2VUeXBlRW5lcmd5UHJlZmVyZW5jZVtdO1xufVxuXG5leHBvcnQgY29uc3QgZW5lcmd5U291cmNlc0J5VHlwZSA9IChwcmVmczogRW5lcmd5UHJlZmVyZW5jZXMpID0+XG4gIGdyb3VwQnkocHJlZnMuZW5lcmd5X3NvdXJjZXMsIChpdGVtKSA9PiBpdGVtLnR5cGUpIGFzIEVuZXJneVNvdXJjZUJ5VHlwZTtcblxuZXhwb3J0IGludGVyZmFjZSBFbmVyZ3lEYXRhIHtcbiAgc3RhcnQ6IERhdGU7XG4gIGVuZD86IERhdGU7XG4gIHN0YXJ0Q29tcGFyZT86IERhdGU7XG4gIGVuZENvbXBhcmU/OiBEYXRlO1xuICBwcmVmczogRW5lcmd5UHJlZmVyZW5jZXM7XG4gIGluZm86IEVuZXJneUluZm87XG4gIHN0YXRzOiBTdGF0aXN0aWNzO1xuICBzdGF0c01ldGFkYXRhOiBSZWNvcmQ8c3RyaW5nLCBTdGF0aXN0aWNzTWV0YURhdGE+O1xuICBzdGF0c0NvbXBhcmU6IFN0YXRpc3RpY3M7XG4gIGNvMlNpZ25hbENvbmZpZ0VudHJ5PzogQ29uZmlnRW50cnk7XG4gIGNvMlNpZ25hbEVudGl0eT86IHN0cmluZztcbiAgZm9zc2lsRW5lcmd5Q29uc3VtcHRpb24/OiBGb3NzaWxFbmVyZ3lDb25zdW1wdGlvbjtcbiAgZm9zc2lsRW5lcmd5Q29uc3VtcHRpb25Db21wYXJlPzogRm9zc2lsRW5lcmd5Q29uc3VtcHRpb247XG59XG5cbmNvbnN0IGdldEVuZXJneURhdGEgPSBhc3luYyAoXG4gIGhhc3M6IEhvbWVBc3Npc3RhbnQsXG4gIHByZWZzOiBFbmVyZ3lQcmVmZXJlbmNlcyxcbiAgc3RhcnQ6IERhdGUsXG4gIGVuZD86IERhdGUsXG4gIGNvbXBhcmU/OiBib29sZWFuXG4pOiBQcm9taXNlPEVuZXJneURhdGE+ID0+IHtcbiAgY29uc3QgW2NvbmZpZ0VudHJpZXMsIGVudGl0eVJlZ2lzdHJ5RW50cmllcywgaW5mb10gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgZ2V0Q29uZmlnRW50cmllcyhoYXNzLCB7IGRvbWFpbjogXCJjbzJzaWduYWxcIiB9KSxcbiAgICBzdWJzY3JpYmVPbmUoaGFzcy5jb25uZWN0aW9uLCBzdWJzY3JpYmVFbnRpdHlSZWdpc3RyeSksXG4gICAgZ2V0RW5lcmd5SW5mbyhoYXNzKSxcbiAgXSk7XG5cbiAgY29uc3QgY28yU2lnbmFsQ29uZmlnRW50cnkgPSBjb25maWdFbnRyaWVzLmxlbmd0aFxuICAgID8gY29uZmlnRW50cmllc1swXVxuICAgIDogdW5kZWZpbmVkO1xuXG4gIGxldCBjbzJTaWduYWxFbnRpdHk6IHN0cmluZyB8IHVuZGVmaW5lZDtcblxuICBpZiAoY28yU2lnbmFsQ29uZmlnRW50cnkpIHtcbiAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGVudGl0eVJlZ2lzdHJ5RW50cmllcykge1xuICAgICAgaWYgKGVudHJ5LmNvbmZpZ19lbnRyeV9pZCAhPT0gY28yU2lnbmFsQ29uZmlnRW50cnkuZW50cnlfaWQpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIFRoZSBpbnRlZ3JhdGlvbiBvZmZlcnMgMiBlbnRpdGllcy4gV2Ugd2FudCB0aGUgJSBvbmUuXG4gICAgICBjb25zdCBjbzJTdGF0ZSA9IGhhc3Muc3RhdGVzW2VudHJ5LmVudGl0eV9pZF07XG4gICAgICBpZiAoIWNvMlN0YXRlIHx8IGNvMlN0YXRlLmF0dHJpYnV0ZXMudW5pdF9vZl9tZWFzdXJlbWVudCAhPT0gXCIlXCIpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGNvMlNpZ25hbEVudGl0eSA9IGNvMlN0YXRlLmVudGl0eV9pZDtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGNvbnN1bXB0aW9uU3RhdElEczogc3RyaW5nW10gPSBbXTtcbiAgY29uc3Qgc3RhdElEczogc3RyaW5nW10gPSBbXTtcblxuICBmb3IgKGNvbnN0IHNvdXJjZSBvZiBwcmVmcy5lbmVyZ3lfc291cmNlcykge1xuICAgIGlmIChzb3VyY2UudHlwZSA9PT0gXCJzb2xhclwiKSB7XG4gICAgICBzdGF0SURzLnB1c2goc291cmNlLnN0YXRfZW5lcmd5X2Zyb20pO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgaWYgKHNvdXJjZS50eXBlID09PSBcImdhc1wiKSB7XG4gICAgICBzdGF0SURzLnB1c2goc291cmNlLnN0YXRfZW5lcmd5X2Zyb20pO1xuICAgICAgaWYgKHNvdXJjZS5zdGF0X2Nvc3QpIHtcbiAgICAgICAgc3RhdElEcy5wdXNoKHNvdXJjZS5zdGF0X2Nvc3QpO1xuICAgICAgfVxuICAgICAgY29uc3QgY29zdFN0YXRJZCA9IGluZm8uY29zdF9zZW5zb3JzW3NvdXJjZS5zdGF0X2VuZXJneV9mcm9tXTtcbiAgICAgIGlmIChjb3N0U3RhdElkKSB7XG4gICAgICAgIHN0YXRJRHMucHVzaChjb3N0U3RhdElkKTtcbiAgICAgIH1cbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGlmIChzb3VyY2UudHlwZSA9PT0gXCJiYXR0ZXJ5XCIpIHtcbiAgICAgIHN0YXRJRHMucHVzaChzb3VyY2Uuc3RhdF9lbmVyZ3lfZnJvbSk7XG4gICAgICBzdGF0SURzLnB1c2goc291cmNlLnN0YXRfZW5lcmd5X3RvKTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8vIGdyaWQgc291cmNlXG4gICAgZm9yIChjb25zdCBmbG93RnJvbSBvZiBzb3VyY2UuZmxvd19mcm9tKSB7XG4gICAgICBjb25zdW1wdGlvblN0YXRJRHMucHVzaChmbG93RnJvbS5zdGF0X2VuZXJneV9mcm9tKTtcbiAgICAgIHN0YXRJRHMucHVzaChmbG93RnJvbS5zdGF0X2VuZXJneV9mcm9tKTtcbiAgICAgIGlmIChmbG93RnJvbS5zdGF0X2Nvc3QpIHtcbiAgICAgICAgc3RhdElEcy5wdXNoKGZsb3dGcm9tLnN0YXRfY29zdCk7XG4gICAgICB9XG4gICAgICBjb25zdCBjb3N0U3RhdElkID0gaW5mby5jb3N0X3NlbnNvcnNbZmxvd0Zyb20uc3RhdF9lbmVyZ3lfZnJvbV07XG4gICAgICBpZiAoY29zdFN0YXRJZCkge1xuICAgICAgICBzdGF0SURzLnB1c2goY29zdFN0YXRJZCk7XG4gICAgICB9XG4gICAgfVxuICAgIGZvciAoY29uc3QgZmxvd1RvIG9mIHNvdXJjZS5mbG93X3RvKSB7XG4gICAgICBzdGF0SURzLnB1c2goZmxvd1RvLnN0YXRfZW5lcmd5X3RvKTtcbiAgICAgIGlmIChmbG93VG8uc3RhdF9jb21wZW5zYXRpb24pIHtcbiAgICAgICAgc3RhdElEcy5wdXNoKGZsb3dUby5zdGF0X2NvbXBlbnNhdGlvbik7XG4gICAgICB9XG4gICAgICBjb25zdCBjb3N0U3RhdElkID0gaW5mby5jb3N0X3NlbnNvcnNbZmxvd1RvLnN0YXRfZW5lcmd5X3RvXTtcbiAgICAgIGlmIChjb3N0U3RhdElkKSB7XG4gICAgICAgIHN0YXRJRHMucHVzaChjb3N0U3RhdElkKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBjb25zdCBkYXlEaWZmZXJlbmNlID0gZGlmZmVyZW5jZUluRGF5cyhlbmQgfHwgbmV3IERhdGUoKSwgc3RhcnQpO1xuICBjb25zdCBwZXJpb2QgPVxuICAgIGRheURpZmZlcmVuY2UgPiAzNSA/IFwibW9udGhcIiA6IGRheURpZmZlcmVuY2UgPiAyID8gXCJkYXlcIiA6IFwiaG91clwiO1xuXG4gIC8vIFN1YnRyYWN0IDEgaG91ciBmcm9tIHN0YXJ0IHRvIGdldCBzdGFydGluZyBwb2ludCBkYXRhXG4gIGNvbnN0IHN0YXJ0TWluSG91ciA9IGFkZEhvdXJzKHN0YXJ0LCAtMSk7XG5cbiAgY29uc3Qgc3RhdHMgPSBhd2FpdCBmZXRjaFN0YXRpc3RpY3MoXG4gICAgaGFzcyEsXG4gICAgc3RhcnRNaW5Ib3VyLFxuICAgIGVuZCxcbiAgICBzdGF0SURzLFxuICAgIHBlcmlvZFxuICApO1xuXG4gIGxldCBzdGF0c0NvbXBhcmU7XG4gIGxldCBzdGFydENvbXBhcmU7XG4gIGxldCBlbmRDb21wYXJlO1xuICBpZiAoY29tcGFyZSkge1xuICAgIGlmIChkYXlEaWZmZXJlbmNlID4gMjcgJiYgZGF5RGlmZmVyZW5jZSA8IDMyKSB7XG4gICAgICAvLyBXaGVuIGNvbXBhcmluZyBhIG1vbnRoLCB3ZSB3YW50IHRvIHN0YXJ0IGF0IHRoZSBiZWdpbmluZyBvZiB0aGUgbW9udGhcbiAgICAgIHN0YXJ0Q29tcGFyZSA9IGFkZE1vbnRocyhzdGFydCwgLTEpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdGFydENvbXBhcmUgPSBhZGREYXlzKHN0YXJ0LCAoZGF5RGlmZmVyZW5jZSArIDEpICogLTEpO1xuICAgIH1cblxuICAgIGNvbnN0IGNvbXBhcmVTdGFydE1pbkhvdXIgPSBhZGRIb3VycyhzdGFydENvbXBhcmUsIC0xKTtcbiAgICBlbmRDb21wYXJlID0gYWRkTWlsbGlzZWNvbmRzKHN0YXJ0LCAtMSk7XG5cbiAgICBzdGF0c0NvbXBhcmUgPSBhd2FpdCBmZXRjaFN0YXRpc3RpY3MoXG4gICAgICBoYXNzISxcbiAgICAgIGNvbXBhcmVTdGFydE1pbkhvdXIsXG4gICAgICBlbmRDb21wYXJlLFxuICAgICAgc3RhdElEcyxcbiAgICAgIHBlcmlvZFxuICAgICk7XG4gIH1cblxuICBsZXQgZm9zc2lsRW5lcmd5Q29uc3VtcHRpb246IEZvc3NpbEVuZXJneUNvbnN1bXB0aW9uIHwgdW5kZWZpbmVkO1xuICBsZXQgZm9zc2lsRW5lcmd5Q29uc3VtcHRpb25Db21wYXJlOiBGb3NzaWxFbmVyZ3lDb25zdW1wdGlvbiB8IHVuZGVmaW5lZDtcblxuICBpZiAoY28yU2lnbmFsRW50aXR5ICE9PSB1bmRlZmluZWQpIHtcbiAgICBmb3NzaWxFbmVyZ3lDb25zdW1wdGlvbiA9IGF3YWl0IGdldEZvc3NpbEVuZXJneUNvbnN1bXB0aW9uKFxuICAgICAgaGFzcyEsXG4gICAgICBzdGFydCxcbiAgICAgIGNvbnN1bXB0aW9uU3RhdElEcyxcbiAgICAgIGNvMlNpZ25hbEVudGl0eSxcbiAgICAgIGVuZCxcbiAgICAgIGRheURpZmZlcmVuY2UgPiAzNSA/IFwibW9udGhcIiA6IGRheURpZmZlcmVuY2UgPiAyID8gXCJkYXlcIiA6IFwiaG91clwiXG4gICAgKTtcbiAgICBpZiAoY29tcGFyZSkge1xuICAgICAgZm9zc2lsRW5lcmd5Q29uc3VtcHRpb25Db21wYXJlID0gYXdhaXQgZ2V0Rm9zc2lsRW5lcmd5Q29uc3VtcHRpb24oXG4gICAgICAgIGhhc3MhLFxuICAgICAgICBzdGFydENvbXBhcmUsXG4gICAgICAgIGNvbnN1bXB0aW9uU3RhdElEcyxcbiAgICAgICAgY28yU2lnbmFsRW50aXR5LFxuICAgICAgICBlbmRDb21wYXJlLFxuICAgICAgICBkYXlEaWZmZXJlbmNlID4gMzUgPyBcIm1vbnRoXCIgOiBkYXlEaWZmZXJlbmNlID4gMiA/IFwiZGF5XCIgOiBcImhvdXJcIlxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBPYmplY3QudmFsdWVzKHN0YXRzKS5mb3JFYWNoKChzdGF0KSA9PiB7XG4gICAgLy8gaWYgdGhlIHN0YXJ0IG9mIHRoZSBmaXJzdCB2YWx1ZSBpcyBhZnRlciB0aGUgcmVxdWVzdGVkIHBlcmlvZCwgd2UgaGF2ZSB0aGUgZmlyc3QgZGF0YSBwb2ludCwgYW5kIHNob3VsZCBhZGQgYSB6ZXJvIHBvaW50XG4gICAgaWYgKHN0YXQubGVuZ3RoICYmIG5ldyBEYXRlKHN0YXRbMF0uc3RhcnQpID4gc3RhcnRNaW5Ib3VyKSB7XG4gICAgICBzdGF0LnVuc2hpZnQoe1xuICAgICAgICAuLi5zdGF0WzBdLFxuICAgICAgICBzdGFydDogc3RhcnRNaW5Ib3VyLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIGVuZDogc3RhcnRNaW5Ib3VyLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIHN1bTogMCxcbiAgICAgICAgc3RhdGU6IDAsXG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuXG4gIGNvbnN0IHN0YXRzTWV0YWRhdGFBcnJheSA9IGF3YWl0IGdldFN0YXRpc3RpY01ldGFkYXRhKGhhc3MsIHN0YXRJRHMpO1xuICBjb25zdCBzdGF0c01ldGFkYXRhOiBSZWNvcmQ8c3RyaW5nLCBTdGF0aXN0aWNzTWV0YURhdGE+ID0ge307XG4gIHN0YXRzTWV0YWRhdGFBcnJheS5mb3JFYWNoKCh4KSA9PiB7XG4gICAgc3RhdHNNZXRhZGF0YVt4LnN0YXRpc3RpY19pZF0gPSB4O1xuICB9KTtcblxuICBjb25zdCBkYXRhOiBFbmVyZ3lEYXRhID0ge1xuICAgIHN0YXJ0LFxuICAgIGVuZCxcbiAgICBzdGFydENvbXBhcmUsXG4gICAgZW5kQ29tcGFyZSxcbiAgICBpbmZvLFxuICAgIHByZWZzLFxuICAgIHN0YXRzLFxuICAgIHN0YXRzTWV0YWRhdGEsXG4gICAgc3RhdHNDb21wYXJlLFxuICAgIGNvMlNpZ25hbENvbmZpZ0VudHJ5LFxuICAgIGNvMlNpZ25hbEVudGl0eSxcbiAgICBmb3NzaWxFbmVyZ3lDb25zdW1wdGlvbixcbiAgICBmb3NzaWxFbmVyZ3lDb25zdW1wdGlvbkNvbXBhcmUsXG4gIH07XG5cbiAgcmV0dXJuIGRhdGE7XG59O1xuXG5leHBvcnQgaW50ZXJmYWNlIEVuZXJneUNvbGxlY3Rpb24gZXh0ZW5kcyBDb2xsZWN0aW9uPEVuZXJneURhdGE+IHtcbiAgc3RhcnQ6IERhdGU7XG4gIGVuZD86IERhdGU7XG4gIGNvbXBhcmU/OiBib29sZWFuO1xuICBwcmVmcz86IEVuZXJneVByZWZlcmVuY2VzO1xuICBjbGVhclByZWZzKCk6IHZvaWQ7XG4gIHNldFBlcmlvZChuZXdTdGFydDogRGF0ZSwgbmV3RW5kPzogRGF0ZSk6IHZvaWQ7XG4gIHNldENvbXBhcmUoY29tcGFyZTogYm9vbGVhbik6IHZvaWQ7XG4gIF9yZWZyZXNoVGltZW91dD86IG51bWJlcjtcbiAgX3VwZGF0ZVBlcmlvZFRpbWVvdXQ/OiBudW1iZXI7XG4gIF9hY3RpdmU6IG51bWJlcjtcbn1cblxuY29uc3QgY2xlYXJFbmVyZ3lDb2xsZWN0aW9uUHJlZmVyZW5jZXMgPSAoaGFzczogSG9tZUFzc2lzdGFudCkgPT4ge1xuICBlbmVyZ3lDb2xsZWN0aW9uS2V5cy5mb3JFYWNoKChrZXkpID0+IHtcbiAgICBjb25zdCBlbmVyZ3lDb2xsZWN0aW9uID0gZ2V0RW5lcmd5RGF0YUNvbGxlY3Rpb24oaGFzcywgeyBrZXkgfSk7XG4gICAgZW5lcmd5Q29sbGVjdGlvbi5jbGVhclByZWZzKCk7XG4gICAgaWYgKGVuZXJneUNvbGxlY3Rpb24uX2FjdGl2ZSkge1xuICAgICAgZW5lcmd5Q29sbGVjdGlvbi5yZWZyZXNoKCk7XG4gICAgfVxuICB9KTtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRFbmVyZ3lEYXRhQ29sbGVjdGlvbiA9IChcbiAgaGFzczogSG9tZUFzc2lzdGFudCxcbiAgb3B0aW9uczogeyBwcmVmcz86IEVuZXJneVByZWZlcmVuY2VzOyBrZXk/OiBzdHJpbmcgfSA9IHt9XG4pOiBFbmVyZ3lDb2xsZWN0aW9uID0+IHtcbiAgbGV0IGtleSA9IFwiX2VuZXJneVwiO1xuICBpZiAob3B0aW9ucy5rZXkpIHtcbiAgICBpZiAoIW9wdGlvbnMua2V5LnN0YXJ0c1dpdGgoXCJlbmVyZ3lfXCIpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJLZXkgbmVlZCB0byBzdGFydCB3aXRoIGVuZXJneV9cIik7XG4gICAgfVxuICAgIGtleSA9IGBfJHtvcHRpb25zLmtleX1gO1xuICB9XG5cbiAgaWYgKChoYXNzLmNvbm5lY3Rpb24gYXMgYW55KVtrZXldKSB7XG4gICAgcmV0dXJuIChoYXNzLmNvbm5lY3Rpb24gYXMgYW55KVtrZXldO1xuICB9XG5cbiAgZW5lcmd5Q29sbGVjdGlvbktleXMucHVzaChvcHRpb25zLmtleSk7XG5cbiAgY29uc3QgY29sbGVjdGlvbiA9IGdldENvbGxlY3Rpb248RW5lcmd5RGF0YT4oXG4gICAgaGFzcy5jb25uZWN0aW9uLFxuICAgIGtleSxcbiAgICBhc3luYyAoKSA9PiB7XG4gICAgICBpZiAoIWNvbGxlY3Rpb24ucHJlZnMpIHtcbiAgICAgICAgLy8gVGhpcyB3aWxsIHJhaXNlIGlmIG5vdCBmb3VuZC5cbiAgICAgICAgLy8gRGV0ZWN0IGJ5IGNoZWNraW5nIGBlLmNvZGUgPT09IFwibm90X2ZvdW5kXCJcbiAgICAgICAgY29sbGVjdGlvbi5wcmVmcyA9IGF3YWl0IGdldEVuZXJneVByZWZlcmVuY2VzKGhhc3MpO1xuICAgICAgfVxuXG4gICAgICBpZiAoY29sbGVjdGlvbi5fcmVmcmVzaFRpbWVvdXQpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KGNvbGxlY3Rpb24uX3JlZnJlc2hUaW1lb3V0KTtcbiAgICAgIH1cblxuICAgICAgaWYgKFxuICAgICAgICBjb2xsZWN0aW9uLl9hY3RpdmUgJiZcbiAgICAgICAgKCFjb2xsZWN0aW9uLmVuZCB8fCBjb2xsZWN0aW9uLmVuZCA+IG5ldyBEYXRlKCkpXG4gICAgICApIHtcbiAgICAgICAgLy8gVGhlIHN0YXRzIGFyZSBjcmVhdGVkIGV2ZXJ5IGhvdXJcbiAgICAgICAgLy8gU2NoZWR1bGUgYSByZWZyZXNoIGZvciAyMCBtaW51dGVzIHBhc3QgdGhlIGhvdXJcbiAgICAgICAgLy8gSWYgdGhlIGVuZCBpcyBsYXJnZXIgdGhhbiB0aGUgY3VycmVudCB0aW1lLlxuICAgICAgICBjb25zdCBuZXh0RmV0Y2ggPSBuZXcgRGF0ZSgpO1xuICAgICAgICBpZiAobmV4dEZldGNoLmdldE1pbnV0ZXMoKSA+PSAyMCkge1xuICAgICAgICAgIG5leHRGZXRjaC5zZXRIb3VycyhuZXh0RmV0Y2guZ2V0SG91cnMoKSArIDEpO1xuICAgICAgICB9XG4gICAgICAgIG5leHRGZXRjaC5zZXRNaW51dGVzKDIwLCAwLCAwKTtcblxuICAgICAgICBjb2xsZWN0aW9uLl9yZWZyZXNoVGltZW91dCA9IHdpbmRvdy5zZXRUaW1lb3V0KFxuICAgICAgICAgICgpID0+IGNvbGxlY3Rpb24ucmVmcmVzaCgpLFxuICAgICAgICAgIG5leHRGZXRjaC5nZXRUaW1lKCkgLSBEYXRlLm5vdygpXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBnZXRFbmVyZ3lEYXRhKFxuICAgICAgICBoYXNzLFxuICAgICAgICBjb2xsZWN0aW9uLnByZWZzLFxuICAgICAgICBjb2xsZWN0aW9uLnN0YXJ0LFxuICAgICAgICBjb2xsZWN0aW9uLmVuZCxcbiAgICAgICAgY29sbGVjdGlvbi5jb21wYXJlXG4gICAgICApO1xuICAgIH1cbiAgKSBhcyBFbmVyZ3lDb2xsZWN0aW9uO1xuXG4gIGNvbnN0IG9yaWdTdWJzY3JpYmUgPSBjb2xsZWN0aW9uLnN1YnNjcmliZTtcblxuICBjb2xsZWN0aW9uLnN1YnNjcmliZSA9IChzdWJzY3JpYmVyOiAoZGF0YTogRW5lcmd5RGF0YSkgPT4gdm9pZCkgPT4ge1xuICAgIGNvbnN0IHVuc3ViID0gb3JpZ1N1YnNjcmliZShzdWJzY3JpYmVyKTtcbiAgICBjb2xsZWN0aW9uLl9hY3RpdmUrKztcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgY29sbGVjdGlvbi5fYWN0aXZlLS07XG4gICAgICBpZiAoY29sbGVjdGlvbi5fYWN0aXZlIDwgMSkge1xuICAgICAgICBjbGVhclRpbWVvdXQoY29sbGVjdGlvbi5fcmVmcmVzaFRpbWVvdXQpO1xuICAgICAgICBjb2xsZWN0aW9uLl9yZWZyZXNoVGltZW91dCA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICAgIHVuc3ViKCk7XG4gICAgfTtcbiAgfTtcblxuICBjb2xsZWN0aW9uLl9hY3RpdmUgPSAwO1xuICBjb2xsZWN0aW9uLnByZWZzID0gb3B0aW9ucy5wcmVmcztcbiAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgLy8gU2V0IHN0YXJ0IHRvIHN0YXJ0IG9mIHRvZGF5IGlmIHdlIGhhdmUgZGF0YSBmb3IgdG9kYXksIG90aGVyd2lzZSB5ZXN0ZXJkYXlcbiAgY29sbGVjdGlvbi5zdGFydCA9IG5vdy5nZXRIb3VycygpID4gMCA/IHN0YXJ0T2ZUb2RheSgpIDogc3RhcnRPZlllc3RlcmRheSgpO1xuICBjb2xsZWN0aW9uLmVuZCA9IG5vdy5nZXRIb3VycygpID4gMCA/IGVuZE9mVG9kYXkoKSA6IGVuZE9mWWVzdGVyZGF5KCk7XG5cbiAgY29uc3Qgc2NoZWR1bGVVcGRhdGVQZXJpb2QgPSAoKSA9PiB7XG4gICAgY29sbGVjdGlvbi5fdXBkYXRlUGVyaW9kVGltZW91dCA9IHdpbmRvdy5zZXRUaW1lb3V0KFxuICAgICAgKCkgPT4ge1xuICAgICAgICBjb2xsZWN0aW9uLnN0YXJ0ID0gc3RhcnRPZlRvZGF5KCk7XG4gICAgICAgIGNvbGxlY3Rpb24uZW5kID0gZW5kT2ZUb2RheSgpO1xuICAgICAgICBzY2hlZHVsZVVwZGF0ZVBlcmlvZCgpO1xuICAgICAgfSxcbiAgICAgIGFkZEhvdXJzKGVuZE9mVG9kYXkoKSwgMSkuZ2V0VGltZSgpIC0gRGF0ZS5ub3coKSAvLyBTd2l0Y2ggdG8gbmV4dCBkYXkgYW4gaG91ciBhZnRlciB0aGUgZGF5IGNoYW5nZWRcbiAgICApO1xuICB9O1xuICBzY2hlZHVsZVVwZGF0ZVBlcmlvZCgpO1xuXG4gIGNvbGxlY3Rpb24uY2xlYXJQcmVmcyA9ICgpID0+IHtcbiAgICBjb2xsZWN0aW9uLnByZWZzID0gdW5kZWZpbmVkO1xuICB9O1xuICBjb2xsZWN0aW9uLnNldFBlcmlvZCA9IChuZXdTdGFydDogRGF0ZSwgbmV3RW5kPzogRGF0ZSkgPT4ge1xuICAgIGNvbGxlY3Rpb24uc3RhcnQgPSBuZXdTdGFydDtcbiAgICBjb2xsZWN0aW9uLmVuZCA9IG5ld0VuZDtcbiAgICBpZiAoXG4gICAgICBjb2xsZWN0aW9uLnN0YXJ0LmdldFRpbWUoKSA9PT0gc3RhcnRPZlRvZGF5KCkuZ2V0VGltZSgpICYmXG4gICAgICBjb2xsZWN0aW9uLmVuZD8uZ2V0VGltZSgpID09PSBlbmRPZlRvZGF5KCkuZ2V0VGltZSgpICYmXG4gICAgICAhY29sbGVjdGlvbi5fdXBkYXRlUGVyaW9kVGltZW91dFxuICAgICkge1xuICAgICAgc2NoZWR1bGVVcGRhdGVQZXJpb2QoKTtcbiAgICB9IGVsc2UgaWYgKGNvbGxlY3Rpb24uX3VwZGF0ZVBlcmlvZFRpbWVvdXQpIHtcbiAgICAgIGNsZWFyVGltZW91dChjb2xsZWN0aW9uLl91cGRhdGVQZXJpb2RUaW1lb3V0KTtcbiAgICAgIGNvbGxlY3Rpb24uX3VwZGF0ZVBlcmlvZFRpbWVvdXQgPSB1bmRlZmluZWQ7XG4gICAgfVxuICB9O1xuICBjb2xsZWN0aW9uLnNldENvbXBhcmUgPSAoY29tcGFyZTogYm9vbGVhbikgPT4ge1xuICAgIGNvbGxlY3Rpb24uY29tcGFyZSA9IGNvbXBhcmU7XG4gIH07XG4gIHJldHVybiBjb2xsZWN0aW9uO1xufTtcblxuZXhwb3J0IGNvbnN0IGdldEVuZXJneVNvbGFyRm9yZWNhc3RzID0gKGhhc3M6IEhvbWVBc3Npc3RhbnQpID0+XG4gIGhhc3MuY2FsbFdTPEVuZXJneVNvbGFyRm9yZWNhc3RzPih7XG4gICAgdHlwZTogXCJlbmVyZ3kvc29sYXJfZm9yZWNhc3RcIixcbiAgfSk7XG5cbmV4cG9ydCBjb25zdCBFTkVSR1lfR0FTX1ZPTFVNRV9VTklUUyA9IFtcIm3Cs1wiLCBcImZ0wrNcIl07XG5leHBvcnQgY29uc3QgRU5FUkdZX0dBU19FTkVSR1lfVU5JVFMgPSBbXCJrV2hcIl07XG5leHBvcnQgY29uc3QgRU5FUkdZX0dBU19VTklUUyA9IFtcbiAgLi4uRU5FUkdZX0dBU19WT0xVTUVfVU5JVFMsXG4gIC4uLkVORVJHWV9HQVNfRU5FUkdZX1VOSVRTLFxuXTtcblxuZXhwb3J0IHR5cGUgRW5lcmd5R2FzVW5pdCA9IFwidm9sdW1lXCIgfCBcImVuZXJneVwiO1xuXG5leHBvcnQgY29uc3QgZ2V0RW5lcmd5R2FzVW5pdENhdGVnb3J5ID0gKFxuICBoYXNzOiBIb21lQXNzaXN0YW50LFxuICBwcmVmczogRW5lcmd5UHJlZmVyZW5jZXNcbik6IEVuZXJneUdhc1VuaXQgfCB1bmRlZmluZWQgPT4ge1xuICBmb3IgKGNvbnN0IHNvdXJjZSBvZiBwcmVmcy5lbmVyZ3lfc291cmNlcykge1xuICAgIGlmIChzb3VyY2UudHlwZSAhPT0gXCJnYXNcIikge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgY29uc3QgZW50aXR5ID0gaGFzcy5zdGF0ZXNbc291cmNlLnN0YXRfZW5lcmd5X2Zyb21dO1xuICAgIGlmIChlbnRpdHkpIHtcbiAgICAgIHJldHVybiBFTkVSR1lfR0FTX1ZPTFVNRV9VTklUUy5pbmNsdWRlcyhcbiAgICAgICAgZW50aXR5LmF0dHJpYnV0ZXMudW5pdF9vZl9tZWFzdXJlbWVudCFcbiAgICAgIClcbiAgICAgICAgPyBcInZvbHVtZVwiXG4gICAgICAgIDogXCJlbmVyZ3lcIjtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRFbmVyZ3lHYXNVbml0ID0gKFxuICBoYXNzOiBIb21lQXNzaXN0YW50LFxuICBwcmVmczogRW5lcmd5UHJlZmVyZW5jZXMsXG4gIHN0YXRpc3RpY3NNZXRhRGF0YTogUmVjb3JkPHN0cmluZywgU3RhdGlzdGljc01ldGFEYXRhPiA9IHt9XG4pOiBzdHJpbmcgfCB1bmRlZmluZWQgPT4ge1xuICBmb3IgKGNvbnN0IHNvdXJjZSBvZiBwcmVmcy5lbmVyZ3lfc291cmNlcykge1xuICAgIGlmIChzb3VyY2UudHlwZSAhPT0gXCJnYXNcIikge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGNvbnN0IGVudGl0eSA9IGhhc3Muc3RhdGVzW3NvdXJjZS5zdGF0X2VuZXJneV9mcm9tXTtcbiAgICBpZiAoZW50aXR5Py5hdHRyaWJ1dGVzLnVuaXRfb2ZfbWVhc3VyZW1lbnQpIHtcbiAgICAgIC8vIFdoIGlzIG5vcm1hbGl6ZWQgdG8ga1doIGJ5IHN0YXRzIGdlbmVyYXRpb25cbiAgICAgIHJldHVybiBlbnRpdHkuYXR0cmlidXRlcy51bml0X29mX21lYXN1cmVtZW50ID09PSBcIldoXCJcbiAgICAgICAgPyBcImtXaFwiXG4gICAgICAgIDogZW50aXR5LmF0dHJpYnV0ZXMudW5pdF9vZl9tZWFzdXJlbWVudDtcbiAgICB9XG4gICAgY29uc3Qgc3RhdGlzdGljSWRXaXRoTWV0YSA9IHN0YXRpc3RpY3NNZXRhRGF0YVtzb3VyY2Uuc3RhdF9lbmVyZ3lfZnJvbV07XG4gICAgaWYgKHN0YXRpc3RpY0lkV2l0aE1ldGE/LnVuaXRfb2ZfbWVhc3VyZW1lbnQpIHtcbiAgICAgIHJldHVybiBzdGF0aXN0aWNJZFdpdGhNZXRhLnVuaXRfb2ZfbWVhc3VyZW1lbnQgPT09IFwiV2hcIlxuICAgICAgICA/IFwia1doXCJcbiAgICAgICAgOiBzdGF0aXN0aWNJZFdpdGhNZXRhLnVuaXRfb2ZfbWVhc3VyZW1lbnQ7XG4gICAgfVxuICB9XG4gIHJldHVybiB1bmRlZmluZWQ7XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/data/energy.ts\n");

/***/ }),

/***/ "./src/data/entity_registry.ts":
/*!*************************************!*\
  !*** ./src/data/entity_registry.ts ***!
  \*************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"findBatteryEntity\": function() { return /* binding */ findBatteryEntity; },\n/* harmony export */   \"findBatteryChargingEntity\": function() { return /* binding */ findBatteryChargingEntity; },\n/* harmony export */   \"computeEntityRegistryName\": function() { return /* binding */ computeEntityRegistryName; },\n/* harmony export */   \"getExtendedEntityRegistryEntry\": function() { return /* binding */ getExtendedEntityRegistryEntry; },\n/* harmony export */   \"updateEntityRegistryEntry\": function() { return /* binding */ updateEntityRegistryEntry; },\n/* harmony export */   \"removeEntityRegistryEntry\": function() { return /* binding */ removeEntityRegistryEntry; },\n/* harmony export */   \"fetchEntityRegistry\": function() { return /* binding */ fetchEntityRegistry; },\n/* harmony export */   \"subscribeEntityRegistry\": function() { return /* binding */ subscribeEntityRegistry; },\n/* harmony export */   \"sortEntityRegistryByName\": function() { return /* binding */ sortEntityRegistryByName; }\n/* harmony export */ });\n/* harmony import */ var home_assistant_js_websocket__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! home-assistant-js-websocket */ \"./node_modules/home-assistant-js-websocket/dist/collection.js\");\n/* harmony import */ var _common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/entity/compute_state_name */ \"./src/common/entity/compute_state_name.ts\");\n/* harmony import */ var _common_string_compare__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common/string/compare */ \"./src/common/string/compare.ts\");\n/* harmony import */ var _common_util_debounce__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common/util/debounce */ \"./src/common/util/debounce.ts\");\n\n\n\n\nvar findBatteryEntity = function findBatteryEntity(hass, entities) {\n  return entities.find(function (entity) {\n    return hass.states[entity.entity_id] && hass.states[entity.entity_id].attributes.device_class === \"battery\";\n  });\n};\nvar findBatteryChargingEntity = function findBatteryChargingEntity(hass, entities) {\n  return entities.find(function (entity) {\n    return hass.states[entity.entity_id] && hass.states[entity.entity_id].attributes.device_class === \"battery_charging\";\n  });\n};\nvar computeEntityRegistryName = function computeEntityRegistryName(hass, entry) {\n  if (entry.name) {\n    return entry.name;\n  }\n\n  var state = hass.states[entry.entity_id];\n  return state ? (0,_common_entity_compute_state_name__WEBPACK_IMPORTED_MODULE_0__.computeStateName)(state) : entry.entity_id;\n};\nvar getExtendedEntityRegistryEntry = function getExtendedEntityRegistryEntry(hass, entityId) {\n  return hass.callWS({\n    type: \"config/entity_registry/get\",\n    entity_id: entityId\n  });\n};\nvar updateEntityRegistryEntry = function updateEntityRegistryEntry(hass, entityId, updates) {\n  return hass.callWS(Object.assign({\n    type: \"config/entity_registry/update\",\n    entity_id: entityId\n  }, updates));\n};\nvar removeEntityRegistryEntry = function removeEntityRegistryEntry(hass, entityId) {\n  return hass.callWS({\n    type: \"config/entity_registry/remove\",\n    entity_id: entityId\n  });\n};\nvar fetchEntityRegistry = function fetchEntityRegistry(conn) {\n  return conn.sendMessagePromise({\n    type: \"config/entity_registry/list\"\n  });\n};\n\nvar subscribeEntityRegistryUpdates = function subscribeEntityRegistryUpdates(conn, store) {\n  return conn.subscribeEvents((0,_common_util_debounce__WEBPACK_IMPORTED_MODULE_2__.debounce)(function () {\n    return fetchEntityRegistry(conn).then(function (entities) {\n      return store.setState(entities, true);\n    });\n  }, 500, true), \"entity_registry_updated\");\n};\n\nvar subscribeEntityRegistry = function subscribeEntityRegistry(conn, onChange) {\n  return (0,home_assistant_js_websocket__WEBPACK_IMPORTED_MODULE_3__.createCollection)(\"_entityRegistry\", fetchEntityRegistry, subscribeEntityRegistryUpdates, conn, onChange);\n};\nvar sortEntityRegistryByName = function sortEntityRegistryByName(entries) {\n  return entries.sort(function (entry1, entry2) {\n    return (0,_common_string_compare__WEBPACK_IMPORTED_MODULE_1__.caseInsensitiveStringCompare)(entry1.name || \"\", entry2.name || \"\");\n  });\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZGF0YS9lbnRpdHlfcmVnaXN0cnkudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBRUE7QUFDQTtBQUNBO0FBdURBO0FBQUE7QUFLQTtBQUFBO0FBTEE7QUFVQTtBQUFBO0FBS0E7QUFBQTtBQUxBO0FBV0E7QUFJQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUtBO0FBQ0E7QUFGQTtBQUpBO0FBU0E7QUFBQTtBQU1BO0FBQ0E7QUFGQTtBQUxBO0FBV0E7QUFBQTtBQUtBO0FBQ0E7QUFGQTtBQUpBO0FBU0E7QUFBQTtBQUVBO0FBREE7QUFEQTs7QUFLQTtBQUFBO0FBTUE7QUFDQTtBQUFBO0FBREE7QUFOQTs7QUFnQkE7QUFBQTtBQUFBO0FBWUE7QUFBQTtBQUNBO0FBQUE7QUFEQSIsInNvdXJjZXMiOlsid2VicGFjazovL2hvbWUtYXNzaXN0YW50LWZyb250ZW5kLy4vc3JjL2RhdGEvZW50aXR5X3JlZ2lzdHJ5LnRzPzNhNzkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29ubmVjdGlvbiwgY3JlYXRlQ29sbGVjdGlvbiB9IGZyb20gXCJob21lLWFzc2lzdGFudC1qcy13ZWJzb2NrZXRcIjtcbmltcG9ydCB7IFN0b3JlIH0gZnJvbSBcImhvbWUtYXNzaXN0YW50LWpzLXdlYnNvY2tldC9kaXN0L3N0b3JlXCI7XG5pbXBvcnQgeyBjb21wdXRlU3RhdGVOYW1lIH0gZnJvbSBcIi4uL2NvbW1vbi9lbnRpdHkvY29tcHV0ZV9zdGF0ZV9uYW1lXCI7XG5pbXBvcnQgeyBjYXNlSW5zZW5zaXRpdmVTdHJpbmdDb21wYXJlIH0gZnJvbSBcIi4uL2NvbW1vbi9zdHJpbmcvY29tcGFyZVwiO1xuaW1wb3J0IHsgZGVib3VuY2UgfSBmcm9tIFwiLi4vY29tbW9uL3V0aWwvZGVib3VuY2VcIjtcbmltcG9ydCB7IEhvbWVBc3Npc3RhbnQgfSBmcm9tIFwiLi4vdHlwZXNcIjtcblxuZXhwb3J0IGludGVyZmFjZSBFbnRpdHlSZWdpc3RyeUVudHJ5IHtcbiAgZW50aXR5X2lkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZyB8IG51bGw7XG4gIGljb246IHN0cmluZyB8IG51bGw7XG4gIHBsYXRmb3JtOiBzdHJpbmc7XG4gIGNvbmZpZ19lbnRyeV9pZDogc3RyaW5nIHwgbnVsbDtcbiAgZGV2aWNlX2lkOiBzdHJpbmcgfCBudWxsO1xuICBhcmVhX2lkOiBzdHJpbmcgfCBudWxsO1xuICBkaXNhYmxlZF9ieTogc3RyaW5nIHwgbnVsbDtcbiAgaGlkZGVuX2J5OiBzdHJpbmcgfCBudWxsO1xuICBlbnRpdHlfY2F0ZWdvcnk6IFwiY29uZmlnXCIgfCBcImRpYWdub3N0aWNcIiB8IG51bGw7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRXh0RW50aXR5UmVnaXN0cnlFbnRyeSBleHRlbmRzIEVudGl0eVJlZ2lzdHJ5RW50cnkge1xuICB1bmlxdWVfaWQ6IHN0cmluZztcbiAgY2FwYWJpbGl0aWVzOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPjtcbiAgb3JpZ2luYWxfbmFtZT86IHN0cmluZztcbiAgb3JpZ2luYWxfaWNvbj86IHN0cmluZztcbiAgZGV2aWNlX2NsYXNzPzogc3RyaW5nO1xuICBvcmlnaW5hbF9kZXZpY2VfY2xhc3M/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVXBkYXRlRW50aXR5UmVnaXN0cnlFbnRyeVJlc3VsdCB7XG4gIGVudGl0eV9lbnRyeTogRXh0RW50aXR5UmVnaXN0cnlFbnRyeTtcbiAgcmVsb2FkX2RlbGF5PzogbnVtYmVyO1xuICByZXF1aXJlX3Jlc3RhcnQ/OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNlbnNvckVudGl0eU9wdGlvbnMge1xuICB1bml0X29mX21lYXN1cmVtZW50Pzogc3RyaW5nIHwgbnVsbDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBXZWF0aGVyRW50aXR5T3B0aW9ucyB7XG4gIHByZWNpcGl0YXRpb25fdW5pdD86IHN0cmluZyB8IG51bGw7XG4gIHByZXNzdXJlX3VuaXQ/OiBzdHJpbmcgfCBudWxsO1xuICB0ZW1wZXJhdHVyZV91bml0Pzogc3RyaW5nIHwgbnVsbDtcbiAgdmlzaWJpbGl0eV91bml0Pzogc3RyaW5nIHwgbnVsbDtcbiAgd2luZF9zcGVlZF91bml0Pzogc3RyaW5nIHwgbnVsbDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFbnRpdHlSZWdpc3RyeUVudHJ5VXBkYXRlUGFyYW1zIHtcbiAgbmFtZT86IHN0cmluZyB8IG51bGw7XG4gIGljb24/OiBzdHJpbmcgfCBudWxsO1xuICBkZXZpY2VfY2xhc3M/OiBzdHJpbmcgfCBudWxsO1xuICBhcmVhX2lkPzogc3RyaW5nIHwgbnVsbDtcbiAgZGlzYWJsZWRfYnk/OiBzdHJpbmcgfCBudWxsO1xuICBoaWRkZW5fYnk6IHN0cmluZyB8IG51bGw7XG4gIG5ld19lbnRpdHlfaWQ/OiBzdHJpbmc7XG4gIG9wdGlvbnNfZG9tYWluPzogc3RyaW5nO1xuICBvcHRpb25zPzogU2Vuc29yRW50aXR5T3B0aW9ucyB8IFdlYXRoZXJFbnRpdHlPcHRpb25zO1xufVxuXG5leHBvcnQgY29uc3QgZmluZEJhdHRlcnlFbnRpdHkgPSAoXG4gIGhhc3M6IEhvbWVBc3Npc3RhbnQsXG4gIGVudGl0aWVzOiBFbnRpdHlSZWdpc3RyeUVudHJ5W11cbik6IEVudGl0eVJlZ2lzdHJ5RW50cnkgfCB1bmRlZmluZWQgPT5cbiAgZW50aXRpZXMuZmluZChcbiAgICAoZW50aXR5KSA9PlxuICAgICAgaGFzcy5zdGF0ZXNbZW50aXR5LmVudGl0eV9pZF0gJiZcbiAgICAgIGhhc3Muc3RhdGVzW2VudGl0eS5lbnRpdHlfaWRdLmF0dHJpYnV0ZXMuZGV2aWNlX2NsYXNzID09PSBcImJhdHRlcnlcIlxuICApO1xuXG5leHBvcnQgY29uc3QgZmluZEJhdHRlcnlDaGFyZ2luZ0VudGl0eSA9IChcbiAgaGFzczogSG9tZUFzc2lzdGFudCxcbiAgZW50aXRpZXM6IEVudGl0eVJlZ2lzdHJ5RW50cnlbXVxuKTogRW50aXR5UmVnaXN0cnlFbnRyeSB8IHVuZGVmaW5lZCA9PlxuICBlbnRpdGllcy5maW5kKFxuICAgIChlbnRpdHkpID0+XG4gICAgICBoYXNzLnN0YXRlc1tlbnRpdHkuZW50aXR5X2lkXSAmJlxuICAgICAgaGFzcy5zdGF0ZXNbZW50aXR5LmVudGl0eV9pZF0uYXR0cmlidXRlcy5kZXZpY2VfY2xhc3MgPT09XG4gICAgICAgIFwiYmF0dGVyeV9jaGFyZ2luZ1wiXG4gICk7XG5cbmV4cG9ydCBjb25zdCBjb21wdXRlRW50aXR5UmVnaXN0cnlOYW1lID0gKFxuICBoYXNzOiBIb21lQXNzaXN0YW50LFxuICBlbnRyeTogRW50aXR5UmVnaXN0cnlFbnRyeVxuKTogc3RyaW5nIHwgbnVsbCA9PiB7XG4gIGlmIChlbnRyeS5uYW1lKSB7XG4gICAgcmV0dXJuIGVudHJ5Lm5hbWU7XG4gIH1cbiAgY29uc3Qgc3RhdGUgPSBoYXNzLnN0YXRlc1tlbnRyeS5lbnRpdHlfaWRdO1xuICByZXR1cm4gc3RhdGUgPyBjb21wdXRlU3RhdGVOYW1lKHN0YXRlKSA6IGVudHJ5LmVudGl0eV9pZDtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRFeHRlbmRlZEVudGl0eVJlZ2lzdHJ5RW50cnkgPSAoXG4gIGhhc3M6IEhvbWVBc3Npc3RhbnQsXG4gIGVudGl0eUlkOiBzdHJpbmdcbik6IFByb21pc2U8RXh0RW50aXR5UmVnaXN0cnlFbnRyeT4gPT5cbiAgaGFzcy5jYWxsV1Moe1xuICAgIHR5cGU6IFwiY29uZmlnL2VudGl0eV9yZWdpc3RyeS9nZXRcIixcbiAgICBlbnRpdHlfaWQ6IGVudGl0eUlkLFxuICB9KTtcblxuZXhwb3J0IGNvbnN0IHVwZGF0ZUVudGl0eVJlZ2lzdHJ5RW50cnkgPSAoXG4gIGhhc3M6IEhvbWVBc3Npc3RhbnQsXG4gIGVudGl0eUlkOiBzdHJpbmcsXG4gIHVwZGF0ZXM6IFBhcnRpYWw8RW50aXR5UmVnaXN0cnlFbnRyeVVwZGF0ZVBhcmFtcz5cbik6IFByb21pc2U8VXBkYXRlRW50aXR5UmVnaXN0cnlFbnRyeVJlc3VsdD4gPT5cbiAgaGFzcy5jYWxsV1Moe1xuICAgIHR5cGU6IFwiY29uZmlnL2VudGl0eV9yZWdpc3RyeS91cGRhdGVcIixcbiAgICBlbnRpdHlfaWQ6IGVudGl0eUlkLFxuICAgIC4uLnVwZGF0ZXMsXG4gIH0pO1xuXG5leHBvcnQgY29uc3QgcmVtb3ZlRW50aXR5UmVnaXN0cnlFbnRyeSA9IChcbiAgaGFzczogSG9tZUFzc2lzdGFudCxcbiAgZW50aXR5SWQ6IHN0cmluZ1xuKTogUHJvbWlzZTx2b2lkPiA9PlxuICBoYXNzLmNhbGxXUyh7XG4gICAgdHlwZTogXCJjb25maWcvZW50aXR5X3JlZ2lzdHJ5L3JlbW92ZVwiLFxuICAgIGVudGl0eV9pZDogZW50aXR5SWQsXG4gIH0pO1xuXG5leHBvcnQgY29uc3QgZmV0Y2hFbnRpdHlSZWdpc3RyeSA9IChjb25uOiBDb25uZWN0aW9uKSA9PlxuICBjb25uLnNlbmRNZXNzYWdlUHJvbWlzZTxFbnRpdHlSZWdpc3RyeUVudHJ5W10+KHtcbiAgICB0eXBlOiBcImNvbmZpZy9lbnRpdHlfcmVnaXN0cnkvbGlzdFwiLFxuICB9KTtcblxuY29uc3Qgc3Vic2NyaWJlRW50aXR5UmVnaXN0cnlVcGRhdGVzID0gKFxuICBjb25uOiBDb25uZWN0aW9uLFxuICBzdG9yZTogU3RvcmU8RW50aXR5UmVnaXN0cnlFbnRyeVtdPlxuKSA9PlxuICBjb25uLnN1YnNjcmliZUV2ZW50cyhcbiAgICBkZWJvdW5jZShcbiAgICAgICgpID0+XG4gICAgICAgIGZldGNoRW50aXR5UmVnaXN0cnkoY29ubikudGhlbigoZW50aXRpZXMpID0+XG4gICAgICAgICAgc3RvcmUuc2V0U3RhdGUoZW50aXRpZXMsIHRydWUpXG4gICAgICAgICksXG4gICAgICA1MDAsXG4gICAgICB0cnVlXG4gICAgKSxcbiAgICBcImVudGl0eV9yZWdpc3RyeV91cGRhdGVkXCJcbiAgKTtcblxuZXhwb3J0IGNvbnN0IHN1YnNjcmliZUVudGl0eVJlZ2lzdHJ5ID0gKFxuICBjb25uOiBDb25uZWN0aW9uLFxuICBvbkNoYW5nZTogKGVudGl0aWVzOiBFbnRpdHlSZWdpc3RyeUVudHJ5W10pID0+IHZvaWRcbikgPT5cbiAgY3JlYXRlQ29sbGVjdGlvbjxFbnRpdHlSZWdpc3RyeUVudHJ5W10+KFxuICAgIFwiX2VudGl0eVJlZ2lzdHJ5XCIsXG4gICAgZmV0Y2hFbnRpdHlSZWdpc3RyeSxcbiAgICBzdWJzY3JpYmVFbnRpdHlSZWdpc3RyeVVwZGF0ZXMsXG4gICAgY29ubixcbiAgICBvbkNoYW5nZVxuICApO1xuXG5leHBvcnQgY29uc3Qgc29ydEVudGl0eVJlZ2lzdHJ5QnlOYW1lID0gKGVudHJpZXM6IEVudGl0eVJlZ2lzdHJ5RW50cnlbXSkgPT5cbiAgZW50cmllcy5zb3J0KChlbnRyeTEsIGVudHJ5MikgPT5cbiAgICBjYXNlSW5zZW5zaXRpdmVTdHJpbmdDb21wYXJlKGVudHJ5MS5uYW1lIHx8IFwiXCIsIGVudHJ5Mi5uYW1lIHx8IFwiXCIpXG4gICk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/data/entity_registry.ts\n");

/***/ })

}]);