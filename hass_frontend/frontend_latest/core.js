/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/common/auth/token_storage.ts":
/*!******************************************!*\
  !*** ./src/common/auth/token_storage.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   askWrite: () => (/* binding */ askWrite),\n/* harmony export */   enableWrite: () => (/* binding */ enableWrite),\n/* harmony export */   loadTokens: () => (/* binding */ loadTokens),\n/* harmony export */   saveTokens: () => (/* binding */ saveTokens)\n/* harmony export */ });\n/* harmony import */ var _url_search_params__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../url/search-params */ \"./src/common/url/search-params.ts\");\n\nconst storage = window.localStorage || {};\n// So that core.js and main app hit same shared object.\nlet tokenCache = window.__tokenCache;\nif (!tokenCache) {\n  tokenCache = window.__tokenCache = {\n    tokens: undefined,\n    writeEnabled: undefined\n  };\n}\nfunction askWrite() {\n  return tokenCache.tokens !== undefined && tokenCache.writeEnabled === undefined;\n}\nfunction saveTokens(tokens) {\n  tokenCache.tokens = tokens;\n  if (!tokenCache.writeEnabled && (0,_url_search_params__WEBPACK_IMPORTED_MODULE_0__.extractSearchParam)(\"storeToken\") === \"true\") {\n    tokenCache.writeEnabled = true;\n  }\n  if (tokenCache.writeEnabled) {\n    try {\n      storage.hassTokens = JSON.stringify(tokens);\n    } catch (err) {\n      // write failed, ignore it. Happens if storage is full or private mode.\n    }\n  }\n}\nfunction enableWrite() {\n  tokenCache.writeEnabled = true;\n  if (tokenCache.tokens) {\n    saveTokens(tokenCache.tokens);\n  }\n}\nfunction loadTokens() {\n  if (tokenCache.tokens === undefined) {\n    try {\n      // Delete the old token cache.\n      delete storage.tokens;\n      const tokens = storage.hassTokens;\n      if (tokens) {\n        tokenCache.tokens = JSON.parse(tokens);\n        tokenCache.writeEnabled = true;\n      } else {\n        tokenCache.tokens = null;\n      }\n    } catch (err) {\n      tokenCache.tokens = null;\n    }\n  }\n  return tokenCache.tokens;\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tbW9uL2F1dGgvdG9rZW5fc3RvcmFnZS50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUNBO0FBRUE7QUFhQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ob21lLWFzc2lzdGFudC1mcm9udGVuZC8uL3NyYy9jb21tb24vYXV0aC90b2tlbl9zdG9yYWdlLnRzPzY4ZGYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXV0aERhdGEgfSBmcm9tIFwiaG9tZS1hc3Npc3RhbnQtanMtd2Vic29ja2V0XCI7XG5pbXBvcnQgeyBleHRyYWN0U2VhcmNoUGFyYW0gfSBmcm9tIFwiLi4vdXJsL3NlYXJjaC1wYXJhbXNcIjtcblxuY29uc3Qgc3RvcmFnZSA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UgfHwge307XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIFdpbmRvdyB7XG4gICAgX190b2tlbkNhY2hlOiB7XG4gICAgICAvLyB1bmRlZmluZWQ6IHdlIGhhdmVuJ3QgbG9hZGVkIHlldFxuICAgICAgLy8gbnVsbDogbm9uZSBzdG9yZWRcbiAgICAgIHRva2Vucz86IEF1dGhEYXRhIHwgbnVsbDtcbiAgICAgIHdyaXRlRW5hYmxlZD86IGJvb2xlYW47XG4gICAgfTtcbiAgfVxufVxuXG4vLyBTbyB0aGF0IGNvcmUuanMgYW5kIG1haW4gYXBwIGhpdCBzYW1lIHNoYXJlZCBvYmplY3QuXG5sZXQgdG9rZW5DYWNoZSA9IHdpbmRvdy5fX3Rva2VuQ2FjaGU7XG5pZiAoIXRva2VuQ2FjaGUpIHtcbiAgdG9rZW5DYWNoZSA9IHdpbmRvdy5fX3Rva2VuQ2FjaGUgPSB7XG4gICAgdG9rZW5zOiB1bmRlZmluZWQsXG4gICAgd3JpdGVFbmFibGVkOiB1bmRlZmluZWQsXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhc2tXcml0ZSgpIHtcbiAgcmV0dXJuIChcbiAgICB0b2tlbkNhY2hlLnRva2VucyAhPT0gdW5kZWZpbmVkICYmIHRva2VuQ2FjaGUud3JpdGVFbmFibGVkID09PSB1bmRlZmluZWRcbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNhdmVUb2tlbnModG9rZW5zOiBBdXRoRGF0YSB8IG51bGwpIHtcbiAgdG9rZW5DYWNoZS50b2tlbnMgPSB0b2tlbnM7XG5cbiAgaWYgKCF0b2tlbkNhY2hlLndyaXRlRW5hYmxlZCAmJiBleHRyYWN0U2VhcmNoUGFyYW0oXCJzdG9yZVRva2VuXCIpID09PSBcInRydWVcIikge1xuICAgIHRva2VuQ2FjaGUud3JpdGVFbmFibGVkID0gdHJ1ZTtcbiAgfVxuXG4gIGlmICh0b2tlbkNhY2hlLndyaXRlRW5hYmxlZCkge1xuICAgIHRyeSB7XG4gICAgICBzdG9yYWdlLmhhc3NUb2tlbnMgPSBKU09OLnN0cmluZ2lmeSh0b2tlbnMpO1xuICAgIH0gY2F0Y2ggKGVycjogYW55KSB7XG4gICAgICAvLyB3cml0ZSBmYWlsZWQsIGlnbm9yZSBpdC4gSGFwcGVucyBpZiBzdG9yYWdlIGlzIGZ1bGwgb3IgcHJpdmF0ZSBtb2RlLlxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZW5hYmxlV3JpdGUoKSB7XG4gIHRva2VuQ2FjaGUud3JpdGVFbmFibGVkID0gdHJ1ZTtcbiAgaWYgKHRva2VuQ2FjaGUudG9rZW5zKSB7XG4gICAgc2F2ZVRva2Vucyh0b2tlbkNhY2hlLnRva2Vucyk7XG4gIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBsb2FkVG9rZW5zKCkge1xuICBpZiAodG9rZW5DYWNoZS50b2tlbnMgPT09IHVuZGVmaW5lZCkge1xuICAgIHRyeSB7XG4gICAgICAvLyBEZWxldGUgdGhlIG9sZCB0b2tlbiBjYWNoZS5cbiAgICAgIGRlbGV0ZSBzdG9yYWdlLnRva2VucztcbiAgICAgIGNvbnN0IHRva2VucyA9IHN0b3JhZ2UuaGFzc1Rva2VucztcbiAgICAgIGlmICh0b2tlbnMpIHtcbiAgICAgICAgdG9rZW5DYWNoZS50b2tlbnMgPSBKU09OLnBhcnNlKHRva2Vucyk7XG4gICAgICAgIHRva2VuQ2FjaGUud3JpdGVFbmFibGVkID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRva2VuQ2FjaGUudG9rZW5zID0gbnVsbDtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnI6IGFueSkge1xuICAgICAgdG9rZW5DYWNoZS50b2tlbnMgPSBudWxsO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdG9rZW5DYWNoZS50b2tlbnM7XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/common/auth/token_storage.ts\n");

/***/ }),

/***/ "./src/common/url/search-params.ts":
/*!*****************************************!*\
  !*** ./src/common/url/search-params.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addSearchParam: () => (/* binding */ addSearchParam),\n/* harmony export */   createSearchParam: () => (/* binding */ createSearchParam),\n/* harmony export */   extractSearchParam: () => (/* binding */ extractSearchParam),\n/* harmony export */   extractSearchParamsObject: () => (/* binding */ extractSearchParamsObject),\n/* harmony export */   removeSearchParam: () => (/* binding */ removeSearchParam)\n/* harmony export */ });\nconst extractSearchParamsObject = () => {\n  const query = {};\n  const searchParams = new URLSearchParams(location.search);\n  for (const [key, value] of searchParams.entries()) {\n    query[key] = value;\n  }\n  return query;\n};\nconst extractSearchParam = param => {\n  const urlParams = new URLSearchParams(window.location.search);\n  return urlParams.get(param);\n};\nconst createSearchParam = params => {\n  const urlParams = new URLSearchParams();\n  Object.entries(params).forEach(([key, value]) => {\n    urlParams.append(key, value);\n  });\n  return urlParams.toString();\n};\nconst addSearchParam = params => {\n  const urlParams = new URLSearchParams(window.location.search);\n  Object.entries(params).forEach(([key, value]) => {\n    urlParams.set(key, value);\n  });\n  return urlParams.toString();\n};\nconst removeSearchParam = param => {\n  const urlParams = new URLSearchParams(window.location.search);\n  urlParams.delete(param);\n  return urlParams.toString();\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tbW9uL3VybC9zZWFyY2gtcGFyYW1zLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ob21lLWFzc2lzdGFudC1mcm9udGVuZC8uL3NyYy9jb21tb24vdXJsL3NlYXJjaC1wYXJhbXMudHM/N2MzZCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgZXh0cmFjdFNlYXJjaFBhcmFtc09iamVjdCA9ICgpOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0+IHtcbiAgY29uc3QgcXVlcnkgPSB7fTtcbiAgY29uc3Qgc2VhcmNoUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhsb2NhdGlvbi5zZWFyY2gpO1xuICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBzZWFyY2hQYXJhbXMuZW50cmllcygpKSB7XG4gICAgcXVlcnlba2V5XSA9IHZhbHVlO1xuICB9XG4gIHJldHVybiBxdWVyeTtcbn07XG5cbmV4cG9ydCBjb25zdCBleHRyYWN0U2VhcmNoUGFyYW0gPSAocGFyYW06IHN0cmluZyk6IHN0cmluZyB8IG51bGwgPT4ge1xuICBjb25zdCB1cmxQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpO1xuICByZXR1cm4gdXJsUGFyYW1zLmdldChwYXJhbSk7XG59O1xuXG5leHBvcnQgY29uc3QgY3JlYXRlU2VhcmNoUGFyYW0gPSAocGFyYW1zOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+KTogc3RyaW5nID0+IHtcbiAgY29uc3QgdXJsUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpO1xuICBPYmplY3QuZW50cmllcyhwYXJhbXMpLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4ge1xuICAgIHVybFBhcmFtcy5hcHBlbmQoa2V5LCB2YWx1ZSk7XG4gIH0pO1xuICByZXR1cm4gdXJsUGFyYW1zLnRvU3RyaW5nKCk7XG59O1xuXG5leHBvcnQgY29uc3QgYWRkU2VhcmNoUGFyYW0gPSAocGFyYW1zOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+KTogc3RyaW5nID0+IHtcbiAgY29uc3QgdXJsUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKTtcbiAgT2JqZWN0LmVudHJpZXMocGFyYW1zKS5mb3JFYWNoKChba2V5LCB2YWx1ZV0pID0+IHtcbiAgICB1cmxQYXJhbXMuc2V0KGtleSwgdmFsdWUpO1xuICB9KTtcbiAgcmV0dXJuIHVybFBhcmFtcy50b1N0cmluZygpO1xufTtcblxuZXhwb3J0IGNvbnN0IHJlbW92ZVNlYXJjaFBhcmFtID0gKHBhcmFtOiBzdHJpbmcpOiBzdHJpbmcgPT4ge1xuICBjb25zdCB1cmxQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpO1xuICB1cmxQYXJhbXMuZGVsZXRlKHBhcmFtKTtcbiAgcmV0dXJuIHVybFBhcmFtcy50b1N0cmluZygpO1xufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/common/url/search-params.ts\n");

/***/ }),

/***/ "./src/data/auth.ts":
/*!**************************!*\
  !*** ./src/data/auth.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   adminChangePassword: () => (/* binding */ adminChangePassword),\n/* harmony export */   autocompleteLoginFields: () => (/* binding */ autocompleteLoginFields),\n/* harmony export */   createAuthForUser: () => (/* binding */ createAuthForUser),\n/* harmony export */   fetchAuthProviders: () => (/* binding */ fetchAuthProviders),\n/* harmony export */   getSignedPath: () => (/* binding */ getSignedPath),\n/* harmony export */   hassUrl: () => (/* binding */ hassUrl)\n/* harmony export */ });\nconst hassUrl = `${location.protocol}//${location.host}`;\nconst autocompleteLoginFields = schema => schema.map(field => {\n  if (field.type !== \"string\") return field;\n  switch (field.name) {\n    case \"username\":\n      return {\n        ...field,\n        autocomplete: \"username\"\n      };\n    case \"password\":\n      return {\n        ...field,\n        autocomplete: \"current-password\"\n      };\n    case \"code\":\n      return {\n        ...field,\n        autocomplete: \"one-time-code\"\n      };\n    default:\n      return field;\n  }\n});\nconst getSignedPath = (hass, path) => hass.callWS({\n  type: \"auth/sign_path\",\n  path\n});\nconst fetchAuthProviders = () => fetch(\"/auth/providers\", {\n  credentials: \"same-origin\"\n});\nconst createAuthForUser = async (hass, userId, username, password) => hass.callWS({\n  type: \"config/auth_provider/homeassistant/create\",\n  user_id: userId,\n  username,\n  password\n});\nconst adminChangePassword = async (hass, userId, password) => hass.callWS({\n  type: \"config/auth_provider/homeassistant/admin_change_password\",\n  user_id: userId,\n  password\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZGF0YS9hdXRoLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQXVCQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUFBO0FBQUE7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQU1BO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaG9tZS1hc3Npc3RhbnQtZnJvbnRlbmQvLi9zcmMvZGF0YS9hdXRoLnRzPzhmNGUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSGFGb3JtU2NoZW1hIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvaGEtZm9ybS90eXBlc1wiO1xuaW1wb3J0IHsgSG9tZUFzc2lzdGFudCB9IGZyb20gXCIuLi90eXBlc1wiO1xuXG5leHBvcnQgaW50ZXJmYWNlIEF1dGhVcmxTZWFyY2hQYXJhbXMge1xuICBjbGllbnRfaWQ/OiBzdHJpbmc7XG4gIHJlZGlyZWN0X3VyaT86IHN0cmluZztcbiAgc3RhdGU/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQXV0aFByb3ZpZGVyIHtcbiAgbmFtZTogc3RyaW5nO1xuICBpZDogc3RyaW5nO1xuICB0eXBlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ3JlZGVudGlhbCB7XG4gIHR5cGU6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTaWduZWRQYXRoIHtcbiAgcGF0aDogc3RyaW5nO1xufVxuXG5leHBvcnQgY29uc3QgaGFzc1VybCA9IGAke2xvY2F0aW9uLnByb3RvY29sfS8vJHtsb2NhdGlvbi5ob3N0fWA7XG5cbmV4cG9ydCBjb25zdCBhdXRvY29tcGxldGVMb2dpbkZpZWxkcyA9IChzY2hlbWE6IEhhRm9ybVNjaGVtYVtdKSA9PlxuICBzY2hlbWEubWFwKChmaWVsZCkgPT4ge1xuICAgIGlmIChmaWVsZC50eXBlICE9PSBcInN0cmluZ1wiKSByZXR1cm4gZmllbGQ7XG4gICAgc3dpdGNoIChmaWVsZC5uYW1lKSB7XG4gICAgICBjYXNlIFwidXNlcm5hbWVcIjpcbiAgICAgICAgcmV0dXJuIHsgLi4uZmllbGQsIGF1dG9jb21wbGV0ZTogXCJ1c2VybmFtZVwiIH07XG4gICAgICBjYXNlIFwicGFzc3dvcmRcIjpcbiAgICAgICAgcmV0dXJuIHsgLi4uZmllbGQsIGF1dG9jb21wbGV0ZTogXCJjdXJyZW50LXBhc3N3b3JkXCIgfTtcbiAgICAgIGNhc2UgXCJjb2RlXCI6XG4gICAgICAgIHJldHVybiB7IC4uLmZpZWxkLCBhdXRvY29tcGxldGU6IFwib25lLXRpbWUtY29kZVwiIH07XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gZmllbGQ7XG4gICAgfVxuICB9KTtcblxuZXhwb3J0IGNvbnN0IGdldFNpZ25lZFBhdGggPSAoXG4gIGhhc3M6IEhvbWVBc3Npc3RhbnQsXG4gIHBhdGg6IHN0cmluZ1xuKTogUHJvbWlzZTxTaWduZWRQYXRoPiA9PiBoYXNzLmNhbGxXUyh7IHR5cGU6IFwiYXV0aC9zaWduX3BhdGhcIiwgcGF0aCB9KTtcblxuZXhwb3J0IGNvbnN0IGZldGNoQXV0aFByb3ZpZGVycyA9ICgpID0+XG4gIGZldGNoKFwiL2F1dGgvcHJvdmlkZXJzXCIsIHtcbiAgICBjcmVkZW50aWFsczogXCJzYW1lLW9yaWdpblwiLFxuICB9KTtcblxuZXhwb3J0IGNvbnN0IGNyZWF0ZUF1dGhGb3JVc2VyID0gYXN5bmMgKFxuICBoYXNzOiBIb21lQXNzaXN0YW50LFxuICB1c2VySWQ6IHN0cmluZyxcbiAgdXNlcm5hbWU6IHN0cmluZyxcbiAgcGFzc3dvcmQ6IHN0cmluZ1xuKSA9PlxuICBoYXNzLmNhbGxXUyh7XG4gICAgdHlwZTogXCJjb25maWcvYXV0aF9wcm92aWRlci9ob21lYXNzaXN0YW50L2NyZWF0ZVwiLFxuICAgIHVzZXJfaWQ6IHVzZXJJZCxcbiAgICB1c2VybmFtZSxcbiAgICBwYXNzd29yZCxcbiAgfSk7XG5cbmV4cG9ydCBjb25zdCBhZG1pbkNoYW5nZVBhc3N3b3JkID0gYXN5bmMgKFxuICBoYXNzOiBIb21lQXNzaXN0YW50LFxuICB1c2VySWQ6IHN0cmluZyxcbiAgcGFzc3dvcmQ6IHN0cmluZ1xuKSA9PlxuICBoYXNzLmNhbGxXUzx2b2lkPih7XG4gICAgdHlwZTogXCJjb25maWcvYXV0aF9wcm92aWRlci9ob21lYXNzaXN0YW50L2FkbWluX2NoYW5nZV9wYXNzd29yZFwiLFxuICAgIHVzZXJfaWQ6IHVzZXJJZCxcbiAgICBwYXNzd29yZCxcbiAgfSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/data/auth.ts\n");

/***/ }),

/***/ "./src/data/collection.ts":
/*!********************************!*\
  !*** ./src/data/collection.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getOptimisticCollection: () => (/* binding */ getOptimisticCollection)\n/* harmony export */ });\n/* harmony import */ var home_assistant_js_websocket__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! home-assistant-js-websocket */ \"./node_modules/home-assistant-js-websocket/dist/collection.js\");\n\n/**\n * Create an optimistic collection that includes a save function.\n * When the collection is saved, the collection is optimistically updated.\n * The update is reversed when the update failed.\n */\n\nconst getOptimisticCollection = (saveCollection, conn, key, fetchCollection, subscribeUpdates) => {\n  const updateKey = `${key}-optimistic`;\n  const collection = (0,home_assistant_js_websocket__WEBPACK_IMPORTED_MODULE_0__.getCollection)(conn, key, fetchCollection, async (_conn, store) => {\n    // Subscribe to original updates\n    const subUpResult = subscribeUpdates ? subscribeUpdates(conn, store) : undefined;\n    // Store the store\n    conn[updateKey] = store;\n\n    // Unsub function to undo both\n    return () => {\n      if (subUpResult) {\n        subUpResult.then(unsub => unsub());\n      }\n      conn[updateKey] = undefined;\n    };\n  });\n  return {\n    ...collection,\n    async save(data) {\n      const store = conn[updateKey];\n      let current;\n\n      // Can be undefined if currently no subscribers\n      if (store) {\n        current = store.state;\n        store.setState(data, true);\n      }\n      try {\n        return await saveCollection(conn, data);\n      } catch (err) {\n        if (store) {\n          store.setState(current, true);\n        }\n        throw err;\n      }\n    }\n  };\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZGF0YS9jb2xsZWN0aW9uLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFZQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBVUE7QUFFQTtBQUtBO0FBQ0E7QUFHQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaG9tZS1hc3Npc3RhbnQtZnJvbnRlbmQvLi9zcmMvZGF0YS9jb2xsZWN0aW9uLnRzPzExM2QiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQ29sbGVjdGlvbixcbiAgQ29ubmVjdGlvbixcbiAgZ2V0Q29sbGVjdGlvbixcbiAgVW5zdWJzY3JpYmVGdW5jLFxufSBmcm9tIFwiaG9tZS1hc3Npc3RhbnQtanMtd2Vic29ja2V0XCI7XG5pbXBvcnQgeyBTdG9yZSB9IGZyb20gXCJob21lLWFzc2lzdGFudC1qcy13ZWJzb2NrZXQvZGlzdC9zdG9yZVwiO1xuXG5pbnRlcmZhY2UgT3B0aW1pc3RpY0NvbGxlY3Rpb248VD4gZXh0ZW5kcyBDb2xsZWN0aW9uPFQ+IHtcbiAgc2F2ZShkYXRhOiBUKTogUHJvbWlzZTx1bmtub3duPjtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYW4gb3B0aW1pc3RpYyBjb2xsZWN0aW9uIHRoYXQgaW5jbHVkZXMgYSBzYXZlIGZ1bmN0aW9uLlxuICogV2hlbiB0aGUgY29sbGVjdGlvbiBpcyBzYXZlZCwgdGhlIGNvbGxlY3Rpb24gaXMgb3B0aW1pc3RpY2FsbHkgdXBkYXRlZC5cbiAqIFRoZSB1cGRhdGUgaXMgcmV2ZXJzZWQgd2hlbiB0aGUgdXBkYXRlIGZhaWxlZC5cbiAqL1xuXG5leHBvcnQgY29uc3QgZ2V0T3B0aW1pc3RpY0NvbGxlY3Rpb24gPSA8U3RhdGVUeXBlPihcbiAgc2F2ZUNvbGxlY3Rpb246IChjb25uMjogQ29ubmVjdGlvbiwgZGF0YTogU3RhdGVUeXBlKSA9PiBQcm9taXNlPHVua25vd24+LFxuICBjb25uOiBDb25uZWN0aW9uLFxuICBrZXk6IHN0cmluZyxcbiAgZmV0Y2hDb2xsZWN0aW9uOiAoY29ubjI6IENvbm5lY3Rpb24pID0+IFByb21pc2U8U3RhdGVUeXBlPixcbiAgc3Vic2NyaWJlVXBkYXRlcz86IChcbiAgICBjb25uMjogQ29ubmVjdGlvbixcbiAgICBzdG9yZTogU3RvcmU8U3RhdGVUeXBlPlxuICApID0+IFByb21pc2U8VW5zdWJzY3JpYmVGdW5jPlxuKTogT3B0aW1pc3RpY0NvbGxlY3Rpb248U3RhdGVUeXBlPiA9PiB7XG4gIGNvbnN0IHVwZGF0ZUtleSA9IGAke2tleX0tb3B0aW1pc3RpY2A7XG5cbiAgY29uc3QgY29sbGVjdGlvbiA9IGdldENvbGxlY3Rpb248U3RhdGVUeXBlPihcbiAgICBjb25uLFxuICAgIGtleSxcbiAgICBmZXRjaENvbGxlY3Rpb24sXG4gICAgYXN5bmMgKF9jb25uLCBzdG9yZSkgPT4ge1xuICAgICAgLy8gU3Vic2NyaWJlIHRvIG9yaWdpbmFsIHVwZGF0ZXNcbiAgICAgIGNvbnN0IHN1YlVwUmVzdWx0ID0gc3Vic2NyaWJlVXBkYXRlc1xuICAgICAgICA/IHN1YnNjcmliZVVwZGF0ZXMoY29ubiwgc3RvcmUpXG4gICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgLy8gU3RvcmUgdGhlIHN0b3JlXG4gICAgICBjb25uW3VwZGF0ZUtleV0gPSBzdG9yZTtcblxuICAgICAgLy8gVW5zdWIgZnVuY3Rpb24gdG8gdW5kbyBib3RoXG4gICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICBpZiAoc3ViVXBSZXN1bHQpIHtcbiAgICAgICAgICBzdWJVcFJlc3VsdC50aGVuKCh1bnN1YikgPT4gdW5zdWIoKSk7XG4gICAgICAgIH1cbiAgICAgICAgY29ublt1cGRhdGVLZXldID0gdW5kZWZpbmVkO1xuICAgICAgfTtcbiAgICB9XG4gICk7XG4gIHJldHVybiB7XG4gICAgLi4uY29sbGVjdGlvbixcbiAgICBhc3luYyBzYXZlKGRhdGE6IFN0YXRlVHlwZSkge1xuICAgICAgY29uc3Qgc3RvcmU6IFN0b3JlPFN0YXRlVHlwZT4gfCB1bmRlZmluZWQgPSBjb25uW3VwZGF0ZUtleV07XG4gICAgICBsZXQgY3VycmVudDtcblxuICAgICAgLy8gQ2FuIGJlIHVuZGVmaW5lZCBpZiBjdXJyZW50bHkgbm8gc3Vic2NyaWJlcnNcbiAgICAgIGlmIChzdG9yZSkge1xuICAgICAgICBjdXJyZW50ID0gc3RvcmUuc3RhdGU7XG4gICAgICAgIHN0b3JlLnNldFN0YXRlKGRhdGEsIHRydWUpO1xuICAgICAgfVxuXG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gYXdhaXQgc2F2ZUNvbGxlY3Rpb24oY29ubiwgZGF0YSk7XG4gICAgICB9IGNhdGNoIChlcnI6IGFueSkge1xuICAgICAgICBpZiAoc3RvcmUpIHtcbiAgICAgICAgICBzdG9yZS5zZXRTdGF0ZShjdXJyZW50IGFzIGFueSwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgfVxuICAgIH0sXG4gIH07XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/data/collection.ts\n");

/***/ }),

/***/ "./src/data/external.ts":
/*!******************************!*\
  !*** ./src/data/external.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isExternal: () => (/* binding */ isExternal)\n/* harmony export */ });\nvar _window$webkit, _window$webkit$messag;\nconst isExternal = window.externalApp || ((_window$webkit = window.webkit) === null || _window$webkit === void 0 ? void 0 : (_window$webkit$messag = _window$webkit.messageHandlers) === null || _window$webkit$messag === void 0 ? void 0 : _window$webkit$messag.getExternalAuth) || location.search.includes(\"external_auth=1\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZGF0YS9leHRlcm5hbC50cy5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaG9tZS1hc3Npc3RhbnQtZnJvbnRlbmQvLi9zcmMvZGF0YS9leHRlcm5hbC50cz82ZWQwIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBpc0V4dGVybmFsID1cbiAgd2luZG93LmV4dGVybmFsQXBwIHx8XG4gIHdpbmRvdy53ZWJraXQ/Lm1lc3NhZ2VIYW5kbGVycz8uZ2V0RXh0ZXJuYWxBdXRoIHx8XG4gIGxvY2F0aW9uLnNlYXJjaC5pbmNsdWRlcyhcImV4dGVybmFsX2F1dGg9MVwiKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/data/external.ts\n");

/***/ }),

/***/ "./src/data/frontend.ts":
/*!******************************!*\
  !*** ./src/data/frontend.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   fetchFrontendUserData: () => (/* binding */ fetchFrontendUserData),\n/* harmony export */   getOptimisticFrontendUserDataCollection: () => (/* binding */ getOptimisticFrontendUserDataCollection),\n/* harmony export */   saveFrontendUserData: () => (/* binding */ saveFrontendUserData),\n/* harmony export */   subscribeFrontendUserData: () => (/* binding */ subscribeFrontendUserData)\n/* harmony export */ });\n/* harmony import */ var _collection__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./collection */ \"./src/data/collection.ts\");\n\nconst fetchFrontendUserData = async (conn, key) => {\n  const result = await conn.sendMessagePromise({\n    type: \"frontend/get_user_data\",\n    key\n  });\n  return result.value;\n};\nconst saveFrontendUserData = async (conn, key, value) => conn.sendMessagePromise({\n  type: \"frontend/set_user_data\",\n  key,\n  value\n});\nconst getOptimisticFrontendUserDataCollection = (conn, userDataKey) => (0,_collection__WEBPACK_IMPORTED_MODULE_0__.getOptimisticCollection)((_conn, data) => saveFrontendUserData(conn, userDataKey,\n// @ts-ignore\ndata), conn, `_frontendUserData-${userDataKey}`, () => fetchFrontendUserData(conn, userDataKey));\nconst subscribeFrontendUserData = (conn, userDataKey, onChange) => getOptimisticFrontendUserDataCollection(conn, userDataKey).subscribe(onChange);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZGF0YS9mcm9udGVuZC50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUNBO0FBY0E7QUFNQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFXQTtBQUNBO0FBT0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ob21lLWFzc2lzdGFudC1mcm9udGVuZC8uL3NyYy9kYXRhL2Zyb250ZW5kLnRzPzMyMmYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29ubmVjdGlvbiB9IGZyb20gXCJob21lLWFzc2lzdGFudC1qcy13ZWJzb2NrZXRcIjtcbmltcG9ydCB7IGdldE9wdGltaXN0aWNDb2xsZWN0aW9uIH0gZnJvbSBcIi4vY29sbGVjdGlvblwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIENvcmVGcm9udGVuZFVzZXJEYXRhIHtcbiAgc2hvd0FkdmFuY2VkPzogYm9vbGVhbjtcbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICBpbnRlcmZhY2UgRnJvbnRlbmRVc2VyRGF0YSB7XG4gICAgY29yZTogQ29yZUZyb250ZW5kVXNlckRhdGE7XG4gIH1cbn1cblxuZXhwb3J0IHR5cGUgVmFsaWRVc2VyRGF0YUtleSA9IGtleW9mIEZyb250ZW5kVXNlckRhdGE7XG5cbmV4cG9ydCBjb25zdCBmZXRjaEZyb250ZW5kVXNlckRhdGEgPSBhc3luYyA8XG4gIFVzZXJEYXRhS2V5IGV4dGVuZHMgVmFsaWRVc2VyRGF0YUtleVxuPihcbiAgY29ubjogQ29ubmVjdGlvbixcbiAga2V5OiBVc2VyRGF0YUtleVxuKTogUHJvbWlzZTxGcm9udGVuZFVzZXJEYXRhW1VzZXJEYXRhS2V5XSB8IG51bGw+ID0+IHtcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29ubi5zZW5kTWVzc2FnZVByb21pc2U8e1xuICAgIHZhbHVlOiBGcm9udGVuZFVzZXJEYXRhW1VzZXJEYXRhS2V5XSB8IG51bGw7XG4gIH0+KHtcbiAgICB0eXBlOiBcImZyb250ZW5kL2dldF91c2VyX2RhdGFcIixcbiAgICBrZXksXG4gIH0pO1xuICByZXR1cm4gcmVzdWx0LnZhbHVlO1xufTtcblxuZXhwb3J0IGNvbnN0IHNhdmVGcm9udGVuZFVzZXJEYXRhID0gYXN5bmMgPFxuICBVc2VyRGF0YUtleSBleHRlbmRzIFZhbGlkVXNlckRhdGFLZXlcbj4oXG4gIGNvbm46IENvbm5lY3Rpb24sXG4gIGtleTogVXNlckRhdGFLZXksXG4gIHZhbHVlOiBGcm9udGVuZFVzZXJEYXRhW1VzZXJEYXRhS2V5XVxuKTogUHJvbWlzZTx2b2lkPiA9PlxuICBjb25uLnNlbmRNZXNzYWdlUHJvbWlzZTx2b2lkPih7XG4gICAgdHlwZTogXCJmcm9udGVuZC9zZXRfdXNlcl9kYXRhXCIsXG4gICAga2V5LFxuICAgIHZhbHVlLFxuICB9KTtcblxuZXhwb3J0IGNvbnN0IGdldE9wdGltaXN0aWNGcm9udGVuZFVzZXJEYXRhQ29sbGVjdGlvbiA9IDxcbiAgVXNlckRhdGFLZXkgZXh0ZW5kcyBWYWxpZFVzZXJEYXRhS2V5XG4+KFxuICBjb25uOiBDb25uZWN0aW9uLFxuICB1c2VyRGF0YUtleTogVXNlckRhdGFLZXlcbikgPT5cbiAgZ2V0T3B0aW1pc3RpY0NvbGxlY3Rpb24oXG4gICAgKF9jb25uLCBkYXRhKSA9PlxuICAgICAgc2F2ZUZyb250ZW5kVXNlckRhdGEoXG4gICAgICAgIGNvbm4sXG4gICAgICAgIHVzZXJEYXRhS2V5LFxuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIGRhdGFcbiAgICAgICksXG4gICAgY29ubixcbiAgICBgX2Zyb250ZW5kVXNlckRhdGEtJHt1c2VyRGF0YUtleX1gLFxuICAgICgpID0+IGZldGNoRnJvbnRlbmRVc2VyRGF0YShjb25uLCB1c2VyRGF0YUtleSlcbiAgKTtcblxuZXhwb3J0IGNvbnN0IHN1YnNjcmliZUZyb250ZW5kVXNlckRhdGEgPSA8VXNlckRhdGFLZXkgZXh0ZW5kcyBWYWxpZFVzZXJEYXRhS2V5PihcbiAgY29ubjogQ29ubmVjdGlvbixcbiAgdXNlckRhdGFLZXk6IFVzZXJEYXRhS2V5LFxuICBvbkNoYW5nZTogKHN0YXRlOiBGcm9udGVuZFVzZXJEYXRhW1VzZXJEYXRhS2V5XSB8IG51bGwpID0+IHZvaWRcbikgPT5cbiAgZ2V0T3B0aW1pc3RpY0Zyb250ZW5kVXNlckRhdGFDb2xsZWN0aW9uKGNvbm4sIHVzZXJEYXRhS2V5KS5zdWJzY3JpYmUoXG4gICAgb25DaGFuZ2VcbiAgKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/data/frontend.ts\n");

/***/ }),

/***/ "./src/data/lovelace.ts":
/*!******************************!*\
  !*** ./src/data/lovelace.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createDashboard: () => (/* binding */ createDashboard),\n/* harmony export */   createResource: () => (/* binding */ createResource),\n/* harmony export */   deleteConfig: () => (/* binding */ deleteConfig),\n/* harmony export */   deleteDashboard: () => (/* binding */ deleteDashboard),\n/* harmony export */   deleteResource: () => (/* binding */ deleteResource),\n/* harmony export */   fetchConfig: () => (/* binding */ fetchConfig),\n/* harmony export */   fetchDashboards: () => (/* binding */ fetchDashboards),\n/* harmony export */   fetchResources: () => (/* binding */ fetchResources),\n/* harmony export */   getLegacyLovelaceCollection: () => (/* binding */ getLegacyLovelaceCollection),\n/* harmony export */   getLovelaceCollection: () => (/* binding */ getLovelaceCollection),\n/* harmony export */   saveConfig: () => (/* binding */ saveConfig),\n/* harmony export */   subscribeLovelaceUpdates: () => (/* binding */ subscribeLovelaceUpdates),\n/* harmony export */   updateDashboard: () => (/* binding */ updateDashboard),\n/* harmony export */   updateResource: () => (/* binding */ updateResource)\n/* harmony export */ });\n/* harmony import */ var home_assistant_js_websocket__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! home-assistant-js-websocket */ \"./node_modules/home-assistant-js-websocket/dist/collection.js\");\n\nconst fetchResources = conn => conn.sendMessagePromise({\n  type: \"lovelace/resources\"\n});\nconst createResource = (hass, values) => hass.callWS({\n  type: \"lovelace/resources/create\",\n  ...values\n});\nconst updateResource = (hass, id, updates) => hass.callWS({\n  type: \"lovelace/resources/update\",\n  resource_id: id,\n  ...updates\n});\nconst deleteResource = (hass, id) => hass.callWS({\n  type: \"lovelace/resources/delete\",\n  resource_id: id\n});\nconst fetchDashboards = hass => hass.callWS({\n  type: \"lovelace/dashboards/list\"\n});\nconst createDashboard = (hass, values) => hass.callWS({\n  type: \"lovelace/dashboards/create\",\n  ...values\n});\nconst updateDashboard = (hass, id, updates) => hass.callWS({\n  type: \"lovelace/dashboards/update\",\n  dashboard_id: id,\n  ...updates\n});\nconst deleteDashboard = (hass, id) => hass.callWS({\n  type: \"lovelace/dashboards/delete\",\n  dashboard_id: id\n});\nconst fetchConfig = (conn, urlPath, force) => conn.sendMessagePromise({\n  type: \"lovelace/config\",\n  url_path: urlPath,\n  force\n});\nconst saveConfig = (hass, urlPath, config) => hass.callWS({\n  type: \"lovelace/config/save\",\n  url_path: urlPath,\n  config\n});\nconst deleteConfig = (hass, urlPath) => hass.callWS({\n  type: \"lovelace/config/delete\",\n  url_path: urlPath\n});\nconst subscribeLovelaceUpdates = (conn, urlPath, onChange) => conn.subscribeEvents(ev => {\n  if (ev.data.url_path === urlPath) {\n    onChange();\n  }\n}, \"lovelace_updated\");\nconst getLovelaceCollection = (conn, urlPath = null) => (0,home_assistant_js_websocket__WEBPACK_IMPORTED_MODULE_0__.getCollection)(conn, `_lovelace_${urlPath !== null && urlPath !== void 0 ? urlPath : \"\"}`, conn2 => fetchConfig(conn2, urlPath, false), (_conn, store) => subscribeLovelaceUpdates(conn, urlPath, () => fetchConfig(conn, urlPath, false).then(config => store.setState(config, true))));\n\n// Legacy functions to support cast for Home Assistion < 0.107\nconst fetchLegacyConfig = (conn, force) => conn.sendMessagePromise({\n  type: \"lovelace/config\",\n  force\n});\nconst subscribeLegacyLovelaceUpdates = (conn, onChange) => conn.subscribeEvents(onChange, \"lovelace_updated\");\nconst getLegacyLovelaceCollection = conn => (0,home_assistant_js_websocket__WEBPACK_IMPORTED_MODULE_0__.getCollection)(conn, \"_lovelace\", conn2 => fetchLegacyConfig(conn2, false), (_conn, store) => subscribeLegacyLovelaceUpdates(conn, () => fetchLegacyConfig(conn, false).then(config => store.setState(config, true))));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZGF0YS9sb3ZlbGFjZS50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQWtNQTtBQUVBO0FBQ0E7QUFFQTtBQUtBO0FBQ0E7QUFDQTtBQUVBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBSUE7QUFDQTtBQUVBO0FBS0E7QUFDQTtBQUNBO0FBRUE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUtBO0FBQ0E7QUFDQTtBQUVBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFnQkE7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUVBO0FBS0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ob21lLWFzc2lzdGFudC1mcm9udGVuZC8uL3NyYy9kYXRhL2xvdmVsYWNlLnRzP2M4MmYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQ29ubmVjdGlvbixcbiAgZ2V0Q29sbGVjdGlvbixcbiAgSGFzc0V2ZW50QmFzZSxcbiAgSGFzc1NlcnZpY2VUYXJnZXQsXG59IGZyb20gXCJob21lLWFzc2lzdGFudC1qcy13ZWJzb2NrZXRcIjtcbmltcG9ydCB7IEhBU1NEb21FdmVudCB9IGZyb20gXCIuLi9jb21tb24vZG9tL2ZpcmVfZXZlbnRcIjtcbmltcG9ydCB7IEh1aUVycm9yQ2FyZCB9IGZyb20gXCIuLi9wYW5lbHMvbG92ZWxhY2UvY2FyZHMvaHVpLWVycm9yLWNhcmRcIjtcbmltcG9ydCB7XG4gIExvdmVsYWNlLFxuICBMb3ZlbGFjZUJhZGdlLFxuICBMb3ZlbGFjZUNhcmQsXG59IGZyb20gXCIuLi9wYW5lbHMvbG92ZWxhY2UvdHlwZXNcIjtcbmltcG9ydCB7IEhvbWVBc3Npc3RhbnQgfSBmcm9tIFwiLi4vdHlwZXNcIjtcblxuZXhwb3J0IGludGVyZmFjZSBMb3ZlbGFjZVBhbmVsQ29uZmlnIHtcbiAgbW9kZTogXCJ5YW1sXCIgfCBcInN0b3JhZ2VcIjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBMb3ZlbGFjZUNvbmZpZyB7XG4gIHRpdGxlPzogc3RyaW5nO1xuICBzdHJhdGVneT86IHtcbiAgICB0eXBlOiBzdHJpbmc7XG4gICAgb3B0aW9ucz86IFJlY29yZDxzdHJpbmcsIHVua25vd24+O1xuICB9O1xuICB2aWV3czogTG92ZWxhY2VWaWV3Q29uZmlnW107XG4gIGJhY2tncm91bmQ/OiBzdHJpbmc7XG4gIGhpZGVUb29sYmFyPzogYm9vbGVhbjsgLy8gSW9CXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTGVnYWN5TG92ZWxhY2VDb25maWcgZXh0ZW5kcyBMb3ZlbGFjZUNvbmZpZyB7XG4gIHJlc291cmNlcz86IExvdmVsYWNlUmVzb3VyY2VbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBMb3ZlbGFjZVJlc291cmNlIHtcbiAgaWQ6IHN0cmluZztcbiAgdHlwZTogXCJjc3NcIiB8IFwianNcIiB8IFwibW9kdWxlXCIgfCBcImh0bWxcIjtcbiAgdXJsOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTG92ZWxhY2VSZXNvdXJjZXNNdXRhYmxlUGFyYW1zIHtcbiAgcmVzX3R5cGU6IExvdmVsYWNlUmVzb3VyY2VbXCJ0eXBlXCJdO1xuICB1cmw6IHN0cmluZztcbn1cblxuZXhwb3J0IHR5cGUgTG92ZWxhY2VEYXNoYm9hcmQgPVxuICB8IExvdmVsYWNlWWFtbERhc2hib2FyZFxuICB8IExvdmVsYWNlU3RvcmFnZURhc2hib2FyZDtcblxuaW50ZXJmYWNlIExvdmVsYWNlR2VuZXJpY0Rhc2hib2FyZCB7XG4gIGlkOiBzdHJpbmc7XG4gIHVybF9wYXRoOiBzdHJpbmc7XG4gIHJlcXVpcmVfYWRtaW46IGJvb2xlYW47XG4gIHNob3dfaW5fc2lkZWJhcjogYm9vbGVhbjtcbiAgaWNvbj86IHN0cmluZztcbiAgdGl0bGU6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBMb3ZlbGFjZVlhbWxEYXNoYm9hcmQgZXh0ZW5kcyBMb3ZlbGFjZUdlbmVyaWNEYXNoYm9hcmQge1xuICBtb2RlOiBcInlhbWxcIjtcbiAgZmlsZW5hbWU6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBMb3ZlbGFjZVN0b3JhZ2VEYXNoYm9hcmQgZXh0ZW5kcyBMb3ZlbGFjZUdlbmVyaWNEYXNoYm9hcmQge1xuICBtb2RlOiBcInN0b3JhZ2VcIjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBMb3ZlbGFjZURhc2hib2FyZE11dGFibGVQYXJhbXMge1xuICByZXF1aXJlX2FkbWluOiBib29sZWFuO1xuICBzaG93X2luX3NpZGViYXI6IGJvb2xlYW47XG4gIGljb24/OiBzdHJpbmc7XG4gIHRpdGxlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTG92ZWxhY2VEYXNoYm9hcmRDcmVhdGVQYXJhbXNcbiAgZXh0ZW5kcyBMb3ZlbGFjZURhc2hib2FyZE11dGFibGVQYXJhbXMge1xuICB1cmxfcGF0aDogc3RyaW5nO1xuICBtb2RlOiBcInN0b3JhZ2VcIjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBMb3ZlbGFjZVZpZXdDb25maWcge1xuICBpbmRleD86IG51bWJlcjtcbiAgdGl0bGU/OiBzdHJpbmc7XG4gIHR5cGU/OiBzdHJpbmc7XG4gIHN0cmF0ZWd5Pzoge1xuICAgIHR5cGU6IHN0cmluZztcbiAgICBvcHRpb25zPzogUmVjb3JkPHN0cmluZywgdW5rbm93bj47XG4gIH07XG4gIGJhZGdlcz86IEFycmF5PHN0cmluZyB8IExvdmVsYWNlQmFkZ2VDb25maWc+O1xuICBjYXJkcz86IExvdmVsYWNlQ2FyZENvbmZpZ1tdO1xuICBwYXRoPzogc3RyaW5nO1xuICBpY29uPzogc3RyaW5nO1xuICB0aGVtZT86IHN0cmluZztcbiAgcGFuZWw/OiBib29sZWFuO1xuICBiYWNrZ3JvdW5kPzogc3RyaW5nO1xuICB2aXNpYmxlPzogYm9vbGVhbiB8IFNob3dWaWV3Q29uZmlnW107XG4gIHN1YnZpZXc/OiBib29sZWFuO1xuICBiYWNrX3BhdGg/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTG92ZWxhY2VWaWV3RWxlbWVudCBleHRlbmRzIEhUTUxFbGVtZW50IHtcbiAgaGFzcz86IEhvbWVBc3Npc3RhbnQ7XG4gIGxvdmVsYWNlPzogTG92ZWxhY2U7XG4gIG5hcnJvdz86IGJvb2xlYW47XG4gIGluZGV4PzogbnVtYmVyO1xuICBjYXJkcz86IEFycmF5PExvdmVsYWNlQ2FyZCB8IEh1aUVycm9yQ2FyZD47XG4gIGJhZGdlcz86IExvdmVsYWNlQmFkZ2VbXTtcbiAgaXNTdHJhdGVneTogYm9vbGVhbjtcbiAgc2V0Q29uZmlnKGNvbmZpZzogTG92ZWxhY2VWaWV3Q29uZmlnKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTaG93Vmlld0NvbmZpZyB7XG4gIHVzZXI/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTG92ZWxhY2VCYWRnZUNvbmZpZyB7XG4gIHR5cGU/OiBzdHJpbmc7XG4gIFtrZXk6IHN0cmluZ106IGFueTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBMb3ZlbGFjZUNhcmRDb25maWcge1xuICBpbmRleD86IG51bWJlcjtcbiAgdmlld19pbmRleD86IG51bWJlcjtcbiAgdmlld19sYXlvdXQ/OiBhbnk7XG4gIHR5cGU6IHN0cmluZztcbiAgW2tleTogc3RyaW5nXTogYW55O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFRvZ2dsZUFjdGlvbkNvbmZpZyBleHRlbmRzIEJhc2VBY3Rpb25Db25maWcge1xuICBhY3Rpb246IFwidG9nZ2xlXCI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2FsbFNlcnZpY2VBY3Rpb25Db25maWcgZXh0ZW5kcyBCYXNlQWN0aW9uQ29uZmlnIHtcbiAgYWN0aW9uOiBcImNhbGwtc2VydmljZVwiO1xuICBzZXJ2aWNlOiBzdHJpbmc7XG4gIHRhcmdldD86IEhhc3NTZXJ2aWNlVGFyZ2V0O1xuICAvLyBcInNlcnZpY2VfZGF0YVwiIGlzIGtlcHQgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LiBSZXBsYWNlZCBieSBcImRhdGFcIi5cbiAgc2VydmljZV9kYXRhPzogUmVjb3JkPHN0cmluZywgdW5rbm93bj47XG4gIGRhdGE/OiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBOYXZpZ2F0ZUFjdGlvbkNvbmZpZyBleHRlbmRzIEJhc2VBY3Rpb25Db25maWcge1xuICBhY3Rpb246IFwibmF2aWdhdGVcIjtcbiAgbmF2aWdhdGlvbl9wYXRoOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVXJsQWN0aW9uQ29uZmlnIGV4dGVuZHMgQmFzZUFjdGlvbkNvbmZpZyB7XG4gIGFjdGlvbjogXCJ1cmxcIjtcbiAgdXJsX3BhdGg6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNb3JlSW5mb0FjdGlvbkNvbmZpZyBleHRlbmRzIEJhc2VBY3Rpb25Db25maWcge1xuICBhY3Rpb246IFwibW9yZS1pbmZvXCI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTm9BY3Rpb25Db25maWcgZXh0ZW5kcyBCYXNlQWN0aW9uQ29uZmlnIHtcbiAgYWN0aW9uOiBcIm5vbmVcIjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDdXN0b21BY3Rpb25Db25maWcgZXh0ZW5kcyBCYXNlQWN0aW9uQ29uZmlnIHtcbiAgYWN0aW9uOiBcImZpcmUtZG9tLWV2ZW50XCI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmFzZUFjdGlvbkNvbmZpZyB7XG4gIGFjdGlvbjogc3RyaW5nO1xuICBjb25maXJtYXRpb24/OiBDb25maXJtYXRpb25SZXN0cmljdGlvbkNvbmZpZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDb25maXJtYXRpb25SZXN0cmljdGlvbkNvbmZpZyB7XG4gIHRleHQ/OiBzdHJpbmc7XG4gIGV4ZW1wdGlvbnM/OiBSZXN0cmljdGlvbkNvbmZpZ1tdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJlc3RyaWN0aW9uQ29uZmlnIHtcbiAgdXNlcjogc3RyaW5nO1xufVxuXG5leHBvcnQgdHlwZSBBY3Rpb25Db25maWcgPVxuICB8IFRvZ2dsZUFjdGlvbkNvbmZpZ1xuICB8IENhbGxTZXJ2aWNlQWN0aW9uQ29uZmlnXG4gIHwgTmF2aWdhdGVBY3Rpb25Db25maWdcbiAgfCBVcmxBY3Rpb25Db25maWdcbiAgfCBNb3JlSW5mb0FjdGlvbkNvbmZpZ1xuICB8IE5vQWN0aW9uQ29uZmlnXG4gIHwgQ3VzdG9tQWN0aW9uQ29uZmlnO1xuXG50eXBlIExvdmVsYWNlVXBkYXRlZEV2ZW50ID0gSGFzc0V2ZW50QmFzZSAmIHtcbiAgZXZlbnRfdHlwZTogXCJsb3ZlbGFjZV91cGRhdGVkXCI7XG4gIGRhdGE6IHtcbiAgICB1cmxfcGF0aDogc3RyaW5nIHwgbnVsbDtcbiAgICBtb2RlOiBcInlhbWxcIiB8IFwic3RvcmFnZVwiO1xuICB9O1xufTtcblxuZXhwb3J0IGNvbnN0IGZldGNoUmVzb3VyY2VzID0gKGNvbm46IENvbm5lY3Rpb24pOiBQcm9taXNlPExvdmVsYWNlUmVzb3VyY2VbXT4gPT5cbiAgY29ubi5zZW5kTWVzc2FnZVByb21pc2Uoe1xuICAgIHR5cGU6IFwibG92ZWxhY2UvcmVzb3VyY2VzXCIsXG4gIH0pO1xuXG5leHBvcnQgY29uc3QgY3JlYXRlUmVzb3VyY2UgPSAoXG4gIGhhc3M6IEhvbWVBc3Npc3RhbnQsXG4gIHZhbHVlczogTG92ZWxhY2VSZXNvdXJjZXNNdXRhYmxlUGFyYW1zXG4pID0+XG4gIGhhc3MuY2FsbFdTPExvdmVsYWNlUmVzb3VyY2U+KHtcbiAgICB0eXBlOiBcImxvdmVsYWNlL3Jlc291cmNlcy9jcmVhdGVcIixcbiAgICAuLi52YWx1ZXMsXG4gIH0pO1xuXG5leHBvcnQgY29uc3QgdXBkYXRlUmVzb3VyY2UgPSAoXG4gIGhhc3M6IEhvbWVBc3Npc3RhbnQsXG4gIGlkOiBzdHJpbmcsXG4gIHVwZGF0ZXM6IFBhcnRpYWw8TG92ZWxhY2VSZXNvdXJjZXNNdXRhYmxlUGFyYW1zPlxuKSA9PlxuICBoYXNzLmNhbGxXUzxMb3ZlbGFjZVJlc291cmNlPih7XG4gICAgdHlwZTogXCJsb3ZlbGFjZS9yZXNvdXJjZXMvdXBkYXRlXCIsXG4gICAgcmVzb3VyY2VfaWQ6IGlkLFxuICAgIC4uLnVwZGF0ZXMsXG4gIH0pO1xuXG5leHBvcnQgY29uc3QgZGVsZXRlUmVzb3VyY2UgPSAoaGFzczogSG9tZUFzc2lzdGFudCwgaWQ6IHN0cmluZykgPT5cbiAgaGFzcy5jYWxsV1Moe1xuICAgIHR5cGU6IFwibG92ZWxhY2UvcmVzb3VyY2VzL2RlbGV0ZVwiLFxuICAgIHJlc291cmNlX2lkOiBpZCxcbiAgfSk7XG5cbmV4cG9ydCBjb25zdCBmZXRjaERhc2hib2FyZHMgPSAoXG4gIGhhc3M6IEhvbWVBc3Npc3RhbnRcbik6IFByb21pc2U8TG92ZWxhY2VEYXNoYm9hcmRbXT4gPT5cbiAgaGFzcy5jYWxsV1Moe1xuICAgIHR5cGU6IFwibG92ZWxhY2UvZGFzaGJvYXJkcy9saXN0XCIsXG4gIH0pO1xuXG5leHBvcnQgY29uc3QgY3JlYXRlRGFzaGJvYXJkID0gKFxuICBoYXNzOiBIb21lQXNzaXN0YW50LFxuICB2YWx1ZXM6IExvdmVsYWNlRGFzaGJvYXJkQ3JlYXRlUGFyYW1zXG4pID0+XG4gIGhhc3MuY2FsbFdTPExvdmVsYWNlRGFzaGJvYXJkPih7XG4gICAgdHlwZTogXCJsb3ZlbGFjZS9kYXNoYm9hcmRzL2NyZWF0ZVwiLFxuICAgIC4uLnZhbHVlcyxcbiAgfSk7XG5cbmV4cG9ydCBjb25zdCB1cGRhdGVEYXNoYm9hcmQgPSAoXG4gIGhhc3M6IEhvbWVBc3Npc3RhbnQsXG4gIGlkOiBzdHJpbmcsXG4gIHVwZGF0ZXM6IFBhcnRpYWw8TG92ZWxhY2VEYXNoYm9hcmRNdXRhYmxlUGFyYW1zPlxuKSA9PlxuICBoYXNzLmNhbGxXUzxMb3ZlbGFjZURhc2hib2FyZD4oe1xuICAgIHR5cGU6IFwibG92ZWxhY2UvZGFzaGJvYXJkcy91cGRhdGVcIixcbiAgICBkYXNoYm9hcmRfaWQ6IGlkLFxuICAgIC4uLnVwZGF0ZXMsXG4gIH0pO1xuXG5leHBvcnQgY29uc3QgZGVsZXRlRGFzaGJvYXJkID0gKGhhc3M6IEhvbWVBc3Npc3RhbnQsIGlkOiBzdHJpbmcpID0+XG4gIGhhc3MuY2FsbFdTKHtcbiAgICB0eXBlOiBcImxvdmVsYWNlL2Rhc2hib2FyZHMvZGVsZXRlXCIsXG4gICAgZGFzaGJvYXJkX2lkOiBpZCxcbiAgfSk7XG5cbmV4cG9ydCBjb25zdCBmZXRjaENvbmZpZyA9IChcbiAgY29ubjogQ29ubmVjdGlvbixcbiAgdXJsUGF0aDogc3RyaW5nIHwgbnVsbCxcbiAgZm9yY2U6IGJvb2xlYW5cbik6IFByb21pc2U8TG92ZWxhY2VDb25maWc+ID0+XG4gIGNvbm4uc2VuZE1lc3NhZ2VQcm9taXNlKHtcbiAgICB0eXBlOiBcImxvdmVsYWNlL2NvbmZpZ1wiLFxuICAgIHVybF9wYXRoOiB1cmxQYXRoLFxuICAgIGZvcmNlLFxuICB9KTtcblxuZXhwb3J0IGNvbnN0IHNhdmVDb25maWcgPSAoXG4gIGhhc3M6IEhvbWVBc3Npc3RhbnQsXG4gIHVybFBhdGg6IHN0cmluZyB8IG51bGwsXG4gIGNvbmZpZzogTG92ZWxhY2VDb25maWdcbik6IFByb21pc2U8dm9pZD4gPT5cbiAgaGFzcy5jYWxsV1Moe1xuICAgIHR5cGU6IFwibG92ZWxhY2UvY29uZmlnL3NhdmVcIixcbiAgICB1cmxfcGF0aDogdXJsUGF0aCxcbiAgICBjb25maWcsXG4gIH0pO1xuXG5leHBvcnQgY29uc3QgZGVsZXRlQ29uZmlnID0gKFxuICBoYXNzOiBIb21lQXNzaXN0YW50LFxuICB1cmxQYXRoOiBzdHJpbmcgfCBudWxsXG4pOiBQcm9taXNlPHZvaWQ+ID0+XG4gIGhhc3MuY2FsbFdTKHtcbiAgICB0eXBlOiBcImxvdmVsYWNlL2NvbmZpZy9kZWxldGVcIixcbiAgICB1cmxfcGF0aDogdXJsUGF0aCxcbiAgfSk7XG5cbmV4cG9ydCBjb25zdCBzdWJzY3JpYmVMb3ZlbGFjZVVwZGF0ZXMgPSAoXG4gIGNvbm46IENvbm5lY3Rpb24sXG4gIHVybFBhdGg6IHN0cmluZyB8IG51bGwsXG4gIG9uQ2hhbmdlOiAoKSA9PiB2b2lkXG4pID0+XG4gIGNvbm4uc3Vic2NyaWJlRXZlbnRzPExvdmVsYWNlVXBkYXRlZEV2ZW50PigoZXYpID0+IHtcbiAgICBpZiAoZXYuZGF0YS51cmxfcGF0aCA9PT0gdXJsUGF0aCkge1xuICAgICAgb25DaGFuZ2UoKTtcbiAgICB9XG4gIH0sIFwibG92ZWxhY2VfdXBkYXRlZFwiKTtcblxuZXhwb3J0IGNvbnN0IGdldExvdmVsYWNlQ29sbGVjdGlvbiA9IChcbiAgY29ubjogQ29ubmVjdGlvbixcbiAgdXJsUGF0aDogc3RyaW5nIHwgbnVsbCA9IG51bGxcbikgPT5cbiAgZ2V0Q29sbGVjdGlvbihcbiAgICBjb25uLFxuICAgIGBfbG92ZWxhY2VfJHt1cmxQYXRoID8/IFwiXCJ9YCxcbiAgICAoY29ubjIpID0+IGZldGNoQ29uZmlnKGNvbm4yLCB1cmxQYXRoLCBmYWxzZSksXG4gICAgKF9jb25uLCBzdG9yZSkgPT5cbiAgICAgIHN1YnNjcmliZUxvdmVsYWNlVXBkYXRlcyhjb25uLCB1cmxQYXRoLCAoKSA9PlxuICAgICAgICBmZXRjaENvbmZpZyhjb25uLCB1cmxQYXRoLCBmYWxzZSkudGhlbigoY29uZmlnKSA9PlxuICAgICAgICAgIHN0b3JlLnNldFN0YXRlKGNvbmZpZywgdHJ1ZSlcbiAgICAgICAgKVxuICAgICAgKVxuICApO1xuXG4vLyBMZWdhY3kgZnVuY3Rpb25zIHRvIHN1cHBvcnQgY2FzdCBmb3IgSG9tZSBBc3Npc3Rpb24gPCAwLjEwN1xuY29uc3QgZmV0Y2hMZWdhY3lDb25maWcgPSAoXG4gIGNvbm46IENvbm5lY3Rpb24sXG4gIGZvcmNlOiBib29sZWFuXG4pOiBQcm9taXNlPExvdmVsYWNlQ29uZmlnPiA9PlxuICBjb25uLnNlbmRNZXNzYWdlUHJvbWlzZSh7XG4gICAgdHlwZTogXCJsb3ZlbGFjZS9jb25maWdcIixcbiAgICBmb3JjZSxcbiAgfSk7XG5cbmNvbnN0IHN1YnNjcmliZUxlZ2FjeUxvdmVsYWNlVXBkYXRlcyA9IChcbiAgY29ubjogQ29ubmVjdGlvbixcbiAgb25DaGFuZ2U6ICgpID0+IHZvaWRcbikgPT4gY29ubi5zdWJzY3JpYmVFdmVudHMob25DaGFuZ2UsIFwibG92ZWxhY2VfdXBkYXRlZFwiKTtcblxuZXhwb3J0IGNvbnN0IGdldExlZ2FjeUxvdmVsYWNlQ29sbGVjdGlvbiA9IChjb25uOiBDb25uZWN0aW9uKSA9PlxuICBnZXRDb2xsZWN0aW9uKFxuICAgIGNvbm4sXG4gICAgXCJfbG92ZWxhY2VcIixcbiAgICAoY29ubjIpID0+IGZldGNoTGVnYWN5Q29uZmlnKGNvbm4yLCBmYWxzZSksXG4gICAgKF9jb25uLCBzdG9yZSkgPT5cbiAgICAgIHN1YnNjcmliZUxlZ2FjeUxvdmVsYWNlVXBkYXRlcyhjb25uLCAoKSA9PlxuICAgICAgICBmZXRjaExlZ2FjeUNvbmZpZyhjb25uLCBmYWxzZSkudGhlbigoY29uZmlnKSA9PlxuICAgICAgICAgIHN0b3JlLnNldFN0YXRlKGNvbmZpZywgdHJ1ZSlcbiAgICAgICAgKVxuICAgICAgKVxuICApO1xuXG5leHBvcnQgaW50ZXJmYWNlIFdpbmRvd1dpdGhMb3ZlbGFjZVByb20gZXh0ZW5kcyBXaW5kb3cge1xuICBsbENvbmZQcm9tPzogUHJvbWlzZTxMb3ZlbGFjZUNvbmZpZz47XG4gIGxsUmVzUHJvbT86IFByb21pc2U8TG92ZWxhY2VSZXNvdXJjZVtdPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBY3Rpb25IYW5kbGVyT3B0aW9ucyB7XG4gIGhhc0hvbGQ/OiBib29sZWFuO1xuICBoYXNEb3VibGVDbGljaz86IGJvb2xlYW47XG4gIGRpc2FibGVkPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBY3Rpb25IYW5kbGVyRGV0YWlsIHtcbiAgYWN0aW9uOiBcImhvbGRcIiB8IFwidGFwXCIgfCBcImRvdWJsZV90YXBcIjtcbn1cblxuZXhwb3J0IHR5cGUgQWN0aW9uSGFuZGxlckV2ZW50ID0gSEFTU0RvbUV2ZW50PEFjdGlvbkhhbmRsZXJEZXRhaWw+O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/data/lovelace.ts\n");

/***/ }),

/***/ "./src/data/main_window.ts":
/*!*********************************!*\
  !*** ./src/data/main_window.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MAIN_WINDOW_NAME: () => (/* binding */ MAIN_WINDOW_NAME)\n/* harmony export */ });\nconst MAIN_WINDOW_NAME = \"ha-main-window\";//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZGF0YS9tYWluX3dpbmRvdy50cy5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ob21lLWFzc2lzdGFudC1mcm9udGVuZC8uL3NyYy9kYXRhL21haW5fd2luZG93LnRzP2M2MTUiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IE1BSU5fV0lORE9XX05BTUUgPSBcImhhLW1haW4td2luZG93XCI7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/data/main_window.ts\n");

/***/ }),

/***/ "./src/data/ws-panels.ts":
/*!*******************************!*\
  !*** ./src/data/ws-panels.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   subscribePanels: () => (/* binding */ subscribePanels)\n/* harmony export */ });\n/* harmony import */ var home_assistant_js_websocket__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! home-assistant-js-websocket */ \"./node_modules/home-assistant-js-websocket/dist/collection.js\");\n\nconst fetchPanels = conn => conn.sendMessagePromise({\n  type: \"get_panels\"\n});\nconst subscribeUpdates = (conn, store) => conn.subscribeEvents(() => fetchPanels(conn).then(panels => store.setState(panels, true)), \"panels_updated\");\nconst subscribePanels = (conn, onChange) => (0,home_assistant_js_websocket__WEBPACK_IMPORTED_MODULE_0__.createCollection)(\"_pnl\", fetchPanels, subscribeUpdates, conn, onChange);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZGF0YS93cy1wYW5lbHMudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUdBO0FBRUE7QUFDQTtBQUVBO0FBTUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ob21lLWFzc2lzdGFudC1mcm9udGVuZC8uL3NyYy9kYXRhL3dzLXBhbmVscy50cz83OTBjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbm5lY3Rpb24sIGNyZWF0ZUNvbGxlY3Rpb24gfSBmcm9tIFwiaG9tZS1hc3Npc3RhbnQtanMtd2Vic29ja2V0XCI7XG5pbXBvcnQgeyBQYW5lbHMgfSBmcm9tIFwiLi4vdHlwZXNcIjtcblxuY29uc3QgZmV0Y2hQYW5lbHMgPSAoY29ubikgPT5cbiAgY29ubi5zZW5kTWVzc2FnZVByb21pc2Uoe1xuICAgIHR5cGU6IFwiZ2V0X3BhbmVsc1wiLFxuICB9KTtcblxuY29uc3Qgc3Vic2NyaWJlVXBkYXRlcyA9IChjb25uLCBzdG9yZSkgPT5cbiAgY29ubi5zdWJzY3JpYmVFdmVudHMoXG4gICAgKCkgPT4gZmV0Y2hQYW5lbHMoY29ubikudGhlbigocGFuZWxzKSA9PiBzdG9yZS5zZXRTdGF0ZShwYW5lbHMsIHRydWUpKSxcbiAgICBcInBhbmVsc191cGRhdGVkXCJcbiAgKTtcblxuZXhwb3J0IGNvbnN0IHN1YnNjcmliZVBhbmVscyA9IChcbiAgY29ubjogQ29ubmVjdGlvbixcbiAgb25DaGFuZ2U6IChwYW5lbHM6IFBhbmVscykgPT4gdm9pZFxuKSA9PlxuICBjcmVhdGVDb2xsZWN0aW9uPFBhbmVscz4oXG4gICAgXCJfcG5sXCIsXG4gICAgZmV0Y2hQYW5lbHMsXG4gICAgc3Vic2NyaWJlVXBkYXRlcyxcbiAgICBjb25uLFxuICAgIG9uQ2hhbmdlXG4gICk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/data/ws-panels.ts\n");

/***/ }),

/***/ "./src/data/ws-themes.ts":
/*!*******************************!*\
  !*** ./src/data/ws-themes.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   subscribeThemes: () => (/* binding */ subscribeThemes)\n/* harmony export */ });\n/* harmony import */ var home_assistant_js_websocket__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! home-assistant-js-websocket */ \"./node_modules/home-assistant-js-websocket/dist/collection.js\");\n\nconst fetchThemes = conn => conn.sendMessagePromise({\n  type: \"frontend/get_themes\"\n});\nconst subscribeUpdates = (conn, store) => conn.subscribeEvents(() => fetchThemes(conn).then(data => store.setState(data, true)), \"themes_updated\");\nconst subscribeThemes = (conn, onChange) => (0,home_assistant_js_websocket__WEBPACK_IMPORTED_MODULE_0__.createCollection)(\"_thm\", fetchThemes, subscribeUpdates, conn, onChange);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZGF0YS93cy10aGVtZXMudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQTZCQTtBQUVBO0FBQ0E7QUFFQTtBQU1BIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaG9tZS1hc3Npc3RhbnQtZnJvbnRlbmQvLi9zcmMvZGF0YS93cy10aGVtZXMudHM/ZWFiNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb25uZWN0aW9uLCBjcmVhdGVDb2xsZWN0aW9uIH0gZnJvbSBcImhvbWUtYXNzaXN0YW50LWpzLXdlYnNvY2tldFwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIFRoZW1lVmFycyB7XG4gIC8vIEluY29tcGxldGVcbiAgXCJwcmltYXJ5LWNvbG9yXCI6IHN0cmluZztcbiAgXCJ0ZXh0LXByaW1hcnktY29sb3JcIjogc3RyaW5nO1xuICBcImFjY2VudC1jb2xvclwiOiBzdHJpbmc7XG4gIFtrZXk6IHN0cmluZ106IHN0cmluZztcbn1cblxuZXhwb3J0IHR5cGUgVGhlbWUgPSBUaGVtZVZhcnMgJiB7XG4gIG1vZGVzPzoge1xuICAgIGxpZ2h0PzogVGhlbWVWYXJzO1xuICAgIGRhcms/OiBUaGVtZVZhcnM7XG4gIH07XG59O1xuXG5leHBvcnQgaW50ZXJmYWNlIFRoZW1lcyB7XG4gIGRlZmF1bHRfdGhlbWU6IHN0cmluZztcbiAgZGVmYXVsdF9kYXJrX3RoZW1lOiBzdHJpbmcgfCBudWxsO1xuICB0aGVtZXM6IFJlY29yZDxzdHJpbmcsIFRoZW1lPjtcbiAgLy8gQ3VycmVudGx5IGVmZmVjdGl2ZSBkYXJrIG1vZGUuIFdpbGwgbmV2ZXIgYmUgdW5kZWZpbmVkLiBJZiB1c2VyIHNlbGVjdGVkIFwiYXV0b1wiXG4gIC8vIGluIHRoZW1lIHBpY2tlciwgdGhpcyBwcm9wZXJ0eSB3aWxsIHN0aWxsIGNvbnRhaW4gZWl0aGVyIHRydWUgb3IgZmFsc2UgYmFzZWQgb25cbiAgLy8gd2hhdCBoYXMgYmVlbiBkZXRlcm1pbmVkIHZpYSBzeXN0ZW0gcHJlZmVyZW5jZXMgYW5kIHN1cHBvcnQgZnJvbSB0aGUgc2VsZWN0ZWQgdGhlbWUuXG4gIGRhcmtNb2RlOiBib29sZWFuO1xuICAvLyBDdXJyZW50bHkgZ2xvYmFsbHkgYWN0aXZlIHRoZW1lIG5hbWVcbiAgdGhlbWU6IHN0cmluZztcbn1cblxuY29uc3QgZmV0Y2hUaGVtZXMgPSAoY29ubikgPT5cbiAgY29ubi5zZW5kTWVzc2FnZVByb21pc2Uoe1xuICAgIHR5cGU6IFwiZnJvbnRlbmQvZ2V0X3RoZW1lc1wiLFxuICB9KTtcblxuY29uc3Qgc3Vic2NyaWJlVXBkYXRlcyA9IChjb25uLCBzdG9yZSkgPT5cbiAgY29ubi5zdWJzY3JpYmVFdmVudHMoXG4gICAgKCkgPT4gZmV0Y2hUaGVtZXMoY29ubikudGhlbigoZGF0YSkgPT4gc3RvcmUuc2V0U3RhdGUoZGF0YSwgdHJ1ZSkpLFxuICAgIFwidGhlbWVzX3VwZGF0ZWRcIlxuICApO1xuXG5leHBvcnQgY29uc3Qgc3Vic2NyaWJlVGhlbWVzID0gKFxuICBjb25uOiBDb25uZWN0aW9uLFxuICBvbkNoYW5nZTogKHRoZW1lczogVGhlbWVzKSA9PiB2b2lkXG4pID0+XG4gIGNyZWF0ZUNvbGxlY3Rpb248VGhlbWVzPihcbiAgICBcIl90aG1cIixcbiAgICBmZXRjaFRoZW1lcyxcbiAgICBzdWJzY3JpYmVVcGRhdGVzLFxuICAgIGNvbm4sXG4gICAgb25DaGFuZ2VcbiAgKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/data/ws-themes.ts\n");

/***/ }),

/***/ "./src/data/ws-user.ts":
/*!*****************************!*\
  !*** ./src/data/ws-user.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   subscribeUser: () => (/* binding */ subscribeUser),\n/* harmony export */   userCollection: () => (/* binding */ userCollection)\n/* harmony export */ });\n/* harmony import */ var home_assistant_js_websocket__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! home-assistant-js-websocket */ \"./node_modules/home-assistant-js-websocket/dist/collection.js\");\n/* harmony import */ var home_assistant_js_websocket__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! home-assistant-js-websocket */ \"./node_modules/home-assistant-js-websocket/dist/commands.js\");\n\nconst userCollection = conn => (0,home_assistant_js_websocket__WEBPACK_IMPORTED_MODULE_0__.getCollection)(conn, \"_usr\", () => (0,home_assistant_js_websocket__WEBPACK_IMPORTED_MODULE_1__.getUser)(conn), undefined);\nconst subscribeUser = (conn, onChange) => userCollection(conn).subscribe(onChange);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZGF0YS93cy11c2VyLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTtBQU9BO0FBUUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ob21lLWFzc2lzdGFudC1mcm9udGVuZC8uL3NyYy9kYXRhL3dzLXVzZXIudHM/ZGZhZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBDb25uZWN0aW9uLFxuICBnZXRDb2xsZWN0aW9uLFxuICBnZXRVc2VyLFxufSBmcm9tIFwiaG9tZS1hc3Npc3RhbnQtanMtd2Vic29ja2V0XCI7XG5pbXBvcnQgeyBDdXJyZW50VXNlciB9IGZyb20gXCIuLi90eXBlc1wiO1xuXG5leHBvcnQgY29uc3QgdXNlckNvbGxlY3Rpb24gPSAoY29ubjogQ29ubmVjdGlvbikgPT5cbiAgZ2V0Q29sbGVjdGlvbihcbiAgICBjb25uLFxuICAgIFwiX3VzclwiLFxuICAgICgpID0+IGdldFVzZXIoY29ubikgYXMgUHJvbWlzZTxDdXJyZW50VXNlcj4sXG4gICAgdW5kZWZpbmVkXG4gICk7XG5cbmV4cG9ydCBjb25zdCBzdWJzY3JpYmVVc2VyID0gKFxuICBjb25uOiBDb25uZWN0aW9uLFxuICBvbkNoYW5nZTogKHVzZXI6IEN1cnJlbnRVc2VyKSA9PiB2b2lkXG4pID0+IHVzZXJDb2xsZWN0aW9uKGNvbm4pLnN1YnNjcmliZShvbkNoYW5nZSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/data/ws-user.ts\n");

/***/ }),

/***/ "./src/entrypoints/core.ts":
/*!*********************************!*\
  !*** ./src/entrypoints/core.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _resources_compatibility__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../resources/compatibility */ \"./src/resources/compatibility.ts\");\n/* harmony import */ var home_assistant_js_websocket__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! home-assistant-js-websocket */ \"./node_modules/home-assistant-js-websocket/dist/auth.js\");\n/* harmony import */ var home_assistant_js_websocket__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! home-assistant-js-websocket */ \"./node_modules/home-assistant-js-websocket/dist/index.js\");\n/* harmony import */ var home_assistant_js_websocket__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! home-assistant-js-websocket */ \"./node_modules/home-assistant-js-websocket/dist/errors.js\");\n/* harmony import */ var home_assistant_js_websocket__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! home-assistant-js-websocket */ \"./node_modules/home-assistant-js-websocket/dist/entities.js\");\n/* harmony import */ var home_assistant_js_websocket__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! home-assistant-js-websocket */ \"./node_modules/home-assistant-js-websocket/dist/config.js\");\n/* harmony import */ var home_assistant_js_websocket__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! home-assistant-js-websocket */ \"./node_modules/home-assistant-js-websocket/dist/services.js\");\n/* harmony import */ var _common_auth_token_storage__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common/auth/token_storage */ \"./src/common/auth/token_storage.ts\");\n/* harmony import */ var _data_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../data/auth */ \"./src/data/auth.ts\");\n/* harmony import */ var _data_external__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../data/external */ \"./src/data/external.ts\");\n/* harmony import */ var _data_frontend__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../data/frontend */ \"./src/data/frontend.ts\");\n/* harmony import */ var _data_lovelace__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../data/lovelace */ \"./src/data/lovelace.ts\");\n/* harmony import */ var _data_ws_panels__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../data/ws-panels */ \"./src/data/ws-panels.ts\");\n/* harmony import */ var _data_ws_themes__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../data/ws-themes */ \"./src/data/ws-themes.ts\");\n/* harmony import */ var _data_ws_user__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../data/ws-user */ \"./src/data/ws-user.ts\");\n/* harmony import */ var _resources_array_flat_polyfill__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../resources/array.flat.polyfill */ \"./src/resources/array.flat.polyfill.ts\");\n/* harmony import */ var _resources_safari_14_attachshadow_patch__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../resources/safari-14-attachshadow-patch */ \"./src/resources/safari-14-attachshadow-patch.ts\");\n/* harmony import */ var _data_main_window__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../data/main_window */ \"./src/data/main_window.ts\");\n// Compat needs to be first import\n\n\n\n\n\n\n\n\n\n\n\n\n\nwindow.name = _data_main_window__WEBPACK_IMPORTED_MODULE_11__.MAIN_WINDOW_NAME;\nwindow.frontendVersion = \"20230608.0\";\nconst clearUrlParams = () => {\n  // Clear auth data from url if we have been able to establish a connection\n  if (location.search.includes(\"auth_callback=1\")) {\n    const searchParams = new URLSearchParams(location.search);\n    // https://github.com/home-assistant/home-assistant-js-websocket/blob/master/lib/auth.ts\n    // Remove all data from QueryCallbackData type\n    searchParams.delete(\"auth_callback\");\n    searchParams.delete(\"code\");\n    searchParams.delete(\"state\");\n    searchParams.delete(\"storeToken\");\n    const search = searchParams.toString();\n    history.replaceState(null, \"\", `${location.pathname}${search ? `?${search}` : \"\"}`);\n  }\n};\nconst authProm = _data_external__WEBPACK_IMPORTED_MODULE_3__.isExternal ? () => __webpack_require__.e(/*! import() */ \"src_external_app_external_auth_ts\").then(__webpack_require__.bind(__webpack_require__, /*! ../external_app/external_auth */ \"./src/external_app/external_auth.ts\")).then(({\n  createExternalAuth\n}) => createExternalAuth(_data_auth__WEBPACK_IMPORTED_MODULE_2__.hassUrl)) : () => (0,home_assistant_js_websocket__WEBPACK_IMPORTED_MODULE_12__.getAuth)({\n  hassUrl: _data_auth__WEBPACK_IMPORTED_MODULE_2__.hassUrl,\n  saveTokens: _common_auth_token_storage__WEBPACK_IMPORTED_MODULE_1__.saveTokens,\n  loadTokens: () => Promise.resolve((0,_common_auth_token_storage__WEBPACK_IMPORTED_MODULE_1__.loadTokens)()),\n  authCode: window.hassNoAuth // for IoB\n});\n\nconst connProm = async auth => {\n  try {\n    const conn = await (0,home_assistant_js_websocket__WEBPACK_IMPORTED_MODULE_13__.createConnection)({\n      auth\n    });\n    clearUrlParams();\n    return {\n      auth,\n      conn\n    };\n  } catch (err) {\n    if (err !== home_assistant_js_websocket__WEBPACK_IMPORTED_MODULE_14__.ERR_INVALID_AUTH) {\n      throw err;\n    }\n    // We can get invalid auth if auth tokens were stored that are no longer valid\n    if (_data_external__WEBPACK_IMPORTED_MODULE_3__.isExternal) {\n      // Tell the external app to force refresh the access tokens.\n      // This should trigger their unauthorized handling.\n      await auth.refreshAccessToken(true);\n    } else {\n      // Clear stored tokens.\n      (0,_common_auth_token_storage__WEBPACK_IMPORTED_MODULE_1__.saveTokens)(null);\n    }\n    auth = await authProm();\n    const conn = await (0,home_assistant_js_websocket__WEBPACK_IMPORTED_MODULE_13__.createConnection)({\n      auth\n    });\n    clearUrlParams();\n    return {\n      auth,\n      conn\n    };\n  }\n};\nif ( true && \"performance\" in window) {\n  // Remove adoptedStyleSheets so style inspector works on shadow DOM.\n  // @ts-ignore\n  delete Document.prototype.adoptedStyleSheets;\n  performance.mark(\"hass-start\");\n}\nwindow.hassConnection = authProm().then(connProm);\n\n// This is set if app was somehow loaded before core.\nif (window.hassConnectionReady) {\n  window.hassConnectionReady(window.hassConnection);\n}\n\n// Start fetching some of the data that we will need.\nwindow.hassConnection.then(({\n  conn\n}) => {\n  const noop = () => {\n    // do nothing\n  };\n  (0,home_assistant_js_websocket__WEBPACK_IMPORTED_MODULE_15__.subscribeEntities)(conn, noop);\n  (0,home_assistant_js_websocket__WEBPACK_IMPORTED_MODULE_16__.subscribeConfig)(conn, noop);\n  (0,home_assistant_js_websocket__WEBPACK_IMPORTED_MODULE_17__.subscribeServices)(conn, noop);\n  (0,_data_ws_panels__WEBPACK_IMPORTED_MODULE_6__.subscribePanels)(conn, noop);\n  (0,_data_ws_themes__WEBPACK_IMPORTED_MODULE_7__.subscribeThemes)(conn, noop);\n  (0,_data_ws_user__WEBPACK_IMPORTED_MODULE_8__.subscribeUser)(conn, noop);\n  (0,_data_frontend__WEBPACK_IMPORTED_MODULE_4__.subscribeFrontendUserData)(conn, \"core\", noop);\n  if (location.pathname === \"/\" || location.pathname.startsWith(\"/lovelace/\")) {\n    const llWindow = window;\n    llWindow.llConfProm = (0,_data_lovelace__WEBPACK_IMPORTED_MODULE_5__.fetchConfig)(conn, null, false);\n    llWindow.llConfProm.catch(() => {\n      // Ignore it, it is handled by Lovelace panel.\n    });\n    llWindow.llResProm = (0,_data_lovelace__WEBPACK_IMPORTED_MODULE_5__.fetchResources)(conn);\n  }\n});\nwindow.addEventListener(\"error\", e => {\n  if (false) {}\n  const homeAssistant = document.querySelector(\"home-assistant\");\n  if (homeAssistant && homeAssistant.hass && homeAssistant.hass.callService) {\n    homeAssistant.hass.callService(\"system_log\", \"write\", {\n      logger: `frontend.${ true ? \"js_dev\" : 0}.${\"latest\"}.${\"20230608.0\".replace(\".\", \"\")}`,\n      message: `${e.filename}:${e.lineno}:${e.colno} ${e.message}`\n    });\n  }\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZW50cnlwb2ludHMvY29yZS50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBRUE7QUFFQTtBQUFBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUlBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBS0E7QUFDQTtBQUtBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2hvbWUtYXNzaXN0YW50LWZyb250ZW5kLy4vc3JjL2VudHJ5cG9pbnRzL2NvcmUudHM/NGE1ZSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb21wYXQgbmVlZHMgdG8gYmUgZmlyc3QgaW1wb3J0XG5pbXBvcnQgXCIuLi9yZXNvdXJjZXMvY29tcGF0aWJpbGl0eVwiO1xuaW1wb3J0IHtcbiAgQXV0aCxcbiAgQ29ubmVjdGlvbixcbiAgY3JlYXRlQ29ubmVjdGlvbixcbiAgRVJSX0lOVkFMSURfQVVUSCxcbiAgZ2V0QXV0aCxcbiAgc3Vic2NyaWJlQ29uZmlnLFxuICBzdWJzY3JpYmVFbnRpdGllcyxcbiAgc3Vic2NyaWJlU2VydmljZXMsXG59IGZyb20gXCJob21lLWFzc2lzdGFudC1qcy13ZWJzb2NrZXRcIjtcbmltcG9ydCB7IGxvYWRUb2tlbnMsIHNhdmVUb2tlbnMgfSBmcm9tIFwiLi4vY29tbW9uL2F1dGgvdG9rZW5fc3RvcmFnZVwiO1xuaW1wb3J0IHsgaGFzc1VybCB9IGZyb20gXCIuLi9kYXRhL2F1dGhcIjtcbmltcG9ydCB7IGlzRXh0ZXJuYWwgfSBmcm9tIFwiLi4vZGF0YS9leHRlcm5hbFwiO1xuaW1wb3J0IHsgc3Vic2NyaWJlRnJvbnRlbmRVc2VyRGF0YSB9IGZyb20gXCIuLi9kYXRhL2Zyb250ZW5kXCI7XG5pbXBvcnQge1xuICBmZXRjaENvbmZpZyxcbiAgZmV0Y2hSZXNvdXJjZXMsXG4gIFdpbmRvd1dpdGhMb3ZlbGFjZVByb20sXG59IGZyb20gXCIuLi9kYXRhL2xvdmVsYWNlXCI7XG5pbXBvcnQgeyBzdWJzY3JpYmVQYW5lbHMgfSBmcm9tIFwiLi4vZGF0YS93cy1wYW5lbHNcIjtcbmltcG9ydCB7IHN1YnNjcmliZVRoZW1lcyB9IGZyb20gXCIuLi9kYXRhL3dzLXRoZW1lc1wiO1xuaW1wb3J0IHsgc3Vic2NyaWJlVXNlciB9IGZyb20gXCIuLi9kYXRhL3dzLXVzZXJcIjtcbmltcG9ydCB0eXBlIHsgRXh0ZXJuYWxBdXRoIH0gZnJvbSBcIi4uL2V4dGVybmFsX2FwcC9leHRlcm5hbF9hdXRoXCI7XG5pbXBvcnQgXCIuLi9yZXNvdXJjZXMvYXJyYXkuZmxhdC5wb2x5ZmlsbFwiO1xuaW1wb3J0IFwiLi4vcmVzb3VyY2VzL3NhZmFyaS0xNC1hdHRhY2hzaGFkb3ctcGF0Y2hcIjtcbmltcG9ydCB7IEhvbWVBc3Npc3RhbnQgfSBmcm9tIFwiLi4vdHlwZXNcIjtcbmltcG9ydCB7IE1BSU5fV0lORE9XX05BTUUgfSBmcm9tIFwiLi4vZGF0YS9tYWluX3dpbmRvd1wiO1xuXG53aW5kb3cubmFtZSA9IE1BSU5fV0lORE9XX05BTUU7XG4od2luZG93IGFzIGFueSkuZnJvbnRlbmRWZXJzaW9uID0gX19WRVJTSU9OX187XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIFdpbmRvdyB7XG4gICAgaGFzc0Nvbm5lY3Rpb246IFByb21pc2U8eyBhdXRoOiBBdXRoOyBjb25uOiBDb25uZWN0aW9uIH0+O1xuICAgIGhhc3NDb25uZWN0aW9uUmVhZHk/OiAoaGFzc0Nvbm5lY3Rpb246IFdpbmRvd1tcImhhc3NDb25uZWN0aW9uXCJdKSA9PiB2b2lkO1xuICAgIGhhc3NOb0F1dGg6IHN0cmluZzsgLy8gSW9CXG4gIH1cbn1cblxuY29uc3QgY2xlYXJVcmxQYXJhbXMgPSAoKSA9PiB7XG4gIC8vIENsZWFyIGF1dGggZGF0YSBmcm9tIHVybCBpZiB3ZSBoYXZlIGJlZW4gYWJsZSB0byBlc3RhYmxpc2ggYSBjb25uZWN0aW9uXG4gIGlmIChsb2NhdGlvbi5zZWFyY2guaW5jbHVkZXMoXCJhdXRoX2NhbGxiYWNrPTFcIikpIHtcbiAgICBjb25zdCBzZWFyY2hQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKGxvY2F0aW9uLnNlYXJjaCk7XG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2hvbWUtYXNzaXN0YW50L2hvbWUtYXNzaXN0YW50LWpzLXdlYnNvY2tldC9ibG9iL21hc3Rlci9saWIvYXV0aC50c1xuICAgIC8vIFJlbW92ZSBhbGwgZGF0YSBmcm9tIFF1ZXJ5Q2FsbGJhY2tEYXRhIHR5cGVcbiAgICBzZWFyY2hQYXJhbXMuZGVsZXRlKFwiYXV0aF9jYWxsYmFja1wiKTtcbiAgICBzZWFyY2hQYXJhbXMuZGVsZXRlKFwiY29kZVwiKTtcbiAgICBzZWFyY2hQYXJhbXMuZGVsZXRlKFwic3RhdGVcIik7XG4gICAgc2VhcmNoUGFyYW1zLmRlbGV0ZShcInN0b3JlVG9rZW5cIik7XG4gICAgY29uc3Qgc2VhcmNoID0gc2VhcmNoUGFyYW1zLnRvU3RyaW5nKCk7XG4gICAgaGlzdG9yeS5yZXBsYWNlU3RhdGUoXG4gICAgICBudWxsLFxuICAgICAgXCJcIixcbiAgICAgIGAke2xvY2F0aW9uLnBhdGhuYW1lfSR7c2VhcmNoID8gYD8ke3NlYXJjaH1gIDogXCJcIn1gXG4gICAgKTtcbiAgfVxufTtcblxuY29uc3QgYXV0aFByb20gPSBpc0V4dGVybmFsXG4gID8gKCkgPT5cbiAgICAgIGltcG9ydChcIi4uL2V4dGVybmFsX2FwcC9leHRlcm5hbF9hdXRoXCIpLnRoZW4oKHsgY3JlYXRlRXh0ZXJuYWxBdXRoIH0pID0+XG4gICAgICAgIGNyZWF0ZUV4dGVybmFsQXV0aChoYXNzVXJsKVxuICAgICAgKVxuICA6ICgpID0+XG4gICAgICBnZXRBdXRoKHtcbiAgICAgICAgaGFzc1VybCxcbiAgICAgICAgc2F2ZVRva2VucyxcbiAgICAgICAgbG9hZFRva2VuczogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKGxvYWRUb2tlbnMoKSksXG4gICAgICAgIGF1dGhDb2RlOiB3aW5kb3cuaGFzc05vQXV0aCwgLy8gZm9yIElvQlxuICAgICAgfSk7XG5cbmNvbnN0IGNvbm5Qcm9tID0gYXN5bmMgKGF1dGgpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBjb25uID0gYXdhaXQgY3JlYXRlQ29ubmVjdGlvbih7IGF1dGggfSk7XG4gICAgY2xlYXJVcmxQYXJhbXMoKTtcbiAgICByZXR1cm4geyBhdXRoLCBjb25uIH07XG4gIH0gY2F0Y2ggKGVycjogYW55KSB7XG4gICAgaWYgKGVyciAhPT0gRVJSX0lOVkFMSURfQVVUSCkge1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cbiAgICAvLyBXZSBjYW4gZ2V0IGludmFsaWQgYXV0aCBpZiBhdXRoIHRva2VucyB3ZXJlIHN0b3JlZCB0aGF0IGFyZSBubyBsb25nZXIgdmFsaWRcbiAgICBpZiAoaXNFeHRlcm5hbCkge1xuICAgICAgLy8gVGVsbCB0aGUgZXh0ZXJuYWwgYXBwIHRvIGZvcmNlIHJlZnJlc2ggdGhlIGFjY2VzcyB0b2tlbnMuXG4gICAgICAvLyBUaGlzIHNob3VsZCB0cmlnZ2VyIHRoZWlyIHVuYXV0aG9yaXplZCBoYW5kbGluZy5cbiAgICAgIGF3YWl0IGF1dGgucmVmcmVzaEFjY2Vzc1Rva2VuKHRydWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBDbGVhciBzdG9yZWQgdG9rZW5zLlxuICAgICAgc2F2ZVRva2VucyhudWxsKTtcbiAgICB9XG4gICAgYXV0aCA9IGF3YWl0IGF1dGhQcm9tKCk7XG4gICAgY29uc3QgY29ubiA9IGF3YWl0IGNyZWF0ZUNvbm5lY3Rpb24oeyBhdXRoIH0pO1xuICAgIGNsZWFyVXJsUGFyYW1zKCk7XG4gICAgcmV0dXJuIHsgYXV0aCwgY29ubiB9O1xuICB9XG59O1xuXG5pZiAoX19ERVZfXyAmJiBcInBlcmZvcm1hbmNlXCIgaW4gd2luZG93KSB7XG4gIC8vIFJlbW92ZSBhZG9wdGVkU3R5bGVTaGVldHMgc28gc3R5bGUgaW5zcGVjdG9yIHdvcmtzIG9uIHNoYWRvdyBET00uXG4gIC8vIEB0cy1pZ25vcmVcbiAgZGVsZXRlIERvY3VtZW50LnByb3RvdHlwZS5hZG9wdGVkU3R5bGVTaGVldHM7XG4gIHBlcmZvcm1hbmNlLm1hcmsoXCJoYXNzLXN0YXJ0XCIpO1xufVxud2luZG93Lmhhc3NDb25uZWN0aW9uID0gKGF1dGhQcm9tKCkgYXMgUHJvbWlzZTxBdXRoIHwgRXh0ZXJuYWxBdXRoPikudGhlbihcbiAgY29ublByb21cbik7XG5cbi8vIFRoaXMgaXMgc2V0IGlmIGFwcCB3YXMgc29tZWhvdyBsb2FkZWQgYmVmb3JlIGNvcmUuXG5pZiAod2luZG93Lmhhc3NDb25uZWN0aW9uUmVhZHkpIHtcbiAgd2luZG93Lmhhc3NDb25uZWN0aW9uUmVhZHkod2luZG93Lmhhc3NDb25uZWN0aW9uKTtcbn1cblxuLy8gU3RhcnQgZmV0Y2hpbmcgc29tZSBvZiB0aGUgZGF0YSB0aGF0IHdlIHdpbGwgbmVlZC5cbndpbmRvdy5oYXNzQ29ubmVjdGlvbi50aGVuKCh7IGNvbm4gfSkgPT4ge1xuICBjb25zdCBub29wID0gKCkgPT4ge1xuICAgIC8vIGRvIG5vdGhpbmdcbiAgfTtcbiAgc3Vic2NyaWJlRW50aXRpZXMoY29ubiwgbm9vcCk7XG4gIHN1YnNjcmliZUNvbmZpZyhjb25uLCBub29wKTtcbiAgc3Vic2NyaWJlU2VydmljZXMoY29ubiwgbm9vcCk7XG4gIHN1YnNjcmliZVBhbmVscyhjb25uLCBub29wKTtcbiAgc3Vic2NyaWJlVGhlbWVzKGNvbm4sIG5vb3ApO1xuICBzdWJzY3JpYmVVc2VyKGNvbm4sIG5vb3ApO1xuICBzdWJzY3JpYmVGcm9udGVuZFVzZXJEYXRhKGNvbm4sIFwiY29yZVwiLCBub29wKTtcblxuICBpZiAobG9jYXRpb24ucGF0aG5hbWUgPT09IFwiL1wiIHx8IGxvY2F0aW9uLnBhdGhuYW1lLnN0YXJ0c1dpdGgoXCIvbG92ZWxhY2UvXCIpKSB7XG4gICAgY29uc3QgbGxXaW5kb3cgPSB3aW5kb3cgYXMgV2luZG93V2l0aExvdmVsYWNlUHJvbTtcbiAgICBsbFdpbmRvdy5sbENvbmZQcm9tID0gZmV0Y2hDb25maWcoY29ubiwgbnVsbCwgZmFsc2UpO1xuICAgIGxsV2luZG93LmxsQ29uZlByb20uY2F0Y2goKCkgPT4ge1xuICAgICAgLy8gSWdub3JlIGl0LCBpdCBpcyBoYW5kbGVkIGJ5IExvdmVsYWNlIHBhbmVsLlxuICAgIH0pO1xuICAgIGxsV2luZG93LmxsUmVzUHJvbSA9IGZldGNoUmVzb3VyY2VzKGNvbm4pO1xuICB9XG59KTtcblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLCAoZSkgPT4ge1xuICBpZiAoIV9fREVWX18gJiYgZS5tZXNzYWdlID09PSBcIlJlc2l6ZU9ic2VydmVyIGxvb3AgbGltaXQgZXhjZWVkZWRcIikge1xuICAgIGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgaG9tZUFzc2lzdGFudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJob21lLWFzc2lzdGFudFwiKSBhcyBhbnk7XG4gIGlmIChcbiAgICBob21lQXNzaXN0YW50ICYmXG4gICAgaG9tZUFzc2lzdGFudC5oYXNzICYmXG4gICAgKGhvbWVBc3Npc3RhbnQuaGFzcyBhcyBIb21lQXNzaXN0YW50KS5jYWxsU2VydmljZVxuICApIHtcbiAgICBob21lQXNzaXN0YW50Lmhhc3MuY2FsbFNlcnZpY2UoXCJzeXN0ZW1fbG9nXCIsIFwid3JpdGVcIiwge1xuICAgICAgbG9nZ2VyOiBgZnJvbnRlbmQuJHtcbiAgICAgICAgX19ERVZfXyA/IFwianNfZGV2XCIgOiBcImpzXCJcbiAgICAgIH0uJHtfX0JVSUxEX199LiR7X19WRVJTSU9OX18ucmVwbGFjZShcIi5cIiwgXCJcIil9YCxcbiAgICAgIG1lc3NhZ2U6IGAke2UuZmlsZW5hbWV9OiR7ZS5saW5lbm99OiR7ZS5jb2xub30gJHtlLm1lc3NhZ2V9YCxcbiAgICB9KTtcbiAgfVxufSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/entrypoints/core.ts\n");

/***/ }),

/***/ "./src/resources/array.flat.polyfill.ts":
/*!**********************************************!*\
  !*** ./src/resources/array.flat.polyfill.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* eslint-disable no-extend-native */\n\n // for Babel to treat as a module\n\nif (!Array.prototype.flat) {\n  Object.defineProperty(Array.prototype, \"flat\", {\n    configurable: true,\n    writable: true,\n    value: function (...args) {\n      const depth = typeof args[0] === \"undefined\" ? 1 : Number(args[0]) || 0;\n      const result = [];\n      const forEach = result.forEach;\n      const flatDeep = (arr, dpth) => {\n        forEach.call(arr, val => {\n          if (dpth > 0 && Array.isArray(val)) {\n            flatDeep(val, dpth - 1);\n          } else {\n            result.push(val);\n          }\n        });\n      };\n      flatDeep(this, depth);\n      return result;\n    }\n  });\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcmVzb3VyY2VzL2FycmF5LmZsYXQucG9seWZpbGwudHMuanMiLCJtYXBwaW5ncyI6IjtBQUFBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaG9tZS1hc3Npc3RhbnQtZnJvbnRlbmQvLi9zcmMvcmVzb3VyY2VzL2FycmF5LmZsYXQucG9seWZpbGwudHM/NWZlNSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBuby1leHRlbmQtbmF0aXZlICovXG5cbmV4cG9ydCB7fTsgLy8gZm9yIEJhYmVsIHRvIHRyZWF0IGFzIGEgbW9kdWxlXG5cbmlmICghQXJyYXkucHJvdG90eXBlLmZsYXQpIHtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEFycmF5LnByb3RvdHlwZSwgXCJmbGF0XCIsIHtcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgd3JpdGFibGU6IHRydWUsXG4gICAgdmFsdWU6IGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgICBjb25zdCBkZXB0aCA9IHR5cGVvZiBhcmdzWzBdID09PSBcInVuZGVmaW5lZFwiID8gMSA6IE51bWJlcihhcmdzWzBdKSB8fCAwO1xuICAgICAgY29uc3QgcmVzdWx0ID0gW107XG4gICAgICBjb25zdCBmb3JFYWNoID0gcmVzdWx0LmZvckVhY2g7XG5cbiAgICAgIGNvbnN0IGZsYXREZWVwID0gKGFycjogQXJyYXk8YW55PiwgZHB0aDogbnVtYmVyKSA9PiB7XG4gICAgICAgIGZvckVhY2guY2FsbChhcnIsICh2YWwpID0+IHtcbiAgICAgICAgICBpZiAoZHB0aCA+IDAgJiYgQXJyYXkuaXNBcnJheSh2YWwpKSB7XG4gICAgICAgICAgICBmbGF0RGVlcCh2YWwsIGRwdGggLSAxKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzdWx0LnB1c2godmFsKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfTtcblxuICAgICAgZmxhdERlZXAodGhpcywgZGVwdGgpO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9LFxuICB9KTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/resources/array.flat.polyfill.ts\n");

/***/ }),

/***/ "./src/resources/compatibility.ts":
/*!****************************************!*\
  !*** ./src/resources/compatibility.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* empty file that we alias some files to that we don't want to include */\n\n // for Babel to treat as a module//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcmVzb3VyY2VzL2NvbXBhdGliaWxpdHkudHMuanMiLCJtYXBwaW5ncyI6IjtBQUFBOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaG9tZS1hc3Npc3RhbnQtZnJvbnRlbmQvLi9zcmMvdXRpbC9lbXB0eS5qcz8xYWM2Il0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVtcHR5IGZpbGUgdGhhdCB3ZSBhbGlhcyBzb21lIGZpbGVzIHRvIHRoYXQgd2UgZG9uJ3Qgd2FudCB0byBpbmNsdWRlICovXG5cbmV4cG9ydCB7fTsgLy8gZm9yIEJhYmVsIHRvIHRyZWF0IGFzIGEgbW9kdWxlXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/resources/compatibility.ts\n");

/***/ }),

/***/ "./src/resources/safari-14-attachshadow-patch.ts":
/*!*******************************************************!*\
  !*** ./src/resources/safari-14-attachshadow-patch.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n// https://github.com/home-assistant/frontend/pull/7031\n\n // for Babel to treat as a module\n\nconst isSafari14 = /^((?!chrome|android).)*version\\/14\\.0\\s.*safari/i.test(navigator.userAgent);\nif (isSafari14) {\n  const origAttachShadow = window.Element.prototype.attachShadow;\n  window.Element.prototype.attachShadow = function (init) {\n    if (init && init.delegatesFocus) {\n      delete init.delegatesFocus;\n    }\n    return origAttachShadow.apply(this, [init]);\n  };\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcmVzb3VyY2VzL3NhZmFyaS0xNC1hdHRhY2hzaGFkb3ctcGF0Y2gudHMuanMiLCJtYXBwaW5ncyI6IjtBQUFBOztBQUVBOztBQUVBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaG9tZS1hc3Npc3RhbnQtZnJvbnRlbmQvLi9zcmMvcmVzb3VyY2VzL3NhZmFyaS0xNC1hdHRhY2hzaGFkb3ctcGF0Y2gudHM/OWEzMSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBodHRwczovL2dpdGh1Yi5jb20vaG9tZS1hc3Npc3RhbnQvZnJvbnRlbmQvcHVsbC83MDMxXG5cbmV4cG9ydCB7fTsgLy8gZm9yIEJhYmVsIHRvIHRyZWF0IGFzIGEgbW9kdWxlXG5cbmNvbnN0IGlzU2FmYXJpMTQgPSAvXigoPyFjaHJvbWV8YW5kcm9pZCkuKSp2ZXJzaW9uXFwvMTRcXC4wXFxzLipzYWZhcmkvaS50ZXN0KFxuICBuYXZpZ2F0b3IudXNlckFnZW50XG4pO1xuXG5pZiAoaXNTYWZhcmkxNCkge1xuICBjb25zdCBvcmlnQXR0YWNoU2hhZG93ID0gd2luZG93LkVsZW1lbnQucHJvdG90eXBlLmF0dGFjaFNoYWRvdztcbiAgd2luZG93LkVsZW1lbnQucHJvdG90eXBlLmF0dGFjaFNoYWRvdyA9IGZ1bmN0aW9uIChpbml0KSB7XG4gICAgaWYgKGluaXQgJiYgaW5pdC5kZWxlZ2F0ZXNGb2N1cykge1xuICAgICAgZGVsZXRlIGluaXQuZGVsZWdhdGVzRm9jdXM7XG4gICAgfVxuICAgIHJldHVybiBvcmlnQXR0YWNoU2hhZG93LmFwcGx5KHRoaXMsIFtpbml0XSk7XG4gIH07XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/resources/safari-14-attachshadow-patch.ts\n");

/***/ }),

/***/ "./node_modules/home-assistant-js-websocket/dist/auth.js":
/*!***************************************************************!*\
  !*** ./node_modules/home-assistant-js-websocket/dist/auth.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Auth: () => (/* binding */ Auth),\n/* harmony export */   createLongLivedTokenAuth: () => (/* binding */ createLongLivedTokenAuth),\n/* harmony export */   genClientId: () => (/* binding */ genClientId),\n/* harmony export */   genExpires: () => (/* binding */ genExpires),\n/* harmony export */   getAuth: () => (/* binding */ getAuth)\n/* harmony export */ });\n/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./util.js */ \"./node_modules/home-assistant-js-websocket/dist/util.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./errors.js */ \"./node_modules/home-assistant-js-websocket/dist/errors.js\");\n\n\nconst genClientId = () => `${location.protocol}//${location.host}/`;\nconst genExpires = expires_in => {\n  return expires_in * 1000 + Date.now();\n};\nfunction genRedirectUrl() {\n  // Get current url but without # part.\n  const {\n    protocol,\n    host,\n    pathname,\n    search\n  } = location;\n  return `${protocol}//${host}${pathname}${search}`;\n}\nfunction genAuthorizeUrl(hassUrl, clientId, redirectUrl, state) {\n  let authorizeUrl = `${hassUrl}/auth/authorize?response_type=code&redirect_uri=${encodeURIComponent(redirectUrl)}`;\n  if (clientId !== null) {\n    authorizeUrl += `&client_id=${encodeURIComponent(clientId)}`;\n  }\n  if (state) {\n    authorizeUrl += `&state=${encodeURIComponent(state)}`;\n  }\n  return authorizeUrl;\n}\nfunction redirectAuthorize(hassUrl, clientId, redirectUrl, state) {\n  // Add either ?auth_callback=1 or &auth_callback=1\n  redirectUrl += (redirectUrl.includes(\"?\") ? \"&\" : \"?\") + \"auth_callback=1\";\n  document.location.href = genAuthorizeUrl(hassUrl, clientId, redirectUrl, state);\n}\nasync function tokenRequest(hassUrl, clientId, data) {\n  // Browsers don't allow fetching tokens from https -> http.\n  // Throw an error because it's a pain to debug this.\n  // Guard against not working in node.\n  const l = typeof location !== \"undefined\" && location;\n  if (l && l.protocol === \"https:\") {\n    // Ensure that the hassUrl is hosted on https.\n    const a = document.createElement(\"a\");\n    a.href = hassUrl;\n    if (a.protocol === \"http:\" && a.hostname !== \"localhost\") {\n      throw _errors_js__WEBPACK_IMPORTED_MODULE_0__.ERR_INVALID_HTTPS_TO_HTTP;\n    }\n  }\n  const formData = new FormData();\n  if (clientId !== null) {\n    formData.append(\"client_id\", clientId);\n  }\n  Object.keys(data).forEach(key => {\n    formData.append(key, data[key]);\n  });\n  const resp = await fetch(`${hassUrl}/auth/token`, {\n    method: \"POST\",\n    credentials: \"same-origin\",\n    body: formData\n  });\n  if (!resp.ok) {\n    throw resp.status === 400 /* auth invalid */ || resp.status === 403 /* user not active */ ? _errors_js__WEBPACK_IMPORTED_MODULE_0__.ERR_INVALID_AUTH : new Error(\"Unable to fetch tokens\");\n  }\n  const tokens = await resp.json();\n  tokens.hassUrl = hassUrl;\n  tokens.clientId = clientId;\n  tokens.expires = genExpires(tokens.expires_in);\n  return tokens;\n}\nfunction fetchToken(hassUrl, clientId, code) {\n  return tokenRequest(hassUrl, clientId, {\n    code,\n    grant_type: \"authorization_code\"\n  });\n}\nfunction encodeOAuthState(state) {\n  return btoa(JSON.stringify(state));\n}\nfunction decodeOAuthState(encoded) {\n  return JSON.parse(atob(encoded));\n}\nclass Auth {\n  constructor(data, saveTokens) {\n    this.data = data;\n    this._saveTokens = saveTokens;\n  }\n  get wsUrl() {\n    // Convert from http:// -> ws://, https:// -> wss://\n    return `ws${this.data.hassUrl.substr(4)}/api/websocket`;\n  }\n  get accessToken() {\n    return this.data.access_token;\n  }\n  get expired() {\n    return Date.now() > this.data.expires;\n  }\n  /**\n   * Refresh the access token.\n   */\n  async refreshAccessToken() {\n    if (!this.data.refresh_token) throw new Error(\"No refresh_token\");\n    const data = await tokenRequest(this.data.hassUrl, this.data.clientId, {\n      grant_type: \"refresh_token\",\n      refresh_token: this.data.refresh_token\n    });\n    // Access token response does not contain refresh token.\n    data.refresh_token = this.data.refresh_token;\n    this.data = data;\n    if (this._saveTokens) this._saveTokens(data);\n  }\n  /**\n   * Revoke the refresh & access tokens.\n   */\n  async revoke() {\n    if (!this.data.refresh_token) throw new Error(\"No refresh_token to revoke\");\n    const formData = new FormData();\n    formData.append(\"token\", this.data.refresh_token);\n    // There is no error checking, as revoke will always return 200\n    await fetch(`${this.data.hassUrl}/auth/revoke`, {\n      method: \"POST\",\n      credentials: \"same-origin\",\n      body: formData\n    });\n    if (this._saveTokens) {\n      this._saveTokens(null);\n    }\n  }\n}\nfunction createLongLivedTokenAuth(hassUrl, access_token) {\n  return new Auth({\n    hassUrl,\n    clientId: null,\n    expires: Date.now() + 1e11,\n    refresh_token: \"\",\n    access_token,\n    expires_in: 1e11\n  });\n}\nasync function getAuth(options = {}) {\n  let data;\n  let hassUrl = options.hassUrl;\n  // Strip trailing slash.\n  if (hassUrl && hassUrl[hassUrl.length - 1] === \"/\") {\n    hassUrl = hassUrl.substr(0, hassUrl.length - 1);\n  }\n  const clientId = options.clientId !== undefined ? options.clientId : genClientId();\n  // Use auth code if it was passed in\n  if (!data && options.authCode && hassUrl) {\n    data = await fetchToken(hassUrl, clientId, options.authCode);\n    if (options.saveTokens) {\n      options.saveTokens(data);\n    }\n  }\n  // Check if we came back from an authorize redirect\n  if (!data) {\n    const query = (0,_util_js__WEBPACK_IMPORTED_MODULE_1__.parseQuery)(location.search.substr(1));\n    // Check if we got redirected here from authorize page\n    if (\"auth_callback\" in query) {\n      // Restore state\n      const state = decodeOAuthState(query.state);\n      data = await fetchToken(state.hassUrl, state.clientId, query.code);\n      if (options.saveTokens) {\n        options.saveTokens(data);\n      }\n    }\n  }\n  // Check for stored tokens\n  if (!data && options.loadTokens) {\n    data = await options.loadTokens();\n  }\n  if (data) {\n    return new Auth(data, options.saveTokens);\n  }\n  if (hassUrl === undefined) {\n    throw _errors_js__WEBPACK_IMPORTED_MODULE_0__.ERR_HASS_HOST_REQUIRED;\n  }\n  // If no tokens found but a hassUrl was passed in, let's go get some tokens!\n  redirectAuthorize(hassUrl, clientId, options.redirectUrl || genRedirectUrl(), encodeOAuthState({\n    hassUrl,\n    clientId\n  }));\n  // Just don't resolve while we navigate to next page\n  return new Promise(() => {});\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvaG9tZS1hc3Npc3RhbnQtanMtd2Vic29ja2V0L2Rpc3QvYXV0aC5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaG9tZS1hc3Npc3RhbnQtZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvaG9tZS1hc3Npc3RhbnQtanMtd2Vic29ja2V0L2Rpc3QvYXV0aC5qcz9iNjgzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHBhcnNlUXVlcnkgfSBmcm9tIFwiLi91dGlsLmpzXCI7XG5pbXBvcnQgeyBFUlJfSEFTU19IT1NUX1JFUVVJUkVELCBFUlJfSU5WQUxJRF9BVVRILCBFUlJfSU5WQUxJRF9IVFRQU19UT19IVFRQLCB9IGZyb20gXCIuL2Vycm9ycy5qc1wiO1xuZXhwb3J0IGNvbnN0IGdlbkNsaWVudElkID0gKCkgPT4gYCR7bG9jYXRpb24ucHJvdG9jb2x9Ly8ke2xvY2F0aW9uLmhvc3R9L2A7XG5leHBvcnQgY29uc3QgZ2VuRXhwaXJlcyA9IChleHBpcmVzX2luKSA9PiB7XG4gICAgcmV0dXJuIGV4cGlyZXNfaW4gKiAxMDAwICsgRGF0ZS5ub3coKTtcbn07XG5mdW5jdGlvbiBnZW5SZWRpcmVjdFVybCgpIHtcbiAgICAvLyBHZXQgY3VycmVudCB1cmwgYnV0IHdpdGhvdXQgIyBwYXJ0LlxuICAgIGNvbnN0IHsgcHJvdG9jb2wsIGhvc3QsIHBhdGhuYW1lLCBzZWFyY2ggfSA9IGxvY2F0aW9uO1xuICAgIHJldHVybiBgJHtwcm90b2NvbH0vLyR7aG9zdH0ke3BhdGhuYW1lfSR7c2VhcmNofWA7XG59XG5mdW5jdGlvbiBnZW5BdXRob3JpemVVcmwoaGFzc1VybCwgY2xpZW50SWQsIHJlZGlyZWN0VXJsLCBzdGF0ZSkge1xuICAgIGxldCBhdXRob3JpemVVcmwgPSBgJHtoYXNzVXJsfS9hdXRoL2F1dGhvcml6ZT9yZXNwb25zZV90eXBlPWNvZGUmcmVkaXJlY3RfdXJpPSR7ZW5jb2RlVVJJQ29tcG9uZW50KHJlZGlyZWN0VXJsKX1gO1xuICAgIGlmIChjbGllbnRJZCAhPT0gbnVsbCkge1xuICAgICAgICBhdXRob3JpemVVcmwgKz0gYCZjbGllbnRfaWQ9JHtlbmNvZGVVUklDb21wb25lbnQoY2xpZW50SWQpfWA7XG4gICAgfVxuICAgIGlmIChzdGF0ZSkge1xuICAgICAgICBhdXRob3JpemVVcmwgKz0gYCZzdGF0ZT0ke2VuY29kZVVSSUNvbXBvbmVudChzdGF0ZSl9YDtcbiAgICB9XG4gICAgcmV0dXJuIGF1dGhvcml6ZVVybDtcbn1cbmZ1bmN0aW9uIHJlZGlyZWN0QXV0aG9yaXplKGhhc3NVcmwsIGNsaWVudElkLCByZWRpcmVjdFVybCwgc3RhdGUpIHtcbiAgICAvLyBBZGQgZWl0aGVyID9hdXRoX2NhbGxiYWNrPTEgb3IgJmF1dGhfY2FsbGJhY2s9MVxuICAgIHJlZGlyZWN0VXJsICs9IChyZWRpcmVjdFVybC5pbmNsdWRlcyhcIj9cIikgPyBcIiZcIiA6IFwiP1wiKSArIFwiYXV0aF9jYWxsYmFjaz0xXCI7XG4gICAgZG9jdW1lbnQubG9jYXRpb24uaHJlZiA9IGdlbkF1dGhvcml6ZVVybChoYXNzVXJsLCBjbGllbnRJZCwgcmVkaXJlY3RVcmwsIHN0YXRlKTtcbn1cbmFzeW5jIGZ1bmN0aW9uIHRva2VuUmVxdWVzdChoYXNzVXJsLCBjbGllbnRJZCwgZGF0YSkge1xuICAgIC8vIEJyb3dzZXJzIGRvbid0IGFsbG93IGZldGNoaW5nIHRva2VucyBmcm9tIGh0dHBzIC0+IGh0dHAuXG4gICAgLy8gVGhyb3cgYW4gZXJyb3IgYmVjYXVzZSBpdCdzIGEgcGFpbiB0byBkZWJ1ZyB0aGlzLlxuICAgIC8vIEd1YXJkIGFnYWluc3Qgbm90IHdvcmtpbmcgaW4gbm9kZS5cbiAgICBjb25zdCBsID0gdHlwZW9mIGxvY2F0aW9uICE9PSBcInVuZGVmaW5lZFwiICYmIGxvY2F0aW9uO1xuICAgIGlmIChsICYmIGwucHJvdG9jb2wgPT09IFwiaHR0cHM6XCIpIHtcbiAgICAgICAgLy8gRW5zdXJlIHRoYXQgdGhlIGhhc3NVcmwgaXMgaG9zdGVkIG9uIGh0dHBzLlxuICAgICAgICBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XG4gICAgICAgIGEuaHJlZiA9IGhhc3NVcmw7XG4gICAgICAgIGlmIChhLnByb3RvY29sID09PSBcImh0dHA6XCIgJiYgYS5ob3N0bmFtZSAhPT0gXCJsb2NhbGhvc3RcIikge1xuICAgICAgICAgICAgdGhyb3cgRVJSX0lOVkFMSURfSFRUUFNfVE9fSFRUUDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgIGlmIChjbGllbnRJZCAhPT0gbnVsbCkge1xuICAgICAgICBmb3JtRGF0YS5hcHBlbmQoXCJjbGllbnRfaWRcIiwgY2xpZW50SWQpO1xuICAgIH1cbiAgICBPYmplY3Qua2V5cyhkYXRhKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgICAgZm9ybURhdGEuYXBwZW5kKGtleSwgZGF0YVtrZXldKTtcbiAgICB9KTtcbiAgICBjb25zdCByZXNwID0gYXdhaXQgZmV0Y2goYCR7aGFzc1VybH0vYXV0aC90b2tlbmAsIHtcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgY3JlZGVudGlhbHM6IFwic2FtZS1vcmlnaW5cIixcbiAgICAgICAgYm9keTogZm9ybURhdGEsXG4gICAgfSk7XG4gICAgaWYgKCFyZXNwLm9rKSB7XG4gICAgICAgIHRocm93IHJlc3Auc3RhdHVzID09PSA0MDAgLyogYXV0aCBpbnZhbGlkICovIHx8XG4gICAgICAgICAgICByZXNwLnN0YXR1cyA9PT0gNDAzIC8qIHVzZXIgbm90IGFjdGl2ZSAqL1xuICAgICAgICAgICAgPyBFUlJfSU5WQUxJRF9BVVRIXG4gICAgICAgICAgICA6IG5ldyBFcnJvcihcIlVuYWJsZSB0byBmZXRjaCB0b2tlbnNcIik7XG4gICAgfVxuICAgIGNvbnN0IHRva2VucyA9IGF3YWl0IHJlc3AuanNvbigpO1xuICAgIHRva2Vucy5oYXNzVXJsID0gaGFzc1VybDtcbiAgICB0b2tlbnMuY2xpZW50SWQgPSBjbGllbnRJZDtcbiAgICB0b2tlbnMuZXhwaXJlcyA9IGdlbkV4cGlyZXModG9rZW5zLmV4cGlyZXNfaW4pO1xuICAgIHJldHVybiB0b2tlbnM7XG59XG5mdW5jdGlvbiBmZXRjaFRva2VuKGhhc3NVcmwsIGNsaWVudElkLCBjb2RlKSB7XG4gICAgcmV0dXJuIHRva2VuUmVxdWVzdChoYXNzVXJsLCBjbGllbnRJZCwge1xuICAgICAgICBjb2RlLFxuICAgICAgICBncmFudF90eXBlOiBcImF1dGhvcml6YXRpb25fY29kZVwiLFxuICAgIH0pO1xufVxuZnVuY3Rpb24gZW5jb2RlT0F1dGhTdGF0ZShzdGF0ZSkge1xuICAgIHJldHVybiBidG9hKEpTT04uc3RyaW5naWZ5KHN0YXRlKSk7XG59XG5mdW5jdGlvbiBkZWNvZGVPQXV0aFN0YXRlKGVuY29kZWQpIHtcbiAgICByZXR1cm4gSlNPTi5wYXJzZShhdG9iKGVuY29kZWQpKTtcbn1cbmV4cG9ydCBjbGFzcyBBdXRoIHtcbiAgICBjb25zdHJ1Y3RvcihkYXRhLCBzYXZlVG9rZW5zKSB7XG4gICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gICAgICAgIHRoaXMuX3NhdmVUb2tlbnMgPSBzYXZlVG9rZW5zO1xuICAgIH1cbiAgICBnZXQgd3NVcmwoKSB7XG4gICAgICAgIC8vIENvbnZlcnQgZnJvbSBodHRwOi8vIC0+IHdzOi8vLCBodHRwczovLyAtPiB3c3M6Ly9cbiAgICAgICAgcmV0dXJuIGB3cyR7dGhpcy5kYXRhLmhhc3NVcmwuc3Vic3RyKDQpfS9hcGkvd2Vic29ja2V0YDtcbiAgICB9XG4gICAgZ2V0IGFjY2Vzc1Rva2VuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLmFjY2Vzc190b2tlbjtcbiAgICB9XG4gICAgZ2V0IGV4cGlyZWQoKSB7XG4gICAgICAgIHJldHVybiBEYXRlLm5vdygpID4gdGhpcy5kYXRhLmV4cGlyZXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlZnJlc2ggdGhlIGFjY2VzcyB0b2tlbi5cbiAgICAgKi9cbiAgICBhc3luYyByZWZyZXNoQWNjZXNzVG9rZW4oKSB7XG4gICAgICAgIGlmICghdGhpcy5kYXRhLnJlZnJlc2hfdG9rZW4pXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyByZWZyZXNoX3Rva2VuXCIpO1xuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgdG9rZW5SZXF1ZXN0KHRoaXMuZGF0YS5oYXNzVXJsLCB0aGlzLmRhdGEuY2xpZW50SWQsIHtcbiAgICAgICAgICAgIGdyYW50X3R5cGU6IFwicmVmcmVzaF90b2tlblwiLFxuICAgICAgICAgICAgcmVmcmVzaF90b2tlbjogdGhpcy5kYXRhLnJlZnJlc2hfdG9rZW4sXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBBY2Nlc3MgdG9rZW4gcmVzcG9uc2UgZG9lcyBub3QgY29udGFpbiByZWZyZXNoIHRva2VuLlxuICAgICAgICBkYXRhLnJlZnJlc2hfdG9rZW4gPSB0aGlzLmRhdGEucmVmcmVzaF90b2tlbjtcbiAgICAgICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgICAgICAgaWYgKHRoaXMuX3NhdmVUb2tlbnMpXG4gICAgICAgICAgICB0aGlzLl9zYXZlVG9rZW5zKGRhdGEpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXZva2UgdGhlIHJlZnJlc2ggJiBhY2Nlc3MgdG9rZW5zLlxuICAgICAqL1xuICAgIGFzeW5jIHJldm9rZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmRhdGEucmVmcmVzaF90b2tlbilcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIHJlZnJlc2hfdG9rZW4gdG8gcmV2b2tlXCIpO1xuICAgICAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgICAgICBmb3JtRGF0YS5hcHBlbmQoXCJ0b2tlblwiLCB0aGlzLmRhdGEucmVmcmVzaF90b2tlbik7XG4gICAgICAgIC8vIFRoZXJlIGlzIG5vIGVycm9yIGNoZWNraW5nLCBhcyByZXZva2Ugd2lsbCBhbHdheXMgcmV0dXJuIDIwMFxuICAgICAgICBhd2FpdCBmZXRjaChgJHt0aGlzLmRhdGEuaGFzc1VybH0vYXV0aC9yZXZva2VgLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgY3JlZGVudGlhbHM6IFwic2FtZS1vcmlnaW5cIixcbiAgICAgICAgICAgIGJvZHk6IGZvcm1EYXRhLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHRoaXMuX3NhdmVUb2tlbnMpIHtcbiAgICAgICAgICAgIHRoaXMuX3NhdmVUb2tlbnMobnVsbCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlTG9uZ0xpdmVkVG9rZW5BdXRoKGhhc3NVcmwsIGFjY2Vzc190b2tlbikge1xuICAgIHJldHVybiBuZXcgQXV0aCh7XG4gICAgICAgIGhhc3NVcmwsXG4gICAgICAgIGNsaWVudElkOiBudWxsLFxuICAgICAgICBleHBpcmVzOiBEYXRlLm5vdygpICsgMWUxMSxcbiAgICAgICAgcmVmcmVzaF90b2tlbjogXCJcIixcbiAgICAgICAgYWNjZXNzX3Rva2VuLFxuICAgICAgICBleHBpcmVzX2luOiAxZTExLFxuICAgIH0pO1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEF1dGgob3B0aW9ucyA9IHt9KSB7XG4gICAgbGV0IGRhdGE7XG4gICAgbGV0IGhhc3NVcmwgPSBvcHRpb25zLmhhc3NVcmw7XG4gICAgLy8gU3RyaXAgdHJhaWxpbmcgc2xhc2guXG4gICAgaWYgKGhhc3NVcmwgJiYgaGFzc1VybFtoYXNzVXJsLmxlbmd0aCAtIDFdID09PSBcIi9cIikge1xuICAgICAgICBoYXNzVXJsID0gaGFzc1VybC5zdWJzdHIoMCwgaGFzc1VybC5sZW5ndGggLSAxKTtcbiAgICB9XG4gICAgY29uc3QgY2xpZW50SWQgPSBvcHRpb25zLmNsaWVudElkICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNsaWVudElkIDogZ2VuQ2xpZW50SWQoKTtcbiAgICAvLyBVc2UgYXV0aCBjb2RlIGlmIGl0IHdhcyBwYXNzZWQgaW5cbiAgICBpZiAoIWRhdGEgJiYgb3B0aW9ucy5hdXRoQ29kZSAmJiBoYXNzVXJsKSB7XG4gICAgICAgIGRhdGEgPSBhd2FpdCBmZXRjaFRva2VuKGhhc3NVcmwsIGNsaWVudElkLCBvcHRpb25zLmF1dGhDb2RlKTtcbiAgICAgICAgaWYgKG9wdGlvbnMuc2F2ZVRva2Vucykge1xuICAgICAgICAgICAgb3B0aW9ucy5zYXZlVG9rZW5zKGRhdGEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIENoZWNrIGlmIHdlIGNhbWUgYmFjayBmcm9tIGFuIGF1dGhvcml6ZSByZWRpcmVjdFxuICAgIGlmICghZGF0YSkge1xuICAgICAgICBjb25zdCBxdWVyeSA9IHBhcnNlUXVlcnkobG9jYXRpb24uc2VhcmNoLnN1YnN0cigxKSk7XG4gICAgICAgIC8vIENoZWNrIGlmIHdlIGdvdCByZWRpcmVjdGVkIGhlcmUgZnJvbSBhdXRob3JpemUgcGFnZVxuICAgICAgICBpZiAoXCJhdXRoX2NhbGxiYWNrXCIgaW4gcXVlcnkpIHtcbiAgICAgICAgICAgIC8vIFJlc3RvcmUgc3RhdGVcbiAgICAgICAgICAgIGNvbnN0IHN0YXRlID0gZGVjb2RlT0F1dGhTdGF0ZShxdWVyeS5zdGF0ZSk7XG4gICAgICAgICAgICBkYXRhID0gYXdhaXQgZmV0Y2hUb2tlbihzdGF0ZS5oYXNzVXJsLCBzdGF0ZS5jbGllbnRJZCwgcXVlcnkuY29kZSk7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5zYXZlVG9rZW5zKSB7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5zYXZlVG9rZW5zKGRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8vIENoZWNrIGZvciBzdG9yZWQgdG9rZW5zXG4gICAgaWYgKCFkYXRhICYmIG9wdGlvbnMubG9hZFRva2Vucykge1xuICAgICAgICBkYXRhID0gYXdhaXQgb3B0aW9ucy5sb2FkVG9rZW5zKCk7XG4gICAgfVxuICAgIGlmIChkYXRhKSB7XG4gICAgICAgIHJldHVybiBuZXcgQXV0aChkYXRhLCBvcHRpb25zLnNhdmVUb2tlbnMpO1xuICAgIH1cbiAgICBpZiAoaGFzc1VybCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRocm93IEVSUl9IQVNTX0hPU1RfUkVRVUlSRUQ7XG4gICAgfVxuICAgIC8vIElmIG5vIHRva2VucyBmb3VuZCBidXQgYSBoYXNzVXJsIHdhcyBwYXNzZWQgaW4sIGxldCdzIGdvIGdldCBzb21lIHRva2VucyFcbiAgICByZWRpcmVjdEF1dGhvcml6ZShoYXNzVXJsLCBjbGllbnRJZCwgb3B0aW9ucy5yZWRpcmVjdFVybCB8fCBnZW5SZWRpcmVjdFVybCgpLCBlbmNvZGVPQXV0aFN0YXRlKHtcbiAgICAgICAgaGFzc1VybCxcbiAgICAgICAgY2xpZW50SWQsXG4gICAgfSkpO1xuICAgIC8vIEp1c3QgZG9uJ3QgcmVzb2x2ZSB3aGlsZSB3ZSBuYXZpZ2F0ZSB0byBuZXh0IHBhZ2VcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKCkgPT4geyB9KTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/home-assistant-js-websocket/dist/auth.js\n");

/***/ }),

/***/ "./node_modules/home-assistant-js-websocket/dist/collection.js":
/*!*********************************************************************!*\
  !*** ./node_modules/home-assistant-js-websocket/dist/collection.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createCollection: () => (/* binding */ createCollection),\n/* harmony export */   getCollection: () => (/* binding */ getCollection)\n/* harmony export */ });\n/* harmony import */ var _store_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./store.js */ \"./node_modules/home-assistant-js-websocket/dist/store.js\");\n\n// Time to wait to unsubscribe from updates after last subscriber unsubscribes\nconst UNSUB_GRACE_PERIOD = 5000; // 5 seconds\nconst DEBUG = false;\n/**\n *\n * @param conn connection\n * @param key the key to store it on the connection. Must be unique for each collection.\n * @param fetchCollection fetch the current state. If undefined assumes subscribeUpdates receives current state\n * @param subscribeUpdates subscribe to updates on the current state\n * @returns\n */\nconst getCollection = (conn, key, fetchCollection, subscribeUpdates) => {\n  if (conn[key]) {\n    return conn[key];\n  }\n  let active = 0;\n  let unsubProm;\n  let unsubTimer;\n  let store = (0,_store_js__WEBPACK_IMPORTED_MODULE_0__.createStore)();\n  const refresh = () => {\n    if (!fetchCollection) {\n      throw new Error(\"Collection does not support refresh\");\n    }\n    return fetchCollection(conn).then(state => store.setState(state, true));\n  };\n  const refreshSwallow = () => refresh().catch(err => {\n    // Swallow errors if socket is connecting, closing or closed.\n    // We will automatically call refresh again when we re-establish the connection.\n    if (conn.connected) {\n      throw err;\n    }\n  });\n  const setupUpdateSubscription = () => {\n    if (unsubTimer !== undefined) {\n      if (DEBUG) {\n        console.log(`Prevented unsubscribe for ${key}`);\n      }\n      clearTimeout(unsubTimer);\n      unsubTimer = undefined;\n      return;\n    }\n    if (DEBUG) {\n      console.log(`Subscribing to ${key}`);\n    }\n    if (subscribeUpdates) {\n      unsubProm = subscribeUpdates(conn, store);\n    }\n    if (fetchCollection) {\n      // Fetch when connection re-established.\n      conn.addEventListener(\"ready\", refreshSwallow);\n      refreshSwallow();\n    }\n    conn.addEventListener(\"disconnected\", handleDisconnect);\n  };\n  const teardownUpdateSubscription = () => {\n    if (DEBUG) {\n      console.log(`Unsubscribing from ${key}`);\n    }\n    unsubTimer = undefined;\n    // Unsubscribe from changes\n    if (unsubProm) unsubProm.then(unsub => {\n      unsub();\n    });\n    conn.removeEventListener(\"ready\", refresh);\n    conn.removeEventListener(\"disconnected\", handleDisconnect);\n  };\n  const scheduleTeardownUpdateSubscription = () => {\n    if (DEBUG) {\n      console.log(`Scheduling unsubscribing from ${key}`);\n    }\n    unsubTimer = setTimeout(teardownUpdateSubscription, UNSUB_GRACE_PERIOD);\n  };\n  const handleDisconnect = () => {\n    // If we're going to unsubscribe and then lose connection,\n    // just unsubscribe immediately.\n    if (unsubTimer) {\n      clearTimeout(unsubTimer);\n      teardownUpdateSubscription();\n    }\n  };\n  conn[key] = {\n    get state() {\n      return store.state;\n    },\n    refresh,\n    subscribe(subscriber) {\n      active++;\n      if (DEBUG) {\n        console.log(`New subscriber for ${key}. Active subscribers: ${active}`);\n      }\n      // If this was the first subscriber, attach collection\n      if (active === 1) {\n        setupUpdateSubscription();\n      }\n      const unsub = store.subscribe(subscriber);\n      if (store.state !== undefined) {\n        // Don't call it right away so that caller has time\n        // to initialize all the things.\n        setTimeout(() => subscriber(store.state), 0);\n      }\n      return () => {\n        unsub();\n        active--;\n        if (DEBUG) {\n          console.log(`Unsubscribe for ${key}. Active subscribers: ${active}`);\n        }\n        if (!active) {\n          scheduleTeardownUpdateSubscription();\n        }\n      };\n    }\n  };\n  return conn[key];\n};\n// Legacy name. It gets a collection and subscribes.\nconst createCollection = (key, fetchCollection, subscribeUpdates, conn, onChange) => getCollection(conn, key, fetchCollection, subscribeUpdates).subscribe(onChange);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvaG9tZS1hc3Npc3RhbnQtanMtd2Vic29ja2V0L2Rpc3QvY29sbGVjdGlvbi5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ob21lLWFzc2lzdGFudC1mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9ob21lLWFzc2lzdGFudC1qcy13ZWJzb2NrZXQvZGlzdC9jb2xsZWN0aW9uLmpzPzJhZmUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlU3RvcmUgfSBmcm9tIFwiLi9zdG9yZS5qc1wiO1xuLy8gVGltZSB0byB3YWl0IHRvIHVuc3Vic2NyaWJlIGZyb20gdXBkYXRlcyBhZnRlciBsYXN0IHN1YnNjcmliZXIgdW5zdWJzY3JpYmVzXG5jb25zdCBVTlNVQl9HUkFDRV9QRVJJT0QgPSA1MDAwOyAvLyA1IHNlY29uZHNcbmNvbnN0IERFQlVHID0gZmFsc2U7XG4vKipcbiAqXG4gKiBAcGFyYW0gY29ubiBjb25uZWN0aW9uXG4gKiBAcGFyYW0ga2V5IHRoZSBrZXkgdG8gc3RvcmUgaXQgb24gdGhlIGNvbm5lY3Rpb24uIE11c3QgYmUgdW5pcXVlIGZvciBlYWNoIGNvbGxlY3Rpb24uXG4gKiBAcGFyYW0gZmV0Y2hDb2xsZWN0aW9uIGZldGNoIHRoZSBjdXJyZW50IHN0YXRlLiBJZiB1bmRlZmluZWQgYXNzdW1lcyBzdWJzY3JpYmVVcGRhdGVzIHJlY2VpdmVzIGN1cnJlbnQgc3RhdGVcbiAqIEBwYXJhbSBzdWJzY3JpYmVVcGRhdGVzIHN1YnNjcmliZSB0byB1cGRhdGVzIG9uIHRoZSBjdXJyZW50IHN0YXRlXG4gKiBAcmV0dXJuc1xuICovXG5leHBvcnQgY29uc3QgZ2V0Q29sbGVjdGlvbiA9IChjb25uLCBrZXksIGZldGNoQ29sbGVjdGlvbiwgc3Vic2NyaWJlVXBkYXRlcykgPT4ge1xuICAgIGlmIChjb25uW2tleV0pIHtcbiAgICAgICAgcmV0dXJuIGNvbm5ba2V5XTtcbiAgICB9XG4gICAgbGV0IGFjdGl2ZSA9IDA7XG4gICAgbGV0IHVuc3ViUHJvbTtcbiAgICBsZXQgdW5zdWJUaW1lcjtcbiAgICBsZXQgc3RvcmUgPSBjcmVhdGVTdG9yZSgpO1xuICAgIGNvbnN0IHJlZnJlc2ggPSAoKSA9PiB7XG4gICAgICAgIGlmICghZmV0Y2hDb2xsZWN0aW9uKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb2xsZWN0aW9uIGRvZXMgbm90IHN1cHBvcnQgcmVmcmVzaFwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmV0Y2hDb2xsZWN0aW9uKGNvbm4pLnRoZW4oKHN0YXRlKSA9PiBzdG9yZS5zZXRTdGF0ZShzdGF0ZSwgdHJ1ZSkpO1xuICAgIH07XG4gICAgY29uc3QgcmVmcmVzaFN3YWxsb3cgPSAoKSA9PiByZWZyZXNoKCkuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAvLyBTd2FsbG93IGVycm9ycyBpZiBzb2NrZXQgaXMgY29ubmVjdGluZywgY2xvc2luZyBvciBjbG9zZWQuXG4gICAgICAgIC8vIFdlIHdpbGwgYXV0b21hdGljYWxseSBjYWxsIHJlZnJlc2ggYWdhaW4gd2hlbiB3ZSByZS1lc3RhYmxpc2ggdGhlIGNvbm5lY3Rpb24uXG4gICAgICAgIGlmIChjb25uLmNvbm5lY3RlZCkge1xuICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgY29uc3Qgc2V0dXBVcGRhdGVTdWJzY3JpcHRpb24gPSAoKSA9PiB7XG4gICAgICAgIGlmICh1bnN1YlRpbWVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGlmIChERUJVRykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBQcmV2ZW50ZWQgdW5zdWJzY3JpYmUgZm9yICR7a2V5fWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHVuc3ViVGltZXIpO1xuICAgICAgICAgICAgdW5zdWJUaW1lciA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoREVCVUcpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBTdWJzY3JpYmluZyB0byAke2tleX1gKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3Vic2NyaWJlVXBkYXRlcykge1xuICAgICAgICAgICAgdW5zdWJQcm9tID0gc3Vic2NyaWJlVXBkYXRlcyhjb25uLCBzdG9yZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZldGNoQ29sbGVjdGlvbikge1xuICAgICAgICAgICAgLy8gRmV0Y2ggd2hlbiBjb25uZWN0aW9uIHJlLWVzdGFibGlzaGVkLlxuICAgICAgICAgICAgY29ubi5hZGRFdmVudExpc3RlbmVyKFwicmVhZHlcIiwgcmVmcmVzaFN3YWxsb3cpO1xuICAgICAgICAgICAgcmVmcmVzaFN3YWxsb3coKTtcbiAgICAgICAgfVxuICAgICAgICBjb25uLmFkZEV2ZW50TGlzdGVuZXIoXCJkaXNjb25uZWN0ZWRcIiwgaGFuZGxlRGlzY29ubmVjdCk7XG4gICAgfTtcbiAgICBjb25zdCB0ZWFyZG93blVwZGF0ZVN1YnNjcmlwdGlvbiA9ICgpID0+IHtcbiAgICAgICAgaWYgKERFQlVHKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgVW5zdWJzY3JpYmluZyBmcm9tICR7a2V5fWApO1xuICAgICAgICB9XG4gICAgICAgIHVuc3ViVGltZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIC8vIFVuc3Vic2NyaWJlIGZyb20gY2hhbmdlc1xuICAgICAgICBpZiAodW5zdWJQcm9tKVxuICAgICAgICAgICAgdW5zdWJQcm9tLnRoZW4oKHVuc3ViKSA9PiB7XG4gICAgICAgICAgICAgICAgdW5zdWIoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICBjb25uLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJyZWFkeVwiLCByZWZyZXNoKTtcbiAgICAgICAgY29ubi5yZW1vdmVFdmVudExpc3RlbmVyKFwiZGlzY29ubmVjdGVkXCIsIGhhbmRsZURpc2Nvbm5lY3QpO1xuICAgIH07XG4gICAgY29uc3Qgc2NoZWR1bGVUZWFyZG93blVwZGF0ZVN1YnNjcmlwdGlvbiA9ICgpID0+IHtcbiAgICAgICAgaWYgKERFQlVHKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgU2NoZWR1bGluZyB1bnN1YnNjcmliaW5nIGZyb20gJHtrZXl9YCk7XG4gICAgICAgIH1cbiAgICAgICAgdW5zdWJUaW1lciA9IHNldFRpbWVvdXQodGVhcmRvd25VcGRhdGVTdWJzY3JpcHRpb24sIFVOU1VCX0dSQUNFX1BFUklPRCk7XG4gICAgfTtcbiAgICBjb25zdCBoYW5kbGVEaXNjb25uZWN0ID0gKCkgPT4ge1xuICAgICAgICAvLyBJZiB3ZSdyZSBnb2luZyB0byB1bnN1YnNjcmliZSBhbmQgdGhlbiBsb3NlIGNvbm5lY3Rpb24sXG4gICAgICAgIC8vIGp1c3QgdW5zdWJzY3JpYmUgaW1tZWRpYXRlbHkuXG4gICAgICAgIGlmICh1bnN1YlRpbWVyKSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodW5zdWJUaW1lcik7XG4gICAgICAgICAgICB0ZWFyZG93blVwZGF0ZVN1YnNjcmlwdGlvbigpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25uW2tleV0gPSB7XG4gICAgICAgIGdldCBzdGF0ZSgpIHtcbiAgICAgICAgICAgIHJldHVybiBzdG9yZS5zdGF0ZTtcbiAgICAgICAgfSxcbiAgICAgICAgcmVmcmVzaCxcbiAgICAgICAgc3Vic2NyaWJlKHN1YnNjcmliZXIpIHtcbiAgICAgICAgICAgIGFjdGl2ZSsrO1xuICAgICAgICAgICAgaWYgKERFQlVHKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYE5ldyBzdWJzY3JpYmVyIGZvciAke2tleX0uIEFjdGl2ZSBzdWJzY3JpYmVyczogJHthY3RpdmV9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBJZiB0aGlzIHdhcyB0aGUgZmlyc3Qgc3Vic2NyaWJlciwgYXR0YWNoIGNvbGxlY3Rpb25cbiAgICAgICAgICAgIGlmIChhY3RpdmUgPT09IDEpIHtcbiAgICAgICAgICAgICAgICBzZXR1cFVwZGF0ZVN1YnNjcmlwdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdW5zdWIgPSBzdG9yZS5zdWJzY3JpYmUoc3Vic2NyaWJlcik7XG4gICAgICAgICAgICBpZiAoc3RvcmUuc3RhdGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIC8vIERvbid0IGNhbGwgaXQgcmlnaHQgYXdheSBzbyB0aGF0IGNhbGxlciBoYXMgdGltZVxuICAgICAgICAgICAgICAgIC8vIHRvIGluaXRpYWxpemUgYWxsIHRoZSB0aGluZ3MuXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBzdWJzY3JpYmVyKHN0b3JlLnN0YXRlKSwgMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgICAgIHVuc3ViKCk7XG4gICAgICAgICAgICAgICAgYWN0aXZlLS07XG4gICAgICAgICAgICAgICAgaWYgKERFQlVHKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBVbnN1YnNjcmliZSBmb3IgJHtrZXl9LiBBY3RpdmUgc3Vic2NyaWJlcnM6ICR7YWN0aXZlfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIWFjdGl2ZSkge1xuICAgICAgICAgICAgICAgICAgICBzY2hlZHVsZVRlYXJkb3duVXBkYXRlU3Vic2NyaXB0aW9uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICB9O1xuICAgIHJldHVybiBjb25uW2tleV07XG59O1xuLy8gTGVnYWN5IG5hbWUuIEl0IGdldHMgYSBjb2xsZWN0aW9uIGFuZCBzdWJzY3JpYmVzLlxuZXhwb3J0IGNvbnN0IGNyZWF0ZUNvbGxlY3Rpb24gPSAoa2V5LCBmZXRjaENvbGxlY3Rpb24sIHN1YnNjcmliZVVwZGF0ZXMsIGNvbm4sIG9uQ2hhbmdlKSA9PiBnZXRDb2xsZWN0aW9uKGNvbm4sIGtleSwgZmV0Y2hDb2xsZWN0aW9uLCBzdWJzY3JpYmVVcGRhdGVzKS5zdWJzY3JpYmUob25DaGFuZ2UpO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/home-assistant-js-websocket/dist/collection.js\n");

/***/ }),

/***/ "./node_modules/home-assistant-js-websocket/dist/commands.js":
/*!*******************************************************************!*\
  !*** ./node_modules/home-assistant-js-websocket/dist/commands.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   callService: () => (/* binding */ callService),\n/* harmony export */   getConfig: () => (/* binding */ getConfig),\n/* harmony export */   getServices: () => (/* binding */ getServices),\n/* harmony export */   getStates: () => (/* binding */ getStates),\n/* harmony export */   getUser: () => (/* binding */ getUser)\n/* harmony export */ });\n/* harmony import */ var _messages_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./messages.js */ \"./node_modules/home-assistant-js-websocket/dist/messages.js\");\n\nconst getStates = connection => connection.sendMessagePromise(_messages_js__WEBPACK_IMPORTED_MODULE_0__.states());\nconst getServices = connection => connection.sendMessagePromise(_messages_js__WEBPACK_IMPORTED_MODULE_0__.services());\nconst getConfig = connection => connection.sendMessagePromise(_messages_js__WEBPACK_IMPORTED_MODULE_0__.config());\nconst getUser = connection => connection.sendMessagePromise(_messages_js__WEBPACK_IMPORTED_MODULE_0__.user());\nconst callService = (connection, domain, service, serviceData, target) => connection.sendMessagePromise(_messages_js__WEBPACK_IMPORTED_MODULE_0__.callService(domain, service, serviceData, target));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvaG9tZS1hc3Npc3RhbnQtanMtd2Vic29ja2V0L2Rpc3QvY29tbWFuZHMuanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaG9tZS1hc3Npc3RhbnQtZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvaG9tZS1hc3Npc3RhbnQtanMtd2Vic29ja2V0L2Rpc3QvY29tbWFuZHMuanM/NWYyNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBtZXNzYWdlcyBmcm9tIFwiLi9tZXNzYWdlcy5qc1wiO1xuZXhwb3J0IGNvbnN0IGdldFN0YXRlcyA9IChjb25uZWN0aW9uKSA9PiBjb25uZWN0aW9uLnNlbmRNZXNzYWdlUHJvbWlzZShtZXNzYWdlcy5zdGF0ZXMoKSk7XG5leHBvcnQgY29uc3QgZ2V0U2VydmljZXMgPSAoY29ubmVjdGlvbikgPT4gY29ubmVjdGlvbi5zZW5kTWVzc2FnZVByb21pc2UobWVzc2FnZXMuc2VydmljZXMoKSk7XG5leHBvcnQgY29uc3QgZ2V0Q29uZmlnID0gKGNvbm5lY3Rpb24pID0+IGNvbm5lY3Rpb24uc2VuZE1lc3NhZ2VQcm9taXNlKG1lc3NhZ2VzLmNvbmZpZygpKTtcbmV4cG9ydCBjb25zdCBnZXRVc2VyID0gKGNvbm5lY3Rpb24pID0+IGNvbm5lY3Rpb24uc2VuZE1lc3NhZ2VQcm9taXNlKG1lc3NhZ2VzLnVzZXIoKSk7XG5leHBvcnQgY29uc3QgY2FsbFNlcnZpY2UgPSAoY29ubmVjdGlvbiwgZG9tYWluLCBzZXJ2aWNlLCBzZXJ2aWNlRGF0YSwgdGFyZ2V0KSA9PiBjb25uZWN0aW9uLnNlbmRNZXNzYWdlUHJvbWlzZShtZXNzYWdlcy5jYWxsU2VydmljZShkb21haW4sIHNlcnZpY2UsIHNlcnZpY2VEYXRhLCB0YXJnZXQpKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/home-assistant-js-websocket/dist/commands.js\n");

/***/ }),

/***/ "./node_modules/home-assistant-js-websocket/dist/config.js":
/*!*****************************************************************!*\
  !*** ./node_modules/home-assistant-js-websocket/dist/config.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   STATE_FINAL_WRITE: () => (/* binding */ STATE_FINAL_WRITE),\n/* harmony export */   STATE_NOT_RUNNING: () => (/* binding */ STATE_NOT_RUNNING),\n/* harmony export */   STATE_RUNNING: () => (/* binding */ STATE_RUNNING),\n/* harmony export */   STATE_STARTING: () => (/* binding */ STATE_STARTING),\n/* harmony export */   STATE_STOPPING: () => (/* binding */ STATE_STOPPING),\n/* harmony export */   configColl: () => (/* binding */ configColl),\n/* harmony export */   subscribeConfig: () => (/* binding */ subscribeConfig)\n/* harmony export */ });\n/* harmony import */ var _collection_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./collection.js */ \"./node_modules/home-assistant-js-websocket/dist/collection.js\");\n/* harmony import */ var _commands_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./commands.js */ \"./node_modules/home-assistant-js-websocket/dist/commands.js\");\n\n\nfunction processComponentLoaded(state, event) {\n  if (state === undefined) return null;\n  return {\n    components: state.components.concat(event.data.component)\n  };\n}\nconst fetchConfig = conn => (0,_commands_js__WEBPACK_IMPORTED_MODULE_0__.getConfig)(conn);\nconst subscribeUpdates = (conn, store) => Promise.all([conn.subscribeEvents(store.action(processComponentLoaded), \"component_loaded\"), conn.subscribeEvents(() => fetchConfig(conn).then(config => store.setState(config, true)), \"core_config_updated\")]).then(unsubs => () => unsubs.forEach(unsub => unsub()));\nconst configColl = conn => (0,_collection_js__WEBPACK_IMPORTED_MODULE_1__.getCollection)(conn, \"_cnf\", fetchConfig, subscribeUpdates);\nconst subscribeConfig = (conn, onChange) => configColl(conn).subscribe(onChange);\nconst STATE_NOT_RUNNING = \"NOT_RUNNING\";\nconst STATE_STARTING = \"STARTING\";\nconst STATE_RUNNING = \"RUNNING\";\nconst STATE_STOPPING = \"STOPPING\";\nconst STATE_FINAL_WRITE = \"FINAL_WRITE\";//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvaG9tZS1hc3Npc3RhbnQtanMtd2Vic29ja2V0L2Rpc3QvY29uZmlnLmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ob21lLWFzc2lzdGFudC1mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9ob21lLWFzc2lzdGFudC1qcy13ZWJzb2NrZXQvZGlzdC9jb25maWcuanM/ODkxYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRDb2xsZWN0aW9uIH0gZnJvbSBcIi4vY29sbGVjdGlvbi5qc1wiO1xuaW1wb3J0IHsgZ2V0Q29uZmlnIH0gZnJvbSBcIi4vY29tbWFuZHMuanNcIjtcbmZ1bmN0aW9uIHByb2Nlc3NDb21wb25lbnRMb2FkZWQoc3RhdGUsIGV2ZW50KSB7XG4gICAgaWYgKHN0YXRlID09PSB1bmRlZmluZWQpXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIHJldHVybiB7XG4gICAgICAgIGNvbXBvbmVudHM6IHN0YXRlLmNvbXBvbmVudHMuY29uY2F0KGV2ZW50LmRhdGEuY29tcG9uZW50KSxcbiAgICB9O1xufVxuY29uc3QgZmV0Y2hDb25maWcgPSAoY29ubikgPT4gZ2V0Q29uZmlnKGNvbm4pO1xuY29uc3Qgc3Vic2NyaWJlVXBkYXRlcyA9IChjb25uLCBzdG9yZSkgPT4gUHJvbWlzZS5hbGwoW1xuICAgIGNvbm4uc3Vic2NyaWJlRXZlbnRzKHN0b3JlLmFjdGlvbihwcm9jZXNzQ29tcG9uZW50TG9hZGVkKSwgXCJjb21wb25lbnRfbG9hZGVkXCIpLFxuICAgIGNvbm4uc3Vic2NyaWJlRXZlbnRzKCgpID0+IGZldGNoQ29uZmlnKGNvbm4pLnRoZW4oKGNvbmZpZykgPT4gc3RvcmUuc2V0U3RhdGUoY29uZmlnLCB0cnVlKSksIFwiY29yZV9jb25maWdfdXBkYXRlZFwiKSxcbl0pLnRoZW4oKHVuc3VicykgPT4gKCkgPT4gdW5zdWJzLmZvckVhY2goKHVuc3ViKSA9PiB1bnN1YigpKSk7XG5leHBvcnQgY29uc3QgY29uZmlnQ29sbCA9IChjb25uKSA9PiBnZXRDb2xsZWN0aW9uKGNvbm4sIFwiX2NuZlwiLCBmZXRjaENvbmZpZywgc3Vic2NyaWJlVXBkYXRlcyk7XG5leHBvcnQgY29uc3Qgc3Vic2NyaWJlQ29uZmlnID0gKGNvbm4sIG9uQ2hhbmdlKSA9PiBjb25maWdDb2xsKGNvbm4pLnN1YnNjcmliZShvbkNoYW5nZSk7XG5leHBvcnQgY29uc3QgU1RBVEVfTk9UX1JVTk5JTkcgPSBcIk5PVF9SVU5OSU5HXCI7XG5leHBvcnQgY29uc3QgU1RBVEVfU1RBUlRJTkcgPSBcIlNUQVJUSU5HXCI7XG5leHBvcnQgY29uc3QgU1RBVEVfUlVOTklORyA9IFwiUlVOTklOR1wiO1xuZXhwb3J0IGNvbnN0IFNUQVRFX1NUT1BQSU5HID0gXCJTVE9QUElOR1wiO1xuZXhwb3J0IGNvbnN0IFNUQVRFX0ZJTkFMX1dSSVRFID0gXCJGSU5BTF9XUklURVwiO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/home-assistant-js-websocket/dist/config.js\n");

/***/ }),

/***/ "./node_modules/home-assistant-js-websocket/dist/connection.js":
/*!*********************************************************************!*\
  !*** ./node_modules/home-assistant-js-websocket/dist/connection.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Connection: () => (/* binding */ Connection)\n/* harmony export */ });\n/* harmony import */ var _messages_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./messages.js */ \"./node_modules/home-assistant-js-websocket/dist/messages.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./errors.js */ \"./node_modules/home-assistant-js-websocket/dist/errors.js\");\n/**\n * Connection that wraps a socket and provides an interface to interact with\n * the ioBroker websocket API.\n */\n\n\nconst DEBUG = false;\nclass Connection {\n  constructor(socket, options) {\n    this._handleMessage = event => {\n      let messageGroup = JSON.parse(event.data);\n      if (!Array.isArray(messageGroup)) {\n        messageGroup = [messageGroup];\n      }\n      messageGroup.forEach(message => {\n        if (DEBUG) {\n          console.log(\"Received\", message);\n        }\n        const info = this.commands.get(message.id);\n        switch (message.type) {\n          case \"event\":\n            if (info) {\n              info.callback(message.event);\n            } else {\n              console.warn(`Received event for unknown subscription ${message.id}. Unsubscribing.`);\n              this.sendMessagePromise(_messages_js__WEBPACK_IMPORTED_MODULE_0__.unsubscribeEvents(message.id));\n            }\n            break;\n          case \"result\":\n            // No info is fine. If just sendMessage is used, we did not store promise for result\n            if (info) {\n              if (message.success) {\n                info.resolve(message.result);\n                // Don't remove subscriptions.\n                if (!(\"subscribe\" in info)) {\n                  this.commands.delete(message.id);\n                }\n              } else {\n                info.reject(message.error);\n                this.commands.delete(message.id);\n              }\n            }\n            break;\n          case \"pong\":\n            if (info) {\n              info.resolve();\n              this.commands.delete(message.id);\n            } else {\n              console.warn(`Received unknown pong response ${message.id}`);\n            }\n            break;\n          default:\n            if (DEBUG) {\n              console.warn(\"Unhandled message\", message);\n            }\n        }\n      });\n    };\n    this._handleClose = async () => {\n      const oldCommands = this.commands;\n      // reset to original state except haVersion\n      this.commandId = 1;\n      this.oldSubscriptions = this.commands;\n      this.commands = new Map();\n      this.socket = undefined;\n      // Reject in-flight sendMessagePromise requests\n      oldCommands.forEach(info => {\n        // We don't cancel subscribeEvents commands in flight\n        // as we will be able to recover them.\n        if (!(\"subscribe\" in info)) {\n          info.reject(_messages_js__WEBPACK_IMPORTED_MODULE_0__.error(_errors_js__WEBPACK_IMPORTED_MODULE_1__.ERR_CONNECTION_LOST, \"Connection lost\"));\n        }\n      });\n      if (this.closeRequested) {\n        return;\n      }\n      this.fireEvent(\"disconnected\");\n      // Disable setupRetry, we control it here with auto-backoff\n      const options = Object.assign(Object.assign({}, this.options), {\n        setupRetry: 0\n      });\n      const reconnect = tries => {\n        setTimeout(async () => {\n          if (this.closeRequested) {\n            return;\n          }\n          if (DEBUG) {\n            console.log(\"Trying to reconnect\");\n          }\n          try {\n            const socket = await options.createSocket(options);\n            this._setSocket(socket);\n          } catch (err) {\n            if (this._queuedMessages) {\n              const queuedMessages = this._queuedMessages;\n              this._queuedMessages = undefined;\n              for (const msg of queuedMessages) {\n                if (msg.reject) {\n                  msg.reject(_errors_js__WEBPACK_IMPORTED_MODULE_1__.ERR_CONNECTION_LOST);\n                }\n              }\n            }\n            if (err === _errors_js__WEBPACK_IMPORTED_MODULE_1__.ERR_INVALID_AUTH) {\n              this.fireEvent(\"reconnect-error\", err);\n            } else {\n              reconnect(tries + 1);\n            }\n          }\n        }, Math.min(tries, 5) * 1000);\n      };\n      if (this.suspendReconnectPromise) {\n        await this.suspendReconnectPromise;\n        this.suspendReconnectPromise = undefined;\n        // For the first retry after suspend, we will queue up\n        // all messages.\n        this._queuedMessages = [];\n      }\n      reconnect(0);\n    };\n    // connection options\n    //  - setupRetry: amount of ms to retry when unable to connect on initial setup\n    //  - createSocket: create a new Socket connection\n    this.options = options;\n    // id if next command to send\n    this.commandId = 2; // socket may send 1 at the start to enable features\n    // info about active subscriptions and commands in flight\n    this.commands = new Map();\n    // map of event listeners\n    this.eventListeners = new Map();\n    // true if a close is requested by the user\n    this.closeRequested = false;\n    this._setSocket(socket);\n  }\n  get connected() {\n    // Using conn.socket.OPEN instead of WebSocket for better node support\n    return this.socket !== undefined && this.socket.readyState == this.socket.OPEN;\n  }\n  _setSocket(socket) {\n    this.socket = socket;\n    this.haVersion = socket.haVersion;\n    socket.addEventListener(\"message\", this._handleMessage);\n    socket.addEventListener(\"close\", this._handleClose);\n    const oldSubscriptions = this.oldSubscriptions;\n    if (oldSubscriptions) {\n      this.oldSubscriptions = undefined;\n      oldSubscriptions.forEach(info => {\n        if (\"subscribe\" in info && info.subscribe) {\n          info.subscribe().then(unsub => {\n            info.unsubscribe = unsub;\n            // We need to resolve this in case it wasn't resolved yet.\n            // This allows us to subscribe while we're disconnected\n            // and recover properly.\n            info.resolve();\n          });\n        }\n      });\n    }\n    const queuedMessages = this._queuedMessages;\n    if (queuedMessages) {\n      this._queuedMessages = undefined;\n      for (const queuedMsg of queuedMessages) {\n        queuedMsg.resolve();\n      }\n    }\n    this.fireEvent(\"ready\");\n  }\n  addEventListener(eventType, callback) {\n    let listeners = this.eventListeners.get(eventType);\n    if (!listeners) {\n      listeners = [];\n      this.eventListeners.set(eventType, listeners);\n    }\n    listeners.push(callback);\n  }\n  removeEventListener(eventType, callback) {\n    const listeners = this.eventListeners.get(eventType);\n    if (!listeners) {\n      return;\n    }\n    const index = listeners.indexOf(callback);\n    if (index !== -1) {\n      listeners.splice(index, 1);\n    }\n  }\n  fireEvent(eventType, eventData) {\n    (this.eventListeners.get(eventType) || []).forEach(callback => callback(this, eventData));\n  }\n  suspendReconnectUntil(suspendPromise) {\n    this.suspendReconnectPromise = suspendPromise;\n  }\n  suspend() {\n    if (!this.suspendReconnectPromise) {\n      throw new Error(\"Suspend promise not set\");\n    }\n    if (this.socket) {\n      this.socket.close();\n    }\n  }\n  /**\n   * Reconnect the websocket connection.\n   * @param force discard old socket instead of gracefully closing it.\n   */\n  reconnect(force = false) {\n    if (!this.socket) {\n      return;\n    }\n    if (!force) {\n      this.socket.close();\n      return;\n    }\n    this.socket.removeEventListener(\"message\", this._handleMessage);\n    this.socket.removeEventListener(\"close\", this._handleClose);\n    this.socket.close();\n    this._handleClose();\n  }\n  close() {\n    this.closeRequested = true;\n    if (this.socket) {\n      this.socket.close();\n    }\n  }\n  /**\n   * Subscribe to a specific or all events.\n   *\n   * @param callback Callback  to be called when a new event fires\n   * @param eventType\n   * @returns promise that resolves to an unsubscribe function\n   */\n  async subscribeEvents(callback, eventType) {\n    return this.subscribeMessage(callback, _messages_js__WEBPACK_IMPORTED_MODULE_0__.subscribeEvents(eventType));\n  }\n  ping() {\n    return this.sendMessagePromise(_messages_js__WEBPACK_IMPORTED_MODULE_0__.ping());\n  }\n  sendMessage(message, commandId) {\n    if (!this.connected) {\n      throw _errors_js__WEBPACK_IMPORTED_MODULE_1__.ERR_CONNECTION_LOST;\n    }\n    if (DEBUG) {\n      console.log(\"Sending\", message);\n    }\n    if (this._queuedMessages) {\n      if (commandId) {\n        throw new Error(\"Cannot queue with commandId\");\n      }\n      this._queuedMessages.push({\n        resolve: () => this.sendMessage(message)\n      });\n      return;\n    }\n    if (!commandId) {\n      commandId = this._genCmdId();\n    }\n    message.id = commandId;\n    this.socket.send(JSON.stringify(message));\n  }\n  sendMessagePromise(message) {\n    return new Promise((resolve, reject) => {\n      if (this._queuedMessages) {\n        this._queuedMessages.push({\n          reject,\n          resolve: async () => {\n            try {\n              resolve(await this.sendMessagePromise(message));\n            } catch (err) {\n              reject(err);\n            }\n          }\n        });\n        return;\n      }\n      const commandId = this._genCmdId();\n      this.commands.set(commandId, {\n        resolve,\n        reject\n      });\n      this.sendMessage(message, commandId);\n    });\n  }\n  /**\n   * Call a websocket command that starts a subscription on the backend.\n   *\n   * @param message the message to start the subscription\n   * @param callback the callback to be called when a new item arrives\n   * @param [options.resubscribe] re-established a subscription after a reconnect. Defaults to true.\n   * @returns promise that resolves to an unsubscribe function\n   */\n  async subscribeMessage(callback, subscribeMessage, options) {\n    if (this._queuedMessages) {\n      await new Promise((resolve, reject) => {\n        this._queuedMessages.push({\n          resolve,\n          reject\n        });\n      });\n    }\n    let info;\n    await new Promise((resolve, reject) => {\n      // Command ID that will be used\n      const commandId = this._genCmdId();\n      // We store unsubscribe on info object. That way we can overwrite it in case\n      // we get disconnected and we have to subscribe again.\n      info = {\n        resolve,\n        reject,\n        callback,\n        subscribe: (options === null || options === void 0 ? void 0 : options.resubscribe) !== false ? () => this.subscribeMessage(callback, subscribeMessage) : undefined,\n        unsubscribe: async () => {\n          // No need to unsubscribe if we're disconnected\n          if (this.connected) {\n            await this.sendMessagePromise(_messages_js__WEBPACK_IMPORTED_MODULE_0__.unsubscribeEvents(commandId));\n          }\n          this.commands.delete(commandId);\n        }\n      };\n      this.commands.set(commandId, info);\n      try {\n        this.sendMessage(subscribeMessage, commandId);\n      } catch (err) {\n        // Happens when the websocket is already closing.\n        // Don't have to handle the error, reconnect logic will pick it up.\n      }\n    });\n    return () => info.unsubscribe();\n  }\n  _genCmdId() {\n    return ++this.commandId;\n  }\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvaG9tZS1hc3Npc3RhbnQtanMtd2Vic29ja2V0L2Rpc3QvY29ubmVjdGlvbi5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaG9tZS1hc3Npc3RhbnQtZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvaG9tZS1hc3Npc3RhbnQtanMtd2Vic29ja2V0L2Rpc3QvY29ubmVjdGlvbi5qcz9mMWFhIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29ubmVjdGlvbiB0aGF0IHdyYXBzIGEgc29ja2V0IGFuZCBwcm92aWRlcyBhbiBpbnRlcmZhY2UgdG8gaW50ZXJhY3Qgd2l0aFxuICogdGhlIEhvbWUgQXNzaXN0YW50IHdlYnNvY2tldCBBUEkuXG4gKi9cbmltcG9ydCAqIGFzIG1lc3NhZ2VzIGZyb20gXCIuL21lc3NhZ2VzLmpzXCI7XG5pbXBvcnQgeyBFUlJfSU5WQUxJRF9BVVRILCBFUlJfQ09OTkVDVElPTl9MT1NUIH0gZnJvbSBcIi4vZXJyb3JzLmpzXCI7XG5jb25zdCBERUJVRyA9IGZhbHNlO1xuZXhwb3J0IGNsYXNzIENvbm5lY3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKHNvY2tldCwgb3B0aW9ucykge1xuICAgICAgICB0aGlzLl9oYW5kbGVNZXNzYWdlID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBsZXQgbWVzc2FnZUdyb3VwID0gSlNPTi5wYXJzZShldmVudC5kYXRhKTtcbiAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShtZXNzYWdlR3JvdXApKSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZUdyb3VwID0gW21lc3NhZ2VHcm91cF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtZXNzYWdlR3JvdXAuZm9yRWFjaCgobWVzc2FnZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChERUJVRykge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlJlY2VpdmVkXCIsIG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBpbmZvID0gdGhpcy5jb21tYW5kcy5nZXQobWVzc2FnZS5pZCk7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChtZXNzYWdlLnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImV2ZW50XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5mbykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZm8uY2FsbGJhY2sobWVzc2FnZS5ldmVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFJlY2VpdmVkIGV2ZW50IGZvciB1bmtub3duIHN1YnNjcmlwdGlvbiAke21lc3NhZ2UuaWR9LiBVbnN1YnNjcmliaW5nLmApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VuZE1lc3NhZ2VQcm9taXNlKG1lc3NhZ2VzLnVuc3Vic2NyaWJlRXZlbnRzKG1lc3NhZ2UuaWQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwicmVzdWx0XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBObyBpbmZvIGlzIGZpbmUuIElmIGp1c3Qgc2VuZE1lc3NhZ2UgaXMgdXNlZCwgd2UgZGlkIG5vdCBzdG9yZSBwcm9taXNlIGZvciByZXN1bHRcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbmZvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmZvLnJlc29sdmUobWVzc2FnZS5yZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBEb24ndCByZW1vdmUgc3Vic2NyaXB0aW9ucy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoXCJzdWJzY3JpYmVcIiBpbiBpbmZvKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21tYW5kcy5kZWxldGUobWVzc2FnZS5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZm8ucmVqZWN0KG1lc3NhZ2UuZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbW1hbmRzLmRlbGV0ZShtZXNzYWdlLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInBvbmdcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbmZvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5mby5yZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21tYW5kcy5kZWxldGUobWVzc2FnZS5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFJlY2VpdmVkIHVua25vd24gcG9uZyByZXNwb25zZSAke21lc3NhZ2UuaWR9YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChERUJVRykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIlVuaGFuZGxlZCBtZXNzYWdlXCIsIG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLl9oYW5kbGVDbG9zZSA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG9sZENvbW1hbmRzID0gdGhpcy5jb21tYW5kcztcbiAgICAgICAgICAgIC8vIHJlc2V0IHRvIG9yaWdpbmFsIHN0YXRlIGV4Y2VwdCBoYVZlcnNpb25cbiAgICAgICAgICAgIHRoaXMuY29tbWFuZElkID0gMTtcbiAgICAgICAgICAgIHRoaXMub2xkU3Vic2NyaXB0aW9ucyA9IHRoaXMuY29tbWFuZHM7XG4gICAgICAgICAgICB0aGlzLmNvbW1hbmRzID0gbmV3IE1hcCgpO1xuICAgICAgICAgICAgdGhpcy5zb2NrZXQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAvLyBSZWplY3QgaW4tZmxpZ2h0IHNlbmRNZXNzYWdlUHJvbWlzZSByZXF1ZXN0c1xuICAgICAgICAgICAgb2xkQ29tbWFuZHMuZm9yRWFjaCgoaW5mbykgPT4ge1xuICAgICAgICAgICAgICAgIC8vIFdlIGRvbid0IGNhbmNlbCBzdWJzY3JpYmVFdmVudHMgY29tbWFuZHMgaW4gZmxpZ2h0XG4gICAgICAgICAgICAgICAgLy8gYXMgd2Ugd2lsbCBiZSBhYmxlIHRvIHJlY292ZXIgdGhlbS5cbiAgICAgICAgICAgICAgICBpZiAoIShcInN1YnNjcmliZVwiIGluIGluZm8pKSB7XG4gICAgICAgICAgICAgICAgICAgIGluZm8ucmVqZWN0KG1lc3NhZ2VzLmVycm9yKEVSUl9DT05ORUNUSU9OX0xPU1QsIFwiQ29ubmVjdGlvbiBsb3N0XCIpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICh0aGlzLmNsb3NlUmVxdWVzdGVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5maXJlRXZlbnQoXCJkaXNjb25uZWN0ZWRcIik7XG4gICAgICAgICAgICAvLyBEaXNhYmxlIHNldHVwUmV0cnksIHdlIGNvbnRyb2wgaXQgaGVyZSB3aXRoIGF1dG8tYmFja29mZlxuICAgICAgICAgICAgY29uc3Qgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5vcHRpb25zKSwgeyBzZXR1cFJldHJ5OiAwIH0pO1xuICAgICAgICAgICAgY29uc3QgcmVjb25uZWN0ID0gKHRyaWVzKSA9PiB7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNsb3NlUmVxdWVzdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKERFQlVHKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlRyeWluZyB0byByZWNvbm5lY3RcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNvY2tldCA9IGF3YWl0IG9wdGlvbnMuY3JlYXRlU29ja2V0KG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2V0U29ja2V0KHNvY2tldCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX3F1ZXVlZE1lc3NhZ2VzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcXVldWVkTWVzc2FnZXMgPSB0aGlzLl9xdWV1ZWRNZXNzYWdlcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9xdWV1ZWRNZXNzYWdlcyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG1zZyBvZiBxdWV1ZWRNZXNzYWdlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobXNnLnJlamVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbXNnLnJlamVjdChFUlJfQ09OTkVDVElPTl9MT1NUKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnIgPT09IEVSUl9JTlZBTElEX0FVVEgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZpcmVFdmVudChcInJlY29ubmVjdC1lcnJvclwiLCBlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjb25uZWN0KHRyaWVzICsgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCBNYXRoLm1pbih0cmllcywgNSkgKiAxMDAwKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAodGhpcy5zdXNwZW5kUmVjb25uZWN0UHJvbWlzZSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc3VzcGVuZFJlY29ubmVjdFByb21pc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5zdXNwZW5kUmVjb25uZWN0UHJvbWlzZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAvLyBGb3IgdGhlIGZpcnN0IHJldHJ5IGFmdGVyIHN1c3BlbmQsIHdlIHdpbGwgcXVldWUgdXBcbiAgICAgICAgICAgICAgICAvLyBhbGwgbWVzc2FnZXMuXG4gICAgICAgICAgICAgICAgdGhpcy5fcXVldWVkTWVzc2FnZXMgPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlY29ubmVjdCgwKTtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gY29ubmVjdGlvbiBvcHRpb25zXG4gICAgICAgIC8vICAtIHNldHVwUmV0cnk6IGFtb3VudCBvZiBtcyB0byByZXRyeSB3aGVuIHVuYWJsZSB0byBjb25uZWN0IG9uIGluaXRpYWwgc2V0dXBcbiAgICAgICAgLy8gIC0gY3JlYXRlU29ja2V0OiBjcmVhdGUgYSBuZXcgU29ja2V0IGNvbm5lY3Rpb25cbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgLy8gaWQgaWYgbmV4dCBjb21tYW5kIHRvIHNlbmRcbiAgICAgICAgdGhpcy5jb21tYW5kSWQgPSAyOyAvLyBzb2NrZXQgbWF5IHNlbmQgMSBhdCB0aGUgc3RhcnQgdG8gZW5hYmxlIGZlYXR1cmVzXG4gICAgICAgIC8vIGluZm8gYWJvdXQgYWN0aXZlIHN1YnNjcmlwdGlvbnMgYW5kIGNvbW1hbmRzIGluIGZsaWdodFxuICAgICAgICB0aGlzLmNvbW1hbmRzID0gbmV3IE1hcCgpO1xuICAgICAgICAvLyBtYXAgb2YgZXZlbnQgbGlzdGVuZXJzXG4gICAgICAgIHRoaXMuZXZlbnRMaXN0ZW5lcnMgPSBuZXcgTWFwKCk7XG4gICAgICAgIC8vIHRydWUgaWYgYSBjbG9zZSBpcyByZXF1ZXN0ZWQgYnkgdGhlIHVzZXJcbiAgICAgICAgdGhpcy5jbG9zZVJlcXVlc3RlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9zZXRTb2NrZXQoc29ja2V0KTtcbiAgICB9XG4gICAgZ2V0IGNvbm5lY3RlZCgpIHtcbiAgICAgICAgLy8gVXNpbmcgY29ubi5zb2NrZXQuT1BFTiBpbnN0ZWFkIG9mIFdlYlNvY2tldCBmb3IgYmV0dGVyIG5vZGUgc3VwcG9ydFxuICAgICAgICByZXR1cm4gKHRoaXMuc29ja2V0ICE9PSB1bmRlZmluZWQgJiYgdGhpcy5zb2NrZXQucmVhZHlTdGF0ZSA9PSB0aGlzLnNvY2tldC5PUEVOKTtcbiAgICB9XG4gICAgX3NldFNvY2tldChzb2NrZXQpIHtcbiAgICAgICAgdGhpcy5zb2NrZXQgPSBzb2NrZXQ7XG4gICAgICAgIHRoaXMuaGFWZXJzaW9uID0gc29ja2V0LmhhVmVyc2lvbjtcbiAgICAgICAgc29ja2V0LmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIHRoaXMuX2hhbmRsZU1lc3NhZ2UpO1xuICAgICAgICBzb2NrZXQuYWRkRXZlbnRMaXN0ZW5lcihcImNsb3NlXCIsIHRoaXMuX2hhbmRsZUNsb3NlKTtcbiAgICAgICAgY29uc3Qgb2xkU3Vic2NyaXB0aW9ucyA9IHRoaXMub2xkU3Vic2NyaXB0aW9ucztcbiAgICAgICAgaWYgKG9sZFN1YnNjcmlwdGlvbnMpIHtcbiAgICAgICAgICAgIHRoaXMub2xkU3Vic2NyaXB0aW9ucyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIG9sZFN1YnNjcmlwdGlvbnMuZm9yRWFjaCgoaW5mbykgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChcInN1YnNjcmliZVwiIGluIGluZm8gJiYgaW5mby5zdWJzY3JpYmUpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5mby5zdWJzY3JpYmUoKS50aGVuKCh1bnN1YikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5mby51bnN1YnNjcmliZSA9IHVuc3ViO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2UgbmVlZCB0byByZXNvbHZlIHRoaXMgaW4gY2FzZSBpdCB3YXNuJ3QgcmVzb2x2ZWQgeWV0LlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBhbGxvd3MgdXMgdG8gc3Vic2NyaWJlIHdoaWxlIHdlJ3JlIGRpc2Nvbm5lY3RlZFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5kIHJlY292ZXIgcHJvcGVybHkuXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmZvLnJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcXVldWVkTWVzc2FnZXMgPSB0aGlzLl9xdWV1ZWRNZXNzYWdlcztcbiAgICAgICAgaWYgKHF1ZXVlZE1lc3NhZ2VzKSB7XG4gICAgICAgICAgICB0aGlzLl9xdWV1ZWRNZXNzYWdlcyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcXVldWVkTXNnIG9mIHF1ZXVlZE1lc3NhZ2VzKSB7XG4gICAgICAgICAgICAgICAgcXVldWVkTXNnLnJlc29sdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZpcmVFdmVudChcInJlYWR5XCIpO1xuICAgIH1cbiAgICBhZGRFdmVudExpc3RlbmVyKGV2ZW50VHlwZSwgY2FsbGJhY2spIHtcbiAgICAgICAgbGV0IGxpc3RlbmVycyA9IHRoaXMuZXZlbnRMaXN0ZW5lcnMuZ2V0KGV2ZW50VHlwZSk7XG4gICAgICAgIGlmICghbGlzdGVuZXJzKSB7XG4gICAgICAgICAgICBsaXN0ZW5lcnMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuZXZlbnRMaXN0ZW5lcnMuc2V0KGV2ZW50VHlwZSwgbGlzdGVuZXJzKTtcbiAgICAgICAgfVxuICAgICAgICBsaXN0ZW5lcnMucHVzaChjYWxsYmFjayk7XG4gICAgfVxuICAgIHJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCBjYWxsYmFjaykge1xuICAgICAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLmV2ZW50TGlzdGVuZXJzLmdldChldmVudFR5cGUpO1xuICAgICAgICBpZiAoIWxpc3RlbmVycykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGluZGV4ID0gbGlzdGVuZXJzLmluZGV4T2YoY2FsbGJhY2spO1xuICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICBsaXN0ZW5lcnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmaXJlRXZlbnQoZXZlbnRUeXBlLCBldmVudERhdGEpIHtcbiAgICAgICAgKHRoaXMuZXZlbnRMaXN0ZW5lcnMuZ2V0KGV2ZW50VHlwZSkgfHwgW10pLmZvckVhY2goKGNhbGxiYWNrKSA9PiBjYWxsYmFjayh0aGlzLCBldmVudERhdGEpKTtcbiAgICB9XG4gICAgc3VzcGVuZFJlY29ubmVjdFVudGlsKHN1c3BlbmRQcm9taXNlKSB7XG4gICAgICAgIHRoaXMuc3VzcGVuZFJlY29ubmVjdFByb21pc2UgPSBzdXNwZW5kUHJvbWlzZTtcbiAgICB9XG4gICAgc3VzcGVuZCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnN1c3BlbmRSZWNvbm5lY3RQcm9taXNlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTdXNwZW5kIHByb21pc2Ugbm90IHNldFwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5zb2NrZXQpIHtcbiAgICAgICAgICAgIHRoaXMuc29ja2V0LmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVjb25uZWN0IHRoZSB3ZWJzb2NrZXQgY29ubmVjdGlvbi5cbiAgICAgKiBAcGFyYW0gZm9yY2UgZGlzY2FyZCBvbGQgc29ja2V0IGluc3RlYWQgb2YgZ3JhY2VmdWxseSBjbG9zaW5nIGl0LlxuICAgICAqL1xuICAgIHJlY29ubmVjdChmb3JjZSA9IGZhbHNlKSB7XG4gICAgICAgIGlmICghdGhpcy5zb2NrZXQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWZvcmNlKSB7XG4gICAgICAgICAgICB0aGlzLnNvY2tldC5jbG9zZSgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc29ja2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIHRoaXMuX2hhbmRsZU1lc3NhZ2UpO1xuICAgICAgICB0aGlzLnNvY2tldC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xvc2VcIiwgdGhpcy5faGFuZGxlQ2xvc2UpO1xuICAgICAgICB0aGlzLnNvY2tldC5jbG9zZSgpO1xuICAgICAgICB0aGlzLl9oYW5kbGVDbG9zZSgpO1xuICAgIH1cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy5jbG9zZVJlcXVlc3RlZCA9IHRydWU7XG4gICAgICAgIGlmICh0aGlzLnNvY2tldCkge1xuICAgICAgICAgICAgdGhpcy5zb2NrZXQuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdWJzY3JpYmUgdG8gYSBzcGVjaWZpYyBvciBhbGwgZXZlbnRzLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNhbGxiYWNrIENhbGxiYWNrICB0byBiZSBjYWxsZWQgd2hlbiBhIG5ldyBldmVudCBmaXJlc1xuICAgICAqIEBwYXJhbSBldmVudFR5cGVcbiAgICAgKiBAcmV0dXJucyBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gYW4gdW5zdWJzY3JpYmUgZnVuY3Rpb25cbiAgICAgKi9cbiAgICBhc3luYyBzdWJzY3JpYmVFdmVudHMoY2FsbGJhY2ssIGV2ZW50VHlwZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdWJzY3JpYmVNZXNzYWdlKGNhbGxiYWNrLCBtZXNzYWdlcy5zdWJzY3JpYmVFdmVudHMoZXZlbnRUeXBlKSk7XG4gICAgfVxuICAgIHBpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlbmRNZXNzYWdlUHJvbWlzZShtZXNzYWdlcy5waW5nKCkpO1xuICAgIH1cbiAgICBzZW5kTWVzc2FnZShtZXNzYWdlLCBjb21tYW5kSWQpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNvbm5lY3RlZCkge1xuICAgICAgICAgICAgdGhyb3cgRVJSX0NPTk5FQ1RJT05fTE9TVDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoREVCVUcpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiU2VuZGluZ1wiLCBtZXNzYWdlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fcXVldWVkTWVzc2FnZXMpIHtcbiAgICAgICAgICAgIGlmIChjb21tYW5kSWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgcXVldWUgd2l0aCBjb21tYW5kSWRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9xdWV1ZWRNZXNzYWdlcy5wdXNoKHsgcmVzb2x2ZTogKCkgPT4gdGhpcy5zZW5kTWVzc2FnZShtZXNzYWdlKSB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWNvbW1hbmRJZCkge1xuICAgICAgICAgICAgY29tbWFuZElkID0gdGhpcy5fZ2VuQ21kSWQoKTtcbiAgICAgICAgfVxuICAgICAgICBtZXNzYWdlLmlkID0gY29tbWFuZElkO1xuICAgICAgICB0aGlzLnNvY2tldC5zZW5kKEpTT04uc3RyaW5naWZ5KG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgc2VuZE1lc3NhZ2VQcm9taXNlKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9xdWV1ZWRNZXNzYWdlcykge1xuICAgICAgICAgICAgICAgIHRoaXMuX3F1ZXVlZE1lc3NhZ2VzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICByZWplY3QsXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmU6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShhd2FpdCB0aGlzLnNlbmRNZXNzYWdlUHJvbWlzZShtZXNzYWdlKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgY29tbWFuZElkID0gdGhpcy5fZ2VuQ21kSWQoKTtcbiAgICAgICAgICAgIHRoaXMuY29tbWFuZHMuc2V0KGNvbW1hbmRJZCwgeyByZXNvbHZlLCByZWplY3QgfSk7XG4gICAgICAgICAgICB0aGlzLnNlbmRNZXNzYWdlKG1lc3NhZ2UsIGNvbW1hbmRJZCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsIGEgd2Vic29ja2V0IGNvbW1hbmQgdGhhdCBzdGFydHMgYSBzdWJzY3JpcHRpb24gb24gdGhlIGJhY2tlbmQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbWVzc2FnZSB0aGUgbWVzc2FnZSB0byBzdGFydCB0aGUgc3Vic2NyaXB0aW9uXG4gICAgICogQHBhcmFtIGNhbGxiYWNrIHRoZSBjYWxsYmFjayB0byBiZSBjYWxsZWQgd2hlbiBhIG5ldyBpdGVtIGFycml2ZXNcbiAgICAgKiBAcGFyYW0gW29wdGlvbnMucmVzdWJzY3JpYmVdIHJlLWVzdGFibGlzaGVkIGEgc3Vic2NyaXB0aW9uIGFmdGVyIGEgcmVjb25uZWN0LiBEZWZhdWx0cyB0byB0cnVlLlxuICAgICAqIEByZXR1cm5zIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byBhbiB1bnN1YnNjcmliZSBmdW5jdGlvblxuICAgICAqL1xuICAgIGFzeW5jIHN1YnNjcmliZU1lc3NhZ2UoY2FsbGJhY2ssIHN1YnNjcmliZU1lc3NhZ2UsIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKHRoaXMuX3F1ZXVlZE1lc3NhZ2VzKSB7XG4gICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5fcXVldWVkTWVzc2FnZXMucHVzaCh7IHJlc29sdmUsIHJlamVjdCB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGxldCBpbmZvO1xuICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAvLyBDb21tYW5kIElEIHRoYXQgd2lsbCBiZSB1c2VkXG4gICAgICAgICAgICBjb25zdCBjb21tYW5kSWQgPSB0aGlzLl9nZW5DbWRJZCgpO1xuICAgICAgICAgICAgLy8gV2Ugc3RvcmUgdW5zdWJzY3JpYmUgb24gaW5mbyBvYmplY3QuIFRoYXQgd2F5IHdlIGNhbiBvdmVyd3JpdGUgaXQgaW4gY2FzZVxuICAgICAgICAgICAgLy8gd2UgZ2V0IGRpc2Nvbm5lY3RlZCBhbmQgd2UgaGF2ZSB0byBzdWJzY3JpYmUgYWdhaW4uXG4gICAgICAgICAgICBpbmZvID0ge1xuICAgICAgICAgICAgICAgIHJlc29sdmUsXG4gICAgICAgICAgICAgICAgcmVqZWN0LFxuICAgICAgICAgICAgICAgIGNhbGxiYWNrLFxuICAgICAgICAgICAgICAgIHN1YnNjcmliZTogKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5yZXN1YnNjcmliZSkgIT09IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgID8gKCkgPT4gdGhpcy5zdWJzY3JpYmVNZXNzYWdlKGNhbGxiYWNrLCBzdWJzY3JpYmVNZXNzYWdlKVxuICAgICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICB1bnN1YnNjcmliZTogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBObyBuZWVkIHRvIHVuc3Vic2NyaWJlIGlmIHdlJ3JlIGRpc2Nvbm5lY3RlZFxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jb25uZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2VuZE1lc3NhZ2VQcm9taXNlKG1lc3NhZ2VzLnVuc3Vic2NyaWJlRXZlbnRzKGNvbW1hbmRJZCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29tbWFuZHMuZGVsZXRlKGNvbW1hbmRJZCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmNvbW1hbmRzLnNldChjb21tYW5kSWQsIGluZm8pO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbmRNZXNzYWdlKHN1YnNjcmliZU1lc3NhZ2UsIGNvbW1hbmRJZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgLy8gSGFwcGVucyB3aGVuIHRoZSB3ZWJzb2NrZXQgaXMgYWxyZWFkeSBjbG9zaW5nLlxuICAgICAgICAgICAgICAgIC8vIERvbid0IGhhdmUgdG8gaGFuZGxlIHRoZSBlcnJvciwgcmVjb25uZWN0IGxvZ2ljIHdpbGwgcGljayBpdCB1cC5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiAoKSA9PiBpbmZvLnVuc3Vic2NyaWJlKCk7XG4gICAgfVxuICAgIF9nZW5DbWRJZCgpIHtcbiAgICAgICAgcmV0dXJuICsrdGhpcy5jb21tYW5kSWQ7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/home-assistant-js-websocket/dist/connection.js\n");

/***/ }),

/***/ "./node_modules/home-assistant-js-websocket/dist/entities.js":
/*!*******************************************************************!*\
  !*** ./node_modules/home-assistant-js-websocket/dist/entities.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   entitiesColl: () => (/* binding */ entitiesColl),\n/* harmony export */   subscribeEntities: () => (/* binding */ subscribeEntities)\n/* harmony export */ });\n/* harmony import */ var _collection_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./collection.js */ \"./node_modules/home-assistant-js-websocket/dist/collection.js\");\n/* harmony import */ var _commands_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./commands.js */ \"./node_modules/home-assistant-js-websocket/dist/commands.js\");\n/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./util.js */ \"./node_modules/home-assistant-js-websocket/dist/util.js\");\n\n\n\nfunction processEvent(store, updates) {\n  const state = Object.assign({}, store.state);\n  if (updates.a) {\n    for (const entityId in updates.a) {\n      const newState = updates.a[entityId];\n      let last_changed = new Date(newState.lc * 1000).toISOString();\n      state[entityId] = {\n        entity_id: entityId,\n        state: newState.s,\n        attributes: newState.a,\n        context: typeof newState.c === \"string\" ? {\n          id: newState.c,\n          parent_id: null,\n          user_id: null\n        } : newState.c,\n        last_changed: last_changed,\n        last_updated: newState.lu ? new Date(newState.lu * 1000).toISOString() : last_changed\n      };\n    }\n  }\n  if (updates.r) {\n    for (const entityId of updates.r) {\n      delete state[entityId];\n    }\n  }\n  if (updates.c) {\n    for (const entityId in updates.c) {\n      let entityState = state[entityId];\n      if (!entityState) {\n        console.warn(\"Received state update for unknown entity\", entityId);\n        continue;\n      }\n      entityState = Object.assign({}, entityState);\n      const {\n        \"+\": toAdd,\n        \"-\": toRemove\n      } = updates.c[entityId];\n      const attributesChanged = (toAdd === null || toAdd === void 0 ? void 0 : toAdd.a) || (toRemove === null || toRemove === void 0 ? void 0 : toRemove.a);\n      const attributes = attributesChanged ? Object.assign({}, entityState.attributes) : entityState.attributes;\n      if (toAdd) {\n        if (toAdd.s !== undefined) {\n          entityState.state = toAdd.s;\n        }\n        if (toAdd.c) {\n          if (typeof toAdd.c === \"string\") {\n            entityState.context = Object.assign(Object.assign({}, entityState.context), {\n              id: toAdd.c\n            });\n          } else {\n            entityState.context = Object.assign(Object.assign({}, entityState.context), toAdd.c);\n          }\n        }\n        if (toAdd.lc) {\n          entityState.last_updated = entityState.last_changed = new Date(toAdd.lc * 1000).toISOString();\n        } else if (toAdd.lu) {\n          entityState.last_updated = new Date(toAdd.lu * 1000).toISOString();\n        }\n        if (toAdd.a) {\n          Object.assign(attributes, toAdd.a);\n        }\n      }\n      if (toRemove === null || toRemove === void 0 ? void 0 : toRemove.a) {\n        for (const key of toRemove.a) {\n          delete attributes[key];\n        }\n      }\n      if (attributesChanged) {\n        entityState.attributes = attributes;\n      }\n      state[entityId] = entityState;\n    }\n  }\n  store.setState(state, true);\n}\nconst subscribeUpdates = (conn, store) => conn.subscribeMessage(ev => processEvent(store, ev), {\n  type: \"subscribe_entities\"\n});\nfunction legacyProcessEvent(store, event) {\n  const state = store.state;\n  if (state === undefined) return;\n  const {\n    entity_id,\n    new_state\n  } = event.data;\n  if (new_state) {\n    store.setState({\n      [new_state.entity_id]: new_state\n    });\n  } else {\n    const newEntities = Object.assign({}, state);\n    delete newEntities[entity_id];\n    store.setState(newEntities, true);\n  }\n}\nasync function legacyFetchEntities(conn) {\n  const states = await (0,_commands_js__WEBPACK_IMPORTED_MODULE_0__.getStates)(conn);\n  const entities = {};\n  for (let i = 0; i < states.length; i++) {\n    const state = states[i];\n    entities[state.entity_id] = state;\n  }\n  return entities;\n}\nconst legacySubscribeUpdates = (conn, store) => conn.subscribeEvents(ev => legacyProcessEvent(store, ev), \"state_changed\");\nconst entitiesColl = conn => (0,_util_js__WEBPACK_IMPORTED_MODULE_1__.atLeastHaVersion)(conn.haVersion, 2022, 4, 0) ? (0,_collection_js__WEBPACK_IMPORTED_MODULE_2__.getCollection)(conn, \"_ent\", undefined, subscribeUpdates) : (0,_collection_js__WEBPACK_IMPORTED_MODULE_2__.getCollection)(conn, \"_ent\", legacyFetchEntities, legacySubscribeUpdates);\nconst subscribeEntities = (conn, onChange) => entitiesColl(conn).subscribe(onChange);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvaG9tZS1hc3Npc3RhbnQtanMtd2Vic29ja2V0L2Rpc3QvZW50aXRpZXMuanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQSIsInNvdXJjZXMiOlsid2VicGFjazovL2hvbWUtYXNzaXN0YW50LWZyb250ZW5kLy4vbm9kZV9tb2R1bGVzL2hvbWUtYXNzaXN0YW50LWpzLXdlYnNvY2tldC9kaXN0L2VudGl0aWVzLmpzPzdlMTciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0Q29sbGVjdGlvbiB9IGZyb20gXCIuL2NvbGxlY3Rpb24uanNcIjtcbmltcG9ydCB7IGdldFN0YXRlcyB9IGZyb20gXCIuL2NvbW1hbmRzLmpzXCI7XG5pbXBvcnQgeyBhdExlYXN0SGFWZXJzaW9uIH0gZnJvbSBcIi4vdXRpbC5qc1wiO1xuZnVuY3Rpb24gcHJvY2Vzc0V2ZW50KHN0b3JlLCB1cGRhdGVzKSB7XG4gICAgY29uc3Qgc3RhdGUgPSBPYmplY3QuYXNzaWduKHt9LCBzdG9yZS5zdGF0ZSk7XG4gICAgaWYgKHVwZGF0ZXMuYSkge1xuICAgICAgICBmb3IgKGNvbnN0IGVudGl0eUlkIGluIHVwZGF0ZXMuYSkge1xuICAgICAgICAgICAgY29uc3QgbmV3U3RhdGUgPSB1cGRhdGVzLmFbZW50aXR5SWRdO1xuICAgICAgICAgICAgbGV0IGxhc3RfY2hhbmdlZCA9IG5ldyBEYXRlKG5ld1N0YXRlLmxjICogMTAwMCkudG9JU09TdHJpbmcoKTtcbiAgICAgICAgICAgIHN0YXRlW2VudGl0eUlkXSA9IHtcbiAgICAgICAgICAgICAgICBlbnRpdHlfaWQ6IGVudGl0eUlkLFxuICAgICAgICAgICAgICAgIHN0YXRlOiBuZXdTdGF0ZS5zLFxuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IG5ld1N0YXRlLmEsXG4gICAgICAgICAgICAgICAgY29udGV4dDogdHlwZW9mIG5ld1N0YXRlLmMgPT09IFwic3RyaW5nXCJcbiAgICAgICAgICAgICAgICAgICAgPyB7IGlkOiBuZXdTdGF0ZS5jLCBwYXJlbnRfaWQ6IG51bGwsIHVzZXJfaWQ6IG51bGwgfVxuICAgICAgICAgICAgICAgICAgICA6IG5ld1N0YXRlLmMsXG4gICAgICAgICAgICAgICAgbGFzdF9jaGFuZ2VkOiBsYXN0X2NoYW5nZWQsXG4gICAgICAgICAgICAgICAgbGFzdF91cGRhdGVkOiBuZXdTdGF0ZS5sdVxuICAgICAgICAgICAgICAgICAgICA/IG5ldyBEYXRlKG5ld1N0YXRlLmx1ICogMTAwMCkudG9JU09TdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICA6IGxhc3RfY2hhbmdlZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKHVwZGF0ZXMucikge1xuICAgICAgICBmb3IgKGNvbnN0IGVudGl0eUlkIG9mIHVwZGF0ZXMucikge1xuICAgICAgICAgICAgZGVsZXRlIHN0YXRlW2VudGl0eUlkXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAodXBkYXRlcy5jKSB7XG4gICAgICAgIGZvciAoY29uc3QgZW50aXR5SWQgaW4gdXBkYXRlcy5jKSB7XG4gICAgICAgICAgICBsZXQgZW50aXR5U3RhdGUgPSBzdGF0ZVtlbnRpdHlJZF07XG4gICAgICAgICAgICBpZiAoIWVudGl0eVN0YXRlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiUmVjZWl2ZWQgc3RhdGUgdXBkYXRlIGZvciB1bmtub3duIGVudGl0eVwiLCBlbnRpdHlJZCk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbnRpdHlTdGF0ZSA9IE9iamVjdC5hc3NpZ24oe30sIGVudGl0eVN0YXRlKTtcbiAgICAgICAgICAgIGNvbnN0IHsgXCIrXCI6IHRvQWRkLCBcIi1cIjogdG9SZW1vdmUgfSA9IHVwZGF0ZXMuY1tlbnRpdHlJZF07XG4gICAgICAgICAgICBjb25zdCBhdHRyaWJ1dGVzQ2hhbmdlZCA9ICh0b0FkZCA9PT0gbnVsbCB8fCB0b0FkZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogdG9BZGQuYSkgfHwgKHRvUmVtb3ZlID09PSBudWxsIHx8IHRvUmVtb3ZlID09PSB2b2lkIDAgPyB2b2lkIDAgOiB0b1JlbW92ZS5hKTtcbiAgICAgICAgICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSBhdHRyaWJ1dGVzQ2hhbmdlZFxuICAgICAgICAgICAgICAgID8gT2JqZWN0LmFzc2lnbih7fSwgZW50aXR5U3RhdGUuYXR0cmlidXRlcykgOiBlbnRpdHlTdGF0ZS5hdHRyaWJ1dGVzO1xuICAgICAgICAgICAgaWYgKHRvQWRkKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRvQWRkLnMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBlbnRpdHlTdGF0ZS5zdGF0ZSA9IHRvQWRkLnM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0b0FkZC5jKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdG9BZGQuYyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgZW50aXR5U3RhdGUuY29udGV4dCA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgZW50aXR5U3RhdGUuY29udGV4dCksIHsgaWQ6IHRvQWRkLmMgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbnRpdHlTdGF0ZS5jb250ZXh0ID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBlbnRpdHlTdGF0ZS5jb250ZXh0KSwgdG9BZGQuYyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRvQWRkLmxjKSB7XG4gICAgICAgICAgICAgICAgICAgIGVudGl0eVN0YXRlLmxhc3RfdXBkYXRlZCA9IGVudGl0eVN0YXRlLmxhc3RfY2hhbmdlZCA9IG5ldyBEYXRlKHRvQWRkLmxjICogMTAwMCkudG9JU09TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodG9BZGQubHUpIHtcbiAgICAgICAgICAgICAgICAgICAgZW50aXR5U3RhdGUubGFzdF91cGRhdGVkID0gbmV3IERhdGUodG9BZGQubHUgKiAxMDAwKS50b0lTT1N0cmluZygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodG9BZGQuYSkge1xuICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKGF0dHJpYnV0ZXMsIHRvQWRkLmEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0b1JlbW92ZSA9PT0gbnVsbCB8fCB0b1JlbW92ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogdG9SZW1vdmUuYSkge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IG9mIHRvUmVtb3ZlLmEpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGF0dHJpYnV0ZXNba2V5XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYXR0cmlidXRlc0NoYW5nZWQpIHtcbiAgICAgICAgICAgICAgICBlbnRpdHlTdGF0ZS5hdHRyaWJ1dGVzID0gYXR0cmlidXRlcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN0YXRlW2VudGl0eUlkXSA9IGVudGl0eVN0YXRlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0b3JlLnNldFN0YXRlKHN0YXRlLCB0cnVlKTtcbn1cbmNvbnN0IHN1YnNjcmliZVVwZGF0ZXMgPSAoY29ubiwgc3RvcmUpID0+IGNvbm4uc3Vic2NyaWJlTWVzc2FnZSgoZXYpID0+IHByb2Nlc3NFdmVudChzdG9yZSwgZXYpLCB7XG4gICAgdHlwZTogXCJzdWJzY3JpYmVfZW50aXRpZXNcIixcbn0pO1xuZnVuY3Rpb24gbGVnYWN5UHJvY2Vzc0V2ZW50KHN0b3JlLCBldmVudCkge1xuICAgIGNvbnN0IHN0YXRlID0gc3RvcmUuc3RhdGU7XG4gICAgaWYgKHN0YXRlID09PSB1bmRlZmluZWQpXG4gICAgICAgIHJldHVybjtcbiAgICBjb25zdCB7IGVudGl0eV9pZCwgbmV3X3N0YXRlIH0gPSBldmVudC5kYXRhO1xuICAgIGlmIChuZXdfc3RhdGUpIHtcbiAgICAgICAgc3RvcmUuc2V0U3RhdGUoeyBbbmV3X3N0YXRlLmVudGl0eV9pZF06IG5ld19zdGF0ZSB9KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IG5ld0VudGl0aWVzID0gT2JqZWN0LmFzc2lnbih7fSwgc3RhdGUpO1xuICAgICAgICBkZWxldGUgbmV3RW50aXRpZXNbZW50aXR5X2lkXTtcbiAgICAgICAgc3RvcmUuc2V0U3RhdGUobmV3RW50aXRpZXMsIHRydWUpO1xuICAgIH1cbn1cbmFzeW5jIGZ1bmN0aW9uIGxlZ2FjeUZldGNoRW50aXRpZXMoY29ubikge1xuICAgIGNvbnN0IHN0YXRlcyA9IGF3YWl0IGdldFN0YXRlcyhjb25uKTtcbiAgICBjb25zdCBlbnRpdGllcyA9IHt9O1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RhdGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gc3RhdGVzW2ldO1xuICAgICAgICBlbnRpdGllc1tzdGF0ZS5lbnRpdHlfaWRdID0gc3RhdGU7XG4gICAgfVxuICAgIHJldHVybiBlbnRpdGllcztcbn1cbmNvbnN0IGxlZ2FjeVN1YnNjcmliZVVwZGF0ZXMgPSAoY29ubiwgc3RvcmUpID0+IGNvbm4uc3Vic2NyaWJlRXZlbnRzKChldikgPT4gbGVnYWN5UHJvY2Vzc0V2ZW50KHN0b3JlLCBldiksIFwic3RhdGVfY2hhbmdlZFwiKTtcbmV4cG9ydCBjb25zdCBlbnRpdGllc0NvbGwgPSAoY29ubikgPT4gYXRMZWFzdEhhVmVyc2lvbihjb25uLmhhVmVyc2lvbiwgMjAyMiwgNCwgMClcbiAgICA/IGdldENvbGxlY3Rpb24oY29ubiwgXCJfZW50XCIsIHVuZGVmaW5lZCwgc3Vic2NyaWJlVXBkYXRlcylcbiAgICA6IGdldENvbGxlY3Rpb24oY29ubiwgXCJfZW50XCIsIGxlZ2FjeUZldGNoRW50aXRpZXMsIGxlZ2FjeVN1YnNjcmliZVVwZGF0ZXMpO1xuZXhwb3J0IGNvbnN0IHN1YnNjcmliZUVudGl0aWVzID0gKGNvbm4sIG9uQ2hhbmdlKSA9PiBlbnRpdGllc0NvbGwoY29ubikuc3Vic2NyaWJlKG9uQ2hhbmdlKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/home-assistant-js-websocket/dist/entities.js\n");

/***/ }),

/***/ "./node_modules/home-assistant-js-websocket/dist/errors.js":
/*!*****************************************************************!*\
  !*** ./node_modules/home-assistant-js-websocket/dist/errors.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ERR_CANNOT_CONNECT: () => (/* binding */ ERR_CANNOT_CONNECT),\n/* harmony export */   ERR_CONNECTION_LOST: () => (/* binding */ ERR_CONNECTION_LOST),\n/* harmony export */   ERR_HASS_HOST_REQUIRED: () => (/* binding */ ERR_HASS_HOST_REQUIRED),\n/* harmony export */   ERR_INVALID_AUTH: () => (/* binding */ ERR_INVALID_AUTH),\n/* harmony export */   ERR_INVALID_HTTPS_TO_HTTP: () => (/* binding */ ERR_INVALID_HTTPS_TO_HTTP)\n/* harmony export */ });\nconst ERR_CANNOT_CONNECT = 1;\nconst ERR_INVALID_AUTH = 2;\nconst ERR_CONNECTION_LOST = 3;\nconst ERR_HASS_HOST_REQUIRED = 4;\nconst ERR_INVALID_HTTPS_TO_HTTP = 5;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvaG9tZS1hc3Npc3RhbnQtanMtd2Vic29ja2V0L2Rpc3QvZXJyb3JzLmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2hvbWUtYXNzaXN0YW50LWZyb250ZW5kLy4vbm9kZV9tb2R1bGVzL2hvbWUtYXNzaXN0YW50LWpzLXdlYnNvY2tldC9kaXN0L2Vycm9ycy5qcz8yYjY1Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBFUlJfQ0FOTk9UX0NPTk5FQ1QgPSAxO1xuZXhwb3J0IGNvbnN0IEVSUl9JTlZBTElEX0FVVEggPSAyO1xuZXhwb3J0IGNvbnN0IEVSUl9DT05ORUNUSU9OX0xPU1QgPSAzO1xuZXhwb3J0IGNvbnN0IEVSUl9IQVNTX0hPU1RfUkVRVUlSRUQgPSA0O1xuZXhwb3J0IGNvbnN0IEVSUl9JTlZBTElEX0hUVFBTX1RPX0hUVFAgPSA1O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/home-assistant-js-websocket/dist/errors.js\n");

/***/ }),

/***/ "./node_modules/home-assistant-js-websocket/dist/index.js":
/*!****************************************************************!*\
  !*** ./node_modules/home-assistant-js-websocket/dist/index.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Auth: () => (/* reexport safe */ _auth_js__WEBPACK_IMPORTED_MODULE_0__.Auth),\n/* harmony export */   Connection: () => (/* reexport safe */ _connection_js__WEBPACK_IMPORTED_MODULE_2__.Connection),\n/* harmony export */   ERR_CANNOT_CONNECT: () => (/* reexport safe */ _errors_js__WEBPACK_IMPORTED_MODULE_6__.ERR_CANNOT_CONNECT),\n/* harmony export */   ERR_CONNECTION_LOST: () => (/* reexport safe */ _errors_js__WEBPACK_IMPORTED_MODULE_6__.ERR_CONNECTION_LOST),\n/* harmony export */   ERR_HASS_HOST_REQUIRED: () => (/* reexport safe */ _errors_js__WEBPACK_IMPORTED_MODULE_6__.ERR_HASS_HOST_REQUIRED),\n/* harmony export */   ERR_INVALID_AUTH: () => (/* reexport safe */ _errors_js__WEBPACK_IMPORTED_MODULE_6__.ERR_INVALID_AUTH),\n/* harmony export */   ERR_INVALID_HTTPS_TO_HTTP: () => (/* reexport safe */ _errors_js__WEBPACK_IMPORTED_MODULE_6__.ERR_INVALID_HTTPS_TO_HTTP),\n/* harmony export */   MSG_TYPE_AUTH_INVALID: () => (/* reexport safe */ _socket_js__WEBPACK_IMPORTED_MODULE_7__.MSG_TYPE_AUTH_INVALID),\n/* harmony export */   MSG_TYPE_AUTH_OK: () => (/* reexport safe */ _socket_js__WEBPACK_IMPORTED_MODULE_7__.MSG_TYPE_AUTH_OK),\n/* harmony export */   MSG_TYPE_AUTH_REQUIRED: () => (/* reexport safe */ _socket_js__WEBPACK_IMPORTED_MODULE_7__.MSG_TYPE_AUTH_REQUIRED),\n/* harmony export */   STATE_FINAL_WRITE: () => (/* reexport safe */ _config_js__WEBPACK_IMPORTED_MODULE_3__.STATE_FINAL_WRITE),\n/* harmony export */   STATE_NOT_RUNNING: () => (/* reexport safe */ _config_js__WEBPACK_IMPORTED_MODULE_3__.STATE_NOT_RUNNING),\n/* harmony export */   STATE_RUNNING: () => (/* reexport safe */ _config_js__WEBPACK_IMPORTED_MODULE_3__.STATE_RUNNING),\n/* harmony export */   STATE_STARTING: () => (/* reexport safe */ _config_js__WEBPACK_IMPORTED_MODULE_3__.STATE_STARTING),\n/* harmony export */   STATE_STOPPING: () => (/* reexport safe */ _config_js__WEBPACK_IMPORTED_MODULE_3__.STATE_STOPPING),\n/* harmony export */   callService: () => (/* reexport safe */ _commands_js__WEBPACK_IMPORTED_MODULE_8__.callService),\n/* harmony export */   configColl: () => (/* reexport safe */ _config_js__WEBPACK_IMPORTED_MODULE_3__.configColl),\n/* harmony export */   createCollection: () => (/* reexport safe */ _collection_js__WEBPACK_IMPORTED_MODULE_1__.createCollection),\n/* harmony export */   createConnection: () => (/* binding */ createConnection),\n/* harmony export */   createLongLivedTokenAuth: () => (/* reexport safe */ _auth_js__WEBPACK_IMPORTED_MODULE_0__.createLongLivedTokenAuth),\n/* harmony export */   createSocket: () => (/* reexport safe */ _socket_js__WEBPACK_IMPORTED_MODULE_7__.createSocket),\n/* harmony export */   entitiesColl: () => (/* reexport safe */ _entities_js__WEBPACK_IMPORTED_MODULE_5__.entitiesColl),\n/* harmony export */   genClientId: () => (/* reexport safe */ _auth_js__WEBPACK_IMPORTED_MODULE_0__.genClientId),\n/* harmony export */   genExpires: () => (/* reexport safe */ _auth_js__WEBPACK_IMPORTED_MODULE_0__.genExpires),\n/* harmony export */   getAuth: () => (/* reexport safe */ _auth_js__WEBPACK_IMPORTED_MODULE_0__.getAuth),\n/* harmony export */   getCollection: () => (/* reexport safe */ _collection_js__WEBPACK_IMPORTED_MODULE_1__.getCollection),\n/* harmony export */   getConfig: () => (/* reexport safe */ _commands_js__WEBPACK_IMPORTED_MODULE_8__.getConfig),\n/* harmony export */   getServices: () => (/* reexport safe */ _commands_js__WEBPACK_IMPORTED_MODULE_8__.getServices),\n/* harmony export */   getStates: () => (/* reexport safe */ _commands_js__WEBPACK_IMPORTED_MODULE_8__.getStates),\n/* harmony export */   getUser: () => (/* reexport safe */ _commands_js__WEBPACK_IMPORTED_MODULE_8__.getUser),\n/* harmony export */   servicesColl: () => (/* reexport safe */ _services_js__WEBPACK_IMPORTED_MODULE_4__.servicesColl),\n/* harmony export */   subscribeConfig: () => (/* reexport safe */ _config_js__WEBPACK_IMPORTED_MODULE_3__.subscribeConfig),\n/* harmony export */   subscribeEntities: () => (/* reexport safe */ _entities_js__WEBPACK_IMPORTED_MODULE_5__.subscribeEntities),\n/* harmony export */   subscribeServices: () => (/* reexport safe */ _services_js__WEBPACK_IMPORTED_MODULE_4__.subscribeServices)\n/* harmony export */ });\n/* harmony import */ var _socket_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./socket.js */ \"./node_modules/home-assistant-js-websocket/dist/socket.js\");\n/* harmony import */ var _connection_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./connection.js */ \"./node_modules/home-assistant-js-websocket/dist/connection.js\");\n/* harmony import */ var _auth_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./auth.js */ \"./node_modules/home-assistant-js-websocket/dist/auth.js\");\n/* harmony import */ var _collection_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./collection.js */ \"./node_modules/home-assistant-js-websocket/dist/collection.js\");\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./config.js */ \"./node_modules/home-assistant-js-websocket/dist/config.js\");\n/* harmony import */ var _services_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./services.js */ \"./node_modules/home-assistant-js-websocket/dist/services.js\");\n/* harmony import */ var _entities_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./entities.js */ \"./node_modules/home-assistant-js-websocket/dist/entities.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./errors.js */ \"./node_modules/home-assistant-js-websocket/dist/errors.js\");\n/* harmony import */ var _commands_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./commands.js */ \"./node_modules/home-assistant-js-websocket/dist/commands.js\");\n// JS extensions in imports allow tsc output to be consumed by browsers.\n\n\n\n\n\n\n\n\n\n\n\n\nasync function createConnection(options) {\n  const connOptions = Object.assign({\n    setupRetry: 0,\n    createSocket: _socket_js__WEBPACK_IMPORTED_MODULE_7__.createSocket\n  }, options);\n  const socket = await connOptions.createSocket(connOptions);\n  const conn = new _connection_js__WEBPACK_IMPORTED_MODULE_2__.Connection(socket, connOptions);\n  return conn;\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvaG9tZS1hc3Npc3RhbnQtanMtd2Vic29ja2V0L2Rpc3QvaW5kZXguanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaG9tZS1hc3Npc3RhbnQtZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvaG9tZS1hc3Npc3RhbnQtanMtd2Vic29ja2V0L2Rpc3QvaW5kZXguanM/NDk2NiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBKUyBleHRlbnNpb25zIGluIGltcG9ydHMgYWxsb3cgdHNjIG91dHB1dCB0byBiZSBjb25zdW1lZCBieSBicm93c2Vycy5cbmltcG9ydCB7IGNyZWF0ZVNvY2tldCB9IGZyb20gXCIuL3NvY2tldC5qc1wiO1xuaW1wb3J0IHsgQ29ubmVjdGlvbiB9IGZyb20gXCIuL2Nvbm5lY3Rpb24uanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2F1dGguanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2NvbGxlY3Rpb24uanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2Nvbm5lY3Rpb24uanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2NvbmZpZy5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vc2VydmljZXMuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2VudGl0aWVzLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9lcnJvcnMuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3NvY2tldC5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vdHlwZXMuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2NvbW1hbmRzLmpzXCI7XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlQ29ubmVjdGlvbihvcHRpb25zKSB7XG4gICAgY29uc3QgY29ubk9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHsgc2V0dXBSZXRyeTogMCwgY3JlYXRlU29ja2V0IH0sIG9wdGlvbnMpO1xuICAgIGNvbnN0IHNvY2tldCA9IGF3YWl0IGNvbm5PcHRpb25zLmNyZWF0ZVNvY2tldChjb25uT3B0aW9ucyk7XG4gICAgY29uc3QgY29ubiA9IG5ldyBDb25uZWN0aW9uKHNvY2tldCwgY29ubk9wdGlvbnMpO1xuICAgIHJldHVybiBjb25uO1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/home-assistant-js-websocket/dist/index.js\n");

/***/ }),

/***/ "./node_modules/home-assistant-js-websocket/dist/messages.js":
/*!*******************************************************************!*\
  !*** ./node_modules/home-assistant-js-websocket/dist/messages.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   auth: () => (/* binding */ auth),\n/* harmony export */   callService: () => (/* binding */ callService),\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   error: () => (/* binding */ error),\n/* harmony export */   ping: () => (/* binding */ ping),\n/* harmony export */   services: () => (/* binding */ services),\n/* harmony export */   states: () => (/* binding */ states),\n/* harmony export */   subscribeEvents: () => (/* binding */ subscribeEvents),\n/* harmony export */   supportedFeatures: () => (/* binding */ supportedFeatures),\n/* harmony export */   unsubscribeEvents: () => (/* binding */ unsubscribeEvents),\n/* harmony export */   user: () => (/* binding */ user)\n/* harmony export */ });\nfunction auth(accessToken) {\n  return {\n    type: \"auth\",\n    access_token: accessToken\n  };\n}\nfunction supportedFeatures() {\n  return {\n    type: \"supported_features\",\n    id: 1,\n    features: {\n      coalesce_messages: 1\n    }\n  };\n}\nfunction states() {\n  return {\n    type: \"get_states\"\n  };\n}\nfunction config() {\n  return {\n    type: \"get_config\"\n  };\n}\nfunction services() {\n  return {\n    type: \"get_services\"\n  };\n}\nfunction user() {\n  return {\n    type: \"auth/current_user\"\n  };\n}\nfunction callService(domain, service, serviceData, target) {\n  const message = {\n    type: \"call_service\",\n    domain,\n    service,\n    target\n  };\n  if (serviceData) {\n    message.service_data = serviceData;\n  }\n  return message;\n}\nfunction subscribeEvents(eventType) {\n  const message = {\n    type: \"subscribe_events\"\n  };\n  if (eventType) {\n    message.event_type = eventType;\n  }\n  return message;\n}\nfunction unsubscribeEvents(subscription) {\n  return {\n    type: \"unsubscribe_events\",\n    subscription\n  };\n}\nfunction ping() {\n  return {\n    type: \"ping\"\n  };\n}\nfunction error(code, message) {\n  return {\n    type: \"result\",\n    success: false,\n    error: {\n      code,\n      message\n    }\n  };\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvaG9tZS1hc3Npc3RhbnQtanMtd2Vic29ja2V0L2Rpc3QvbWVzc2FnZXMuanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaG9tZS1hc3Npc3RhbnQtZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvaG9tZS1hc3Npc3RhbnQtanMtd2Vic29ja2V0L2Rpc3QvbWVzc2FnZXMuanM/ZDBhNyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gYXV0aChhY2Nlc3NUb2tlbikge1xuICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IFwiYXV0aFwiLFxuICAgICAgICBhY2Nlc3NfdG9rZW46IGFjY2Vzc1Rva2VuLFxuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gc3VwcG9ydGVkRmVhdHVyZXMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogXCJzdXBwb3J0ZWRfZmVhdHVyZXNcIixcbiAgICAgICAgaWQ6IDEsXG4gICAgICAgIGZlYXR1cmVzOiB7IGNvYWxlc2NlX21lc3NhZ2VzOiAxIH0sXG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzdGF0ZXMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogXCJnZXRfc3RhdGVzXCIsXG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjb25maWcoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogXCJnZXRfY29uZmlnXCIsXG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzZXJ2aWNlcygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiBcImdldF9zZXJ2aWNlc1wiLFxuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gdXNlcigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiBcImF1dGgvY3VycmVudF91c2VyXCIsXG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjYWxsU2VydmljZShkb21haW4sIHNlcnZpY2UsIHNlcnZpY2VEYXRhLCB0YXJnZXQpIHtcbiAgICBjb25zdCBtZXNzYWdlID0ge1xuICAgICAgICB0eXBlOiBcImNhbGxfc2VydmljZVwiLFxuICAgICAgICBkb21haW4sXG4gICAgICAgIHNlcnZpY2UsXG4gICAgICAgIHRhcmdldCxcbiAgICB9O1xuICAgIGlmIChzZXJ2aWNlRGF0YSkge1xuICAgICAgICBtZXNzYWdlLnNlcnZpY2VfZGF0YSA9IHNlcnZpY2VEYXRhO1xuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzdWJzY3JpYmVFdmVudHMoZXZlbnRUeXBlKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IHtcbiAgICAgICAgdHlwZTogXCJzdWJzY3JpYmVfZXZlbnRzXCIsXG4gICAgfTtcbiAgICBpZiAoZXZlbnRUeXBlKSB7XG4gICAgICAgIG1lc3NhZ2UuZXZlbnRfdHlwZSA9IGV2ZW50VHlwZTtcbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG59XG5leHBvcnQgZnVuY3Rpb24gdW5zdWJzY3JpYmVFdmVudHMoc3Vic2NyaXB0aW9uKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogXCJ1bnN1YnNjcmliZV9ldmVudHNcIixcbiAgICAgICAgc3Vic2NyaXB0aW9uLFxuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gcGluZygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiBcInBpbmdcIixcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGVycm9yKGNvZGUsIG1lc3NhZ2UpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiBcInJlc3VsdFwiLFxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICAgIGNvZGUsXG4gICAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICB9LFxuICAgIH07XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/home-assistant-js-websocket/dist/messages.js\n");

/***/ }),

/***/ "./node_modules/home-assistant-js-websocket/dist/services.js":
/*!*******************************************************************!*\
  !*** ./node_modules/home-assistant-js-websocket/dist/services.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   servicesColl: () => (/* binding */ servicesColl),\n/* harmony export */   subscribeServices: () => (/* binding */ subscribeServices)\n/* harmony export */ });\n/* harmony import */ var _collection_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./collection.js */ \"./node_modules/home-assistant-js-websocket/dist/collection.js\");\n/* harmony import */ var _commands_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./commands.js */ \"./node_modules/home-assistant-js-websocket/dist/commands.js\");\n/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./util.js */ \"./node_modules/home-assistant-js-websocket/dist/util.js\");\n\n\n\nfunction processServiceRegistered(conn, store, event) {\n  var _a;\n  const state = store.state;\n  if (state === undefined) return;\n  const {\n    domain,\n    service\n  } = event.data;\n  if (!((_a = state.domain) === null || _a === void 0 ? void 0 : _a.service)) {\n    const domainInfo = Object.assign(Object.assign({}, state[domain]), {\n      [service]: {\n        description: \"\",\n        fields: {}\n      }\n    });\n    store.setState({\n      [domain]: domainInfo\n    });\n  }\n  debouncedFetchServices(conn, store);\n}\nfunction processServiceRemoved(state, event) {\n  if (state === undefined) return null;\n  const {\n    domain,\n    service\n  } = event.data;\n  const curDomainInfo = state[domain];\n  if (!curDomainInfo || !(service in curDomainInfo)) return null;\n  const domainInfo = {};\n  Object.keys(curDomainInfo).forEach(sKey => {\n    if (sKey !== service) domainInfo[sKey] = curDomainInfo[sKey];\n  });\n  return {\n    [domain]: domainInfo\n  };\n}\nconst debouncedFetchServices = (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.debounce)((conn, store) => fetchServices(conn).then(services => store.setState(services, true)), 5000);\nconst fetchServices = conn => (0,_commands_js__WEBPACK_IMPORTED_MODULE_1__.getServices)(conn);\nconst subscribeUpdates = (conn, store) => Promise.all([conn.subscribeEvents(ev => processServiceRegistered(conn, store, ev), \"service_registered\"), conn.subscribeEvents(store.action(processServiceRemoved), \"service_removed\")]).then(unsubs => () => unsubs.forEach(fn => fn()));\nconst servicesColl = conn => (0,_collection_js__WEBPACK_IMPORTED_MODULE_2__.getCollection)(conn, \"_srv\", fetchServices, subscribeUpdates);\nconst subscribeServices = (conn, onChange) => servicesColl(conn).subscribe(onChange);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvaG9tZS1hc3Npc3RhbnQtanMtd2Vic29ja2V0L2Rpc3Qvc2VydmljZXMuanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ob21lLWFzc2lzdGFudC1mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9ob21lLWFzc2lzdGFudC1qcy13ZWJzb2NrZXQvZGlzdC9zZXJ2aWNlcy5qcz85NjRlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldENvbGxlY3Rpb24gfSBmcm9tIFwiLi9jb2xsZWN0aW9uLmpzXCI7XG5pbXBvcnQgeyBnZXRTZXJ2aWNlcyB9IGZyb20gXCIuL2NvbW1hbmRzLmpzXCI7XG5pbXBvcnQgeyBkZWJvdW5jZSB9IGZyb20gXCIuL3V0aWwuanNcIjtcbmZ1bmN0aW9uIHByb2Nlc3NTZXJ2aWNlUmVnaXN0ZXJlZChjb25uLCBzdG9yZSwgZXZlbnQpIHtcbiAgICB2YXIgX2E7XG4gICAgY29uc3Qgc3RhdGUgPSBzdG9yZS5zdGF0ZTtcbiAgICBpZiAoc3RhdGUgPT09IHVuZGVmaW5lZClcbiAgICAgICAgcmV0dXJuO1xuICAgIGNvbnN0IHsgZG9tYWluLCBzZXJ2aWNlIH0gPSBldmVudC5kYXRhO1xuICAgIGlmICghKChfYSA9IHN0YXRlLmRvbWFpbikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnNlcnZpY2UpKSB7XG4gICAgICAgIGNvbnN0IGRvbWFpbkluZm8gPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHN0YXRlW2RvbWFpbl0pLCB7IFtzZXJ2aWNlXTogeyBkZXNjcmlwdGlvbjogXCJcIiwgZmllbGRzOiB7fSB9IH0pO1xuICAgICAgICBzdG9yZS5zZXRTdGF0ZSh7IFtkb21haW5dOiBkb21haW5JbmZvIH0pO1xuICAgIH1cbiAgICBkZWJvdW5jZWRGZXRjaFNlcnZpY2VzKGNvbm4sIHN0b3JlKTtcbn1cbmZ1bmN0aW9uIHByb2Nlc3NTZXJ2aWNlUmVtb3ZlZChzdGF0ZSwgZXZlbnQpIHtcbiAgICBpZiAoc3RhdGUgPT09IHVuZGVmaW5lZClcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgY29uc3QgeyBkb21haW4sIHNlcnZpY2UgfSA9IGV2ZW50LmRhdGE7XG4gICAgY29uc3QgY3VyRG9tYWluSW5mbyA9IHN0YXRlW2RvbWFpbl07XG4gICAgaWYgKCFjdXJEb21haW5JbmZvIHx8ICEoc2VydmljZSBpbiBjdXJEb21haW5JbmZvKSlcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgY29uc3QgZG9tYWluSW5mbyA9IHt9O1xuICAgIE9iamVjdC5rZXlzKGN1ckRvbWFpbkluZm8pLmZvckVhY2goKHNLZXkpID0+IHtcbiAgICAgICAgaWYgKHNLZXkgIT09IHNlcnZpY2UpXG4gICAgICAgICAgICBkb21haW5JbmZvW3NLZXldID0gY3VyRG9tYWluSW5mb1tzS2V5XTtcbiAgICB9KTtcbiAgICByZXR1cm4geyBbZG9tYWluXTogZG9tYWluSW5mbyB9O1xufVxuY29uc3QgZGVib3VuY2VkRmV0Y2hTZXJ2aWNlcyA9IGRlYm91bmNlKChjb25uLCBzdG9yZSkgPT4gZmV0Y2hTZXJ2aWNlcyhjb25uKS50aGVuKChzZXJ2aWNlcykgPT4gc3RvcmUuc2V0U3RhdGUoc2VydmljZXMsIHRydWUpKSwgNTAwMCk7XG5jb25zdCBmZXRjaFNlcnZpY2VzID0gKGNvbm4pID0+IGdldFNlcnZpY2VzKGNvbm4pO1xuY29uc3Qgc3Vic2NyaWJlVXBkYXRlcyA9IChjb25uLCBzdG9yZSkgPT4gUHJvbWlzZS5hbGwoW1xuICAgIGNvbm4uc3Vic2NyaWJlRXZlbnRzKChldikgPT4gcHJvY2Vzc1NlcnZpY2VSZWdpc3RlcmVkKGNvbm4sIHN0b3JlLCBldiksIFwic2VydmljZV9yZWdpc3RlcmVkXCIpLFxuICAgIGNvbm4uc3Vic2NyaWJlRXZlbnRzKHN0b3JlLmFjdGlvbihwcm9jZXNzU2VydmljZVJlbW92ZWQpLCBcInNlcnZpY2VfcmVtb3ZlZFwiKSxcbl0pLnRoZW4oKHVuc3VicykgPT4gKCkgPT4gdW5zdWJzLmZvckVhY2goKGZuKSA9PiBmbigpKSk7XG5leHBvcnQgY29uc3Qgc2VydmljZXNDb2xsID0gKGNvbm4pID0+IGdldENvbGxlY3Rpb24oY29ubiwgXCJfc3J2XCIsIGZldGNoU2VydmljZXMsIHN1YnNjcmliZVVwZGF0ZXMpO1xuZXhwb3J0IGNvbnN0IHN1YnNjcmliZVNlcnZpY2VzID0gKGNvbm4sIG9uQ2hhbmdlKSA9PiBzZXJ2aWNlc0NvbGwoY29ubikuc3Vic2NyaWJlKG9uQ2hhbmdlKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/home-assistant-js-websocket/dist/services.js\n");

/***/ }),

/***/ "./node_modules/home-assistant-js-websocket/dist/socket.js":
/*!*****************************************************************!*\
  !*** ./node_modules/home-assistant-js-websocket/dist/socket.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MSG_TYPE_AUTH_INVALID: () => (/* binding */ MSG_TYPE_AUTH_INVALID),\n/* harmony export */   MSG_TYPE_AUTH_OK: () => (/* binding */ MSG_TYPE_AUTH_OK),\n/* harmony export */   MSG_TYPE_AUTH_REQUIRED: () => (/* binding */ MSG_TYPE_AUTH_REQUIRED),\n/* harmony export */   createSocket: () => (/* binding */ createSocket)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./errors.js */ \"./node_modules/home-assistant-js-websocket/dist/errors.js\");\n/* harmony import */ var _messages_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./messages.js */ \"./node_modules/home-assistant-js-websocket/dist/messages.js\");\n/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./util.js */ \"./node_modules/home-assistant-js-websocket/dist/util.js\");\n/**\n * Create a web socket connection with a ioBroker instance.\n */\n\n\n\nconst DEBUG = false;\nconst MSG_TYPE_AUTH_REQUIRED = \"auth_required\";\nconst MSG_TYPE_AUTH_INVALID = \"auth_invalid\";\nconst MSG_TYPE_AUTH_OK = \"auth_ok\";\nfunction createSocket(options) {\n  if (!options.auth) {\n    throw _errors_js__WEBPACK_IMPORTED_MODULE_0__.ERR_HASS_HOST_REQUIRED;\n  }\n  const auth = options.auth;\n  // Start refreshing expired tokens even before the WS connection is open.\n  // We know that we will need auth anyway.\n  let authRefreshTask = auth.expired ? auth.refreshAccessToken().then(() => {\n    authRefreshTask = undefined;\n  }, () => {\n    authRefreshTask = undefined;\n  }) : undefined;\n  // Convert from http:// -> ws://, https:// -> wss://\n  const url = auth.wsUrl;\n  if (DEBUG) {\n    console.log(\"[Auth phase] Initializing\", url);\n  }\n  function connect(triesLeft, promResolve, promReject) {\n    if (DEBUG) {\n      console.log(\"[Auth Phase] New connection\", url);\n    }\n    const socket = new WebSocket(url);\n    // If invalid auth, we will not try to reconnect.\n    let invalidAuth = false;\n    const closeMessage = () => {\n      // If we are in error handler make sure close handler doesn't also fire.\n      socket.removeEventListener(\"close\", closeMessage);\n      if (invalidAuth) {\n        promReject(_errors_js__WEBPACK_IMPORTED_MODULE_0__.ERR_INVALID_AUTH);\n        return;\n      }\n      // Reject if we no longer have to retry\n      if (triesLeft === 0) {\n        // We never were connected and will not retry\n        promReject(_errors_js__WEBPACK_IMPORTED_MODULE_0__.ERR_CANNOT_CONNECT);\n        return;\n      }\n      const newTries = triesLeft === -1 ? -1 : triesLeft - 1;\n      // Try again in a second\n      setTimeout(() => connect(newTries, promResolve, promReject), 1000);\n    };\n    // Auth is mandatory, so we can send the auth message right away.\n    const handleOpen = async event => {\n      try {\n        if (auth.expired) {\n          await (authRefreshTask ? authRefreshTask : auth.refreshAccessToken());\n        }\n        socket.send(JSON.stringify(_messages_js__WEBPACK_IMPORTED_MODULE_1__.auth(auth.accessToken)));\n      } catch (err) {\n        // Refresh token failed\n        invalidAuth = err === _errors_js__WEBPACK_IMPORTED_MODULE_0__.ERR_INVALID_AUTH;\n        socket.close();\n      }\n    };\n    const handleMessage = async event => {\n      const message = JSON.parse(event.data);\n      if (DEBUG) {\n        console.log(\"[Auth phase] Received\", message);\n      }\n      switch (message.type) {\n        case MSG_TYPE_AUTH_INVALID:\n          invalidAuth = true;\n          socket.close();\n          break;\n        case MSG_TYPE_AUTH_OK:\n          socket.removeEventListener(\"open\", handleOpen);\n          socket.removeEventListener(\"message\", handleMessage);\n          socket.removeEventListener(\"close\", closeMessage);\n          socket.removeEventListener(\"error\", closeMessage);\n          socket.haVersion = message.ha_version;\n          if ((0,_util_js__WEBPACK_IMPORTED_MODULE_2__.atLeastHaVersion)(socket.haVersion, 2022, 9)) {\n            socket.send(JSON.stringify(_messages_js__WEBPACK_IMPORTED_MODULE_1__.supportedFeatures()));\n          }\n          promResolve(socket);\n          break;\n        default:\n          if (DEBUG) {\n            // We already send response to this message when socket opens\n            if (message.type !== MSG_TYPE_AUTH_REQUIRED) {\n              console.warn(\"[Auth phase] Unhandled message\", message);\n            }\n          }\n      }\n    };\n    socket.addEventListener(\"open\", handleOpen);\n    socket.addEventListener(\"message\", handleMessage);\n    socket.addEventListener(\"close\", closeMessage);\n    socket.addEventListener(\"error\", closeMessage);\n  }\n  return new Promise((resolve, reject) => connect(options.setupRetry, resolve, reject));\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvaG9tZS1hc3Npc3RhbnQtanMtd2Vic29ja2V0L2Rpc3Qvc29ja2V0LmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaG9tZS1hc3Npc3RhbnQtZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvaG9tZS1hc3Npc3RhbnQtanMtd2Vic29ja2V0L2Rpc3Qvc29ja2V0LmpzPzAyNWUiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDcmVhdGUgYSB3ZWIgc29ja2V0IGNvbm5lY3Rpb24gd2l0aCBhIEhvbWUgQXNzaXN0YW50IGluc3RhbmNlLlxuICovXG5pbXBvcnQgeyBFUlJfSU5WQUxJRF9BVVRILCBFUlJfQ0FOTk9UX0NPTk5FQ1QsIEVSUl9IQVNTX0hPU1RfUkVRVUlSRUQsIH0gZnJvbSBcIi4vZXJyb3JzLmpzXCI7XG5pbXBvcnQgKiBhcyBtZXNzYWdlcyBmcm9tIFwiLi9tZXNzYWdlcy5qc1wiO1xuaW1wb3J0IHsgYXRMZWFzdEhhVmVyc2lvbiB9IGZyb20gXCIuL3V0aWwuanNcIjtcbmNvbnN0IERFQlVHID0gZmFsc2U7XG5leHBvcnQgY29uc3QgTVNHX1RZUEVfQVVUSF9SRVFVSVJFRCA9IFwiYXV0aF9yZXF1aXJlZFwiO1xuZXhwb3J0IGNvbnN0IE1TR19UWVBFX0FVVEhfSU5WQUxJRCA9IFwiYXV0aF9pbnZhbGlkXCI7XG5leHBvcnQgY29uc3QgTVNHX1RZUEVfQVVUSF9PSyA9IFwiYXV0aF9va1wiO1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNvY2tldChvcHRpb25zKSB7XG4gICAgaWYgKCFvcHRpb25zLmF1dGgpIHtcbiAgICAgICAgdGhyb3cgRVJSX0hBU1NfSE9TVF9SRVFVSVJFRDtcbiAgICB9XG4gICAgY29uc3QgYXV0aCA9IG9wdGlvbnMuYXV0aDtcbiAgICAvLyBTdGFydCByZWZyZXNoaW5nIGV4cGlyZWQgdG9rZW5zIGV2ZW4gYmVmb3JlIHRoZSBXUyBjb25uZWN0aW9uIGlzIG9wZW4uXG4gICAgLy8gV2Uga25vdyB0aGF0IHdlIHdpbGwgbmVlZCBhdXRoIGFueXdheS5cbiAgICBsZXQgYXV0aFJlZnJlc2hUYXNrID0gYXV0aC5leHBpcmVkXG4gICAgICAgID8gYXV0aC5yZWZyZXNoQWNjZXNzVG9rZW4oKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIGF1dGhSZWZyZXNoVGFzayA9IHVuZGVmaW5lZDtcbiAgICAgICAgfSwgKCkgPT4ge1xuICAgICAgICAgICAgYXV0aFJlZnJlc2hUYXNrID0gdW5kZWZpbmVkO1xuICAgICAgICB9KVxuICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAvLyBDb252ZXJ0IGZyb20gaHR0cDovLyAtPiB3czovLywgaHR0cHM6Ly8gLT4gd3NzOi8vXG4gICAgY29uc3QgdXJsID0gYXV0aC53c1VybDtcbiAgICBpZiAoREVCVUcpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJbQXV0aCBwaGFzZV0gSW5pdGlhbGl6aW5nXCIsIHVybCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNvbm5lY3QodHJpZXNMZWZ0LCBwcm9tUmVzb2x2ZSwgcHJvbVJlamVjdCkge1xuICAgICAgICBpZiAoREVCVUcpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiW0F1dGggUGhhc2VdIE5ldyBjb25uZWN0aW9uXCIsIHVybCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc29ja2V0ID0gbmV3IFdlYlNvY2tldCh1cmwpO1xuICAgICAgICAvLyBJZiBpbnZhbGlkIGF1dGgsIHdlIHdpbGwgbm90IHRyeSB0byByZWNvbm5lY3QuXG4gICAgICAgIGxldCBpbnZhbGlkQXV0aCA9IGZhbHNlO1xuICAgICAgICBjb25zdCBjbG9zZU1lc3NhZ2UgPSAoKSA9PiB7XG4gICAgICAgICAgICAvLyBJZiB3ZSBhcmUgaW4gZXJyb3IgaGFuZGxlciBtYWtlIHN1cmUgY2xvc2UgaGFuZGxlciBkb2Vzbid0IGFsc28gZmlyZS5cbiAgICAgICAgICAgIHNvY2tldC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xvc2VcIiwgY2xvc2VNZXNzYWdlKTtcbiAgICAgICAgICAgIGlmIChpbnZhbGlkQXV0aCkge1xuICAgICAgICAgICAgICAgIHByb21SZWplY3QoRVJSX0lOVkFMSURfQVVUSCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gUmVqZWN0IGlmIHdlIG5vIGxvbmdlciBoYXZlIHRvIHJldHJ5XG4gICAgICAgICAgICBpZiAodHJpZXNMZWZ0ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgLy8gV2UgbmV2ZXIgd2VyZSBjb25uZWN0ZWQgYW5kIHdpbGwgbm90IHJldHJ5XG4gICAgICAgICAgICAgICAgcHJvbVJlamVjdChFUlJfQ0FOTk9UX0NPTk5FQ1QpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG5ld1RyaWVzID0gdHJpZXNMZWZ0ID09PSAtMSA/IC0xIDogdHJpZXNMZWZ0IC0gMTtcbiAgICAgICAgICAgIC8vIFRyeSBhZ2FpbiBpbiBhIHNlY29uZFxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBjb25uZWN0KG5ld1RyaWVzLCBwcm9tUmVzb2x2ZSwgcHJvbVJlamVjdCksIDEwMDApO1xuICAgICAgICB9O1xuICAgICAgICAvLyBBdXRoIGlzIG1hbmRhdG9yeSwgc28gd2UgY2FuIHNlbmQgdGhlIGF1dGggbWVzc2FnZSByaWdodCBhd2F5LlxuICAgICAgICBjb25zdCBoYW5kbGVPcGVuID0gYXN5bmMgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmIChhdXRoLmV4cGlyZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgKGF1dGhSZWZyZXNoVGFzayA/IGF1dGhSZWZyZXNoVGFzayA6IGF1dGgucmVmcmVzaEFjY2Vzc1Rva2VuKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzb2NrZXQuc2VuZChKU09OLnN0cmluZ2lmeShtZXNzYWdlcy5hdXRoKGF1dGguYWNjZXNzVG9rZW4pKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgLy8gUmVmcmVzaCB0b2tlbiBmYWlsZWRcbiAgICAgICAgICAgICAgICBpbnZhbGlkQXV0aCA9IGVyciA9PT0gRVJSX0lOVkFMSURfQVVUSDtcbiAgICAgICAgICAgICAgICBzb2NrZXQuY2xvc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgaGFuZGxlTWVzc2FnZSA9IGFzeW5jIChldmVudCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YSk7XG4gICAgICAgICAgICBpZiAoREVCVUcpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIltBdXRoIHBoYXNlXSBSZWNlaXZlZFwiLCBtZXNzYWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN3aXRjaCAobWVzc2FnZS50eXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBNU0dfVFlQRV9BVVRIX0lOVkFMSUQ6XG4gICAgICAgICAgICAgICAgICAgIGludmFsaWRBdXRoID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgc29ja2V0LmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgTVNHX1RZUEVfQVVUSF9PSzpcbiAgICAgICAgICAgICAgICAgICAgc29ja2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJvcGVuXCIsIGhhbmRsZU9wZW4pO1xuICAgICAgICAgICAgICAgICAgICBzb2NrZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgaGFuZGxlTWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgIHNvY2tldC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xvc2VcIiwgY2xvc2VNZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgc29ja2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLCBjbG9zZU1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICBzb2NrZXQuaGFWZXJzaW9uID0gbWVzc2FnZS5oYV92ZXJzaW9uO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYXRMZWFzdEhhVmVyc2lvbihzb2NrZXQuaGFWZXJzaW9uLCAyMDIyLCA5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc29ja2V0LnNlbmQoSlNPTi5zdHJpbmdpZnkobWVzc2FnZXMuc3VwcG9ydGVkRmVhdHVyZXMoKSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHByb21SZXNvbHZlKHNvY2tldCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGlmIChERUJVRykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2UgYWxyZWFkeSBzZW5kIHJlc3BvbnNlIHRvIHRoaXMgbWVzc2FnZSB3aGVuIHNvY2tldCBvcGVuc1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UudHlwZSAhPT0gTVNHX1RZUEVfQVVUSF9SRVFVSVJFRCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIltBdXRoIHBoYXNlXSBVbmhhbmRsZWQgbWVzc2FnZVwiLCBtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBzb2NrZXQuYWRkRXZlbnRMaXN0ZW5lcihcIm9wZW5cIiwgaGFuZGxlT3Blbik7XG4gICAgICAgIHNvY2tldC5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCBoYW5kbGVNZXNzYWdlKTtcbiAgICAgICAgc29ja2V0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbG9zZVwiLCBjbG9zZU1lc3NhZ2UpO1xuICAgICAgICBzb2NrZXQuYWRkRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsIGNsb3NlTWVzc2FnZSk7XG4gICAgfVxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiBjb25uZWN0KG9wdGlvbnMuc2V0dXBSZXRyeSwgcmVzb2x2ZSwgcmVqZWN0KSk7XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/home-assistant-js-websocket/dist/socket.js\n");

/***/ }),

/***/ "./node_modules/home-assistant-js-websocket/dist/store.js":
/*!****************************************************************!*\
  !*** ./node_modules/home-assistant-js-websocket/dist/store.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createStore: () => (/* binding */ createStore)\n/* harmony export */ });\nconst createStore = state => {\n  let listeners = [];\n  function unsubscribe(listener) {\n    let out = [];\n    for (let i = 0; i < listeners.length; i++) {\n      if (listeners[i] === listener) {\n        listener = null;\n      } else {\n        out.push(listeners[i]);\n      }\n    }\n    listeners = out;\n  }\n  function setState(update, overwrite) {\n    state = overwrite ? update : Object.assign(Object.assign({}, state), update);\n    let currentListeners = listeners;\n    for (let i = 0; i < currentListeners.length; i++) {\n      currentListeners[i](state);\n    }\n  }\n  /**\n   * An observable state container, returned from {@link createStore}\n   * @name store\n   */\n  return {\n    get state() {\n      return state;\n    },\n    /**\n     * Create a bound copy of the given action function.\n     * The bound returned function invokes action() and persists the result back to the store.\n     * If the return value of `action` is a Promise, the resolved value will be used as state.\n     * @param {Function} action\tAn action of the form `action(state, ...args) -> stateUpdate`\n     * @returns {Function} boundAction()\n     */\n    action(action) {\n      function apply(result) {\n        setState(result, false);\n      }\n      // Note: perf tests verifying this implementation: https://esbench.com/bench/5a295e6299634800a0349500\n      return function () {\n        let args = [state];\n        for (let i = 0; i < arguments.length; i++) args.push(arguments[i]);\n        // @ts-ignore\n        let ret = action.apply(this, args);\n        if (ret != null) {\n          return ret instanceof Promise ? ret.then(apply) : apply(ret);\n        }\n      };\n    },\n    /**\n     * Apply a partial state object to the current state, invoking registered listeners.\n     * @param {Object} update\t\t\t\tAn object with properties to be merged into state\n     * @param {Boolean} [overwrite=false]\tIf `true`, update will replace state instead of being merged into it\n     */\n    setState,\n    /**\n     * Register a listener function to be called whenever state is changed. Returns an `unsubscribe()` function.\n     * @param {Function} listener\tA function to call when state changes. Gets passed the new state.\n     * @returns {Function} unsubscribe()\n     */\n    subscribe(listener) {\n      listeners.push(listener);\n      return () => {\n        unsubscribe(listener);\n      };\n    }\n    // /**\n    //  * Remove a previously-registered listener function.\n    //  * @param {Function} listener\tThe callback previously passed to `subscribe()` that should be removed.\n    //  * @function\n    //  */\n    // unsubscribe,\n  };\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvaG9tZS1hc3Npc3RhbnQtanMtd2Vic29ja2V0L2Rpc3Qvc3RvcmUuanMuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2hvbWUtYXNzaXN0YW50LWZyb250ZW5kLy4vbm9kZV9tb2R1bGVzL2hvbWUtYXNzaXN0YW50LWpzLXdlYnNvY2tldC9kaXN0L3N0b3JlLmpzPzA5ZmQiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IGNyZWF0ZVN0b3JlID0gKHN0YXRlKSA9PiB7XG4gICAgbGV0IGxpc3RlbmVycyA9IFtdO1xuICAgIGZ1bmN0aW9uIHVuc3Vic2NyaWJlKGxpc3RlbmVyKSB7XG4gICAgICAgIGxldCBvdXQgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0ZW5lcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChsaXN0ZW5lcnNbaV0gPT09IGxpc3RlbmVyKSB7XG4gICAgICAgICAgICAgICAgbGlzdGVuZXIgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgb3V0LnB1c2gobGlzdGVuZXJzW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsaXN0ZW5lcnMgPSBvdXQ7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNldFN0YXRlKHVwZGF0ZSwgb3ZlcndyaXRlKSB7XG4gICAgICAgIHN0YXRlID0gb3ZlcndyaXRlID8gdXBkYXRlIDogT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBzdGF0ZSksIHVwZGF0ZSk7XG4gICAgICAgIGxldCBjdXJyZW50TGlzdGVuZXJzID0gbGlzdGVuZXJzO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGN1cnJlbnRMaXN0ZW5lcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGN1cnJlbnRMaXN0ZW5lcnNbaV0oc3RhdGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFuIG9ic2VydmFibGUgc3RhdGUgY29udGFpbmVyLCByZXR1cm5lZCBmcm9tIHtAbGluayBjcmVhdGVTdG9yZX1cbiAgICAgKiBAbmFtZSBzdG9yZVxuICAgICAqL1xuICAgIHJldHVybiB7XG4gICAgICAgIGdldCBzdGF0ZSgpIHtcbiAgICAgICAgICAgIHJldHVybiBzdGF0ZTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZSBhIGJvdW5kIGNvcHkgb2YgdGhlIGdpdmVuIGFjdGlvbiBmdW5jdGlvbi5cbiAgICAgICAgICogVGhlIGJvdW5kIHJldHVybmVkIGZ1bmN0aW9uIGludm9rZXMgYWN0aW9uKCkgYW5kIHBlcnNpc3RzIHRoZSByZXN1bHQgYmFjayB0byB0aGUgc3RvcmUuXG4gICAgICAgICAqIElmIHRoZSByZXR1cm4gdmFsdWUgb2YgYGFjdGlvbmAgaXMgYSBQcm9taXNlLCB0aGUgcmVzb2x2ZWQgdmFsdWUgd2lsbCBiZSB1c2VkIGFzIHN0YXRlLlxuICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBhY3Rpb25cdEFuIGFjdGlvbiBvZiB0aGUgZm9ybSBgYWN0aW9uKHN0YXRlLCAuLi5hcmdzKSAtPiBzdGF0ZVVwZGF0ZWBcbiAgICAgICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBib3VuZEFjdGlvbigpXG4gICAgICAgICAqL1xuICAgICAgICBhY3Rpb24oYWN0aW9uKSB7XG4gICAgICAgICAgICBmdW5jdGlvbiBhcHBseShyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBzZXRTdGF0ZShyZXN1bHQsIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIE5vdGU6IHBlcmYgdGVzdHMgdmVyaWZ5aW5nIHRoaXMgaW1wbGVtZW50YXRpb246IGh0dHBzOi8vZXNiZW5jaC5jb20vYmVuY2gvNWEyOTVlNjI5OTYzNDgwMGEwMzQ5NTAwXG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGxldCBhcmdzID0gW3N0YXRlXTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgICAgICAgICAgYXJncy5wdXNoKGFyZ3VtZW50c1tpXSk7XG4gICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgICAgIGxldCByZXQgPSBhY3Rpb24uYXBwbHkodGhpcywgYXJncyk7XG4gICAgICAgICAgICAgICAgaWYgKHJldCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXQgaW5zdGFuY2VvZiBQcm9taXNlID8gcmV0LnRoZW4oYXBwbHkpIDogYXBwbHkocmV0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICogQXBwbHkgYSBwYXJ0aWFsIHN0YXRlIG9iamVjdCB0byB0aGUgY3VycmVudCBzdGF0ZSwgaW52b2tpbmcgcmVnaXN0ZXJlZCBsaXN0ZW5lcnMuXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSB1cGRhdGVcdFx0XHRcdEFuIG9iamVjdCB3aXRoIHByb3BlcnRpZXMgdG8gYmUgbWVyZ2VkIGludG8gc3RhdGVcbiAgICAgICAgICogQHBhcmFtIHtCb29sZWFufSBbb3ZlcndyaXRlPWZhbHNlXVx0SWYgYHRydWVgLCB1cGRhdGUgd2lsbCByZXBsYWNlIHN0YXRlIGluc3RlYWQgb2YgYmVpbmcgbWVyZ2VkIGludG8gaXRcbiAgICAgICAgICovXG4gICAgICAgIHNldFN0YXRlLFxuICAgICAgICAvKipcbiAgICAgICAgICogUmVnaXN0ZXIgYSBsaXN0ZW5lciBmdW5jdGlvbiB0byBiZSBjYWxsZWQgd2hlbmV2ZXIgc3RhdGUgaXMgY2hhbmdlZC4gUmV0dXJucyBhbiBgdW5zdWJzY3JpYmUoKWAgZnVuY3Rpb24uXG4gICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGxpc3RlbmVyXHRBIGZ1bmN0aW9uIHRvIGNhbGwgd2hlbiBzdGF0ZSBjaGFuZ2VzLiBHZXRzIHBhc3NlZCB0aGUgbmV3IHN0YXRlLlxuICAgICAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IHVuc3Vic2NyaWJlKClcbiAgICAgICAgICovXG4gICAgICAgIHN1YnNjcmliZShsaXN0ZW5lcikge1xuICAgICAgICAgICAgbGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xuICAgICAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgICAgICB1bnN1YnNjcmliZShsaXN0ZW5lcik7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICAvLyAvKipcbiAgICAgICAgLy8gICogUmVtb3ZlIGEgcHJldmlvdXNseS1yZWdpc3RlcmVkIGxpc3RlbmVyIGZ1bmN0aW9uLlxuICAgICAgICAvLyAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBsaXN0ZW5lclx0VGhlIGNhbGxiYWNrIHByZXZpb3VzbHkgcGFzc2VkIHRvIGBzdWJzY3JpYmUoKWAgdGhhdCBzaG91bGQgYmUgcmVtb3ZlZC5cbiAgICAgICAgLy8gICogQGZ1bmN0aW9uXG4gICAgICAgIC8vICAqL1xuICAgICAgICAvLyB1bnN1YnNjcmliZSxcbiAgICB9O1xufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/home-assistant-js-websocket/dist/store.js\n");

/***/ }),

/***/ "./node_modules/home-assistant-js-websocket/dist/util.js":
/*!***************************************************************!*\
  !*** ./node_modules/home-assistant-js-websocket/dist/util.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   atLeastHaVersion: () => (/* binding */ atLeastHaVersion),\n/* harmony export */   debounce: () => (/* binding */ debounce),\n/* harmony export */   parseQuery: () => (/* binding */ parseQuery)\n/* harmony export */ });\nfunction parseQuery(queryString) {\n  const query = {};\n  const items = queryString.split(\"&\");\n  for (let i = 0; i < items.length; i++) {\n    const item = items[i].split(\"=\");\n    const key = decodeURIComponent(item[0]);\n    const value = item.length > 1 ? decodeURIComponent(item[1]) : undefined;\n    query[key] = value;\n  }\n  return query;\n}\n// From: https://davidwalsh.name/javascript-debounce-function\n// Returns a function, that, as long as it continues to be invoked, will not\n// be triggered. The function will be called after it stops being called for\n// N milliseconds. If `immediate` is passed, trigger the function on the\n// leading edge, instead of the trailing.\n// eslint-disable-next-line: ban-types\nconst debounce = (func, wait, immediate = false) => {\n  let timeout;\n  // @ts-ignore\n  return function (...args) {\n    // @ts-ignore\n    const context = this;\n    const later = () => {\n      timeout = undefined;\n      if (!immediate) {\n        func.apply(context, args);\n      }\n    };\n    const callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n    if (callNow) {\n      func.apply(context, args);\n    }\n  };\n};\nconst atLeastHaVersion = (version, major, minor, patch) => {\n  const [haMajor, haMinor, haPatch] = version.split(\".\", 3);\n  return Number(haMajor) > major || Number(haMajor) === major && (patch === undefined ? Number(haMinor) >= minor : Number(haMinor) > minor) || patch !== undefined && Number(haMajor) === major && Number(haMinor) === minor && Number(haPatch) >= patch;\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvaG9tZS1hc3Npc3RhbnQtanMtd2Vic29ja2V0L2Rpc3QvdXRpbC5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaG9tZS1hc3Npc3RhbnQtZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvaG9tZS1hc3Npc3RhbnQtanMtd2Vic29ja2V0L2Rpc3QvdXRpbC5qcz80OTNmIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBmdW5jdGlvbiBwYXJzZVF1ZXJ5KHF1ZXJ5U3RyaW5nKSB7XG4gICAgY29uc3QgcXVlcnkgPSB7fTtcbiAgICBjb25zdCBpdGVtcyA9IHF1ZXJ5U3RyaW5nLnNwbGl0KFwiJlwiKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGl0ZW0gPSBpdGVtc1tpXS5zcGxpdChcIj1cIik7XG4gICAgICAgIGNvbnN0IGtleSA9IGRlY29kZVVSSUNvbXBvbmVudChpdGVtWzBdKTtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBpdGVtLmxlbmd0aCA+IDEgPyBkZWNvZGVVUklDb21wb25lbnQoaXRlbVsxXSkgOiB1bmRlZmluZWQ7XG4gICAgICAgIHF1ZXJ5W2tleV0gPSB2YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHF1ZXJ5O1xufVxuLy8gRnJvbTogaHR0cHM6Ly9kYXZpZHdhbHNoLm5hbWUvamF2YXNjcmlwdC1kZWJvdW5jZS1mdW5jdGlvblxuLy8gUmV0dXJucyBhIGZ1bmN0aW9uLCB0aGF0LCBhcyBsb25nIGFzIGl0IGNvbnRpbnVlcyB0byBiZSBpbnZva2VkLCB3aWxsIG5vdFxuLy8gYmUgdHJpZ2dlcmVkLiBUaGUgZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgYWZ0ZXIgaXQgc3RvcHMgYmVpbmcgY2FsbGVkIGZvclxuLy8gTiBtaWxsaXNlY29uZHMuIElmIGBpbW1lZGlhdGVgIGlzIHBhc3NlZCwgdHJpZ2dlciB0aGUgZnVuY3Rpb24gb24gdGhlXG4vLyBsZWFkaW5nIGVkZ2UsIGluc3RlYWQgb2YgdGhlIHRyYWlsaW5nLlxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lOiBiYW4tdHlwZXNcbmV4cG9ydCBjb25zdCBkZWJvdW5jZSA9IChmdW5jLCB3YWl0LCBpbW1lZGlhdGUgPSBmYWxzZSkgPT4ge1xuICAgIGxldCB0aW1lb3V0O1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICByZXR1cm4gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBjb25zdCBjb250ZXh0ID0gdGhpcztcbiAgICAgICAgY29uc3QgbGF0ZXIgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aW1lb3V0ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgaWYgKCFpbW1lZGlhdGUpIHtcbiAgICAgICAgICAgICAgICBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBjYWxsTm93ID0gaW1tZWRpYXRlICYmICF0aW1lb3V0O1xuICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0KTtcbiAgICAgICAgaWYgKGNhbGxOb3cpIHtcbiAgICAgICAgICAgIGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgICAgIH1cbiAgICB9O1xufTtcbmV4cG9ydCBjb25zdCBhdExlYXN0SGFWZXJzaW9uID0gKHZlcnNpb24sIG1ham9yLCBtaW5vciwgcGF0Y2gpID0+IHtcbiAgICBjb25zdCBbaGFNYWpvciwgaGFNaW5vciwgaGFQYXRjaF0gPSB2ZXJzaW9uLnNwbGl0KFwiLlwiLCAzKTtcbiAgICByZXR1cm4gKE51bWJlcihoYU1ham9yKSA+IG1ham9yIHx8XG4gICAgICAgIChOdW1iZXIoaGFNYWpvcikgPT09IG1ham9yICYmXG4gICAgICAgICAgICAocGF0Y2ggPT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgID8gTnVtYmVyKGhhTWlub3IpID49IG1pbm9yXG4gICAgICAgICAgICAgICAgOiBOdW1iZXIoaGFNaW5vcikgPiBtaW5vcikpIHx8XG4gICAgICAgIChwYXRjaCAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICBOdW1iZXIoaGFNYWpvcikgPT09IG1ham9yICYmXG4gICAgICAgICAgICBOdW1iZXIoaGFNaW5vcikgPT09IG1pbm9yICYmXG4gICAgICAgICAgICBOdW1iZXIoaGFQYXRjaCkgPj0gcGF0Y2gpKTtcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/home-assistant-js-websocket/dist/util.js\n");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = __webpack_modules__;
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/ensure chunk */
/******/ 	(() => {
/******/ 		__webpack_require__.f = {};
/******/ 		// This file contains only the entry chunk.
/******/ 		// The chunk loading function for additional chunks
/******/ 		__webpack_require__.e = (chunkId) => {
/******/ 			return Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {
/******/ 				__webpack_require__.f[key](chunkId, promises);
/******/ 				return promises;
/******/ 			}, []));
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/get javascript chunk filename */
/******/ 	(() => {
/******/ 		// This function allow to reference async chunks
/******/ 		__webpack_require__.u = (chunkId) => {
/******/ 			// return url for filenames based on template
/******/ 			return "" + chunkId + ".js";
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/load script */
/******/ 	(() => {
/******/ 		var inProgress = {};
/******/ 		var dataWebpackPrefix = "home-assistant-frontend:";
/******/ 		// loadScript function to load a script via script tag
/******/ 		__webpack_require__.l = (url, done, key, chunkId) => {
/******/ 			if(inProgress[url]) { inProgress[url].push(done); return; }
/******/ 			var script, needAttach;
/******/ 			if(key !== undefined) {
/******/ 				var scripts = document.getElementsByTagName("script");
/******/ 				for(var i = 0; i < scripts.length; i++) {
/******/ 					var s = scripts[i];
/******/ 					if(s.getAttribute("src") == url || s.getAttribute("data-webpack") == dataWebpackPrefix + key) { script = s; break; }
/******/ 				}
/******/ 			}
/******/ 			if(!script) {
/******/ 				needAttach = true;
/******/ 				script = document.createElement('script');
/******/ 		
/******/ 				script.charset = 'utf-8';
/******/ 				script.timeout = 120;
/******/ 				if (__webpack_require__.nc) {
/******/ 					script.setAttribute("nonce", __webpack_require__.nc);
/******/ 				}
/******/ 				script.setAttribute("data-webpack", dataWebpackPrefix + key);
/******/ 				script.src = url;
/******/ 			}
/******/ 			inProgress[url] = [done];
/******/ 			var onScriptComplete = (prev, event) => {
/******/ 				// avoid mem leaks in IE.
/******/ 				script.onerror = script.onload = null;
/******/ 				clearTimeout(timeout);
/******/ 				var doneFns = inProgress[url];
/******/ 				delete inProgress[url];
/******/ 				script.parentNode && script.parentNode.removeChild(script);
/******/ 				doneFns && doneFns.forEach((fn) => (fn(event)));
/******/ 				if(prev) return prev(event);
/******/ 			}
/******/ 			var timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);
/******/ 			script.onerror = onScriptComplete.bind(null, script.onerror);
/******/ 			script.onload = onScriptComplete.bind(null, script.onload);
/******/ 			needAttach && document.head.appendChild(script);
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/publicPath */
/******/ 	(() => {
/******/ 		__webpack_require__.p = "/frontend_latest/";
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/jsonp chunk loading */
/******/ 	(() => {
/******/ 		// no baseURI
/******/ 		
/******/ 		// object to store loaded and loading chunks
/******/ 		// undefined = chunk not loaded, null = chunk preloaded/prefetched
/******/ 		// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded
/******/ 		var installedChunks = {
/******/ 			"core": 0
/******/ 		};
/******/ 		
/******/ 		__webpack_require__.f.j = (chunkId, promises) => {
/******/ 				// JSONP chunk loading for javascript
/******/ 				var installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;
/******/ 				if(installedChunkData !== 0) { // 0 means "already installed".
/******/ 		
/******/ 					// a Promise means "currently loading".
/******/ 					if(installedChunkData) {
/******/ 						promises.push(installedChunkData[2]);
/******/ 					} else {
/******/ 						if(true) { // all chunks have JS
/******/ 							// setup Promise in chunk cache
/******/ 							var promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));
/******/ 							promises.push(installedChunkData[2] = promise);
/******/ 		
/******/ 							// start chunk loading
/******/ 							var url = __webpack_require__.p + __webpack_require__.u(chunkId);
/******/ 							// create error before stack unwound to get useful stacktrace later
/******/ 							var error = new Error();
/******/ 							var loadingEnded = (event) => {
/******/ 								if(__webpack_require__.o(installedChunks, chunkId)) {
/******/ 									installedChunkData = installedChunks[chunkId];
/******/ 									if(installedChunkData !== 0) installedChunks[chunkId] = undefined;
/******/ 									if(installedChunkData) {
/******/ 										var errorType = event && (event.type === 'load' ? 'missing' : event.type);
/******/ 										var realSrc = event && event.target && event.target.src;
/******/ 										error.message = 'Loading chunk ' + chunkId + ' failed.\n(' + errorType + ': ' + realSrc + ')';
/******/ 										error.name = 'ChunkLoadError';
/******/ 										error.type = errorType;
/******/ 										error.request = realSrc;
/******/ 										installedChunkData[1](error);
/******/ 									}
/******/ 								}
/******/ 							};
/******/ 							__webpack_require__.l(url, loadingEnded, "chunk-" + chunkId, chunkId);
/******/ 						}
/******/ 					}
/******/ 				}
/******/ 		};
/******/ 		
/******/ 		// no prefetching
/******/ 		
/******/ 		// no preloaded
/******/ 		
/******/ 		// no HMR
/******/ 		
/******/ 		// no HMR manifest
/******/ 		
/******/ 		// no on chunks loaded
/******/ 		
/******/ 		// install a JSONP callback for chunk loading
/******/ 		var webpackJsonpCallback = (parentChunkLoadingFunction, data) => {
/******/ 			var [chunkIds, moreModules, runtime] = data;
/******/ 			// add "moreModules" to the modules object,
/******/ 			// then flag all "chunkIds" as loaded and fire callback
/******/ 			var moduleId, chunkId, i = 0;
/******/ 			if(chunkIds.some((id) => (installedChunks[id] !== 0))) {
/******/ 				for(moduleId in moreModules) {
/******/ 					if(__webpack_require__.o(moreModules, moduleId)) {
/******/ 						__webpack_require__.m[moduleId] = moreModules[moduleId];
/******/ 					}
/******/ 				}
/******/ 				if(runtime) var result = runtime(__webpack_require__);
/******/ 			}
/******/ 			if(parentChunkLoadingFunction) parentChunkLoadingFunction(data);
/******/ 			for(;i < chunkIds.length; i++) {
/******/ 				chunkId = chunkIds[i];
/******/ 				if(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {
/******/ 					installedChunks[chunkId][0]();
/******/ 				}
/******/ 				installedChunks[chunkId] = 0;
/******/ 			}
/******/ 		
/******/ 		}
/******/ 		
/******/ 		var chunkLoadingGlobal = self["webpackChunkhome_assistant_frontend"] = self["webpackChunkhome_assistant_frontend"] || [];
/******/ 		chunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));
/******/ 		chunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval-source-map devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/entrypoints/core.ts");
/******/ 	
/******/ })()
;