"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkhome_assistant_frontend"] = self["webpackChunkhome_assistant_frontend"] || []).push([["src_panels_lovelace_cards_hui-statistics-graph-card_ts"],{

/***/ "./src/panels/lovelace/cards/hui-statistics-graph-card.ts":
/*!****************************************************************!*\
  !*** ./src/panels/lovelace/cards/hui-statistics-graph-card.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEFAULT_DAYS_TO_SHOW: () => (/* binding */ DEFAULT_DAYS_TO_SHOW),\n/* harmony export */   HuiStatisticsGraphCard: () => (/* binding */ HuiStatisticsGraphCard)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_decorate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/decorate */ \"./node_modules/@babel/runtime/helpers/esm/decorate.js\");\n/* harmony import */ var _babel_runtime_helpers_get__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/get */ \"./node_modules/@babel/runtime/helpers/esm/get.js\");\n/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/getPrototypeOf */ \"./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\");\n/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lit */ \"./node_modules/lit/index.js\");\n/* harmony import */ var lit_decorators__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! lit/decorators */ \"./node_modules/lit/decorators.js\");\n/* harmony import */ var lit_directives_class_map__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! lit/directives/class-map */ \"./node_modules/lit/directives/class-map.js\");\n/* harmony import */ var _components_ha_card__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../components/ha-card */ \"./src/components/ha-card.ts\");\n/* harmony import */ var _data_recorder__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../data/recorder */ \"./src/data/recorder.ts\");\n/* harmony import */ var _common_find_entities__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../common/find-entities */ \"./src/panels/lovelace/common/find-entities.ts\");\n/* harmony import */ var _common_has_changed__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../common/has-changed */ \"./src/panels/lovelace/common/has-changed.ts\");\n/* harmony import */ var _common_process_config_entities__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../common/process-config-entities */ \"./src/panels/lovelace/common/process-config-entities.ts\");\n\n\n\n\n\n\n\n\n\n\n\nconst DEFAULT_DAYS_TO_SHOW = 30;\nlet HuiStatisticsGraphCard = (0,_babel_runtime_helpers_decorate__WEBPACK_IMPORTED_MODULE_0__[\"default\"])([(0,lit_decorators__WEBPACK_IMPORTED_MODULE_4__.customElement)(\"hui-statistics-graph-card\")], function (_initialize, _LitElement) {\n  class HuiStatisticsGraphCard extends _LitElement {\n    constructor(...args) {\n      super(...args);\n      _initialize(this);\n    }\n  }\n  return {\n    F: HuiStatisticsGraphCard,\n    d: [{\n      kind: \"method\",\n      static: true,\n      key: \"getConfigElement\",\n      value: async function getConfigElement() {\n        await Promise.all(/*! import() */[__webpack_require__.e(\"vendors-node_modules_material_mwc-floating-label_mwc-floating-label-directive_js-node_modules-1233e4\"), __webpack_require__.e(\"vendors-node_modules_material_mwc-textfield_mwc-textfield_css_js\"), __webpack_require__.e(\"vendors-node_modules_material_mwc-textfield_mwc-textfield-base_js\"), __webpack_require__.e(\"vendors-node_modules_material_mwc-list_mwc-list-item-base_js-node_modules_material_mwc-list_m-c39ab1\"), __webpack_require__.e(\"vendors-node_modules_vaadin_combo-box_lit_js-node_modules_vaadin_combo-box_theme_material_vaa-9795ce\"), __webpack_require__.e(\"src_components_ha-combo-box_ts-node_modules_vaadin_vaadin-material-styles_font-icons_js-node_-a3c6e1\"), __webpack_require__.e(\"src_components_ha-selector_ha-selector_ts\"), __webpack_require__.e(\"src_common_array_ensure-array_ts-src_components_ha-form_ha-form_ts-src_panels_lovelace_editor-6cfc76\"), __webpack_require__.e(\"src_components_chart_ha-chart-base_ts\"), __webpack_require__.e(\"src_components_entity_ha-statistics-picker_ts-src_components_ha-list-item_ts-src_components_h-b30f5f\"), __webpack_require__.e(\"src_components_chart_statistics-chart_ts\"), __webpack_require__.e(\"src_panels_lovelace_editor_config-elements_hui-statistics-graph-card-editor_ts\")]).then(__webpack_require__.bind(__webpack_require__, /*! ../editor/config-elements/hui-statistics-graph-card-editor */ \"./src/panels/lovelace/editor/config-elements/hui-statistics-graph-card-editor.ts\"));\n        return document.createElement(\"hui-statistics-graph-card-editor\");\n      }\n    }, {\n      kind: \"method\",\n      static: true,\n      key: \"getStubConfig\",\n      value: function getStubConfig(hass, entities, entitiesFill) {\n        const includeDomains = [\"sensor\"];\n        const maxEntities = 1;\n        const foundEntities = (0,_common_find_entities__WEBPACK_IMPORTED_MODULE_8__.findEntities)(hass, maxEntities, entities, entitiesFill, includeDomains, stateObj => \"state_class\" in stateObj.attributes);\n        return {\n          type: \"statistics-graph\",\n          entities: foundEntities.length ? [foundEntities[0]] : []\n        };\n      }\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_4__.property)({\n        attribute: false\n      })],\n      key: \"hass\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_4__.state)()],\n      key: \"_config\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_4__.state)()],\n      key: \"_statistics\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_4__.state)()],\n      key: \"_metadata\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_4__.state)()],\n      key: \"_unit\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      key: \"_entities\",\n      value() {\n        return [];\n      }\n    }, {\n      kind: \"field\",\n      key: \"_names\",\n      value() {\n        return {};\n      }\n    }, {\n      kind: \"field\",\n      key: \"_interval\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      key: \"_statTypes\",\n      value: void 0\n    }, {\n      kind: \"method\",\n      key: \"disconnectedCallback\",\n      value: function disconnectedCallback() {\n        (0,_babel_runtime_helpers_get__WEBPACK_IMPORTED_MODULE_1__[\"default\"])((0,_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(HuiStatisticsGraphCard.prototype), \"disconnectedCallback\", this).call(this);\n        if (this._interval) {\n          clearInterval(this._interval);\n          this._interval = undefined;\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"connectedCallback\",\n      value: function connectedCallback() {\n        (0,_babel_runtime_helpers_get__WEBPACK_IMPORTED_MODULE_1__[\"default\"])((0,_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(HuiStatisticsGraphCard.prototype), \"connectedCallback\", this).call(this);\n        if (!this.hasUpdated) {\n          return;\n        }\n        this._setFetchStatisticsTimer();\n      }\n    }, {\n      kind: \"method\",\n      key: \"getCardSize\",\n      value: function getCardSize() {\n        var _this$_config, _this$_config2, _this$_entities;\n        return 5 + ((_this$_config = this._config) !== null && _this$_config !== void 0 && _this$_config.title ? 2 : 0) + (!((_this$_config2 = this._config) !== null && _this$_config2 !== void 0 && _this$_config2.hide_legend) ? ((_this$_entities = this._entities) === null || _this$_entities === void 0 ? void 0 : _this$_entities.length) || 0 : 0);\n      }\n    }, {\n      kind: \"method\",\n      key: \"setConfig\",\n      value: function setConfig(config) {\n        if (!config.entities || !Array.isArray(config.entities)) {\n          throw new Error(\"Entities need to be an array\");\n        }\n        if (!config.entities.length) {\n          throw new Error(\"You must include at least one entity\");\n        }\n        const configEntities = config.entities ? (0,_common_process_config_entities__WEBPACK_IMPORTED_MODULE_10__.processConfigEntities)(config.entities, false) : [];\n        this._entities = [];\n        configEntities.forEach(entity => {\n          this._entities.push(entity.entity);\n          if (entity.name) {\n            this._names[entity.entity] = entity.name;\n          }\n        });\n        if (typeof config.stat_types === \"string\") {\n          this._statTypes = [config.stat_types];\n        } else if (!config.stat_types) {\n          this._statTypes = [\"change\", \"state\", \"sum\", \"min\", \"max\", \"mean\"];\n        } else {\n          this._statTypes = config.stat_types;\n        }\n        this._config = config;\n      }\n    }, {\n      kind: \"method\",\n      key: \"shouldUpdate\",\n      value: function shouldUpdate(changedProps) {\n        if (changedProps.has(\"_statistics\")) {\n          return true;\n        }\n        return (0,_common_has_changed__WEBPACK_IMPORTED_MODULE_9__.hasConfigOrEntitiesChanged)(this, changedProps);\n      }\n    }, {\n      kind: \"method\",\n      key: \"willUpdate\",\n      value: function willUpdate(changedProps) {\n        (0,_babel_runtime_helpers_get__WEBPACK_IMPORTED_MODULE_1__[\"default\"])((0,_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(HuiStatisticsGraphCard.prototype), \"willUpdate\", this).call(this, changedProps);\n        if (!this._config || !changedProps.has(\"_config\")) {\n          return;\n        }\n        const oldConfig = changedProps.get(\"_config\");\n        if (changedProps.has(\"_config\") && (oldConfig === null || oldConfig === void 0 ? void 0 : oldConfig.entities) !== this._config.entities) {\n          this._getStatisticsMetaData(this._entities).then(() => {\n            this._setFetchStatisticsTimer();\n          });\n          return;\n        }\n        if (changedProps.has(\"_config\") && ((oldConfig === null || oldConfig === void 0 ? void 0 : oldConfig.stat_types) !== this._config.stat_types || (oldConfig === null || oldConfig === void 0 ? void 0 : oldConfig.days_to_show) !== this._config.days_to_show || (oldConfig === null || oldConfig === void 0 ? void 0 : oldConfig.period) !== this._config.period || (oldConfig === null || oldConfig === void 0 ? void 0 : oldConfig.unit) !== this._config.unit)) {\n          this._setFetchStatisticsTimer();\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"_setFetchStatisticsTimer\",\n      value: function _setFetchStatisticsTimer() {\n        this._getStatistics();\n        // statistics are created every hour\n        clearInterval(this._interval);\n        this._interval = window.setInterval(() => this._getStatistics(), this._intervalTimeout);\n      }\n    }, {\n      kind: \"method\",\n      key: \"render\",\n      value: function render() {\n        if (!this.hass || !this._config) {\n          return lit__WEBPACK_IMPORTED_MODULE_3__.nothing;\n        }\n        return lit__WEBPACK_IMPORTED_MODULE_3__.html`\n      <ha-card .header=${this._config.title}>\n        <div\n          class=\"content ${(0,lit_directives_class_map__WEBPACK_IMPORTED_MODULE_5__.classMap)({\n          \"has-header\": !!this._config.title\n        })}\"\n        >\n          <statistics-chart\n            .hass=${this.hass}\n            .isLoadingData=${!this._statistics}\n            .statisticsData=${this._statistics}\n            .metadata=${this._metadata}\n            .chartType=${this._config.chart_type || \"line\"}\n            .statTypes=${this._statTypes}\n            .names=${this._names}\n            .unit=${this._unit}\n            .hideLegend=${this._config.hide_legend || false}\n          ></statistics-chart>\n        </div>\n      </ha-card>\n    `;\n      }\n    }, {\n      kind: \"get\",\n      key: \"_intervalTimeout\",\n      value: function _intervalTimeout() {\n        var _this$_config3;\n        return (((_this$_config3 = this._config) === null || _this$_config3 === void 0 ? void 0 : _this$_config3.period) === \"5minute\" ? 5 : 60) * 1000 * 60;\n      }\n    }, {\n      kind: \"method\",\n      key: \"_getStatisticsMetaData\",\n      value: async function _getStatisticsMetaData(statisticIds) {\n        const statsMetadataArray = await (0,_data_recorder__WEBPACK_IMPORTED_MODULE_7__.getStatisticMetadata)(this.hass, statisticIds);\n        const statisticsMetaData = {};\n        statsMetadataArray.forEach(x => {\n          statisticsMetaData[x.statistic_id] = x;\n        });\n        this._metadata = statisticsMetaData;\n      }\n    }, {\n      kind: \"method\",\n      key: \"_getStatistics\",\n      value: async function _getStatistics() {\n        const startDate = new Date();\n        startDate.setTime(startDate.getTime() - 1000 * 60 * 60 * (24 * (this._config.days_to_show || DEFAULT_DAYS_TO_SHOW) + 1));\n        try {\n          let unitClass;\n          if (this._config.unit && this._metadata) {\n            const metadata = Object.values(this._metadata).find(metaData => (0,_data_recorder__WEBPACK_IMPORTED_MODULE_7__.getDisplayUnit)(this.hass, metaData === null || metaData === void 0 ? void 0 : metaData.statistic_id, metaData) === this._config.unit);\n            if (metadata) {\n              unitClass = metadata.unit_class;\n              this._unit = this._config.unit;\n            }\n          }\n          if (!unitClass && this._metadata) {\n            const metadata = this._metadata[this._entities[0]];\n            unitClass = metadata === null || metadata === void 0 ? void 0 : metadata.unit_class;\n            this._unit = unitClass ? (0,_data_recorder__WEBPACK_IMPORTED_MODULE_7__.getDisplayUnit)(this.hass, metadata.statistic_id, metadata) || undefined : undefined;\n          }\n          const unitconfig = unitClass ? {\n            [unitClass]: this._unit\n          } : undefined;\n          const statistics = await (0,_data_recorder__WEBPACK_IMPORTED_MODULE_7__.fetchStatistics)(this.hass, startDate, undefined, this._entities, this._config.period, unitconfig, this._statTypes);\n          this._statistics = {};\n          this._entities.forEach(id => {\n            if (id in statistics) {\n              this._statistics[id] = statistics[id];\n            }\n          });\n        } catch (err) {\n          this._statistics = undefined;\n        }\n      }\n    }, {\n      kind: \"get\",\n      static: true,\n      key: \"styles\",\n      value: function styles() {\n        return lit__WEBPACK_IMPORTED_MODULE_3__.css`\n      ha-card {\n        height: 100%;\n      }\n      .content {\n        padding: 16px;\n      }\n      .has-header {\n        padding-top: 0;\n      }\n    `;\n      }\n    }]\n  };\n}, lit__WEBPACK_IMPORTED_MODULE_3__.LitElement);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcGFuZWxzL2xvdmVsYWNlL2NhcmRzL2h1aS1zdGF0aXN0aWNzLWdyYXBoLWNhcmQudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUNBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFTQTtBQUNBO0FBQ0E7QUFJQTtBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQWlRQTtBQUFBO0FBQUE7QUFqUUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFPQTtBQUNBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFLQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUlBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBT0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQSIsInNvdXJjZXMiOlsid2VicGFjazovL2hvbWUtYXNzaXN0YW50LWZyb250ZW5kLy4vc3JjL3BhbmVscy9sb3ZlbGFjZS9jYXJkcy9odWktc3RhdGlzdGljcy1ncmFwaC1jYXJkLnRzP2Y1ZWYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSGFzc0VudGl0eSB9IGZyb20gXCJob21lLWFzc2lzdGFudC1qcy13ZWJzb2NrZXRcIjtcbmltcG9ydCB7XG4gIGNzcyxcbiAgQ1NTUmVzdWx0R3JvdXAsXG4gIGh0bWwsXG4gIExpdEVsZW1lbnQsXG4gIFByb3BlcnR5VmFsdWVzLFxuICBub3RoaW5nLFxufSBmcm9tIFwibGl0XCI7XG5pbXBvcnQgeyBjdXN0b21FbGVtZW50LCBwcm9wZXJ0eSwgc3RhdGUgfSBmcm9tIFwibGl0L2RlY29yYXRvcnNcIjtcbmltcG9ydCB7IGNsYXNzTWFwIH0gZnJvbSBcImxpdC9kaXJlY3RpdmVzL2NsYXNzLW1hcFwiO1xuaW1wb3J0IFwiLi4vLi4vLi4vY29tcG9uZW50cy9oYS1jYXJkXCI7XG5pbXBvcnQge1xuICBmZXRjaFN0YXRpc3RpY3MsXG4gIGdldERpc3BsYXlVbml0LFxuICBnZXRTdGF0aXN0aWNNZXRhZGF0YSxcbiAgU3RhdGlzdGljcyxcbiAgU3RhdGlzdGljc01ldGFEYXRhLFxuICBTdGF0aXN0aWNUeXBlLFxufSBmcm9tIFwiLi4vLi4vLi4vZGF0YS9yZWNvcmRlclwiO1xuaW1wb3J0IHsgSG9tZUFzc2lzdGFudCB9IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgZmluZEVudGl0aWVzIH0gZnJvbSBcIi4uL2NvbW1vbi9maW5kLWVudGl0aWVzXCI7XG5pbXBvcnQgeyBoYXNDb25maWdPckVudGl0aWVzQ2hhbmdlZCB9IGZyb20gXCIuLi9jb21tb24vaGFzLWNoYW5nZWRcIjtcbmltcG9ydCB7IHByb2Nlc3NDb25maWdFbnRpdGllcyB9IGZyb20gXCIuLi9jb21tb24vcHJvY2Vzcy1jb25maWctZW50aXRpZXNcIjtcbmltcG9ydCB7IExvdmVsYWNlQ2FyZCB9IGZyb20gXCIuLi90eXBlc1wiO1xuaW1wb3J0IHsgU3RhdGlzdGljc0dyYXBoQ2FyZENvbmZpZyB9IGZyb20gXCIuL3R5cGVzXCI7XG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX0RBWVNfVE9fU0hPVyA9IDMwO1xuXG5AY3VzdG9tRWxlbWVudChcImh1aS1zdGF0aXN0aWNzLWdyYXBoLWNhcmRcIilcbmV4cG9ydCBjbGFzcyBIdWlTdGF0aXN0aWNzR3JhcGhDYXJkIGV4dGVuZHMgTGl0RWxlbWVudCBpbXBsZW1lbnRzIExvdmVsYWNlQ2FyZCB7XG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZ2V0Q29uZmlnRWxlbWVudCgpIHtcbiAgICBhd2FpdCBpbXBvcnQoXCIuLi9lZGl0b3IvY29uZmlnLWVsZW1lbnRzL2h1aS1zdGF0aXN0aWNzLWdyYXBoLWNhcmQtZWRpdG9yXCIpO1xuICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaHVpLXN0YXRpc3RpY3MtZ3JhcGgtY2FyZC1lZGl0b3JcIik7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIGdldFN0dWJDb25maWcoXG4gICAgaGFzczogSG9tZUFzc2lzdGFudCxcbiAgICBlbnRpdGllczogc3RyaW5nW10sXG4gICAgZW50aXRpZXNGaWxsOiBzdHJpbmdbXVxuICApOiBTdGF0aXN0aWNzR3JhcGhDYXJkQ29uZmlnIHtcbiAgICBjb25zdCBpbmNsdWRlRG9tYWlucyA9IFtcInNlbnNvclwiXTtcbiAgICBjb25zdCBtYXhFbnRpdGllcyA9IDE7XG4gICAgY29uc3QgZm91bmRFbnRpdGllcyA9IGZpbmRFbnRpdGllcyhcbiAgICAgIGhhc3MsXG4gICAgICBtYXhFbnRpdGllcyxcbiAgICAgIGVudGl0aWVzLFxuICAgICAgZW50aXRpZXNGaWxsLFxuICAgICAgaW5jbHVkZURvbWFpbnMsXG4gICAgICAoc3RhdGVPYmo6IEhhc3NFbnRpdHkpID0+IFwic3RhdGVfY2xhc3NcIiBpbiBzdGF0ZU9iai5hdHRyaWJ1dGVzXG4gICAgKTtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogXCJzdGF0aXN0aWNzLWdyYXBoXCIsXG4gICAgICBlbnRpdGllczogZm91bmRFbnRpdGllcy5sZW5ndGggPyBbZm91bmRFbnRpdGllc1swXV0gOiBbXSxcbiAgICB9O1xuICB9XG5cbiAgQHByb3BlcnR5KHsgYXR0cmlidXRlOiBmYWxzZSB9KSBwdWJsaWMgaGFzcz86IEhvbWVBc3Npc3RhbnQ7XG5cbiAgQHN0YXRlKCkgcHJpdmF0ZSBfY29uZmlnPzogU3RhdGlzdGljc0dyYXBoQ2FyZENvbmZpZztcblxuICBAc3RhdGUoKSBwcml2YXRlIF9zdGF0aXN0aWNzPzogU3RhdGlzdGljcztcblxuICBAc3RhdGUoKSBwcml2YXRlIF9tZXRhZGF0YT86IFJlY29yZDxzdHJpbmcsIFN0YXRpc3RpY3NNZXRhRGF0YT47XG5cbiAgQHN0YXRlKCkgcHJpdmF0ZSBfdW5pdD86IHN0cmluZztcblxuICBwcml2YXRlIF9lbnRpdGllczogc3RyaW5nW10gPSBbXTtcblxuICBwcml2YXRlIF9uYW1lczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHt9O1xuXG4gIHByaXZhdGUgX2ludGVydmFsPzogbnVtYmVyO1xuXG4gIHByaXZhdGUgX3N0YXRUeXBlcz86IEFycmF5PFN0YXRpc3RpY1R5cGU+O1xuXG4gIHB1YmxpYyBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICBzdXBlci5kaXNjb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgIGlmICh0aGlzLl9pbnRlcnZhbCkge1xuICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLl9pbnRlcnZhbCk7XG4gICAgICB0aGlzLl9pbnRlcnZhbCA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICBpZiAoIXRoaXMuaGFzVXBkYXRlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9zZXRGZXRjaFN0YXRpc3RpY3NUaW1lcigpO1xuICB9XG5cbiAgcHVibGljIGdldENhcmRTaXplKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIChcbiAgICAgIDUgK1xuICAgICAgKHRoaXMuX2NvbmZpZz8udGl0bGUgPyAyIDogMCkgK1xuICAgICAgKCF0aGlzLl9jb25maWc/LmhpZGVfbGVnZW5kID8gdGhpcy5fZW50aXRpZXM/Lmxlbmd0aCB8fCAwIDogMClcbiAgICApO1xuICB9XG5cbiAgcHVibGljIHNldENvbmZpZyhjb25maWc6IFN0YXRpc3RpY3NHcmFwaENhcmRDb25maWcpOiB2b2lkIHtcbiAgICBpZiAoIWNvbmZpZy5lbnRpdGllcyB8fCAhQXJyYXkuaXNBcnJheShjb25maWcuZW50aXRpZXMpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJFbnRpdGllcyBuZWVkIHRvIGJlIGFuIGFycmF5XCIpO1xuICAgIH1cblxuICAgIGlmICghY29uZmlnLmVudGl0aWVzLmxlbmd0aCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiWW91IG11c3QgaW5jbHVkZSBhdCBsZWFzdCBvbmUgZW50aXR5XCIpO1xuICAgIH1cblxuICAgIGNvbnN0IGNvbmZpZ0VudGl0aWVzID0gY29uZmlnLmVudGl0aWVzXG4gICAgICA/IHByb2Nlc3NDb25maWdFbnRpdGllcyhjb25maWcuZW50aXRpZXMsIGZhbHNlKVxuICAgICAgOiBbXTtcblxuICAgIHRoaXMuX2VudGl0aWVzID0gW107XG4gICAgY29uZmlnRW50aXRpZXMuZm9yRWFjaCgoZW50aXR5KSA9PiB7XG4gICAgICB0aGlzLl9lbnRpdGllcy5wdXNoKGVudGl0eS5lbnRpdHkpO1xuICAgICAgaWYgKGVudGl0eS5uYW1lKSB7XG4gICAgICAgIHRoaXMuX25hbWVzW2VudGl0eS5lbnRpdHldID0gZW50aXR5Lm5hbWU7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAodHlwZW9mIGNvbmZpZy5zdGF0X3R5cGVzID09PSBcInN0cmluZ1wiKSB7XG4gICAgICB0aGlzLl9zdGF0VHlwZXMgPSBbY29uZmlnLnN0YXRfdHlwZXNdO1xuICAgIH0gZWxzZSBpZiAoIWNvbmZpZy5zdGF0X3R5cGVzKSB7XG4gICAgICB0aGlzLl9zdGF0VHlwZXMgPSBbXCJjaGFuZ2VcIiwgXCJzdGF0ZVwiLCBcInN1bVwiLCBcIm1pblwiLCBcIm1heFwiLCBcIm1lYW5cIl07XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3N0YXRUeXBlcyA9IGNvbmZpZy5zdGF0X3R5cGVzO1xuICAgIH1cbiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XG4gIH1cblxuICBwcm90ZWN0ZWQgc2hvdWxkVXBkYXRlKGNoYW5nZWRQcm9wczogUHJvcGVydHlWYWx1ZXMpOiBib29sZWFuIHtcbiAgICBpZiAoY2hhbmdlZFByb3BzLmhhcyhcIl9zdGF0aXN0aWNzXCIpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGhhc0NvbmZpZ09yRW50aXRpZXNDaGFuZ2VkKHRoaXMsIGNoYW5nZWRQcm9wcyk7XG4gIH1cblxuICBwdWJsaWMgd2lsbFVwZGF0ZShjaGFuZ2VkUHJvcHM6IFByb3BlcnR5VmFsdWVzKSB7XG4gICAgc3VwZXIud2lsbFVwZGF0ZShjaGFuZ2VkUHJvcHMpO1xuICAgIGlmICghdGhpcy5fY29uZmlnIHx8ICFjaGFuZ2VkUHJvcHMuaGFzKFwiX2NvbmZpZ1wiKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IG9sZENvbmZpZyA9IGNoYW5nZWRQcm9wcy5nZXQoXCJfY29uZmlnXCIpIGFzXG4gICAgICB8IFN0YXRpc3RpY3NHcmFwaENhcmRDb25maWdcbiAgICAgIHwgdW5kZWZpbmVkO1xuXG4gICAgaWYgKFxuICAgICAgY2hhbmdlZFByb3BzLmhhcyhcIl9jb25maWdcIikgJiZcbiAgICAgIG9sZENvbmZpZz8uZW50aXRpZXMgIT09IHRoaXMuX2NvbmZpZy5lbnRpdGllc1xuICAgICkge1xuICAgICAgdGhpcy5fZ2V0U3RhdGlzdGljc01ldGFEYXRhKHRoaXMuX2VudGl0aWVzKS50aGVuKCgpID0+IHtcbiAgICAgICAgdGhpcy5fc2V0RmV0Y2hTdGF0aXN0aWNzVGltZXIoKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChcbiAgICAgIGNoYW5nZWRQcm9wcy5oYXMoXCJfY29uZmlnXCIpICYmXG4gICAgICAob2xkQ29uZmlnPy5zdGF0X3R5cGVzICE9PSB0aGlzLl9jb25maWcuc3RhdF90eXBlcyB8fFxuICAgICAgICBvbGRDb25maWc/LmRheXNfdG9fc2hvdyAhPT0gdGhpcy5fY29uZmlnLmRheXNfdG9fc2hvdyB8fFxuICAgICAgICBvbGRDb25maWc/LnBlcmlvZCAhPT0gdGhpcy5fY29uZmlnLnBlcmlvZCB8fFxuICAgICAgICBvbGRDb25maWc/LnVuaXQgIT09IHRoaXMuX2NvbmZpZy51bml0KVxuICAgICkge1xuICAgICAgdGhpcy5fc2V0RmV0Y2hTdGF0aXN0aWNzVGltZXIoKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9zZXRGZXRjaFN0YXRpc3RpY3NUaW1lcigpIHtcbiAgICB0aGlzLl9nZXRTdGF0aXN0aWNzKCk7XG4gICAgLy8gc3RhdGlzdGljcyBhcmUgY3JlYXRlZCBldmVyeSBob3VyXG4gICAgY2xlYXJJbnRlcnZhbCh0aGlzLl9pbnRlcnZhbCk7XG4gICAgdGhpcy5faW50ZXJ2YWwgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoXG4gICAgICAoKSA9PiB0aGlzLl9nZXRTdGF0aXN0aWNzKCksXG4gICAgICB0aGlzLl9pbnRlcnZhbFRpbWVvdXRcbiAgICApO1xuICB9XG5cbiAgcHJvdGVjdGVkIHJlbmRlcigpIHtcbiAgICBpZiAoIXRoaXMuaGFzcyB8fCAhdGhpcy5fY29uZmlnKSB7XG4gICAgICByZXR1cm4gbm90aGluZztcbiAgICB9XG5cbiAgICByZXR1cm4gaHRtbGBcbiAgICAgIDxoYS1jYXJkIC5oZWFkZXI9JHt0aGlzLl9jb25maWcudGl0bGV9PlxuICAgICAgICA8ZGl2XG4gICAgICAgICAgY2xhc3M9XCJjb250ZW50ICR7Y2xhc3NNYXAoe1xuICAgICAgICAgICAgXCJoYXMtaGVhZGVyXCI6ICEhdGhpcy5fY29uZmlnLnRpdGxlLFxuICAgICAgICAgIH0pfVwiXG4gICAgICAgID5cbiAgICAgICAgICA8c3RhdGlzdGljcy1jaGFydFxuICAgICAgICAgICAgLmhhc3M9JHt0aGlzLmhhc3N9XG4gICAgICAgICAgICAuaXNMb2FkaW5nRGF0YT0keyF0aGlzLl9zdGF0aXN0aWNzfVxuICAgICAgICAgICAgLnN0YXRpc3RpY3NEYXRhPSR7dGhpcy5fc3RhdGlzdGljc31cbiAgICAgICAgICAgIC5tZXRhZGF0YT0ke3RoaXMuX21ldGFkYXRhfVxuICAgICAgICAgICAgLmNoYXJ0VHlwZT0ke3RoaXMuX2NvbmZpZy5jaGFydF90eXBlIHx8IFwibGluZVwifVxuICAgICAgICAgICAgLnN0YXRUeXBlcz0ke3RoaXMuX3N0YXRUeXBlcyF9XG4gICAgICAgICAgICAubmFtZXM9JHt0aGlzLl9uYW1lc31cbiAgICAgICAgICAgIC51bml0PSR7dGhpcy5fdW5pdH1cbiAgICAgICAgICAgIC5oaWRlTGVnZW5kPSR7dGhpcy5fY29uZmlnLmhpZGVfbGVnZW5kIHx8IGZhbHNlfVxuICAgICAgICAgID48L3N0YXRpc3RpY3MtY2hhcnQ+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9oYS1jYXJkPlxuICAgIGA7XG4gIH1cblxuICBwcml2YXRlIGdldCBfaW50ZXJ2YWxUaW1lb3V0KCk6IG51bWJlciB7XG4gICAgcmV0dXJuICh0aGlzLl9jb25maWc/LnBlcmlvZCA9PT0gXCI1bWludXRlXCIgPyA1IDogNjApICogMTAwMCAqIDYwO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBfZ2V0U3RhdGlzdGljc01ldGFEYXRhKHN0YXRpc3RpY0lkczogc3RyaW5nW10gfCB1bmRlZmluZWQpIHtcbiAgICBjb25zdCBzdGF0c01ldGFkYXRhQXJyYXkgPSBhd2FpdCBnZXRTdGF0aXN0aWNNZXRhZGF0YShcbiAgICAgIHRoaXMuaGFzcyEsXG4gICAgICBzdGF0aXN0aWNJZHNcbiAgICApO1xuICAgIGNvbnN0IHN0YXRpc3RpY3NNZXRhRGF0YSA9IHt9O1xuICAgIHN0YXRzTWV0YWRhdGFBcnJheS5mb3JFYWNoKCh4KSA9PiB7XG4gICAgICBzdGF0aXN0aWNzTWV0YURhdGFbeC5zdGF0aXN0aWNfaWRdID0geDtcbiAgICB9KTtcbiAgICB0aGlzLl9tZXRhZGF0YSA9IHN0YXRpc3RpY3NNZXRhRGF0YTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgX2dldFN0YXRpc3RpY3MoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3Qgc3RhcnREYXRlID0gbmV3IERhdGUoKTtcbiAgICBzdGFydERhdGUuc2V0VGltZShcbiAgICAgIHN0YXJ0RGF0ZS5nZXRUaW1lKCkgLVxuICAgICAgICAxMDAwICpcbiAgICAgICAgICA2MCAqXG4gICAgICAgICAgNjAgKlxuICAgICAgICAgICgyNCAqICh0aGlzLl9jb25maWchLmRheXNfdG9fc2hvdyB8fCBERUZBVUxUX0RBWVNfVE9fU0hPVykgKyAxKVxuICAgICk7XG4gICAgdHJ5IHtcbiAgICAgIGxldCB1bml0Q2xhc3M7XG4gICAgICBpZiAodGhpcy5fY29uZmlnIS51bml0ICYmIHRoaXMuX21ldGFkYXRhKSB7XG4gICAgICAgIGNvbnN0IG1ldGFkYXRhID0gT2JqZWN0LnZhbHVlcyh0aGlzLl9tZXRhZGF0YSkuZmluZChcbiAgICAgICAgICAobWV0YURhdGEpID0+XG4gICAgICAgICAgICBnZXREaXNwbGF5VW5pdCh0aGlzLmhhc3MhLCBtZXRhRGF0YT8uc3RhdGlzdGljX2lkLCBtZXRhRGF0YSkgPT09XG4gICAgICAgICAgICB0aGlzLl9jb25maWchLnVuaXRcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKG1ldGFkYXRhKSB7XG4gICAgICAgICAgdW5pdENsYXNzID0gbWV0YWRhdGEudW5pdF9jbGFzcztcbiAgICAgICAgICB0aGlzLl91bml0ID0gdGhpcy5fY29uZmlnIS51bml0O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoIXVuaXRDbGFzcyAmJiB0aGlzLl9tZXRhZGF0YSkge1xuICAgICAgICBjb25zdCBtZXRhZGF0YSA9IHRoaXMuX21ldGFkYXRhW3RoaXMuX2VudGl0aWVzWzBdXTtcbiAgICAgICAgdW5pdENsYXNzID0gbWV0YWRhdGE/LnVuaXRfY2xhc3M7XG4gICAgICAgIHRoaXMuX3VuaXQgPSB1bml0Q2xhc3NcbiAgICAgICAgICA/IGdldERpc3BsYXlVbml0KHRoaXMuaGFzcyEsIG1ldGFkYXRhLnN0YXRpc3RpY19pZCwgbWV0YWRhdGEpIHx8XG4gICAgICAgICAgICB1bmRlZmluZWRcbiAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHVuaXRjb25maWcgPSB1bml0Q2xhc3MgPyB7IFt1bml0Q2xhc3NdOiB0aGlzLl91bml0IH0gOiB1bmRlZmluZWQ7XG4gICAgICBjb25zdCBzdGF0aXN0aWNzID0gYXdhaXQgZmV0Y2hTdGF0aXN0aWNzKFxuICAgICAgICB0aGlzLmhhc3MhLFxuICAgICAgICBzdGFydERhdGUsXG4gICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgdGhpcy5fZW50aXRpZXMsXG4gICAgICAgIHRoaXMuX2NvbmZpZyEucGVyaW9kLFxuICAgICAgICB1bml0Y29uZmlnLFxuICAgICAgICB0aGlzLl9zdGF0VHlwZXNcbiAgICAgICk7XG5cbiAgICAgIHRoaXMuX3N0YXRpc3RpY3MgPSB7fTtcbiAgICAgIHRoaXMuX2VudGl0aWVzLmZvckVhY2goKGlkKSA9PiB7XG4gICAgICAgIGlmIChpZCBpbiBzdGF0aXN0aWNzKSB7XG4gICAgICAgICAgdGhpcy5fc3RhdGlzdGljcyFbaWRdID0gc3RhdGlzdGljc1tpZF07XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgdGhpcy5fc3RhdGlzdGljcyA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZ2V0IHN0eWxlcygpOiBDU1NSZXN1bHRHcm91cCB7XG4gICAgcmV0dXJuIGNzc2BcbiAgICAgIGhhLWNhcmQge1xuICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICB9XG4gICAgICAuY29udGVudCB7XG4gICAgICAgIHBhZGRpbmc6IDE2cHg7XG4gICAgICB9XG4gICAgICAuaGFzLWhlYWRlciB7XG4gICAgICAgIHBhZGRpbmctdG9wOiAwO1xuICAgICAgfVxuICAgIGA7XG4gIH1cbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICBpbnRlcmZhY2UgSFRNTEVsZW1lbnRUYWdOYW1lTWFwIHtcbiAgICBcImh1aS1zdGF0aXN0aWNzLWdyYXBoLWNhcmRcIjogSHVpU3RhdGlzdGljc0dyYXBoQ2FyZDtcbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/panels/lovelace/cards/hui-statistics-graph-card.ts\n");

/***/ })

}]);