"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkhome_assistant_frontend"] = self["webpackChunkhome_assistant_frontend"] || []).push([["src_data_logbook_ts"],{

/***/ "./src/data/logbook.ts":
/*!*****************************!*\
  !*** ./src/data/logbook.ts ***!
  \*****************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CONTINUOUS_DOMAINS: () => (/* binding */ CONTINUOUS_DOMAINS),\n/* harmony export */   clearLogbookCache: () => (/* binding */ clearLogbookCache),\n/* harmony export */   createHistoricState: () => (/* binding */ createHistoricState),\n/* harmony export */   filterLogbookCompatibleEntities: () => (/* binding */ filterLogbookCompatibleEntities),\n/* harmony export */   getLogbookData: () => (/* binding */ getLogbookData),\n/* harmony export */   getLogbookDataForContext: () => (/* binding */ getLogbookDataForContext),\n/* harmony export */   localizeStateMessage: () => (/* binding */ localizeStateMessage),\n/* harmony export */   localizeTriggerSource: () => (/* binding */ localizeTriggerSource),\n/* harmony export */   subscribeLogbook: () => (/* binding */ subscribeLogbook)\n/* harmony export */ });\n/* harmony import */ var _common_const__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/const */ \"./src/common/const.ts\");\n/* harmony import */ var _common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common/entity/compute_domain */ \"./src/common/entity/compute_domain.ts\");\n/* harmony import */ var _common_entity_compute_state_display__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common/entity/compute_state_display */ \"./src/common/entity/compute_state_display.ts\");\n/* harmony import */ var _common_entity_compute_state_domain__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../common/entity/compute_state_domain */ \"./src/common/entity/compute_state_domain.ts\");\n/* harmony import */ var _entity__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./entity */ \"./src/data/entity.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_common_entity_compute_state_display__WEBPACK_IMPORTED_MODULE_2__]);\n_common_entity_compute_state_display__WEBPACK_IMPORTED_MODULE_2__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n\nconst LOGBOOK_LOCALIZE_PATH = \"ui.components.logbook.messages\";\nconst CONTINUOUS_DOMAINS = [\"counter\", \"proximity\", \"sensor\", \"zone\"];\n//\n// Localization mapping for all the triggers in core\n// in homeassistant.components.homeassistant.triggers\n//\nconst triggerPhrases = {\n  \"numeric state of\": \"triggered_by_numeric_state_of\",\n  // number state trigger\n  \"state of\": \"triggered_by_state_of\",\n  // state trigger\n  event: \"triggered_by_event\",\n  // event trigger\n  time: \"triggered_by_time\",\n  // time trigger\n  \"time pattern\": \"triggered_by_time_pattern\",\n  // time trigger\n  \"ioBroker stopping\": \"triggered_by_homeassistant_stopping\",\n  // stop event\n  \"ioBroker starting\": \"triggered_by_homeassistant_starting\" // start event\n};\n\nconst DATA_CACHE = {};\nconst getLogbookDataForContext = async (hass, startDate, contextId) => {\n  await hass.loadBackendTranslation(\"device_class\");\n  return getLogbookDataFromServer(hass, startDate, undefined, undefined, contextId);\n};\nconst getLogbookData = async (hass, startDate, endDate, entityIds, deviceIds) => {\n  await hass.loadBackendTranslation(\"device_class\");\n  return deviceIds !== null && deviceIds !== void 0 && deviceIds.length ? getLogbookDataFromServer(hass, startDate, endDate, entityIds, undefined, deviceIds) : getLogbookDataCache(hass, startDate, endDate, entityIds);\n};\nconst getLogbookDataCache = async (hass, startDate, endDate, entityId) => {\n  const ALL_ENTITIES = \"*\";\n  const entityIdKey = entityId ? entityId.toString() : ALL_ENTITIES;\n  const cacheKey = `${startDate}${endDate}`;\n  if (!DATA_CACHE[cacheKey]) {\n    DATA_CACHE[cacheKey] = {};\n  }\n  if (entityIdKey in DATA_CACHE[cacheKey]) {\n    return DATA_CACHE[cacheKey][entityIdKey];\n  }\n  if (entityId && DATA_CACHE[cacheKey][ALL_ENTITIES]) {\n    const entities = await DATA_CACHE[cacheKey][ALL_ENTITIES];\n    return entities.filter(entity => entity.entity_id && entityId.includes(entity.entity_id));\n  }\n  DATA_CACHE[cacheKey][entityIdKey] = getLogbookDataFromServer(hass, startDate, endDate, entityId);\n  return DATA_CACHE[cacheKey][entityIdKey];\n};\nconst getLogbookDataFromServer = (hass, startDate, endDate, entityIds, contextId, deviceIds) => {\n  // If all specified filters are empty lists, we can return an empty list.\n  if ((entityIds || deviceIds) && (!entityIds || entityIds.length === 0) && (!deviceIds || deviceIds.length === 0)) {\n    return Promise.resolve([]);\n  }\n  const params = {\n    type: \"logbook/get_events\",\n    start_time: startDate\n  };\n  if (endDate) {\n    params.end_time = endDate;\n  }\n  if (entityIds !== null && entityIds !== void 0 && entityIds.length) {\n    params.entity_ids = entityIds;\n  }\n  if (deviceIds !== null && deviceIds !== void 0 && deviceIds.length) {\n    params.device_ids = deviceIds;\n  }\n  if (contextId) {\n    params.context_id = contextId;\n  }\n  return hass.callWS(params);\n};\nconst subscribeLogbook = (hass, callbackFunction, startDate, endDate, entityIds, deviceIds) => {\n  // If all specified filters are empty lists, we can return an empty list.\n  if ((entityIds || deviceIds) && (!entityIds || entityIds.length === 0) && (!deviceIds || deviceIds.length === 0)) {\n    return Promise.reject(\"No entities or devices\");\n  }\n  const params = {\n    type: \"logbook/event_stream\",\n    start_time: startDate,\n    end_time: endDate\n  };\n  if (entityIds !== null && entityIds !== void 0 && entityIds.length) {\n    params.entity_ids = entityIds;\n  }\n  if (deviceIds !== null && deviceIds !== void 0 && deviceIds.length) {\n    params.device_ids = deviceIds;\n  }\n  return hass.connection.subscribeMessage(message => callbackFunction(message), params);\n};\nconst clearLogbookCache = (startDate, endDate) => {\n  DATA_CACHE[`${startDate}${endDate}`] = {};\n};\nconst createHistoricState = (currentStateObj, state) => ({\n  entity_id: currentStateObj.entity_id,\n  state: state,\n  attributes: {\n    // Rebuild the historical state by copying static attributes only\n    device_class: currentStateObj === null || currentStateObj === void 0 ? void 0 : currentStateObj.attributes.device_class,\n    source_type: currentStateObj === null || currentStateObj === void 0 ? void 0 : currentStateObj.attributes.source_type,\n    has_date: currentStateObj === null || currentStateObj === void 0 ? void 0 : currentStateObj.attributes.has_date,\n    has_time: currentStateObj === null || currentStateObj === void 0 ? void 0 : currentStateObj.attributes.has_time,\n    // We do not want to use dynamic entity pictures (e.g., from media player) for the log book rendering,\n    // as they would present a false state in the log (played media right now vs actual historic data).\n    entity_picture_local: _common_const__WEBPACK_IMPORTED_MODULE_0__.DOMAINS_WITH_DYNAMIC_PICTURE.has((0,_common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_1__.computeDomain)(currentStateObj.entity_id)) ? undefined : currentStateObj === null || currentStateObj === void 0 ? void 0 : currentStateObj.attributes.entity_picture_local,\n    entity_picture: _common_const__WEBPACK_IMPORTED_MODULE_0__.DOMAINS_WITH_DYNAMIC_PICTURE.has((0,_common_entity_compute_domain__WEBPACK_IMPORTED_MODULE_1__.computeDomain)(currentStateObj.entity_id)) ? undefined : currentStateObj === null || currentStateObj === void 0 ? void 0 : currentStateObj.attributes.entity_picture\n  }\n});\nconst localizeTriggerSource = (localize, source) => {\n  for (const triggerPhrase in triggerPhrases) {\n    if (source.startsWith(triggerPhrase)) {\n      return source.replace(triggerPhrase, `${localize(`ui.components.logbook.${triggerPhrases[triggerPhrase]}`)}`);\n    }\n  }\n  return source;\n};\nconst localizeStateMessage = (hass, localize, state, stateObj, domain) => {\n  switch (domain) {\n    case \"device_tracker\":\n    case \"person\":\n      if (state === \"not_home\") {\n        return localize(`${LOGBOOK_LOCALIZE_PATH}.was_away`);\n      }\n      if (state === \"home\") {\n        return localize(`${LOGBOOK_LOCALIZE_PATH}.was_at_home`);\n      }\n      return localize(`${LOGBOOK_LOCALIZE_PATH}.was_at_state`, \"state\", state);\n    case \"sun\":\n      return state === \"above_horizon\" ? localize(`${LOGBOOK_LOCALIZE_PATH}.rose`) : localize(`${LOGBOOK_LOCALIZE_PATH}.set`);\n    case \"binary_sensor\":\n      {\n        const isOn = state === _common_const__WEBPACK_IMPORTED_MODULE_0__.BINARY_STATE_ON;\n        const isOff = state === _common_const__WEBPACK_IMPORTED_MODULE_0__.BINARY_STATE_OFF;\n        const device_class = stateObj.attributes.device_class;\n        switch (device_class) {\n          case \"battery\":\n            if (isOn) {\n              return localize(`${LOGBOOK_LOCALIZE_PATH}.was_low`);\n            }\n            if (isOff) {\n              return localize(`${LOGBOOK_LOCALIZE_PATH}.was_normal`);\n            }\n            break;\n          case \"connectivity\":\n            if (isOn) {\n              return localize(`${LOGBOOK_LOCALIZE_PATH}.was_connected`);\n            }\n            if (isOff) {\n              return localize(`${LOGBOOK_LOCALIZE_PATH}.was_disconnected`);\n            }\n            break;\n          case \"door\":\n          case \"garage_door\":\n          case \"opening\":\n          case \"window\":\n            if (isOn) {\n              return localize(`${LOGBOOK_LOCALIZE_PATH}.was_opened`);\n            }\n            if (isOff) {\n              return localize(`${LOGBOOK_LOCALIZE_PATH}.was_closed`);\n            }\n            break;\n          case \"lock\":\n            if (isOn) {\n              return localize(`${LOGBOOK_LOCALIZE_PATH}.was_unlocked`);\n            }\n            if (isOff) {\n              return localize(`${LOGBOOK_LOCALIZE_PATH}.was_locked`);\n            }\n            break;\n          case \"plug\":\n            if (isOn) {\n              return localize(`${LOGBOOK_LOCALIZE_PATH}.was_plugged_in`);\n            }\n            if (isOff) {\n              return localize(`${LOGBOOK_LOCALIZE_PATH}.was_unplugged`);\n            }\n            break;\n          case \"presence\":\n            if (isOn) {\n              return localize(`${LOGBOOK_LOCALIZE_PATH}.was_at_home`);\n            }\n            if (isOff) {\n              return localize(`${LOGBOOK_LOCALIZE_PATH}.was_away`);\n            }\n            break;\n          case \"safety\":\n            if (isOn) {\n              return localize(`${LOGBOOK_LOCALIZE_PATH}.was_unsafe`);\n            }\n            if (isOff) {\n              return localize(`${LOGBOOK_LOCALIZE_PATH}.was_safe`);\n            }\n            break;\n          case \"cold\":\n          case \"gas\":\n          case \"heat\":\n          case \"moisture\":\n          case \"motion\":\n          case \"occupancy\":\n          case \"power\":\n          case \"problem\":\n          case \"smoke\":\n          case \"sound\":\n          case \"vibration\":\n            if (isOn) {\n              return localize(`${LOGBOOK_LOCALIZE_PATH}.detected_device_class`, {\n                device_class: localize(`component.binary_sensor.device_class.${device_class}`)\n              });\n            }\n            if (isOff) {\n              return localize(`${LOGBOOK_LOCALIZE_PATH}.cleared_device_class`, {\n                device_class: localize(`component.binary_sensor.device_class.${device_class}`)\n              });\n            }\n            break;\n          case \"tamper\":\n            if (isOn) {\n              return localize(`${LOGBOOK_LOCALIZE_PATH}.detected_tampering`);\n            }\n            if (isOff) {\n              return localize(`${LOGBOOK_LOCALIZE_PATH}.cleared_tampering`);\n            }\n            break;\n        }\n        break;\n      }\n    case \"cover\":\n      switch (state) {\n        case \"open\":\n          return localize(`${LOGBOOK_LOCALIZE_PATH}.was_opened`);\n        case \"opening\":\n          return localize(`${LOGBOOK_LOCALIZE_PATH}.is_opening`);\n        case \"closing\":\n          return localize(`${LOGBOOK_LOCALIZE_PATH}.is_closing`);\n        case \"closed\":\n          return localize(`${LOGBOOK_LOCALIZE_PATH}.was_closed`);\n      }\n      break;\n    case \"lock\":\n      switch (state) {\n        case \"unlocked\":\n          return localize(`${LOGBOOK_LOCALIZE_PATH}.was_unlocked`);\n        case \"locking\":\n          return localize(`${LOGBOOK_LOCALIZE_PATH}.is_locking`);\n        case \"unlocking\":\n          return localize(`${LOGBOOK_LOCALIZE_PATH}.is_unlocking`);\n        case \"locked\":\n          return localize(`${LOGBOOK_LOCALIZE_PATH}.was_locked`);\n        case \"jammed\":\n          return localize(`${LOGBOOK_LOCALIZE_PATH}.is_jammed`);\n      }\n      break;\n  }\n  if (state === _common_const__WEBPACK_IMPORTED_MODULE_0__.BINARY_STATE_ON) {\n    return localize(`${LOGBOOK_LOCALIZE_PATH}.turned_on`);\n  }\n  if (state === _common_const__WEBPACK_IMPORTED_MODULE_0__.BINARY_STATE_OFF) {\n    return localize(`${LOGBOOK_LOCALIZE_PATH}.turned_off`);\n  }\n  if (state === _entity__WEBPACK_IMPORTED_MODULE_4__.UNKNOWN) {\n    return localize(`${LOGBOOK_LOCALIZE_PATH}.became_unknown`);\n  }\n  if (state === _entity__WEBPACK_IMPORTED_MODULE_4__.UNAVAILABLE) {\n    return localize(`${LOGBOOK_LOCALIZE_PATH}.became_unavailable`);\n  }\n  return hass.localize(`${LOGBOOK_LOCALIZE_PATH}.changed_to_state`, \"state\", stateObj ? (0,_common_entity_compute_state_display__WEBPACK_IMPORTED_MODULE_2__.computeStateDisplay)(localize, stateObj, hass.locale, hass.entities, state) : state);\n};\nconst filterLogbookCompatibleEntities = entity => (0,_common_entity_compute_state_domain__WEBPACK_IMPORTED_MODULE_3__.computeStateDomain)(entity) !== \"sensor\" || entity.attributes.unit_of_measurement === undefined && entity.attributes.state_class === undefined;\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZGF0YS9sb2dib29rLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFJQTtBQUVBO0FBQ0E7QUFpQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7O0FBRUE7QUFNQTtBQUtBO0FBQ0E7QUFPQTtBQUVBO0FBT0E7QUFDQTtBQVVBO0FBRUE7QUFNQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBTUE7QUFDQTtBQUVBO0FBUUE7QUFDQTtBQUtBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQVFBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUtBO0FBQ0E7QUFFQTtBQUlBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFJQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFhQTtBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaG9tZS1hc3Npc3RhbnQtZnJvbnRlbmQvLi9zcmMvZGF0YS9sb2dib29rLnRzPzYyOGEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSGFzc0VudGl0eSB9IGZyb20gXCJob21lLWFzc2lzdGFudC1qcy13ZWJzb2NrZXRcIjtcbmltcG9ydCB7XG4gIEJJTkFSWV9TVEFURV9PRkYsXG4gIEJJTkFSWV9TVEFURV9PTixcbiAgRE9NQUlOU19XSVRIX0RZTkFNSUNfUElDVFVSRSxcbn0gZnJvbSBcIi4uL2NvbW1vbi9jb25zdFwiO1xuaW1wb3J0IHsgY29tcHV0ZURvbWFpbiB9IGZyb20gXCIuLi9jb21tb24vZW50aXR5L2NvbXB1dGVfZG9tYWluXCI7XG5pbXBvcnQgeyBjb21wdXRlU3RhdGVEaXNwbGF5IH0gZnJvbSBcIi4uL2NvbW1vbi9lbnRpdHkvY29tcHV0ZV9zdGF0ZV9kaXNwbGF5XCI7XG5pbXBvcnQgeyBjb21wdXRlU3RhdGVEb21haW4gfSBmcm9tIFwiLi4vY29tbW9uL2VudGl0eS9jb21wdXRlX3N0YXRlX2RvbWFpblwiO1xuaW1wb3J0IHsgTG9jYWxpemVGdW5jIH0gZnJvbSBcIi4uL2NvbW1vbi90cmFuc2xhdGlvbnMvbG9jYWxpemVcIjtcbmltcG9ydCB7IEhhRW50aXR5UGlja2VyRW50aXR5RmlsdGVyRnVuYyB9IGZyb20gXCIuLi9jb21wb25lbnRzL2VudGl0eS9oYS1lbnRpdHktcGlja2VyXCI7XG5pbXBvcnQgeyBIb21lQXNzaXN0YW50IH0gZnJvbSBcIi4uL3R5cGVzXCI7XG5pbXBvcnQgeyBVTkFWQUlMQUJMRSwgVU5LTk9XTiB9IGZyb20gXCIuL2VudGl0eVwiO1xuXG5jb25zdCBMT0dCT09LX0xPQ0FMSVpFX1BBVEggPSBcInVpLmNvbXBvbmVudHMubG9nYm9vay5tZXNzYWdlc1wiO1xuZXhwb3J0IGNvbnN0IENPTlRJTlVPVVNfRE9NQUlOUyA9IFtcImNvdW50ZXJcIiwgXCJwcm94aW1pdHlcIiwgXCJzZW5zb3JcIiwgXCJ6b25lXCJdO1xuXG5leHBvcnQgaW50ZXJmYWNlIExvZ2Jvb2tTdHJlYW1NZXNzYWdlIHtcbiAgZXZlbnRzOiBMb2dib29rRW50cnlbXTtcbiAgc3RhcnRfdGltZT86IG51bWJlcjsgLy8gU3RhcnQgdGltZSBvZiB0aGlzIGhpc3RvcmljYWwgY2h1bmtcbiAgZW5kX3RpbWU/OiBudW1iZXI7IC8vIEVuZCB0aW1lIG9mIHRoaXMgaGlzdG9yaWNhbCBjaHVua1xuICBwYXJ0aWFsPzogYm9vbGVhbjsgLy8gSW5kaWNpYXRlcyBtb3JlIGhpc3RvcmljYWwgY2h1bmtzIGFyZSBjb21pbmdcbn1cblxuZXhwb3J0IGludGVyZmFjZSBMb2dib29rRW50cnkge1xuICAvLyBCYXNlIGRhdGFcbiAgd2hlbjogbnVtYmVyOyAvLyBQeXRob24gdGltZXN0YW1wLiBEbyAqMTAwMCB0byBnZXQgSlMgdGltZXN0YW1wLlxuICBuYW1lOiBzdHJpbmc7XG4gIG1lc3NhZ2U/OiBzdHJpbmc7XG4gIGVudGl0eV9pZD86IHN0cmluZztcbiAgaWNvbj86IHN0cmluZztcbiAgc291cmNlPzogc3RyaW5nOyAvLyBUaGUgdHJpZ2dlciBzb3VyY2VcbiAgZG9tYWluPzogc3RyaW5nO1xuICBzdGF0ZT86IHN0cmluZzsgLy8gVGhlIHN0YXRlIG9mIHRoZSBlbnRpdHlcbiAgLy8gQ29udGV4dCBkYXRhXG4gIGNvbnRleHRfaWQ/OiBzdHJpbmc7XG4gIGNvbnRleHRfdXNlcl9pZD86IHN0cmluZztcbiAgY29udGV4dF9ldmVudF90eXBlPzogc3RyaW5nO1xuICBjb250ZXh0X2RvbWFpbj86IHN0cmluZztcbiAgY29udGV4dF9zZXJ2aWNlPzogc3RyaW5nOyAvLyBTZXJ2aWNlIGNhbGxzIG9ubHlcbiAgY29udGV4dF9lbnRpdHlfaWQ/OiBzdHJpbmc7XG4gIGNvbnRleHRfZW50aXR5X2lkX25hbWU/OiBzdHJpbmc7IC8vIExlZ2FjeSwgbm90IGxvbmdlciBzZW50XG4gIGNvbnRleHRfbmFtZT86IHN0cmluZztcbiAgY29udGV4dF9zdGF0ZT86IHN0cmluZzsgLy8gVGhlIHN0YXRlIG9mIHRoZSBlbnRpdHlcbiAgY29udGV4dF9zb3VyY2U/OiBzdHJpbmc7IC8vIFRoZSB0cmlnZ2VyIHNvdXJjZVxuICBjb250ZXh0X21lc3NhZ2U/OiBzdHJpbmc7XG59XG5cbi8vXG4vLyBMb2NhbGl6YXRpb24gbWFwcGluZyBmb3IgYWxsIHRoZSB0cmlnZ2VycyBpbiBjb3JlXG4vLyBpbiBob21lYXNzaXN0YW50LmNvbXBvbmVudHMuaG9tZWFzc2lzdGFudC50cmlnZ2Vyc1xuLy9cbmNvbnN0IHRyaWdnZXJQaHJhc2VzID0ge1xuICBcIm51bWVyaWMgc3RhdGUgb2ZcIjogXCJ0cmlnZ2VyZWRfYnlfbnVtZXJpY19zdGF0ZV9vZlwiLCAvLyBudW1iZXIgc3RhdGUgdHJpZ2dlclxuICBcInN0YXRlIG9mXCI6IFwidHJpZ2dlcmVkX2J5X3N0YXRlX29mXCIsIC8vIHN0YXRlIHRyaWdnZXJcbiAgZXZlbnQ6IFwidHJpZ2dlcmVkX2J5X2V2ZW50XCIsIC8vIGV2ZW50IHRyaWdnZXJcbiAgdGltZTogXCJ0cmlnZ2VyZWRfYnlfdGltZVwiLCAvLyB0aW1lIHRyaWdnZXJcbiAgXCJ0aW1lIHBhdHRlcm5cIjogXCJ0cmlnZ2VyZWRfYnlfdGltZV9wYXR0ZXJuXCIsIC8vIHRpbWUgdHJpZ2dlclxuICBcIkhvbWUgQXNzaXN0YW50IHN0b3BwaW5nXCI6IFwidHJpZ2dlcmVkX2J5X2hvbWVhc3Npc3RhbnRfc3RvcHBpbmdcIiwgLy8gc3RvcCBldmVudFxuICBcIkhvbWUgQXNzaXN0YW50IHN0YXJ0aW5nXCI6IFwidHJpZ2dlcmVkX2J5X2hvbWVhc3Npc3RhbnRfc3RhcnRpbmdcIiwgLy8gc3RhcnQgZXZlbnRcbn07XG5cbmNvbnN0IERBVEFfQ0FDSEU6IHtcbiAgW2NhY2hlS2V5OiBzdHJpbmddOiB7XG4gICAgW2VudGl0eUlkOiBzdHJpbmddOiBQcm9taXNlPExvZ2Jvb2tFbnRyeVtdPiB8IHVuZGVmaW5lZDtcbiAgfTtcbn0gPSB7fTtcblxuZXhwb3J0IGNvbnN0IGdldExvZ2Jvb2tEYXRhRm9yQ29udGV4dCA9IGFzeW5jIChcbiAgaGFzczogSG9tZUFzc2lzdGFudCxcbiAgc3RhcnREYXRlOiBzdHJpbmcsXG4gIGNvbnRleHRJZD86IHN0cmluZ1xuKTogUHJvbWlzZTxMb2dib29rRW50cnlbXT4gPT4ge1xuICBhd2FpdCBoYXNzLmxvYWRCYWNrZW5kVHJhbnNsYXRpb24oXCJkZXZpY2VfY2xhc3NcIik7XG4gIHJldHVybiBnZXRMb2dib29rRGF0YUZyb21TZXJ2ZXIoXG4gICAgaGFzcyxcbiAgICBzdGFydERhdGUsXG4gICAgdW5kZWZpbmVkLFxuICAgIHVuZGVmaW5lZCxcbiAgICBjb250ZXh0SWRcbiAgKTtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRMb2dib29rRGF0YSA9IGFzeW5jIChcbiAgaGFzczogSG9tZUFzc2lzdGFudCxcbiAgc3RhcnREYXRlOiBzdHJpbmcsXG4gIGVuZERhdGU6IHN0cmluZyxcbiAgZW50aXR5SWRzPzogc3RyaW5nW10sXG4gIGRldmljZUlkcz86IHN0cmluZ1tdXG4pOiBQcm9taXNlPExvZ2Jvb2tFbnRyeVtdPiA9PiB7XG4gIGF3YWl0IGhhc3MubG9hZEJhY2tlbmRUcmFuc2xhdGlvbihcImRldmljZV9jbGFzc1wiKTtcbiAgcmV0dXJuIGRldmljZUlkcz8ubGVuZ3RoXG4gICAgPyBnZXRMb2dib29rRGF0YUZyb21TZXJ2ZXIoXG4gICAgICAgIGhhc3MsXG4gICAgICAgIHN0YXJ0RGF0ZSxcbiAgICAgICAgZW5kRGF0ZSxcbiAgICAgICAgZW50aXR5SWRzLFxuICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgIGRldmljZUlkc1xuICAgICAgKVxuICAgIDogZ2V0TG9nYm9va0RhdGFDYWNoZShoYXNzLCBzdGFydERhdGUsIGVuZERhdGUsIGVudGl0eUlkcyk7XG59O1xuXG5jb25zdCBnZXRMb2dib29rRGF0YUNhY2hlID0gYXN5bmMgKFxuICBoYXNzOiBIb21lQXNzaXN0YW50LFxuICBzdGFydERhdGU6IHN0cmluZyxcbiAgZW5kRGF0ZTogc3RyaW5nLFxuICBlbnRpdHlJZD86IHN0cmluZ1tdXG4pID0+IHtcbiAgY29uc3QgQUxMX0VOVElUSUVTID0gXCIqXCI7XG5cbiAgY29uc3QgZW50aXR5SWRLZXkgPSBlbnRpdHlJZCA/IGVudGl0eUlkLnRvU3RyaW5nKCkgOiBBTExfRU5USVRJRVM7XG4gIGNvbnN0IGNhY2hlS2V5ID0gYCR7c3RhcnREYXRlfSR7ZW5kRGF0ZX1gO1xuXG4gIGlmICghREFUQV9DQUNIRVtjYWNoZUtleV0pIHtcbiAgICBEQVRBX0NBQ0hFW2NhY2hlS2V5XSA9IHt9O1xuICB9XG5cbiAgaWYgKGVudGl0eUlkS2V5IGluIERBVEFfQ0FDSEVbY2FjaGVLZXldKSB7XG4gICAgcmV0dXJuIERBVEFfQ0FDSEVbY2FjaGVLZXldW2VudGl0eUlkS2V5XSE7XG4gIH1cblxuICBpZiAoZW50aXR5SWQgJiYgREFUQV9DQUNIRVtjYWNoZUtleV1bQUxMX0VOVElUSUVTXSkge1xuICAgIGNvbnN0IGVudGl0aWVzID0gYXdhaXQgREFUQV9DQUNIRVtjYWNoZUtleV1bQUxMX0VOVElUSUVTXSE7XG4gICAgcmV0dXJuIGVudGl0aWVzLmZpbHRlcihcbiAgICAgIChlbnRpdHkpID0+IGVudGl0eS5lbnRpdHlfaWQgJiYgZW50aXR5SWQuaW5jbHVkZXMoZW50aXR5LmVudGl0eV9pZClcbiAgICApO1xuICB9XG5cbiAgREFUQV9DQUNIRVtjYWNoZUtleV1bZW50aXR5SWRLZXldID0gZ2V0TG9nYm9va0RhdGFGcm9tU2VydmVyKFxuICAgIGhhc3MsXG4gICAgc3RhcnREYXRlLFxuICAgIGVuZERhdGUsXG4gICAgZW50aXR5SWRcbiAgKTtcbiAgcmV0dXJuIERBVEFfQ0FDSEVbY2FjaGVLZXldW2VudGl0eUlkS2V5XSE7XG59O1xuXG5jb25zdCBnZXRMb2dib29rRGF0YUZyb21TZXJ2ZXIgPSAoXG4gIGhhc3M6IEhvbWVBc3Npc3RhbnQsXG4gIHN0YXJ0RGF0ZTogc3RyaW5nLFxuICBlbmREYXRlPzogc3RyaW5nLFxuICBlbnRpdHlJZHM/OiBzdHJpbmdbXSxcbiAgY29udGV4dElkPzogc3RyaW5nLFxuICBkZXZpY2VJZHM/OiBzdHJpbmdbXVxuKTogUHJvbWlzZTxMb2dib29rRW50cnlbXT4gPT4ge1xuICAvLyBJZiBhbGwgc3BlY2lmaWVkIGZpbHRlcnMgYXJlIGVtcHR5IGxpc3RzLCB3ZSBjYW4gcmV0dXJuIGFuIGVtcHR5IGxpc3QuXG4gIGlmIChcbiAgICAoZW50aXR5SWRzIHx8IGRldmljZUlkcykgJiZcbiAgICAoIWVudGl0eUlkcyB8fCBlbnRpdHlJZHMubGVuZ3RoID09PSAwKSAmJlxuICAgICghZGV2aWNlSWRzIHx8IGRldmljZUlkcy5sZW5ndGggPT09IDApXG4gICkge1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoW10pO1xuICB9XG5cbiAgY29uc3QgcGFyYW1zOiBhbnkgPSB7XG4gICAgdHlwZTogXCJsb2dib29rL2dldF9ldmVudHNcIixcbiAgICBzdGFydF90aW1lOiBzdGFydERhdGUsXG4gIH07XG4gIGlmIChlbmREYXRlKSB7XG4gICAgcGFyYW1zLmVuZF90aW1lID0gZW5kRGF0ZTtcbiAgfVxuICBpZiAoZW50aXR5SWRzPy5sZW5ndGgpIHtcbiAgICBwYXJhbXMuZW50aXR5X2lkcyA9IGVudGl0eUlkcztcbiAgfVxuICBpZiAoZGV2aWNlSWRzPy5sZW5ndGgpIHtcbiAgICBwYXJhbXMuZGV2aWNlX2lkcyA9IGRldmljZUlkcztcbiAgfVxuICBpZiAoY29udGV4dElkKSB7XG4gICAgcGFyYW1zLmNvbnRleHRfaWQgPSBjb250ZXh0SWQ7XG4gIH1cbiAgcmV0dXJuIGhhc3MuY2FsbFdTPExvZ2Jvb2tFbnRyeVtdPihwYXJhbXMpO1xufTtcblxuZXhwb3J0IGNvbnN0IHN1YnNjcmliZUxvZ2Jvb2sgPSAoXG4gIGhhc3M6IEhvbWVBc3Npc3RhbnQsXG4gIGNhbGxiYWNrRnVuY3Rpb246IChtZXNzYWdlOiBMb2dib29rU3RyZWFtTWVzc2FnZSkgPT4gdm9pZCxcbiAgc3RhcnREYXRlOiBzdHJpbmcsXG4gIGVuZERhdGU6IHN0cmluZyxcbiAgZW50aXR5SWRzPzogc3RyaW5nW10sXG4gIGRldmljZUlkcz86IHN0cmluZ1tdXG4pOiBQcm9taXNlPCgpID0+IFByb21pc2U8dm9pZD4+ID0+IHtcbiAgLy8gSWYgYWxsIHNwZWNpZmllZCBmaWx0ZXJzIGFyZSBlbXB0eSBsaXN0cywgd2UgY2FuIHJldHVybiBhbiBlbXB0eSBsaXN0LlxuICBpZiAoXG4gICAgKGVudGl0eUlkcyB8fCBkZXZpY2VJZHMpICYmXG4gICAgKCFlbnRpdHlJZHMgfHwgZW50aXR5SWRzLmxlbmd0aCA9PT0gMCkgJiZcbiAgICAoIWRldmljZUlkcyB8fCBkZXZpY2VJZHMubGVuZ3RoID09PSAwKVxuICApIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoXCJObyBlbnRpdGllcyBvciBkZXZpY2VzXCIpO1xuICB9XG4gIGNvbnN0IHBhcmFtczogYW55ID0ge1xuICAgIHR5cGU6IFwibG9nYm9vay9ldmVudF9zdHJlYW1cIixcbiAgICBzdGFydF90aW1lOiBzdGFydERhdGUsXG4gICAgZW5kX3RpbWU6IGVuZERhdGUsXG4gIH07XG4gIGlmIChlbnRpdHlJZHM/Lmxlbmd0aCkge1xuICAgIHBhcmFtcy5lbnRpdHlfaWRzID0gZW50aXR5SWRzO1xuICB9XG4gIGlmIChkZXZpY2VJZHM/Lmxlbmd0aCkge1xuICAgIHBhcmFtcy5kZXZpY2VfaWRzID0gZGV2aWNlSWRzO1xuICB9XG4gIHJldHVybiBoYXNzLmNvbm5lY3Rpb24uc3Vic2NyaWJlTWVzc2FnZTxMb2dib29rU3RyZWFtTWVzc2FnZT4oXG4gICAgKG1lc3NhZ2UpID0+IGNhbGxiYWNrRnVuY3Rpb24obWVzc2FnZSksXG4gICAgcGFyYW1zXG4gICk7XG59O1xuXG5leHBvcnQgY29uc3QgY2xlYXJMb2dib29rQ2FjaGUgPSAoc3RhcnREYXRlOiBzdHJpbmcsIGVuZERhdGU6IHN0cmluZykgPT4ge1xuICBEQVRBX0NBQ0hFW2Ake3N0YXJ0RGF0ZX0ke2VuZERhdGV9YF0gPSB7fTtcbn07XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVIaXN0b3JpY1N0YXRlID0gKFxuICBjdXJyZW50U3RhdGVPYmo6IEhhc3NFbnRpdHksXG4gIHN0YXRlPzogc3RyaW5nXG4pOiBIYXNzRW50aXR5ID0+IDxIYXNzRW50aXR5Pig8dW5rbm93bj57XG4gICAgZW50aXR5X2lkOiBjdXJyZW50U3RhdGVPYmouZW50aXR5X2lkLFxuICAgIHN0YXRlOiBzdGF0ZSxcbiAgICBhdHRyaWJ1dGVzOiB7XG4gICAgICAvLyBSZWJ1aWxkIHRoZSBoaXN0b3JpY2FsIHN0YXRlIGJ5IGNvcHlpbmcgc3RhdGljIGF0dHJpYnV0ZXMgb25seVxuICAgICAgZGV2aWNlX2NsYXNzOiBjdXJyZW50U3RhdGVPYmo/LmF0dHJpYnV0ZXMuZGV2aWNlX2NsYXNzLFxuICAgICAgc291cmNlX3R5cGU6IGN1cnJlbnRTdGF0ZU9iaj8uYXR0cmlidXRlcy5zb3VyY2VfdHlwZSxcbiAgICAgIGhhc19kYXRlOiBjdXJyZW50U3RhdGVPYmo/LmF0dHJpYnV0ZXMuaGFzX2RhdGUsXG4gICAgICBoYXNfdGltZTogY3VycmVudFN0YXRlT2JqPy5hdHRyaWJ1dGVzLmhhc190aW1lLFxuICAgICAgLy8gV2UgZG8gbm90IHdhbnQgdG8gdXNlIGR5bmFtaWMgZW50aXR5IHBpY3R1cmVzIChlLmcuLCBmcm9tIG1lZGlhIHBsYXllcikgZm9yIHRoZSBsb2cgYm9vayByZW5kZXJpbmcsXG4gICAgICAvLyBhcyB0aGV5IHdvdWxkIHByZXNlbnQgYSBmYWxzZSBzdGF0ZSBpbiB0aGUgbG9nIChwbGF5ZWQgbWVkaWEgcmlnaHQgbm93IHZzIGFjdHVhbCBoaXN0b3JpYyBkYXRhKS5cbiAgICAgIGVudGl0eV9waWN0dXJlX2xvY2FsOiBET01BSU5TX1dJVEhfRFlOQU1JQ19QSUNUVVJFLmhhcyhcbiAgICAgICAgY29tcHV0ZURvbWFpbihjdXJyZW50U3RhdGVPYmouZW50aXR5X2lkKVxuICAgICAgKVxuICAgICAgICA/IHVuZGVmaW5lZFxuICAgICAgICA6IGN1cnJlbnRTdGF0ZU9iaj8uYXR0cmlidXRlcy5lbnRpdHlfcGljdHVyZV9sb2NhbCxcbiAgICAgIGVudGl0eV9waWN0dXJlOiBET01BSU5TX1dJVEhfRFlOQU1JQ19QSUNUVVJFLmhhcyhcbiAgICAgICAgY29tcHV0ZURvbWFpbihjdXJyZW50U3RhdGVPYmouZW50aXR5X2lkKVxuICAgICAgKVxuICAgICAgICA/IHVuZGVmaW5lZFxuICAgICAgICA6IGN1cnJlbnRTdGF0ZU9iaj8uYXR0cmlidXRlcy5lbnRpdHlfcGljdHVyZSxcbiAgICB9LFxuICB9KTtcblxuZXhwb3J0IGNvbnN0IGxvY2FsaXplVHJpZ2dlclNvdXJjZSA9IChcbiAgbG9jYWxpemU6IExvY2FsaXplRnVuYyxcbiAgc291cmNlOiBzdHJpbmdcbikgPT4ge1xuICBmb3IgKGNvbnN0IHRyaWdnZXJQaHJhc2UgaW4gdHJpZ2dlclBocmFzZXMpIHtcbiAgICBpZiAoc291cmNlLnN0YXJ0c1dpdGgodHJpZ2dlclBocmFzZSkpIHtcbiAgICAgIHJldHVybiBzb3VyY2UucmVwbGFjZShcbiAgICAgICAgdHJpZ2dlclBocmFzZSxcbiAgICAgICAgYCR7bG9jYWxpemUoYHVpLmNvbXBvbmVudHMubG9nYm9vay4ke3RyaWdnZXJQaHJhc2VzW3RyaWdnZXJQaHJhc2VdfWApfWBcbiAgICAgICk7XG4gICAgfVxuICB9XG4gIHJldHVybiBzb3VyY2U7XG59O1xuXG5leHBvcnQgY29uc3QgbG9jYWxpemVTdGF0ZU1lc3NhZ2UgPSAoXG4gIGhhc3M6IEhvbWVBc3Npc3RhbnQsXG4gIGxvY2FsaXplOiBMb2NhbGl6ZUZ1bmMsXG4gIHN0YXRlOiBzdHJpbmcsXG4gIHN0YXRlT2JqOiBIYXNzRW50aXR5LFxuICBkb21haW46IHN0cmluZ1xuKTogc3RyaW5nID0+IHtcbiAgc3dpdGNoIChkb21haW4pIHtcbiAgICBjYXNlIFwiZGV2aWNlX3RyYWNrZXJcIjpcbiAgICBjYXNlIFwicGVyc29uXCI6XG4gICAgICBpZiAoc3RhdGUgPT09IFwibm90X2hvbWVcIikge1xuICAgICAgICByZXR1cm4gbG9jYWxpemUoYCR7TE9HQk9PS19MT0NBTElaRV9QQVRIfS53YXNfYXdheWApO1xuICAgICAgfVxuICAgICAgaWYgKHN0YXRlID09PSBcImhvbWVcIikge1xuICAgICAgICByZXR1cm4gbG9jYWxpemUoYCR7TE9HQk9PS19MT0NBTElaRV9QQVRIfS53YXNfYXRfaG9tZWApO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGxvY2FsaXplKGAke0xPR0JPT0tfTE9DQUxJWkVfUEFUSH0ud2FzX2F0X3N0YXRlYCwgXCJzdGF0ZVwiLCBzdGF0ZSk7XG5cbiAgICBjYXNlIFwic3VuXCI6XG4gICAgICByZXR1cm4gc3RhdGUgPT09IFwiYWJvdmVfaG9yaXpvblwiXG4gICAgICAgID8gbG9jYWxpemUoYCR7TE9HQk9PS19MT0NBTElaRV9QQVRIfS5yb3NlYClcbiAgICAgICAgOiBsb2NhbGl6ZShgJHtMT0dCT09LX0xPQ0FMSVpFX1BBVEh9LnNldGApO1xuXG4gICAgY2FzZSBcImJpbmFyeV9zZW5zb3JcIjoge1xuICAgICAgY29uc3QgaXNPbiA9IHN0YXRlID09PSBCSU5BUllfU1RBVEVfT047XG4gICAgICBjb25zdCBpc09mZiA9IHN0YXRlID09PSBCSU5BUllfU1RBVEVfT0ZGO1xuICAgICAgY29uc3QgZGV2aWNlX2NsYXNzID0gc3RhdGVPYmouYXR0cmlidXRlcy5kZXZpY2VfY2xhc3M7XG5cbiAgICAgIHN3aXRjaCAoZGV2aWNlX2NsYXNzKSB7XG4gICAgICAgIGNhc2UgXCJiYXR0ZXJ5XCI6XG4gICAgICAgICAgaWYgKGlzT24pIHtcbiAgICAgICAgICAgIHJldHVybiBsb2NhbGl6ZShgJHtMT0dCT09LX0xPQ0FMSVpFX1BBVEh9Lndhc19sb3dgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGlzT2ZmKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxpemUoYCR7TE9HQk9PS19MT0NBTElaRV9QQVRIfS53YXNfbm9ybWFsYCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgXCJjb25uZWN0aXZpdHlcIjpcbiAgICAgICAgICBpZiAoaXNPbikge1xuICAgICAgICAgICAgcmV0dXJuIGxvY2FsaXplKGAke0xPR0JPT0tfTE9DQUxJWkVfUEFUSH0ud2FzX2Nvbm5lY3RlZGApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaXNPZmYpIHtcbiAgICAgICAgICAgIHJldHVybiBsb2NhbGl6ZShgJHtMT0dCT09LX0xPQ0FMSVpFX1BBVEh9Lndhc19kaXNjb25uZWN0ZWRgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBcImRvb3JcIjpcbiAgICAgICAgY2FzZSBcImdhcmFnZV9kb29yXCI6XG4gICAgICAgIGNhc2UgXCJvcGVuaW5nXCI6XG4gICAgICAgIGNhc2UgXCJ3aW5kb3dcIjpcbiAgICAgICAgICBpZiAoaXNPbikge1xuICAgICAgICAgICAgcmV0dXJuIGxvY2FsaXplKGAke0xPR0JPT0tfTE9DQUxJWkVfUEFUSH0ud2FzX29wZW5lZGApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaXNPZmYpIHtcbiAgICAgICAgICAgIHJldHVybiBsb2NhbGl6ZShgJHtMT0dCT09LX0xPQ0FMSVpFX1BBVEh9Lndhc19jbG9zZWRgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBcImxvY2tcIjpcbiAgICAgICAgICBpZiAoaXNPbikge1xuICAgICAgICAgICAgcmV0dXJuIGxvY2FsaXplKGAke0xPR0JPT0tfTE9DQUxJWkVfUEFUSH0ud2FzX3VubG9ja2VkYCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChpc09mZikge1xuICAgICAgICAgICAgcmV0dXJuIGxvY2FsaXplKGAke0xPR0JPT0tfTE9DQUxJWkVfUEFUSH0ud2FzX2xvY2tlZGApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIFwicGx1Z1wiOlxuICAgICAgICAgIGlmIChpc09uKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxpemUoYCR7TE9HQk9PS19MT0NBTElaRV9QQVRIfS53YXNfcGx1Z2dlZF9pbmApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaXNPZmYpIHtcbiAgICAgICAgICAgIHJldHVybiBsb2NhbGl6ZShgJHtMT0dCT09LX0xPQ0FMSVpFX1BBVEh9Lndhc191bnBsdWdnZWRgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBcInByZXNlbmNlXCI6XG4gICAgICAgICAgaWYgKGlzT24pIHtcbiAgICAgICAgICAgIHJldHVybiBsb2NhbGl6ZShgJHtMT0dCT09LX0xPQ0FMSVpFX1BBVEh9Lndhc19hdF9ob21lYCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChpc09mZikge1xuICAgICAgICAgICAgcmV0dXJuIGxvY2FsaXplKGAke0xPR0JPT0tfTE9DQUxJWkVfUEFUSH0ud2FzX2F3YXlgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBcInNhZmV0eVwiOlxuICAgICAgICAgIGlmIChpc09uKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxpemUoYCR7TE9HQk9PS19MT0NBTElaRV9QQVRIfS53YXNfdW5zYWZlYCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChpc09mZikge1xuICAgICAgICAgICAgcmV0dXJuIGxvY2FsaXplKGAke0xPR0JPT0tfTE9DQUxJWkVfUEFUSH0ud2FzX3NhZmVgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBcImNvbGRcIjpcbiAgICAgICAgY2FzZSBcImdhc1wiOlxuICAgICAgICBjYXNlIFwiaGVhdFwiOlxuICAgICAgICBjYXNlIFwibW9pc3R1cmVcIjpcbiAgICAgICAgY2FzZSBcIm1vdGlvblwiOlxuICAgICAgICBjYXNlIFwib2NjdXBhbmN5XCI6XG4gICAgICAgIGNhc2UgXCJwb3dlclwiOlxuICAgICAgICBjYXNlIFwicHJvYmxlbVwiOlxuICAgICAgICBjYXNlIFwic21va2VcIjpcbiAgICAgICAgY2FzZSBcInNvdW5kXCI6XG4gICAgICAgIGNhc2UgXCJ2aWJyYXRpb25cIjpcbiAgICAgICAgICBpZiAoaXNPbikge1xuICAgICAgICAgICAgcmV0dXJuIGxvY2FsaXplKGAke0xPR0JPT0tfTE9DQUxJWkVfUEFUSH0uZGV0ZWN0ZWRfZGV2aWNlX2NsYXNzYCwge1xuICAgICAgICAgICAgICBkZXZpY2VfY2xhc3M6IGxvY2FsaXplKFxuICAgICAgICAgICAgICAgIGBjb21wb25lbnQuYmluYXJ5X3NlbnNvci5kZXZpY2VfY2xhc3MuJHtkZXZpY2VfY2xhc3N9YFxuICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChpc09mZikge1xuICAgICAgICAgICAgcmV0dXJuIGxvY2FsaXplKGAke0xPR0JPT0tfTE9DQUxJWkVfUEFUSH0uY2xlYXJlZF9kZXZpY2VfY2xhc3NgLCB7XG4gICAgICAgICAgICAgIGRldmljZV9jbGFzczogbG9jYWxpemUoXG4gICAgICAgICAgICAgICAgYGNvbXBvbmVudC5iaW5hcnlfc2Vuc29yLmRldmljZV9jbGFzcy4ke2RldmljZV9jbGFzc31gXG4gICAgICAgICAgICAgICksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBcInRhbXBlclwiOlxuICAgICAgICAgIGlmIChpc09uKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxpemUoYCR7TE9HQk9PS19MT0NBTElaRV9QQVRIfS5kZXRlY3RlZF90YW1wZXJpbmdgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGlzT2ZmKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxpemUoYCR7TE9HQk9PS19MT0NBTElaRV9QQVRIfS5jbGVhcmVkX3RhbXBlcmluZ2ApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgY2FzZSBcImNvdmVyXCI6XG4gICAgICBzd2l0Y2ggKHN0YXRlKSB7XG4gICAgICAgIGNhc2UgXCJvcGVuXCI6XG4gICAgICAgICAgcmV0dXJuIGxvY2FsaXplKGAke0xPR0JPT0tfTE9DQUxJWkVfUEFUSH0ud2FzX29wZW5lZGApO1xuICAgICAgICBjYXNlIFwib3BlbmluZ1wiOlxuICAgICAgICAgIHJldHVybiBsb2NhbGl6ZShgJHtMT0dCT09LX0xPQ0FMSVpFX1BBVEh9LmlzX29wZW5pbmdgKTtcbiAgICAgICAgY2FzZSBcImNsb3NpbmdcIjpcbiAgICAgICAgICByZXR1cm4gbG9jYWxpemUoYCR7TE9HQk9PS19MT0NBTElaRV9QQVRIfS5pc19jbG9zaW5nYCk7XG4gICAgICAgIGNhc2UgXCJjbG9zZWRcIjpcbiAgICAgICAgICByZXR1cm4gbG9jYWxpemUoYCR7TE9HQk9PS19MT0NBTElaRV9QQVRIfS53YXNfY2xvc2VkYCk7XG4gICAgICB9XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgXCJsb2NrXCI6XG4gICAgICBzd2l0Y2ggKHN0YXRlKSB7XG4gICAgICAgIGNhc2UgXCJ1bmxvY2tlZFwiOlxuICAgICAgICAgIHJldHVybiBsb2NhbGl6ZShgJHtMT0dCT09LX0xPQ0FMSVpFX1BBVEh9Lndhc191bmxvY2tlZGApO1xuICAgICAgICBjYXNlIFwibG9ja2luZ1wiOlxuICAgICAgICAgIHJldHVybiBsb2NhbGl6ZShgJHtMT0dCT09LX0xPQ0FMSVpFX1BBVEh9LmlzX2xvY2tpbmdgKTtcbiAgICAgICAgY2FzZSBcInVubG9ja2luZ1wiOlxuICAgICAgICAgIHJldHVybiBsb2NhbGl6ZShgJHtMT0dCT09LX0xPQ0FMSVpFX1BBVEh9LmlzX3VubG9ja2luZ2ApO1xuICAgICAgICBjYXNlIFwibG9ja2VkXCI6XG4gICAgICAgICAgcmV0dXJuIGxvY2FsaXplKGAke0xPR0JPT0tfTE9DQUxJWkVfUEFUSH0ud2FzX2xvY2tlZGApO1xuICAgICAgICBjYXNlIFwiamFtbWVkXCI6XG4gICAgICAgICAgcmV0dXJuIGxvY2FsaXplKGAke0xPR0JPT0tfTE9DQUxJWkVfUEFUSH0uaXNfamFtbWVkYCk7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgfVxuXG4gIGlmIChzdGF0ZSA9PT0gQklOQVJZX1NUQVRFX09OKSB7XG4gICAgcmV0dXJuIGxvY2FsaXplKGAke0xPR0JPT0tfTE9DQUxJWkVfUEFUSH0udHVybmVkX29uYCk7XG4gIH1cblxuICBpZiAoc3RhdGUgPT09IEJJTkFSWV9TVEFURV9PRkYpIHtcbiAgICByZXR1cm4gbG9jYWxpemUoYCR7TE9HQk9PS19MT0NBTElaRV9QQVRIfS50dXJuZWRfb2ZmYCk7XG4gIH1cblxuICBpZiAoc3RhdGUgPT09IFVOS05PV04pIHtcbiAgICByZXR1cm4gbG9jYWxpemUoYCR7TE9HQk9PS19MT0NBTElaRV9QQVRIfS5iZWNhbWVfdW5rbm93bmApO1xuICB9XG5cbiAgaWYgKHN0YXRlID09PSBVTkFWQUlMQUJMRSkge1xuICAgIHJldHVybiBsb2NhbGl6ZShgJHtMT0dCT09LX0xPQ0FMSVpFX1BBVEh9LmJlY2FtZV91bmF2YWlsYWJsZWApO1xuICB9XG5cbiAgcmV0dXJuIGhhc3MubG9jYWxpemUoXG4gICAgYCR7TE9HQk9PS19MT0NBTElaRV9QQVRIfS5jaGFuZ2VkX3RvX3N0YXRlYCxcbiAgICBcInN0YXRlXCIsXG4gICAgc3RhdGVPYmpcbiAgICAgID8gY29tcHV0ZVN0YXRlRGlzcGxheShcbiAgICAgICAgICBsb2NhbGl6ZSxcbiAgICAgICAgICBzdGF0ZU9iaixcbiAgICAgICAgICBoYXNzLmxvY2FsZSxcbiAgICAgICAgICBoYXNzLmVudGl0aWVzLFxuICAgICAgICAgIHN0YXRlXG4gICAgICAgIClcbiAgICAgIDogc3RhdGVcbiAgKTtcbn07XG5cbmV4cG9ydCBjb25zdCBmaWx0ZXJMb2dib29rQ29tcGF0aWJsZUVudGl0aWVzOiBIYUVudGl0eVBpY2tlckVudGl0eUZpbHRlckZ1bmMgPSAoXG4gIGVudGl0eVxuKSA9PlxuICBjb21wdXRlU3RhdGVEb21haW4oZW50aXR5KSAhPT0gXCJzZW5zb3JcIiB8fFxuICAoZW50aXR5LmF0dHJpYnV0ZXMudW5pdF9vZl9tZWFzdXJlbWVudCA9PT0gdW5kZWZpbmVkICYmXG4gICAgZW50aXR5LmF0dHJpYnV0ZXMuc3RhdGVfY2xhc3MgPT09IHVuZGVmaW5lZCk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/data/logbook.ts\n");

/***/ })

}]);