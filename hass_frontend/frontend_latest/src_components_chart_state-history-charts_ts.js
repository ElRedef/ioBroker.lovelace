"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkhome_assistant_frontend"] = self["webpackChunkhome_assistant_frontend"] || []).push([["src_components_chart_state-history-charts_ts"],{

/***/ "./src/common/decorators/restore-scroll.ts":
/*!*************************************************!*\
  !*** ./src/common/decorators/restore-scroll.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   restoreScroll: () => (/* binding */ restoreScroll)\n/* harmony export */ });\n/* harmony import */ var _util_throttle__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util/throttle */ \"./src/common/util/throttle.ts\");\n\nconst throttleReplaceState = (0,_util_throttle__WEBPACK_IMPORTED_MODULE_0__.throttle)(value => {\n  history.replaceState({\n    scrollPosition: value\n  }, \"\");\n}, 300);\nconst restoreScroll = selector => element => ({\n  kind: \"method\",\n  placement: \"prototype\",\n  key: element.key,\n  descriptor: {\n    set(value) {\n      throttleReplaceState(value);\n      this[`__${String(element.key)}`] = value;\n    },\n    get() {\n      var _history$state;\n      return this[`__${String(element.key)}`] || ((_history$state = history.state) === null || _history$state === void 0 ? void 0 : _history$state.scrollPosition);\n    },\n    enumerable: true,\n    configurable: true\n  },\n  finisher(cls) {\n    const connectedCallback = cls.prototype.connectedCallback;\n    cls.prototype.connectedCallback = function () {\n      connectedCallback.call(this);\n      const scrollPos = this[element.key];\n      if (scrollPos) {\n        this.updateComplete.then(() => {\n          const target = this.renderRoot.querySelector(selector);\n          if (!target) {\n            return;\n          }\n          setTimeout(() => {\n            target.scrollTop = scrollPos;\n          }, 0);\n        });\n      }\n    };\n  }\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tbW9uL2RlY29yYXRvcnMvcmVzdG9yZS1zY3JvbGwudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFFQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaG9tZS1hc3Npc3RhbnQtZnJvbnRlbmQvLi9zcmMvY29tbW9uL2RlY29yYXRvcnMvcmVzdG9yZS1zY3JvbGwudHM/YjY3YSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IExpdEVsZW1lbnQgfSBmcm9tIFwibGl0XCI7XG5pbXBvcnQgdHlwZSB7IENsYXNzRWxlbWVudCB9IGZyb20gXCIuLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgdGhyb3R0bGUgfSBmcm9tIFwiLi4vdXRpbC90aHJvdHRsZVwiO1xuXG5jb25zdCB0aHJvdHRsZVJlcGxhY2VTdGF0ZSA9IHRocm90dGxlKCh2YWx1ZSkgPT4ge1xuICBoaXN0b3J5LnJlcGxhY2VTdGF0ZSh7IHNjcm9sbFBvc2l0aW9uOiB2YWx1ZSB9LCBcIlwiKTtcbn0sIDMwMCk7XG5cbmV4cG9ydCBjb25zdCByZXN0b3JlU2Nyb2xsID1cbiAgKHNlbGVjdG9yOiBzdHJpbmcpOiBhbnkgPT5cbiAgKGVsZW1lbnQ6IENsYXNzRWxlbWVudCkgPT4gKHtcbiAgICBraW5kOiBcIm1ldGhvZFwiLFxuICAgIHBsYWNlbWVudDogXCJwcm90b3R5cGVcIixcbiAgICBrZXk6IGVsZW1lbnQua2V5LFxuICAgIGRlc2NyaXB0b3I6IHtcbiAgICAgIHNldCh0aGlzOiBMaXRFbGVtZW50LCB2YWx1ZTogbnVtYmVyKSB7XG4gICAgICAgIHRocm90dGxlUmVwbGFjZVN0YXRlKHZhbHVlKTtcbiAgICAgICAgdGhpc1tgX18ke1N0cmluZyhlbGVtZW50LmtleSl9YF0gPSB2YWx1ZTtcbiAgICAgIH0sXG4gICAgICBnZXQodGhpczogTGl0RWxlbWVudCkge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIHRoaXNbYF9fJHtTdHJpbmcoZWxlbWVudC5rZXkpfWBdIHx8IGhpc3Rvcnkuc3RhdGU/LnNjcm9sbFBvc2l0aW9uXG4gICAgICAgICk7XG4gICAgICB9LFxuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICB9LFxuICAgIGZpbmlzaGVyKGNsczogdHlwZW9mIExpdEVsZW1lbnQpIHtcbiAgICAgIGNvbnN0IGNvbm5lY3RlZENhbGxiYWNrID0gY2xzLnByb3RvdHlwZS5jb25uZWN0ZWRDYWxsYmFjaztcbiAgICAgIGNscy5wcm90b3R5cGUuY29ubmVjdGVkQ2FsbGJhY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbm5lY3RlZENhbGxiYWNrLmNhbGwodGhpcyk7XG4gICAgICAgIGNvbnN0IHNjcm9sbFBvcyA9IHRoaXNbZWxlbWVudC5rZXldO1xuICAgICAgICBpZiAoc2Nyb2xsUG9zKSB7XG4gICAgICAgICAgdGhpcy51cGRhdGVDb21wbGV0ZS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IHRoaXMucmVuZGVyUm9vdC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgICAgICAgICAgIGlmICghdGFyZ2V0KSB7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICB0YXJnZXQuc2Nyb2xsVG9wID0gc2Nyb2xsUG9zO1xuICAgICAgICAgICAgfSwgMCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSxcbiAgfSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/common/decorators/restore-scroll.ts\n");

/***/ }),

/***/ "./src/common/util/throttle.ts":
/*!*************************************!*\
  !*** ./src/common/util/throttle.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   throttle: () => (/* binding */ throttle)\n/* harmony export */ });\n// From: underscore.js https://github.com/jashkenas/underscore/blob/master/underscore.js\n\n// Returns a function, that, when invoked, will only be triggered at most once\n// during a given window of time. Normally, the throttled function will run\n// as much as it can, without ever going more than once per `wait` duration;\n// but if you'd like to disable the execution on the leading edge, pass\n// `false for leading`. To disable execution on the trailing edge, ditto.\nconst throttle = (func, wait, leading = true, trailing = true) => {\n  let timeout;\n  let previous = 0;\n  const throttledFunc = (...args) => {\n    const later = () => {\n      previous = leading === false ? 0 : Date.now();\n      timeout = undefined;\n      func(...args);\n    };\n    const now = Date.now();\n    if (!previous && leading === false) {\n      previous = now;\n    }\n    const remaining = wait - (now - previous);\n    if (remaining <= 0 || remaining > wait) {\n      if (timeout) {\n        clearTimeout(timeout);\n        timeout = undefined;\n      }\n      previous = now;\n      func(...args);\n    } else if (!timeout && trailing !== false) {\n      timeout = window.setTimeout(later, remaining);\n    }\n  };\n  throttledFunc.cancel = () => {\n    clearTimeout(timeout);\n    timeout = undefined;\n    previous = 0;\n  };\n  return throttledFunc;\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tbW9uL3V0aWwvdGhyb3R0bGUudHMuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaG9tZS1hc3Npc3RhbnQtZnJvbnRlbmQvLi9zcmMvY29tbW9uL3V0aWwvdGhyb3R0bGUudHM/ZjhiOCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBGcm9tOiB1bmRlcnNjb3JlLmpzIGh0dHBzOi8vZ2l0aHViLmNvbS9qYXNoa2VuYXMvdW5kZXJzY29yZS9ibG9iL21hc3Rlci91bmRlcnNjb3JlLmpzXG5cbi8vIFJldHVybnMgYSBmdW5jdGlvbiwgdGhhdCwgd2hlbiBpbnZva2VkLCB3aWxsIG9ubHkgYmUgdHJpZ2dlcmVkIGF0IG1vc3Qgb25jZVxuLy8gZHVyaW5nIGEgZ2l2ZW4gd2luZG93IG9mIHRpbWUuIE5vcm1hbGx5LCB0aGUgdGhyb3R0bGVkIGZ1bmN0aW9uIHdpbGwgcnVuXG4vLyBhcyBtdWNoIGFzIGl0IGNhbiwgd2l0aG91dCBldmVyIGdvaW5nIG1vcmUgdGhhbiBvbmNlIHBlciBgd2FpdGAgZHVyYXRpb247XG4vLyBidXQgaWYgeW91J2QgbGlrZSB0byBkaXNhYmxlIHRoZSBleGVjdXRpb24gb24gdGhlIGxlYWRpbmcgZWRnZSwgcGFzc1xuLy8gYGZhbHNlIGZvciBsZWFkaW5nYC4gVG8gZGlzYWJsZSBleGVjdXRpb24gb24gdGhlIHRyYWlsaW5nIGVkZ2UsIGRpdHRvLlxuZXhwb3J0IGNvbnN0IHRocm90dGxlID0gPFQgZXh0ZW5kcyBhbnlbXT4oXG4gIGZ1bmM6ICguLi5hcmdzOiBUKSA9PiB2b2lkLFxuICB3YWl0OiBudW1iZXIsXG4gIGxlYWRpbmcgPSB0cnVlLFxuICB0cmFpbGluZyA9IHRydWVcbikgPT4ge1xuICBsZXQgdGltZW91dDogbnVtYmVyIHwgdW5kZWZpbmVkO1xuICBsZXQgcHJldmlvdXMgPSAwO1xuICBjb25zdCB0aHJvdHRsZWRGdW5jID0gKC4uLmFyZ3M6IFQpOiB2b2lkID0+IHtcbiAgICBjb25zdCBsYXRlciA9ICgpID0+IHtcbiAgICAgIHByZXZpb3VzID0gbGVhZGluZyA9PT0gZmFsc2UgPyAwIDogRGF0ZS5ub3coKTtcbiAgICAgIHRpbWVvdXQgPSB1bmRlZmluZWQ7XG4gICAgICBmdW5jKC4uLmFyZ3MpO1xuICAgIH07XG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICBpZiAoIXByZXZpb3VzICYmIGxlYWRpbmcgPT09IGZhbHNlKSB7XG4gICAgICBwcmV2aW91cyA9IG5vdztcbiAgICB9XG4gICAgY29uc3QgcmVtYWluaW5nID0gd2FpdCAtIChub3cgLSBwcmV2aW91cyk7XG4gICAgaWYgKHJlbWFpbmluZyA8PSAwIHx8IHJlbWFpbmluZyA+IHdhaXQpIHtcbiAgICAgIGlmICh0aW1lb3V0KSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgICAgdGltZW91dCA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICAgIHByZXZpb3VzID0gbm93O1xuICAgICAgZnVuYyguLi5hcmdzKTtcbiAgICB9IGVsc2UgaWYgKCF0aW1lb3V0ICYmIHRyYWlsaW5nICE9PSBmYWxzZSkge1xuICAgICAgdGltZW91dCA9IHdpbmRvdy5zZXRUaW1lb3V0KGxhdGVyLCByZW1haW5pbmcpO1xuICAgIH1cbiAgfTtcbiAgdGhyb3R0bGVkRnVuYy5jYW5jZWwgPSAoKSA9PiB7XG4gICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgIHRpbWVvdXQgPSB1bmRlZmluZWQ7XG4gICAgcHJldmlvdXMgPSAwO1xuICB9O1xuICByZXR1cm4gdGhyb3R0bGVkRnVuYztcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/common/util/throttle.ts\n");

/***/ }),

/***/ "./src/components/chart/state-history-chart-line.ts":
/*!**********************************************************!*\
  !*** ./src/components/chart/state-history-chart-line.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_helpers_decorate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/decorate */ \"./node_modules/@babel/runtime/helpers/esm/decorate.js\");\n/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit */ \"./node_modules/lit/index.js\");\n/* harmony import */ var lit_decorators__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lit/decorators */ \"./node_modules/lit/decorators.js\");\n/* harmony import */ var _common_color_colors__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../common/color/colors */ \"./src/common/color/colors.ts\");\n/* harmony import */ var _common_dom_fire_event__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../common/dom/fire_event */ \"./src/common/dom/fire_event.ts\");\n/* harmony import */ var _common_util_compute_rtl__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../common/util/compute_rtl */ \"./src/common/util/compute_rtl.ts\");\n/* harmony import */ var _common_number_format_number__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../common/number/format_number */ \"./src/common/number/format_number.ts\");\n/* harmony import */ var _ha_chart_base__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./ha-chart-base */ \"./src/components/chart/ha-chart-base.ts\");\n\n\n\n\n\n\n\n\nconst safeParseFloat = value => {\n  const parsed = parseFloat(value);\n  return isFinite(parsed) ? parsed : null;\n};\nlet StateHistoryChartLine = (0,_babel_runtime_helpers_decorate__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(null, function (_initialize, _LitElement) {\n  class StateHistoryChartLine extends _LitElement {\n    constructor(...args) {\n      super(...args);\n      _initialize(this);\n    }\n  }\n  return {\n    F: StateHistoryChartLine,\n    d: [{\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.property)({\n        attribute: false\n      })],\n      key: \"hass\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.property)({\n        attribute: false\n      })],\n      key: \"data\",\n      value() {\n        return [];\n      }\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.property)()],\n      key: \"names\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.property)()],\n      key: \"unit\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.property)()],\n      key: \"identifier\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.property)({\n        type: Boolean\n      })],\n      key: \"showNames\",\n      value() {\n        return true;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.property)({\n        attribute: false\n      })],\n      key: \"endTime\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.property)({\n        type: Number\n      })],\n      key: \"paddingYAxis\",\n      value() {\n        return 0;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.property)({\n        type: Number\n      })],\n      key: \"chartIndex\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.state)()],\n      key: \"_chartData\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.state)()],\n      key: \"_chartOptions\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.state)()],\n      key: \"_yWidth\",\n      value() {\n        return 0;\n      }\n    }, {\n      kind: \"field\",\n      key: \"_chartTime\",\n      value() {\n        return new Date();\n      }\n    }, {\n      kind: \"method\",\n      key: \"render\",\n      value: function render() {\n        return lit__WEBPACK_IMPORTED_MODULE_1__.html`\n      <ha-chart-base\n        .hass=${this.hass}\n        .data=${this._chartData}\n        .options=${this._chartOptions}\n        .paddingYAxis=${this.paddingYAxis - this._yWidth}\n        chart-type=\"line\"\n      ></ha-chart-base>\n    `;\n      }\n    }, {\n      kind: \"method\",\n      key: \"willUpdate\",\n      value: function willUpdate(changedProps) {\n        if (!this.hasUpdated || changedProps.has(\"showNames\")) {\n          this._chartOptions = {\n            parsing: false,\n            animation: false,\n            interaction: {\n              mode: \"nearest\",\n              axis: \"xy\"\n            },\n            scales: {\n              x: {\n                type: \"time\",\n                adapters: {\n                  date: {\n                    locale: this.hass.locale\n                  }\n                },\n                suggestedMax: this.endTime,\n                ticks: {\n                  maxRotation: 0,\n                  sampleSize: 5,\n                  autoSkipPadding: 20,\n                  major: {\n                    enabled: true\n                  },\n                  font: context => context.tick && context.tick.major ? {\n                    weight: \"bold\"\n                  } : {}\n                },\n                time: {\n                  tooltipFormat: \"datetimeseconds\"\n                }\n              },\n              y: {\n                ticks: {\n                  maxTicksLimit: 7\n                },\n                title: {\n                  display: true,\n                  text: this.unit\n                },\n                afterUpdate: y => {\n                  if (this._yWidth !== Math.floor(y.width)) {\n                    this._yWidth = Math.floor(y.width);\n                    (0,_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_4__.fireEvent)(this, \"y-width-changed\", {\n                      value: this._yWidth,\n                      chartIndex: this.chartIndex\n                    });\n                  }\n                },\n                position: (0,_common_util_compute_rtl__WEBPACK_IMPORTED_MODULE_5__.computeRTL)(this.hass) ? \"right\" : \"left\"\n              }\n            },\n            plugins: {\n              tooltip: {\n                callbacks: {\n                  label: context => `${context.dataset.label}: ${(0,_common_number_format_number__WEBPACK_IMPORTED_MODULE_6__.formatNumber)(context.parsed.y, this.hass.locale)} ${this.unit}`\n                }\n              },\n              filler: {\n                propagate: true\n              },\n              legend: {\n                display: this.showNames,\n                labels: {\n                  usePointStyle: true\n                }\n              }\n            },\n            elements: {\n              line: {\n                tension: 0.1,\n                borderWidth: 1.5\n              },\n              point: {\n                hitRadius: 50\n              }\n            },\n            // @ts-expect-error\n            locale: (0,_common_number_format_number__WEBPACK_IMPORTED_MODULE_6__.numberFormatToLocale)(this.hass.locale)\n          };\n        }\n        if (changedProps.has(\"data\") || this._chartTime < new Date(this.endTime.getTime() - _ha_chart_base__WEBPACK_IMPORTED_MODULE_7__.MIN_TIME_BETWEEN_UPDATES)) {\n          // If the line is more than 5 minutes old, re-gen it\n          // so the X axis grows even if there is no new data\n          this._generateData();\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"_generateData\",\n      value: function _generateData() {\n        let colorIndex = 0;\n        const computedStyles = getComputedStyle(this);\n        const entityStates = this.data;\n        const datasets = [];\n        if (entityStates.length === 0) {\n          return;\n        }\n        this._chartTime = new Date();\n        const endTime = this.endTime;\n        const names = this.names || {};\n        entityStates.forEach(states => {\n          const domain = states.domain;\n          const name = names[states.entity_id] || states.name;\n          // array containing [value1, value2, etc]\n          let prevValues = null;\n          const data = [];\n          const pushData = (timestamp, datavalues) => {\n            if (!datavalues) return;\n            if (timestamp > endTime) {\n              // Drop data points that are after the requested endTime. This could happen if\n              // endTime is \"now\" and client time is not in sync with server time.\n              return;\n            }\n            data.forEach((d, i) => {\n              if (datavalues[i] === null && prevValues && prevValues[i] !== null) {\n                // null data values show up as gaps in the chart.\n                // If the current value for the dataset is null and the previous\n                // value of the data set is not null, then add an 'end' point\n                // to the chart for the previous value. Otherwise the gap will\n                // be too big. It will go from the start of the previous data\n                // value until the start of the next data value.\n                d.data.push({\n                  x: timestamp.getTime(),\n                  y: prevValues[i]\n                });\n              }\n              d.data.push({\n                x: timestamp.getTime(),\n                y: datavalues[i]\n              });\n            });\n            prevValues = datavalues;\n          };\n          const addDataSet = (nameY, fill = false, color) => {\n            if (!color) {\n              color = (0,_common_color_colors__WEBPACK_IMPORTED_MODULE_3__.getGraphColorByIndex)(colorIndex, computedStyles);\n              colorIndex++;\n            }\n            data.push({\n              label: nameY,\n              fill: fill ? \"origin\" : false,\n              borderColor: color,\n              backgroundColor: color + \"7F\",\n              stepped: \"before\",\n              pointRadius: 0,\n              data: []\n            });\n          };\n          if (domain === \"thermostat\" || domain === \"climate\" || domain === \"water_heater\") {\n            const hasHvacAction = states.states.some(entityState => {\n              var _entityState$attribut;\n              return (_entityState$attribut = entityState.attributes) === null || _entityState$attribut === void 0 ? void 0 : _entityState$attribut.hvac_action;\n            });\n            const isHeating = domain === \"climate\" && hasHvacAction ? entityState => {\n              var _entityState$attribut2;\n              return ((_entityState$attribut2 = entityState.attributes) === null || _entityState$attribut2 === void 0 ? void 0 : _entityState$attribut2.hvac_action) === \"heating\";\n            } : entityState => entityState.state === \"heat\";\n            const isCooling = domain === \"climate\" && hasHvacAction ? entityState => {\n              var _entityState$attribut3;\n              return ((_entityState$attribut3 = entityState.attributes) === null || _entityState$attribut3 === void 0 ? void 0 : _entityState$attribut3.hvac_action) === \"cooling\";\n            } : entityState => entityState.state === \"cool\";\n            const hasHeat = states.states.some(isHeating);\n            const hasCool = states.states.some(isCooling);\n            // We differentiate between thermostats that have a target temperature\n            // range versus ones that have just a target temperature\n\n            // Using step chart by step-before so manually interpolation not needed.\n            const hasTargetRange = states.states.some(entityState => entityState.attributes && entityState.attributes.target_temp_high !== entityState.attributes.target_temp_low);\n            addDataSet(`${this.hass.localize(\"ui.card.climate.current_temperature\", {\n              name: name\n            })}`);\n            if (hasHeat) {\n              addDataSet(`${this.hass.localize(\"ui.card.climate.heating\", {\n                name: name\n              })}`, true, computedStyles.getPropertyValue(\"--state-climate-heat-color\"));\n              // The \"heating\" series uses steppedArea to shade the area below the current\n              // temperature when the thermostat is calling for heat.\n            }\n\n            if (hasCool) {\n              addDataSet(`${this.hass.localize(\"ui.card.climate.cooling\", {\n                name: name\n              })}`, true, computedStyles.getPropertyValue(\"--state-climate-cool-color\"));\n              // The \"cooling\" series uses steppedArea to shade the area below the current\n              // temperature when the thermostat is calling for heat.\n            }\n\n            if (hasTargetRange) {\n              addDataSet(`${this.hass.localize(\"ui.card.climate.target_temperature_mode\", {\n                name: name,\n                mode: this.hass.localize(\"ui.card.climate.high\")\n              })}`);\n              addDataSet(`${this.hass.localize(\"ui.card.climate.target_temperature_mode\", {\n                name: name,\n                mode: this.hass.localize(\"ui.card.climate.low\")\n              })}`);\n            } else {\n              addDataSet(`${this.hass.localize(\"ui.card.climate.target_temperature_entity\", {\n                name: name\n              })}`);\n            }\n            states.states.forEach(entityState => {\n              if (!entityState.attributes) return;\n              const curTemp = safeParseFloat(entityState.attributes.current_temperature);\n              const series = [curTemp];\n              if (hasHeat) {\n                series.push(isHeating(entityState) ? curTemp : null);\n              }\n              if (hasCool) {\n                series.push(isCooling(entityState) ? curTemp : null);\n              }\n              if (hasTargetRange) {\n                const targetHigh = safeParseFloat(entityState.attributes.target_temp_high);\n                const targetLow = safeParseFloat(entityState.attributes.target_temp_low);\n                series.push(targetHigh, targetLow);\n                pushData(new Date(entityState.last_changed), series);\n              } else {\n                const target = safeParseFloat(entityState.attributes.temperature);\n                series.push(target);\n                pushData(new Date(entityState.last_changed), series);\n              }\n            });\n          } else if (domain === \"humidifier\") {\n            addDataSet(`${this.hass.localize(\"ui.card.humidifier.target_humidity_entity\", {\n              name: name\n            })}`);\n            addDataSet(`${this.hass.localize(\"ui.card.humidifier.on_entity\", {\n              name: name\n            })}`, true);\n            states.states.forEach(entityState => {\n              if (!entityState.attributes) return;\n              const target = safeParseFloat(entityState.attributes.humidity);\n              const series = [target];\n              series.push(entityState.state === \"on\" ? target : null);\n              pushData(new Date(entityState.last_changed), series);\n            });\n          } else {\n            addDataSet(name);\n            let lastValue;\n            let lastDate;\n            let lastNullDate = null;\n\n            // Process chart data.\n            // When state is `unknown`, calculate the value and break the line.\n            states.states.forEach(entityState => {\n              const value = safeParseFloat(entityState.state);\n              const date = new Date(entityState.last_changed);\n              if (value !== null && lastNullDate) {\n                var _lastDate;\n                const dateTime = date.getTime();\n                const lastNullDateTime = lastNullDate.getTime();\n                const lastDateTime = (_lastDate = lastDate) === null || _lastDate === void 0 ? void 0 : _lastDate.getTime();\n                const tmpValue = (value - lastValue) * ((lastNullDateTime - lastDateTime) / (dateTime - lastDateTime)) + lastValue;\n                pushData(lastNullDate, [tmpValue]);\n                pushData(new Date(lastNullDateTime + 1), [null]);\n                pushData(date, [value]);\n                lastDate = date;\n                lastValue = value;\n                lastNullDate = null;\n              } else if (value !== null && lastNullDate === null) {\n                pushData(date, [value]);\n                lastDate = date;\n                lastValue = value;\n              } else if (value === null && lastNullDate === null && lastValue !== undefined) {\n                lastNullDate = date;\n              }\n            });\n          }\n\n          // Add an entry for final values\n          pushData(endTime, prevValues);\n\n          // Concat two arrays\n          Array.prototype.push.apply(datasets, data);\n        });\n        this._chartData = {\n          datasets\n        };\n      }\n    }]\n  };\n}, lit__WEBPACK_IMPORTED_MODULE_1__.LitElement);\ncustomElements.define(\"state-history-chart-line\", StateHistoryChartLine);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9jaGFydC9zdGF0ZS1oaXN0b3J5LWNoYXJ0LWxpbmUudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFtWEE7QUFBQTtBQUFBO0FBblhBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFLQTtBQUNBO0FBQUE7QUFBQTtBQUdBO0FBRUE7QUFBQTtBQUNBO0FBRUE7QUFFQTtBQUFBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBTUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFJQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFJQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaG9tZS1hc3Npc3RhbnQtZnJvbnRlbmQvLi9zcmMvY29tcG9uZW50cy9jaGFydC9zdGF0ZS1oaXN0b3J5LWNoYXJ0LWxpbmUudHM/M2UwYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IENoYXJ0RGF0YSwgQ2hhcnREYXRhc2V0LCBDaGFydE9wdGlvbnMgfSBmcm9tIFwiY2hhcnQuanNcIjtcbmltcG9ydCB7IGh0bWwsIExpdEVsZW1lbnQsIFByb3BlcnR5VmFsdWVzIH0gZnJvbSBcImxpdFwiO1xuaW1wb3J0IHsgcHJvcGVydHksIHN0YXRlIH0gZnJvbSBcImxpdC9kZWNvcmF0b3JzXCI7XG5pbXBvcnQgeyBnZXRHcmFwaENvbG9yQnlJbmRleCB9IGZyb20gXCIuLi8uLi9jb21tb24vY29sb3IvY29sb3JzXCI7XG5pbXBvcnQgeyBmaXJlRXZlbnQgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2RvbS9maXJlX2V2ZW50XCI7XG5pbXBvcnQgeyBjb21wdXRlUlRMIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi91dGlsL2NvbXB1dGVfcnRsXCI7XG5pbXBvcnQge1xuICBmb3JtYXROdW1iZXIsXG4gIG51bWJlckZvcm1hdFRvTG9jYWxlLFxufSBmcm9tIFwiLi4vLi4vY29tbW9uL251bWJlci9mb3JtYXRfbnVtYmVyXCI7XG5pbXBvcnQgeyBMaW5lQ2hhcnRFbnRpdHksIExpbmVDaGFydFN0YXRlIH0gZnJvbSBcIi4uLy4uL2RhdGEvaGlzdG9yeVwiO1xuaW1wb3J0IHsgSG9tZUFzc2lzdGFudCB9IGZyb20gXCIuLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgTUlOX1RJTUVfQkVUV0VFTl9VUERBVEVTIH0gZnJvbSBcIi4vaGEtY2hhcnQtYmFzZVwiO1xuXG5jb25zdCBzYWZlUGFyc2VGbG9hdCA9ICh2YWx1ZSkgPT4ge1xuICBjb25zdCBwYXJzZWQgPSBwYXJzZUZsb2F0KHZhbHVlKTtcbiAgcmV0dXJuIGlzRmluaXRlKHBhcnNlZCkgPyBwYXJzZWQgOiBudWxsO1xufTtcblxuY2xhc3MgU3RhdGVIaXN0b3J5Q2hhcnRMaW5lIGV4dGVuZHMgTGl0RWxlbWVudCB7XG4gIEBwcm9wZXJ0eSh7IGF0dHJpYnV0ZTogZmFsc2UgfSkgcHVibGljIGhhc3MhOiBIb21lQXNzaXN0YW50O1xuXG4gIEBwcm9wZXJ0eSh7IGF0dHJpYnV0ZTogZmFsc2UgfSkgcHVibGljIGRhdGE6IExpbmVDaGFydEVudGl0eVtdID0gW107XG5cbiAgQHByb3BlcnR5KCkgcHVibGljIG5hbWVzPzogUmVjb3JkPHN0cmluZywgc3RyaW5nPjtcblxuICBAcHJvcGVydHkoKSBwdWJsaWMgdW5pdD86IHN0cmluZztcblxuICBAcHJvcGVydHkoKSBwdWJsaWMgaWRlbnRpZmllcj86IHN0cmluZztcblxuICBAcHJvcGVydHkoeyB0eXBlOiBCb29sZWFuIH0pIHB1YmxpYyBzaG93TmFtZXMgPSB0cnVlO1xuXG4gIEBwcm9wZXJ0eSh7IGF0dHJpYnV0ZTogZmFsc2UgfSkgcHVibGljIGVuZFRpbWUhOiBEYXRlO1xuXG4gIEBwcm9wZXJ0eSh7IHR5cGU6IE51bWJlciB9KSBwdWJsaWMgcGFkZGluZ1lBeGlzID0gMDtcblxuICBAcHJvcGVydHkoeyB0eXBlOiBOdW1iZXIgfSkgcHVibGljIGNoYXJ0SW5kZXg/O1xuXG4gIEBzdGF0ZSgpIHByaXZhdGUgX2NoYXJ0RGF0YT86IENoYXJ0RGF0YTxcImxpbmVcIj47XG5cbiAgQHN0YXRlKCkgcHJpdmF0ZSBfY2hhcnRPcHRpb25zPzogQ2hhcnRPcHRpb25zO1xuXG4gIEBzdGF0ZSgpIHByaXZhdGUgX3lXaWR0aCA9IDA7XG5cbiAgcHJpdmF0ZSBfY2hhcnRUaW1lOiBEYXRlID0gbmV3IERhdGUoKTtcblxuICBwcm90ZWN0ZWQgcmVuZGVyKCkge1xuICAgIHJldHVybiBodG1sYFxuICAgICAgPGhhLWNoYXJ0LWJhc2VcbiAgICAgICAgLmhhc3M9JHt0aGlzLmhhc3N9XG4gICAgICAgIC5kYXRhPSR7dGhpcy5fY2hhcnREYXRhfVxuICAgICAgICAub3B0aW9ucz0ke3RoaXMuX2NoYXJ0T3B0aW9uc31cbiAgICAgICAgLnBhZGRpbmdZQXhpcz0ke3RoaXMucGFkZGluZ1lBeGlzIC0gdGhpcy5feVdpZHRofVxuICAgICAgICBjaGFydC10eXBlPVwibGluZVwiXG4gICAgICA+PC9oYS1jaGFydC1iYXNlPlxuICAgIGA7XG4gIH1cblxuICBwdWJsaWMgd2lsbFVwZGF0ZShjaGFuZ2VkUHJvcHM6IFByb3BlcnR5VmFsdWVzKSB7XG4gICAgaWYgKCF0aGlzLmhhc1VwZGF0ZWQgfHwgY2hhbmdlZFByb3BzLmhhcyhcInNob3dOYW1lc1wiKSkge1xuICAgICAgdGhpcy5fY2hhcnRPcHRpb25zID0ge1xuICAgICAgICBwYXJzaW5nOiBmYWxzZSxcbiAgICAgICAgYW5pbWF0aW9uOiBmYWxzZSxcbiAgICAgICAgaW50ZXJhY3Rpb246IHtcbiAgICAgICAgICBtb2RlOiBcIm5lYXJlc3RcIixcbiAgICAgICAgICBheGlzOiBcInh5XCIsXG4gICAgICAgIH0sXG4gICAgICAgIHNjYWxlczoge1xuICAgICAgICAgIHg6IHtcbiAgICAgICAgICAgIHR5cGU6IFwidGltZVwiLFxuICAgICAgICAgICAgYWRhcHRlcnM6IHtcbiAgICAgICAgICAgICAgZGF0ZToge1xuICAgICAgICAgICAgICAgIGxvY2FsZTogdGhpcy5oYXNzLmxvY2FsZSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdWdnZXN0ZWRNYXg6IHRoaXMuZW5kVGltZSxcbiAgICAgICAgICAgIHRpY2tzOiB7XG4gICAgICAgICAgICAgIG1heFJvdGF0aW9uOiAwLFxuICAgICAgICAgICAgICBzYW1wbGVTaXplOiA1LFxuICAgICAgICAgICAgICBhdXRvU2tpcFBhZGRpbmc6IDIwLFxuICAgICAgICAgICAgICBtYWpvcjoge1xuICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGZvbnQ6IChjb250ZXh0KSA9PlxuICAgICAgICAgICAgICAgIGNvbnRleHQudGljayAmJiBjb250ZXh0LnRpY2subWFqb3JcbiAgICAgICAgICAgICAgICAgID8gKHsgd2VpZ2h0OiBcImJvbGRcIiB9IGFzIGFueSlcbiAgICAgICAgICAgICAgICAgIDoge30sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdGltZToge1xuICAgICAgICAgICAgICB0b29sdGlwRm9ybWF0OiBcImRhdGV0aW1lc2Vjb25kc1wiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHk6IHtcbiAgICAgICAgICAgIHRpY2tzOiB7XG4gICAgICAgICAgICAgIG1heFRpY2tzTGltaXQ6IDcsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdGl0bGU6IHtcbiAgICAgICAgICAgICAgZGlzcGxheTogdHJ1ZSxcbiAgICAgICAgICAgICAgdGV4dDogdGhpcy51bml0LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFmdGVyVXBkYXRlOiAoeSkgPT4ge1xuICAgICAgICAgICAgICBpZiAodGhpcy5feVdpZHRoICE9PSBNYXRoLmZsb29yKHkud2lkdGgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5feVdpZHRoID0gTWF0aC5mbG9vcih5LndpZHRoKTtcbiAgICAgICAgICAgICAgICBmaXJlRXZlbnQodGhpcywgXCJ5LXdpZHRoLWNoYW5nZWRcIiwge1xuICAgICAgICAgICAgICAgICAgdmFsdWU6IHRoaXMuX3lXaWR0aCxcbiAgICAgICAgICAgICAgICAgIGNoYXJ0SW5kZXg6IHRoaXMuY2hhcnRJbmRleCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHBvc2l0aW9uOiBjb21wdXRlUlRMKHRoaXMuaGFzcykgPyBcInJpZ2h0XCIgOiBcImxlZnRcIixcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBwbHVnaW5zOiB7XG4gICAgICAgICAgdG9vbHRpcDoge1xuICAgICAgICAgICAgY2FsbGJhY2tzOiB7XG4gICAgICAgICAgICAgIGxhYmVsOiAoY29udGV4dCkgPT5cbiAgICAgICAgICAgICAgICBgJHtjb250ZXh0LmRhdGFzZXQubGFiZWx9OiAke2Zvcm1hdE51bWJlcihcbiAgICAgICAgICAgICAgICAgIGNvbnRleHQucGFyc2VkLnksXG4gICAgICAgICAgICAgICAgICB0aGlzLmhhc3MubG9jYWxlXG4gICAgICAgICAgICAgICAgKX0gJHt0aGlzLnVuaXR9YCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICBmaWxsZXI6IHtcbiAgICAgICAgICAgIHByb3BhZ2F0ZTogdHJ1ZSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGxlZ2VuZDoge1xuICAgICAgICAgICAgZGlzcGxheTogdGhpcy5zaG93TmFtZXMsXG4gICAgICAgICAgICBsYWJlbHM6IHtcbiAgICAgICAgICAgICAgdXNlUG9pbnRTdHlsZTogdHJ1ZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgZWxlbWVudHM6IHtcbiAgICAgICAgICBsaW5lOiB7XG4gICAgICAgICAgICB0ZW5zaW9uOiAwLjEsXG4gICAgICAgICAgICBib3JkZXJXaWR0aDogMS41LFxuICAgICAgICAgIH0sXG4gICAgICAgICAgcG9pbnQ6IHtcbiAgICAgICAgICAgIGhpdFJhZGl1czogNTAsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvclxuICAgICAgICBsb2NhbGU6IG51bWJlckZvcm1hdFRvTG9jYWxlKHRoaXMuaGFzcy5sb2NhbGUpLFxuICAgICAgfTtcbiAgICB9XG4gICAgaWYgKFxuICAgICAgY2hhbmdlZFByb3BzLmhhcyhcImRhdGFcIikgfHxcbiAgICAgIHRoaXMuX2NoYXJ0VGltZSA8XG4gICAgICAgIG5ldyBEYXRlKHRoaXMuZW5kVGltZS5nZXRUaW1lKCkgLSBNSU5fVElNRV9CRVRXRUVOX1VQREFURVMpXG4gICAgKSB7XG4gICAgICAvLyBJZiB0aGUgbGluZSBpcyBtb3JlIHRoYW4gNSBtaW51dGVzIG9sZCwgcmUtZ2VuIGl0XG4gICAgICAvLyBzbyB0aGUgWCBheGlzIGdyb3dzIGV2ZW4gaWYgdGhlcmUgaXMgbm8gbmV3IGRhdGFcbiAgICAgIHRoaXMuX2dlbmVyYXRlRGF0YSgpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX2dlbmVyYXRlRGF0YSgpIHtcbiAgICBsZXQgY29sb3JJbmRleCA9IDA7XG4gICAgY29uc3QgY29tcHV0ZWRTdHlsZXMgPSBnZXRDb21wdXRlZFN0eWxlKHRoaXMpO1xuICAgIGNvbnN0IGVudGl0eVN0YXRlcyA9IHRoaXMuZGF0YTtcbiAgICBjb25zdCBkYXRhc2V0czogQ2hhcnREYXRhc2V0PFwibGluZVwiPltdID0gW107XG4gICAgaWYgKGVudGl0eVN0YXRlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9jaGFydFRpbWUgPSBuZXcgRGF0ZSgpO1xuICAgIGNvbnN0IGVuZFRpbWUgPSB0aGlzLmVuZFRpbWU7XG4gICAgY29uc3QgbmFtZXMgPSB0aGlzLm5hbWVzIHx8IHt9O1xuICAgIGVudGl0eVN0YXRlcy5mb3JFYWNoKChzdGF0ZXMpID0+IHtcbiAgICAgIGNvbnN0IGRvbWFpbiA9IHN0YXRlcy5kb21haW47XG4gICAgICBjb25zdCBuYW1lID0gbmFtZXNbc3RhdGVzLmVudGl0eV9pZF0gfHwgc3RhdGVzLm5hbWU7XG4gICAgICAvLyBhcnJheSBjb250YWluaW5nIFt2YWx1ZTEsIHZhbHVlMiwgZXRjXVxuICAgICAgbGV0IHByZXZWYWx1ZXM6IGFueVtdIHwgbnVsbCA9IG51bGw7XG5cbiAgICAgIGNvbnN0IGRhdGE6IENoYXJ0RGF0YXNldDxcImxpbmVcIj5bXSA9IFtdO1xuXG4gICAgICBjb25zdCBwdXNoRGF0YSA9ICh0aW1lc3RhbXA6IERhdGUsIGRhdGF2YWx1ZXM6IGFueVtdIHwgbnVsbCkgPT4ge1xuICAgICAgICBpZiAoIWRhdGF2YWx1ZXMpIHJldHVybjtcbiAgICAgICAgaWYgKHRpbWVzdGFtcCA+IGVuZFRpbWUpIHtcbiAgICAgICAgICAvLyBEcm9wIGRhdGEgcG9pbnRzIHRoYXQgYXJlIGFmdGVyIHRoZSByZXF1ZXN0ZWQgZW5kVGltZS4gVGhpcyBjb3VsZCBoYXBwZW4gaWZcbiAgICAgICAgICAvLyBlbmRUaW1lIGlzIFwibm93XCIgYW5kIGNsaWVudCB0aW1lIGlzIG5vdCBpbiBzeW5jIHdpdGggc2VydmVyIHRpbWUuXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGRhdGEuZm9yRWFjaCgoZCwgaSkgPT4ge1xuICAgICAgICAgIGlmIChkYXRhdmFsdWVzW2ldID09PSBudWxsICYmIHByZXZWYWx1ZXMgJiYgcHJldlZhbHVlc1tpXSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgLy8gbnVsbCBkYXRhIHZhbHVlcyBzaG93IHVwIGFzIGdhcHMgaW4gdGhlIGNoYXJ0LlxuICAgICAgICAgICAgLy8gSWYgdGhlIGN1cnJlbnQgdmFsdWUgZm9yIHRoZSBkYXRhc2V0IGlzIG51bGwgYW5kIHRoZSBwcmV2aW91c1xuICAgICAgICAgICAgLy8gdmFsdWUgb2YgdGhlIGRhdGEgc2V0IGlzIG5vdCBudWxsLCB0aGVuIGFkZCBhbiAnZW5kJyBwb2ludFxuICAgICAgICAgICAgLy8gdG8gdGhlIGNoYXJ0IGZvciB0aGUgcHJldmlvdXMgdmFsdWUuIE90aGVyd2lzZSB0aGUgZ2FwIHdpbGxcbiAgICAgICAgICAgIC8vIGJlIHRvbyBiaWcuIEl0IHdpbGwgZ28gZnJvbSB0aGUgc3RhcnQgb2YgdGhlIHByZXZpb3VzIGRhdGFcbiAgICAgICAgICAgIC8vIHZhbHVlIHVudGlsIHRoZSBzdGFydCBvZiB0aGUgbmV4dCBkYXRhIHZhbHVlLlxuICAgICAgICAgICAgZC5kYXRhLnB1c2goeyB4OiB0aW1lc3RhbXAuZ2V0VGltZSgpLCB5OiBwcmV2VmFsdWVzW2ldIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBkLmRhdGEucHVzaCh7IHg6IHRpbWVzdGFtcC5nZXRUaW1lKCksIHk6IGRhdGF2YWx1ZXNbaV0gfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBwcmV2VmFsdWVzID0gZGF0YXZhbHVlcztcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGFkZERhdGFTZXQgPSAobmFtZVk6IHN0cmluZywgZmlsbCA9IGZhbHNlLCBjb2xvcj86IHN0cmluZykgPT4ge1xuICAgICAgICBpZiAoIWNvbG9yKSB7XG4gICAgICAgICAgY29sb3IgPSBnZXRHcmFwaENvbG9yQnlJbmRleChjb2xvckluZGV4LCBjb21wdXRlZFN0eWxlcyk7XG4gICAgICAgICAgY29sb3JJbmRleCsrO1xuICAgICAgICB9XG4gICAgICAgIGRhdGEucHVzaCh7XG4gICAgICAgICAgbGFiZWw6IG5hbWVZLFxuICAgICAgICAgIGZpbGw6IGZpbGwgPyBcIm9yaWdpblwiIDogZmFsc2UsXG4gICAgICAgICAgYm9yZGVyQ29sb3I6IGNvbG9yLFxuICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogY29sb3IgKyBcIjdGXCIsXG4gICAgICAgICAgc3RlcHBlZDogXCJiZWZvcmVcIixcbiAgICAgICAgICBwb2ludFJhZGl1czogMCxcbiAgICAgICAgICBkYXRhOiBbXSxcbiAgICAgICAgfSk7XG4gICAgICB9O1xuXG4gICAgICBpZiAoXG4gICAgICAgIGRvbWFpbiA9PT0gXCJ0aGVybW9zdGF0XCIgfHxcbiAgICAgICAgZG9tYWluID09PSBcImNsaW1hdGVcIiB8fFxuICAgICAgICBkb21haW4gPT09IFwid2F0ZXJfaGVhdGVyXCJcbiAgICAgICkge1xuICAgICAgICBjb25zdCBoYXNIdmFjQWN0aW9uID0gc3RhdGVzLnN0YXRlcy5zb21lKFxuICAgICAgICAgIChlbnRpdHlTdGF0ZSkgPT4gZW50aXR5U3RhdGUuYXR0cmlidXRlcz8uaHZhY19hY3Rpb25cbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBpc0hlYXRpbmcgPVxuICAgICAgICAgIGRvbWFpbiA9PT0gXCJjbGltYXRlXCIgJiYgaGFzSHZhY0FjdGlvblxuICAgICAgICAgICAgPyAoZW50aXR5U3RhdGU6IExpbmVDaGFydFN0YXRlKSA9PlxuICAgICAgICAgICAgICAgIGVudGl0eVN0YXRlLmF0dHJpYnV0ZXM/Lmh2YWNfYWN0aW9uID09PSBcImhlYXRpbmdcIlxuICAgICAgICAgICAgOiAoZW50aXR5U3RhdGU6IExpbmVDaGFydFN0YXRlKSA9PiBlbnRpdHlTdGF0ZS5zdGF0ZSA9PT0gXCJoZWF0XCI7XG4gICAgICAgIGNvbnN0IGlzQ29vbGluZyA9XG4gICAgICAgICAgZG9tYWluID09PSBcImNsaW1hdGVcIiAmJiBoYXNIdmFjQWN0aW9uXG4gICAgICAgICAgICA/IChlbnRpdHlTdGF0ZTogTGluZUNoYXJ0U3RhdGUpID0+XG4gICAgICAgICAgICAgICAgZW50aXR5U3RhdGUuYXR0cmlidXRlcz8uaHZhY19hY3Rpb24gPT09IFwiY29vbGluZ1wiXG4gICAgICAgICAgICA6IChlbnRpdHlTdGF0ZTogTGluZUNoYXJ0U3RhdGUpID0+IGVudGl0eVN0YXRlLnN0YXRlID09PSBcImNvb2xcIjtcblxuICAgICAgICBjb25zdCBoYXNIZWF0ID0gc3RhdGVzLnN0YXRlcy5zb21lKGlzSGVhdGluZyk7XG4gICAgICAgIGNvbnN0IGhhc0Nvb2wgPSBzdGF0ZXMuc3RhdGVzLnNvbWUoaXNDb29saW5nKTtcbiAgICAgICAgLy8gV2UgZGlmZmVyZW50aWF0ZSBiZXR3ZWVuIHRoZXJtb3N0YXRzIHRoYXQgaGF2ZSBhIHRhcmdldCB0ZW1wZXJhdHVyZVxuICAgICAgICAvLyByYW5nZSB2ZXJzdXMgb25lcyB0aGF0IGhhdmUganVzdCBhIHRhcmdldCB0ZW1wZXJhdHVyZVxuXG4gICAgICAgIC8vIFVzaW5nIHN0ZXAgY2hhcnQgYnkgc3RlcC1iZWZvcmUgc28gbWFudWFsbHkgaW50ZXJwb2xhdGlvbiBub3QgbmVlZGVkLlxuICAgICAgICBjb25zdCBoYXNUYXJnZXRSYW5nZSA9IHN0YXRlcy5zdGF0ZXMuc29tZShcbiAgICAgICAgICAoZW50aXR5U3RhdGUpID0+XG4gICAgICAgICAgICBlbnRpdHlTdGF0ZS5hdHRyaWJ1dGVzICYmXG4gICAgICAgICAgICBlbnRpdHlTdGF0ZS5hdHRyaWJ1dGVzLnRhcmdldF90ZW1wX2hpZ2ggIT09XG4gICAgICAgICAgICAgIGVudGl0eVN0YXRlLmF0dHJpYnV0ZXMudGFyZ2V0X3RlbXBfbG93XG4gICAgICAgICk7XG4gICAgICAgIGFkZERhdGFTZXQoXG4gICAgICAgICAgYCR7dGhpcy5oYXNzLmxvY2FsaXplKFwidWkuY2FyZC5jbGltYXRlLmN1cnJlbnRfdGVtcGVyYXR1cmVcIiwge1xuICAgICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICB9KX1gXG4gICAgICAgICk7XG4gICAgICAgIGlmIChoYXNIZWF0KSB7XG4gICAgICAgICAgYWRkRGF0YVNldChcbiAgICAgICAgICAgIGAke3RoaXMuaGFzcy5sb2NhbGl6ZShcInVpLmNhcmQuY2xpbWF0ZS5oZWF0aW5nXCIsIHsgbmFtZTogbmFtZSB9KX1gLFxuICAgICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAgIGNvbXB1dGVkU3R5bGVzLmdldFByb3BlcnR5VmFsdWUoXCItLXN0YXRlLWNsaW1hdGUtaGVhdC1jb2xvclwiKVxuICAgICAgICAgICk7XG4gICAgICAgICAgLy8gVGhlIFwiaGVhdGluZ1wiIHNlcmllcyB1c2VzIHN0ZXBwZWRBcmVhIHRvIHNoYWRlIHRoZSBhcmVhIGJlbG93IHRoZSBjdXJyZW50XG4gICAgICAgICAgLy8gdGVtcGVyYXR1cmUgd2hlbiB0aGUgdGhlcm1vc3RhdCBpcyBjYWxsaW5nIGZvciBoZWF0LlxuICAgICAgICB9XG4gICAgICAgIGlmIChoYXNDb29sKSB7XG4gICAgICAgICAgYWRkRGF0YVNldChcbiAgICAgICAgICAgIGAke3RoaXMuaGFzcy5sb2NhbGl6ZShcInVpLmNhcmQuY2xpbWF0ZS5jb29saW5nXCIsIHsgbmFtZTogbmFtZSB9KX1gLFxuICAgICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAgIGNvbXB1dGVkU3R5bGVzLmdldFByb3BlcnR5VmFsdWUoXCItLXN0YXRlLWNsaW1hdGUtY29vbC1jb2xvclwiKVxuICAgICAgICAgICk7XG4gICAgICAgICAgLy8gVGhlIFwiY29vbGluZ1wiIHNlcmllcyB1c2VzIHN0ZXBwZWRBcmVhIHRvIHNoYWRlIHRoZSBhcmVhIGJlbG93IHRoZSBjdXJyZW50XG4gICAgICAgICAgLy8gdGVtcGVyYXR1cmUgd2hlbiB0aGUgdGhlcm1vc3RhdCBpcyBjYWxsaW5nIGZvciBoZWF0LlxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGhhc1RhcmdldFJhbmdlKSB7XG4gICAgICAgICAgYWRkRGF0YVNldChcbiAgICAgICAgICAgIGAke3RoaXMuaGFzcy5sb2NhbGl6ZShcInVpLmNhcmQuY2xpbWF0ZS50YXJnZXRfdGVtcGVyYXR1cmVfbW9kZVwiLCB7XG4gICAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICAgIG1vZGU6IHRoaXMuaGFzcy5sb2NhbGl6ZShcInVpLmNhcmQuY2xpbWF0ZS5oaWdoXCIpLFxuICAgICAgICAgICAgfSl9YFxuICAgICAgICAgICk7XG4gICAgICAgICAgYWRkRGF0YVNldChcbiAgICAgICAgICAgIGAke3RoaXMuaGFzcy5sb2NhbGl6ZShcInVpLmNhcmQuY2xpbWF0ZS50YXJnZXRfdGVtcGVyYXR1cmVfbW9kZVwiLCB7XG4gICAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICAgIG1vZGU6IHRoaXMuaGFzcy5sb2NhbGl6ZShcInVpLmNhcmQuY2xpbWF0ZS5sb3dcIiksXG4gICAgICAgICAgICB9KX1gXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhZGREYXRhU2V0KFxuICAgICAgICAgICAgYCR7dGhpcy5oYXNzLmxvY2FsaXplKFwidWkuY2FyZC5jbGltYXRlLnRhcmdldF90ZW1wZXJhdHVyZV9lbnRpdHlcIiwge1xuICAgICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgfSl9YFxuICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBzdGF0ZXMuc3RhdGVzLmZvckVhY2goKGVudGl0eVN0YXRlKSA9PiB7XG4gICAgICAgICAgaWYgKCFlbnRpdHlTdGF0ZS5hdHRyaWJ1dGVzKSByZXR1cm47XG4gICAgICAgICAgY29uc3QgY3VyVGVtcCA9IHNhZmVQYXJzZUZsb2F0KFxuICAgICAgICAgICAgZW50aXR5U3RhdGUuYXR0cmlidXRlcy5jdXJyZW50X3RlbXBlcmF0dXJlXG4gICAgICAgICAgKTtcbiAgICAgICAgICBjb25zdCBzZXJpZXMgPSBbY3VyVGVtcF07XG4gICAgICAgICAgaWYgKGhhc0hlYXQpIHtcbiAgICAgICAgICAgIHNlcmllcy5wdXNoKGlzSGVhdGluZyhlbnRpdHlTdGF0ZSkgPyBjdXJUZW1wIDogbnVsbCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChoYXNDb29sKSB7XG4gICAgICAgICAgICBzZXJpZXMucHVzaChpc0Nvb2xpbmcoZW50aXR5U3RhdGUpID8gY3VyVGVtcCA6IG51bGwpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaGFzVGFyZ2V0UmFuZ2UpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldEhpZ2ggPSBzYWZlUGFyc2VGbG9hdChcbiAgICAgICAgICAgICAgZW50aXR5U3RhdGUuYXR0cmlidXRlcy50YXJnZXRfdGVtcF9oaWdoXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0TG93ID0gc2FmZVBhcnNlRmxvYXQoXG4gICAgICAgICAgICAgIGVudGl0eVN0YXRlLmF0dHJpYnV0ZXMudGFyZ2V0X3RlbXBfbG93XG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgc2VyaWVzLnB1c2godGFyZ2V0SGlnaCwgdGFyZ2V0TG93KTtcbiAgICAgICAgICAgIHB1c2hEYXRhKG5ldyBEYXRlKGVudGl0eVN0YXRlLmxhc3RfY2hhbmdlZCksIHNlcmllcyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IHNhZmVQYXJzZUZsb2F0KGVudGl0eVN0YXRlLmF0dHJpYnV0ZXMudGVtcGVyYXR1cmUpO1xuICAgICAgICAgICAgc2VyaWVzLnB1c2godGFyZ2V0KTtcbiAgICAgICAgICAgIHB1c2hEYXRhKG5ldyBEYXRlKGVudGl0eVN0YXRlLmxhc3RfY2hhbmdlZCksIHNlcmllcyk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAoZG9tYWluID09PSBcImh1bWlkaWZpZXJcIikge1xuICAgICAgICBhZGREYXRhU2V0KFxuICAgICAgICAgIGAke3RoaXMuaGFzcy5sb2NhbGl6ZShcInVpLmNhcmQuaHVtaWRpZmllci50YXJnZXRfaHVtaWRpdHlfZW50aXR5XCIsIHtcbiAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgfSl9YFxuICAgICAgICApO1xuICAgICAgICBhZGREYXRhU2V0KFxuICAgICAgICAgIGAke3RoaXMuaGFzcy5sb2NhbGl6ZShcInVpLmNhcmQuaHVtaWRpZmllci5vbl9lbnRpdHlcIiwge1xuICAgICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICB9KX1gLFxuICAgICAgICAgIHRydWVcbiAgICAgICAgKTtcblxuICAgICAgICBzdGF0ZXMuc3RhdGVzLmZvckVhY2goKGVudGl0eVN0YXRlKSA9PiB7XG4gICAgICAgICAgaWYgKCFlbnRpdHlTdGF0ZS5hdHRyaWJ1dGVzKSByZXR1cm47XG4gICAgICAgICAgY29uc3QgdGFyZ2V0ID0gc2FmZVBhcnNlRmxvYXQoZW50aXR5U3RhdGUuYXR0cmlidXRlcy5odW1pZGl0eSk7XG4gICAgICAgICAgY29uc3Qgc2VyaWVzID0gW3RhcmdldF07XG4gICAgICAgICAgc2VyaWVzLnB1c2goZW50aXR5U3RhdGUuc3RhdGUgPT09IFwib25cIiA/IHRhcmdldCA6IG51bGwpO1xuICAgICAgICAgIHB1c2hEYXRhKG5ldyBEYXRlKGVudGl0eVN0YXRlLmxhc3RfY2hhbmdlZCksIHNlcmllcyk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWRkRGF0YVNldChuYW1lKTtcblxuICAgICAgICBsZXQgbGFzdFZhbHVlOiBudW1iZXI7XG4gICAgICAgIGxldCBsYXN0RGF0ZTogRGF0ZTtcbiAgICAgICAgbGV0IGxhc3ROdWxsRGF0ZTogRGF0ZSB8IG51bGwgPSBudWxsO1xuXG4gICAgICAgIC8vIFByb2Nlc3MgY2hhcnQgZGF0YS5cbiAgICAgICAgLy8gV2hlbiBzdGF0ZSBpcyBgdW5rbm93bmAsIGNhbGN1bGF0ZSB0aGUgdmFsdWUgYW5kIGJyZWFrIHRoZSBsaW5lLlxuICAgICAgICBzdGF0ZXMuc3RhdGVzLmZvckVhY2goKGVudGl0eVN0YXRlKSA9PiB7XG4gICAgICAgICAgY29uc3QgdmFsdWUgPSBzYWZlUGFyc2VGbG9hdChlbnRpdHlTdGF0ZS5zdGF0ZSk7XG4gICAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGVudGl0eVN0YXRlLmxhc3RfY2hhbmdlZCk7XG4gICAgICAgICAgaWYgKHZhbHVlICE9PSBudWxsICYmIGxhc3ROdWxsRGF0ZSkge1xuICAgICAgICAgICAgY29uc3QgZGF0ZVRpbWUgPSBkYXRlLmdldFRpbWUoKTtcbiAgICAgICAgICAgIGNvbnN0IGxhc3ROdWxsRGF0ZVRpbWUgPSBsYXN0TnVsbERhdGUuZ2V0VGltZSgpO1xuICAgICAgICAgICAgY29uc3QgbGFzdERhdGVUaW1lID0gbGFzdERhdGU/LmdldFRpbWUoKTtcbiAgICAgICAgICAgIGNvbnN0IHRtcFZhbHVlID1cbiAgICAgICAgICAgICAgKHZhbHVlIC0gbGFzdFZhbHVlKSAqXG4gICAgICAgICAgICAgICAgKChsYXN0TnVsbERhdGVUaW1lIC0gbGFzdERhdGVUaW1lKSAvXG4gICAgICAgICAgICAgICAgICAoZGF0ZVRpbWUgLSBsYXN0RGF0ZVRpbWUpKSArXG4gICAgICAgICAgICAgIGxhc3RWYWx1ZTtcbiAgICAgICAgICAgIHB1c2hEYXRhKGxhc3ROdWxsRGF0ZSwgW3RtcFZhbHVlXSk7XG4gICAgICAgICAgICBwdXNoRGF0YShuZXcgRGF0ZShsYXN0TnVsbERhdGVUaW1lICsgMSksIFtudWxsXSk7XG4gICAgICAgICAgICBwdXNoRGF0YShkYXRlLCBbdmFsdWVdKTtcbiAgICAgICAgICAgIGxhc3REYXRlID0gZGF0ZTtcbiAgICAgICAgICAgIGxhc3RWYWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgbGFzdE51bGxEYXRlID0gbnVsbDtcbiAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlICE9PSBudWxsICYmIGxhc3ROdWxsRGF0ZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcHVzaERhdGEoZGF0ZSwgW3ZhbHVlXSk7XG4gICAgICAgICAgICBsYXN0RGF0ZSA9IGRhdGU7XG4gICAgICAgICAgICBsYXN0VmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgdmFsdWUgPT09IG51bGwgJiZcbiAgICAgICAgICAgIGxhc3ROdWxsRGF0ZSA9PT0gbnVsbCAmJlxuICAgICAgICAgICAgbGFzdFZhbHVlICE9PSB1bmRlZmluZWRcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGxhc3ROdWxsRGF0ZSA9IGRhdGU7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLy8gQWRkIGFuIGVudHJ5IGZvciBmaW5hbCB2YWx1ZXNcbiAgICAgIHB1c2hEYXRhKGVuZFRpbWUsIHByZXZWYWx1ZXMpO1xuXG4gICAgICAvLyBDb25jYXQgdHdvIGFycmF5c1xuICAgICAgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkoZGF0YXNldHMsIGRhdGEpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fY2hhcnREYXRhID0ge1xuICAgICAgZGF0YXNldHMsXG4gICAgfTtcbiAgfVxufVxuY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwic3RhdGUtaGlzdG9yeS1jaGFydC1saW5lXCIsIFN0YXRlSGlzdG9yeUNoYXJ0TGluZSk7XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIEhUTUxFbGVtZW50VGFnTmFtZU1hcCB7XG4gICAgXCJzdGF0ZS1oaXN0b3J5LWNoYXJ0LWxpbmVcIjogU3RhdGVIaXN0b3J5Q2hhcnRMaW5lO1xuICB9XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/components/chart/state-history-chart-line.ts\n");

/***/ }),

/***/ "./src/components/chart/state-history-chart-timeline.ts":
/*!**************************************************************!*\
  !*** ./src/components/chart/state-history-chart-timeline.ts ***!
  \**************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   StateHistoryChartTimeline: () => (/* binding */ StateHistoryChartTimeline)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_decorate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/decorate */ \"./node_modules/@babel/runtime/helpers/esm/decorate.js\");\n/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit */ \"./node_modules/lit/index.js\");\n/* harmony import */ var lit_decorators__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lit/decorators */ \"./node_modules/lit/decorators.js\");\n/* harmony import */ var _common_datetime_format_date_time__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../common/datetime/format_date_time */ \"./src/common/datetime/format_date_time.ts\");\n/* harmony import */ var _common_datetime_milliseconds_to_duration__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../common/datetime/milliseconds_to_duration */ \"./src/common/datetime/milliseconds_to_duration.ts\");\n/* harmony import */ var _common_dom_fire_event__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../common/dom/fire_event */ \"./src/common/dom/fire_event.ts\");\n/* harmony import */ var _common_number_format_number__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../common/number/format_number */ \"./src/common/number/format_number.ts\");\n/* harmony import */ var _common_util_compute_rtl__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../common/util/compute_rtl */ \"./src/common/util/compute_rtl.ts\");\n/* harmony import */ var _ha_chart_base__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./ha-chart-base */ \"./src/components/chart/ha-chart-base.ts\");\n/* harmony import */ var _timeline_chart_timeline_color__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./timeline-chart/timeline-color */ \"./src/components/chart/timeline-chart/timeline-color.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_common_datetime_format_date_time__WEBPACK_IMPORTED_MODULE_3__]);\n_common_datetime_format_date_time__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n\n\n\n\n\n\nlet StateHistoryChartTimeline = (0,_babel_runtime_helpers_decorate__WEBPACK_IMPORTED_MODULE_0__[\"default\"])([(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.customElement)(\"state-history-chart-timeline\")], function (_initialize, _LitElement) {\n  class StateHistoryChartTimeline extends _LitElement {\n    constructor(...args) {\n      super(...args);\n      _initialize(this);\n    }\n  }\n  return {\n    F: StateHistoryChartTimeline,\n    d: [{\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.property)({\n        attribute: false\n      })],\n      key: \"hass\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.property)({\n        attribute: false\n      })],\n      key: \"data\",\n      value() {\n        return [];\n      }\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.property)()],\n      key: \"narrow\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.property)()],\n      key: \"names\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.property)()],\n      key: \"unit\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.property)()],\n      key: \"identifier\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.property)({\n        type: Boolean\n      })],\n      key: \"showNames\",\n      value() {\n        return true;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.property)({\n        type: Boolean\n      })],\n      key: \"chunked\",\n      value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.property)({\n        attribute: false\n      })],\n      key: \"startTime\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.property)({\n        attribute: false\n      })],\n      key: \"endTime\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.property)({\n        type: Number\n      })],\n      key: \"paddingYAxis\",\n      value() {\n        return 0;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.property)({\n        type: Number\n      })],\n      key: \"chartIndex\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.state)()],\n      key: \"_chartData\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.state)()],\n      key: \"_chartOptions\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.state)()],\n      key: \"_yWidth\",\n      value() {\n        return 0;\n      }\n    }, {\n      kind: \"field\",\n      key: \"_chartTime\",\n      value() {\n        return new Date();\n      }\n    }, {\n      kind: \"method\",\n      key: \"render\",\n      value: function render() {\n        return lit__WEBPACK_IMPORTED_MODULE_1__.html`\n      <ha-chart-base\n        .hass=${this.hass}\n        .data=${this._chartData}\n        .options=${this._chartOptions}\n        .height=${this.data.length * 30 + 30}\n        .paddingYAxis=${this.paddingYAxis - this._yWidth}\n        chart-type=\"timeline\"\n      ></ha-chart-base>\n    `;\n      }\n    }, {\n      kind: \"method\",\n      key: \"willUpdate\",\n      value: function willUpdate(changedProps) {\n        if (!this.hasUpdated) {\n          this._createOptions();\n        }\n        if (changedProps.has(\"startTime\") || changedProps.has(\"endTime\") || changedProps.has(\"data\") || this._chartTime < new Date(this.endTime.getTime() - _ha_chart_base__WEBPACK_IMPORTED_MODULE_8__.MIN_TIME_BETWEEN_UPDATES)) {\n          // If the line is more than 5 minutes old, re-gen it\n          // so the X axis grows even if there is no new data\n          this._generateData();\n        }\n        if (changedProps.has(\"startTime\") || changedProps.has(\"endTime\") || changedProps.has(\"showNames\")) {\n          this._createOptions();\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"_createOptions\",\n      value: function _createOptions() {\n        const narrow = this.narrow;\n        this._chartOptions = {\n          maintainAspectRatio: false,\n          parsing: false,\n          animation: false,\n          scales: {\n            x: {\n              type: \"timeline\",\n              position: \"bottom\",\n              adapters: {\n                date: {\n                  locale: this.hass.locale\n                }\n              },\n              suggestedMin: this.startTime,\n              suggestedMax: this.endTime,\n              ticks: {\n                autoSkip: true,\n                maxRotation: 0,\n                sampleSize: 5,\n                autoSkipPadding: 20,\n                major: {\n                  enabled: true\n                },\n                font: context => context.tick && context.tick.major ? {\n                  weight: \"bold\"\n                } : {}\n              },\n              grid: {\n                offset: false\n              },\n              time: {\n                tooltipFormat: \"datetimeseconds\"\n              }\n            },\n            y: {\n              type: \"category\",\n              barThickness: 20,\n              offset: true,\n              grid: {\n                display: false,\n                drawBorder: false,\n                drawTicks: false\n              },\n              ticks: {\n                display: this.chunked || this.showNames\n              },\n              afterSetDimensions: y => {\n                y.maxWidth = y.chart.width * 0.18;\n              },\n              afterFit: scaleInstance => {\n                if (this.chunked) {\n                  // ensure all the chart labels are the same width\n                  scaleInstance.width = narrow ? 105 : 185;\n                }\n              },\n              afterUpdate: y => {\n                var _y$width, _y$left;\n                const yWidth = this.showNames ? (_y$width = y.width) !== null && _y$width !== void 0 ? _y$width : 0 : (0,_common_util_compute_rtl__WEBPACK_IMPORTED_MODULE_7__.computeRTL)(this.hass) ? 0 : (_y$left = y.left) !== null && _y$left !== void 0 ? _y$left : 0;\n                if (this._yWidth !== Math.floor(yWidth) && y.ticks.length === this.data.length) {\n                  this._yWidth = Math.floor(yWidth);\n                  (0,_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_5__.fireEvent)(this, \"y-width-changed\", {\n                    value: this._yWidth,\n                    chartIndex: this.chartIndex\n                  });\n                }\n              },\n              position: (0,_common_util_compute_rtl__WEBPACK_IMPORTED_MODULE_7__.computeRTL)(this.hass) ? \"right\" : \"left\"\n            }\n          },\n          plugins: {\n            tooltip: {\n              mode: \"nearest\",\n              callbacks: {\n                title: context => context[0].chart.data.labels[context[0].datasetIndex],\n                beforeBody: context => context[0].dataset.label || \"\",\n                label: item => {\n                  const d = item.dataset.data[item.dataIndex];\n                  const durationInMs = d.end.getTime() - d.start.getTime();\n                  const formattedDuration = `${this.hass.localize(\"ui.components.history_charts.duration\")}: ${(0,_common_datetime_milliseconds_to_duration__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(durationInMs)}`;\n                  return [d.label || \"\", (0,_common_datetime_format_date_time__WEBPACK_IMPORTED_MODULE_3__.formatDateTimeWithSeconds)(d.start, this.hass.locale), (0,_common_datetime_format_date_time__WEBPACK_IMPORTED_MODULE_3__.formatDateTimeWithSeconds)(d.end, this.hass.locale), formattedDuration];\n                },\n                labelColor: item => ({\n                  borderColor: item.dataset.data[item.dataIndex].color,\n                  backgroundColor: item.dataset.data[item.dataIndex].color\n                })\n              }\n            },\n            filler: {\n              propagate: true\n            }\n          },\n          // @ts-expect-error\n          locale: (0,_common_number_format_number__WEBPACK_IMPORTED_MODULE_6__.numberFormatToLocale)(this.hass.locale)\n        };\n      }\n    }, {\n      kind: \"method\",\n      key: \"_generateData\",\n      value: function _generateData() {\n        const computedStyles = getComputedStyle(this);\n        let stateHistory = this.data;\n        if (!stateHistory) {\n          stateHistory = [];\n        }\n        this._chartTime = new Date();\n        const startTime = this.startTime;\n        const endTime = this.endTime;\n        const labels = [];\n        const datasets = [];\n        const names = this.names || {};\n        // stateHistory is a list of lists of sorted state objects\n        stateHistory.forEach(stateInfo => {\n          let newLastChanged;\n          let prevState = null;\n          let locState = null;\n          let prevLastChanged = startTime;\n          const entityDisplay = names[stateInfo.entity_id] || stateInfo.name;\n          const dataRow = [];\n          stateInfo.data.forEach(entityState => {\n            let newState = entityState.state;\n            const timeStamp = new Date(entityState.last_changed);\n            if (!newState) {\n              newState = null;\n            }\n            if (timeStamp > endTime) {\n              // Drop datapoints that are after the requested endTime. This could happen if\n              // endTime is 'now' and client time is not in sync with server time.\n              return;\n            }\n            if (prevState === null) {\n              prevState = newState;\n              locState = entityState.state_localize;\n              prevLastChanged = new Date(entityState.last_changed);\n            } else if (newState !== prevState) {\n              newLastChanged = new Date(entityState.last_changed);\n              dataRow.push({\n                start: prevLastChanged,\n                end: newLastChanged,\n                label: locState,\n                color: (0,_timeline_chart_timeline_color__WEBPACK_IMPORTED_MODULE_9__.computeTimelineColor)(prevState, computedStyles, this.hass.states[stateInfo.entity_id])\n              });\n              prevState = newState;\n              locState = entityState.state_localize;\n              prevLastChanged = newLastChanged;\n            }\n          });\n          if (prevState !== null) {\n            dataRow.push({\n              start: prevLastChanged,\n              end: endTime,\n              label: locState,\n              color: (0,_timeline_chart_timeline_color__WEBPACK_IMPORTED_MODULE_9__.computeTimelineColor)(prevState, computedStyles, this.hass.states[stateInfo.entity_id])\n            });\n          }\n          datasets.push({\n            data: dataRow,\n            label: stateInfo.entity_id\n          });\n          labels.push(entityDisplay);\n        });\n        this._chartData = {\n          labels: labels,\n          datasets: datasets\n        };\n      }\n    }, {\n      kind: \"get\",\n      static: true,\n      key: \"styles\",\n      value: function styles() {\n        return lit__WEBPACK_IMPORTED_MODULE_1__.css`\n      ha-chart-base {\n        --chart-max-height: none;\n      }\n    `;\n      }\n    }]\n  };\n}, lit__WEBPACK_IMPORTED_MODULE_1__.LitElement);\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9jaGFydC9zdGF0ZS1oaXN0b3J5LWNoYXJ0LXRpbWVsaW5lLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQTBSQTtBQUFBO0FBQUE7QUExUkE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBS0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBS0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFNQTtBQUNBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ob21lLWFzc2lzdGFudC1mcm9udGVuZC8uL3NyYy9jb21wb25lbnRzL2NoYXJ0L3N0YXRlLWhpc3RvcnktY2hhcnQtdGltZWxpbmUudHM/YzA1OCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IENoYXJ0RGF0YSwgQ2hhcnREYXRhc2V0LCBDaGFydE9wdGlvbnMgfSBmcm9tIFwiY2hhcnQuanNcIjtcbmltcG9ydCB7IGNzcywgQ1NTUmVzdWx0R3JvdXAsIGh0bWwsIExpdEVsZW1lbnQsIFByb3BlcnR5VmFsdWVzIH0gZnJvbSBcImxpdFwiO1xuaW1wb3J0IHsgY3VzdG9tRWxlbWVudCwgcHJvcGVydHksIHN0YXRlIH0gZnJvbSBcImxpdC9kZWNvcmF0b3JzXCI7XG5pbXBvcnQgeyBmb3JtYXREYXRlVGltZVdpdGhTZWNvbmRzIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9kYXRldGltZS9mb3JtYXRfZGF0ZV90aW1lXCI7XG5pbXBvcnQgbWlsbGlzZWNvbmRzVG9EdXJhdGlvbiBmcm9tIFwiLi4vLi4vY29tbW9uL2RhdGV0aW1lL21pbGxpc2Vjb25kc190b19kdXJhdGlvblwiO1xuaW1wb3J0IHsgZmlyZUV2ZW50IH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9kb20vZmlyZV9ldmVudFwiO1xuaW1wb3J0IHsgbnVtYmVyRm9ybWF0VG9Mb2NhbGUgfSBmcm9tIFwiLi4vLi4vY29tbW9uL251bWJlci9mb3JtYXRfbnVtYmVyXCI7XG5pbXBvcnQgeyBjb21wdXRlUlRMIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi91dGlsL2NvbXB1dGVfcnRsXCI7XG5pbXBvcnQgeyBUaW1lbGluZUVudGl0eSB9IGZyb20gXCIuLi8uLi9kYXRhL2hpc3RvcnlcIjtcbmltcG9ydCB7IEhvbWVBc3Npc3RhbnQgfSBmcm9tIFwiLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IE1JTl9USU1FX0JFVFdFRU5fVVBEQVRFUyB9IGZyb20gXCIuL2hhLWNoYXJ0LWJhc2VcIjtcbmltcG9ydCB0eXBlIHsgVGltZUxpbmVEYXRhIH0gZnJvbSBcIi4vdGltZWxpbmUtY2hhcnQvY29uc3RcIjtcbmltcG9ydCB7IGNvbXB1dGVUaW1lbGluZUNvbG9yIH0gZnJvbSBcIi4vdGltZWxpbmUtY2hhcnQvdGltZWxpbmUtY29sb3JcIjtcblxuQGN1c3RvbUVsZW1lbnQoXCJzdGF0ZS1oaXN0b3J5LWNoYXJ0LXRpbWVsaW5lXCIpXG5leHBvcnQgY2xhc3MgU3RhdGVIaXN0b3J5Q2hhcnRUaW1lbGluZSBleHRlbmRzIExpdEVsZW1lbnQge1xuICBAcHJvcGVydHkoeyBhdHRyaWJ1dGU6IGZhbHNlIH0pIHB1YmxpYyBoYXNzITogSG9tZUFzc2lzdGFudDtcblxuICBAcHJvcGVydHkoeyBhdHRyaWJ1dGU6IGZhbHNlIH0pIHB1YmxpYyBkYXRhOiBUaW1lbGluZUVudGl0eVtdID0gW107XG5cbiAgQHByb3BlcnR5KCkgcHVibGljIG5hcnJvdyE6IGJvb2xlYW47XG5cbiAgQHByb3BlcnR5KCkgcHVibGljIG5hbWVzPzogUmVjb3JkPHN0cmluZywgc3RyaW5nPjtcblxuICBAcHJvcGVydHkoKSBwdWJsaWMgdW5pdD86IHN0cmluZztcblxuICBAcHJvcGVydHkoKSBwdWJsaWMgaWRlbnRpZmllcj86IHN0cmluZztcblxuICBAcHJvcGVydHkoeyB0eXBlOiBCb29sZWFuIH0pIHB1YmxpYyBzaG93TmFtZXMgPSB0cnVlO1xuXG4gIEBwcm9wZXJ0eSh7IHR5cGU6IEJvb2xlYW4gfSkgcHVibGljIGNodW5rZWQgPSBmYWxzZTtcblxuICBAcHJvcGVydHkoeyBhdHRyaWJ1dGU6IGZhbHNlIH0pIHB1YmxpYyBzdGFydFRpbWUhOiBEYXRlO1xuXG4gIEBwcm9wZXJ0eSh7IGF0dHJpYnV0ZTogZmFsc2UgfSkgcHVibGljIGVuZFRpbWUhOiBEYXRlO1xuXG4gIEBwcm9wZXJ0eSh7IHR5cGU6IE51bWJlciB9KSBwdWJsaWMgcGFkZGluZ1lBeGlzID0gMDtcblxuICBAcHJvcGVydHkoeyB0eXBlOiBOdW1iZXIgfSkgcHVibGljIGNoYXJ0SW5kZXg/O1xuXG4gIEBzdGF0ZSgpIHByaXZhdGUgX2NoYXJ0RGF0YT86IENoYXJ0RGF0YTxcInRpbWVsaW5lXCI+O1xuXG4gIEBzdGF0ZSgpIHByaXZhdGUgX2NoYXJ0T3B0aW9ucz86IENoYXJ0T3B0aW9uczxcInRpbWVsaW5lXCI+O1xuXG4gIEBzdGF0ZSgpIHByaXZhdGUgX3lXaWR0aCA9IDA7XG5cbiAgcHJpdmF0ZSBfY2hhcnRUaW1lOiBEYXRlID0gbmV3IERhdGUoKTtcblxuICBwcm90ZWN0ZWQgcmVuZGVyKCkge1xuICAgIHJldHVybiBodG1sYFxuICAgICAgPGhhLWNoYXJ0LWJhc2VcbiAgICAgICAgLmhhc3M9JHt0aGlzLmhhc3N9XG4gICAgICAgIC5kYXRhPSR7dGhpcy5fY2hhcnREYXRhfVxuICAgICAgICAub3B0aW9ucz0ke3RoaXMuX2NoYXJ0T3B0aW9uc31cbiAgICAgICAgLmhlaWdodD0ke3RoaXMuZGF0YS5sZW5ndGggKiAzMCArIDMwfVxuICAgICAgICAucGFkZGluZ1lBeGlzPSR7dGhpcy5wYWRkaW5nWUF4aXMgLSB0aGlzLl95V2lkdGh9XG4gICAgICAgIGNoYXJ0LXR5cGU9XCJ0aW1lbGluZVwiXG4gICAgICA+PC9oYS1jaGFydC1iYXNlPlxuICAgIGA7XG4gIH1cblxuICBwdWJsaWMgd2lsbFVwZGF0ZShjaGFuZ2VkUHJvcHM6IFByb3BlcnR5VmFsdWVzKSB7XG4gICAgaWYgKCF0aGlzLmhhc1VwZGF0ZWQpIHtcbiAgICAgIHRoaXMuX2NyZWF0ZU9wdGlvbnMoKTtcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICBjaGFuZ2VkUHJvcHMuaGFzKFwic3RhcnRUaW1lXCIpIHx8XG4gICAgICBjaGFuZ2VkUHJvcHMuaGFzKFwiZW5kVGltZVwiKSB8fFxuICAgICAgY2hhbmdlZFByb3BzLmhhcyhcImRhdGFcIikgfHxcbiAgICAgIHRoaXMuX2NoYXJ0VGltZSA8XG4gICAgICAgIG5ldyBEYXRlKHRoaXMuZW5kVGltZS5nZXRUaW1lKCkgLSBNSU5fVElNRV9CRVRXRUVOX1VQREFURVMpXG4gICAgKSB7XG4gICAgICAvLyBJZiB0aGUgbGluZSBpcyBtb3JlIHRoYW4gNSBtaW51dGVzIG9sZCwgcmUtZ2VuIGl0XG4gICAgICAvLyBzbyB0aGUgWCBheGlzIGdyb3dzIGV2ZW4gaWYgdGhlcmUgaXMgbm8gbmV3IGRhdGFcbiAgICAgIHRoaXMuX2dlbmVyYXRlRGF0YSgpO1xuICAgIH1cblxuICAgIGlmIChcbiAgICAgIGNoYW5nZWRQcm9wcy5oYXMoXCJzdGFydFRpbWVcIikgfHxcbiAgICAgIGNoYW5nZWRQcm9wcy5oYXMoXCJlbmRUaW1lXCIpIHx8XG4gICAgICBjaGFuZ2VkUHJvcHMuaGFzKFwic2hvd05hbWVzXCIpXG4gICAgKSB7XG4gICAgICB0aGlzLl9jcmVhdGVPcHRpb25zKCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfY3JlYXRlT3B0aW9ucygpIHtcbiAgICBjb25zdCBuYXJyb3cgPSB0aGlzLm5hcnJvdztcbiAgICB0aGlzLl9jaGFydE9wdGlvbnMgPSB7XG4gICAgICBtYWludGFpbkFzcGVjdFJhdGlvOiBmYWxzZSxcbiAgICAgIHBhcnNpbmc6IGZhbHNlLFxuICAgICAgYW5pbWF0aW9uOiBmYWxzZSxcbiAgICAgIHNjYWxlczoge1xuICAgICAgICB4OiB7XG4gICAgICAgICAgdHlwZTogXCJ0aW1lbGluZVwiLFxuICAgICAgICAgIHBvc2l0aW9uOiBcImJvdHRvbVwiLFxuICAgICAgICAgIGFkYXB0ZXJzOiB7XG4gICAgICAgICAgICBkYXRlOiB7XG4gICAgICAgICAgICAgIGxvY2FsZTogdGhpcy5oYXNzLmxvY2FsZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICBzdWdnZXN0ZWRNaW46IHRoaXMuc3RhcnRUaW1lLFxuICAgICAgICAgIHN1Z2dlc3RlZE1heDogdGhpcy5lbmRUaW1lLFxuICAgICAgICAgIHRpY2tzOiB7XG4gICAgICAgICAgICBhdXRvU2tpcDogdHJ1ZSxcbiAgICAgICAgICAgIG1heFJvdGF0aW9uOiAwLFxuICAgICAgICAgICAgc2FtcGxlU2l6ZTogNSxcbiAgICAgICAgICAgIGF1dG9Ta2lwUGFkZGluZzogMjAsXG4gICAgICAgICAgICBtYWpvcjoge1xuICAgICAgICAgICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZvbnQ6IChjb250ZXh0KSA9PlxuICAgICAgICAgICAgICBjb250ZXh0LnRpY2sgJiYgY29udGV4dC50aWNrLm1ham9yXG4gICAgICAgICAgICAgICAgPyAoeyB3ZWlnaHQ6IFwiYm9sZFwiIH0gYXMgYW55KVxuICAgICAgICAgICAgICAgIDoge30sXG4gICAgICAgICAgfSxcbiAgICAgICAgICBncmlkOiB7XG4gICAgICAgICAgICBvZmZzZXQ6IGZhbHNlLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgdGltZToge1xuICAgICAgICAgICAgdG9vbHRpcEZvcm1hdDogXCJkYXRldGltZXNlY29uZHNcIixcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICB5OiB7XG4gICAgICAgICAgdHlwZTogXCJjYXRlZ29yeVwiLFxuICAgICAgICAgIGJhclRoaWNrbmVzczogMjAsXG4gICAgICAgICAgb2Zmc2V0OiB0cnVlLFxuICAgICAgICAgIGdyaWQ6IHtcbiAgICAgICAgICAgIGRpc3BsYXk6IGZhbHNlLFxuICAgICAgICAgICAgZHJhd0JvcmRlcjogZmFsc2UsXG4gICAgICAgICAgICBkcmF3VGlja3M6IGZhbHNlLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgdGlja3M6IHtcbiAgICAgICAgICAgIGRpc3BsYXk6IHRoaXMuY2h1bmtlZCB8fCB0aGlzLnNob3dOYW1lcyxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGFmdGVyU2V0RGltZW5zaW9uczogKHkpID0+IHtcbiAgICAgICAgICAgIHkubWF4V2lkdGggPSB5LmNoYXJ0LndpZHRoICogMC4xODtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGFmdGVyRml0OiAoc2NhbGVJbnN0YW5jZSkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuY2h1bmtlZCkge1xuICAgICAgICAgICAgICAvLyBlbnN1cmUgYWxsIHRoZSBjaGFydCBsYWJlbHMgYXJlIHRoZSBzYW1lIHdpZHRoXG4gICAgICAgICAgICAgIHNjYWxlSW5zdGFuY2Uud2lkdGggPSBuYXJyb3cgPyAxMDUgOiAxODU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBhZnRlclVwZGF0ZTogKHkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHlXaWR0aCA9IHRoaXMuc2hvd05hbWVzXG4gICAgICAgICAgICAgID8geS53aWR0aCA/PyAwXG4gICAgICAgICAgICAgIDogY29tcHV0ZVJUTCh0aGlzLmhhc3MpXG4gICAgICAgICAgICAgID8gMFxuICAgICAgICAgICAgICA6IHkubGVmdCA/PyAwO1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICB0aGlzLl95V2lkdGggIT09IE1hdGguZmxvb3IoeVdpZHRoKSAmJlxuICAgICAgICAgICAgICB5LnRpY2tzLmxlbmd0aCA9PT0gdGhpcy5kYXRhLmxlbmd0aFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIHRoaXMuX3lXaWR0aCA9IE1hdGguZmxvb3IoeVdpZHRoKTtcbiAgICAgICAgICAgICAgZmlyZUV2ZW50KHRoaXMsIFwieS13aWR0aC1jaGFuZ2VkXCIsIHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5feVdpZHRoLFxuICAgICAgICAgICAgICAgIGNoYXJ0SW5kZXg6IHRoaXMuY2hhcnRJbmRleCxcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBwb3NpdGlvbjogY29tcHV0ZVJUTCh0aGlzLmhhc3MpID8gXCJyaWdodFwiIDogXCJsZWZ0XCIsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgcGx1Z2luczoge1xuICAgICAgICB0b29sdGlwOiB7XG4gICAgICAgICAgbW9kZTogXCJuZWFyZXN0XCIsXG4gICAgICAgICAgY2FsbGJhY2tzOiB7XG4gICAgICAgICAgICB0aXRsZTogKGNvbnRleHQpID0+XG4gICAgICAgICAgICAgIGNvbnRleHQhWzBdLmNoYXJ0IS5kYXRhIS5sYWJlbHMhW1xuICAgICAgICAgICAgICAgIGNvbnRleHRbMF0uZGF0YXNldEluZGV4XG4gICAgICAgICAgICAgIF0gYXMgc3RyaW5nLFxuICAgICAgICAgICAgYmVmb3JlQm9keTogKGNvbnRleHQpID0+IGNvbnRleHRbMF0uZGF0YXNldC5sYWJlbCB8fCBcIlwiLFxuICAgICAgICAgICAgbGFiZWw6IChpdGVtKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGQgPSBpdGVtLmRhdGFzZXQuZGF0YVtpdGVtLmRhdGFJbmRleF0gYXMgVGltZUxpbmVEYXRhO1xuICAgICAgICAgICAgICBjb25zdCBkdXJhdGlvbkluTXMgPSBkLmVuZC5nZXRUaW1lKCkgLSBkLnN0YXJ0LmdldFRpbWUoKTtcbiAgICAgICAgICAgICAgY29uc3QgZm9ybWF0dGVkRHVyYXRpb24gPSBgJHt0aGlzLmhhc3MubG9jYWxpemUoXG4gICAgICAgICAgICAgICAgXCJ1aS5jb21wb25lbnRzLmhpc3RvcnlfY2hhcnRzLmR1cmF0aW9uXCJcbiAgICAgICAgICAgICAgKX06ICR7bWlsbGlzZWNvbmRzVG9EdXJhdGlvbihkdXJhdGlvbkluTXMpfWA7XG5cbiAgICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICBkLmxhYmVsIHx8IFwiXCIsXG4gICAgICAgICAgICAgICAgZm9ybWF0RGF0ZVRpbWVXaXRoU2Vjb25kcyhkLnN0YXJ0LCB0aGlzLmhhc3MubG9jYWxlKSxcbiAgICAgICAgICAgICAgICBmb3JtYXREYXRlVGltZVdpdGhTZWNvbmRzKGQuZW5kLCB0aGlzLmhhc3MubG9jYWxlKSxcbiAgICAgICAgICAgICAgICBmb3JtYXR0ZWREdXJhdGlvbixcbiAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBsYWJlbENvbG9yOiAoaXRlbSkgPT4gKHtcbiAgICAgICAgICAgICAgYm9yZGVyQ29sb3I6IChpdGVtLmRhdGFzZXQuZGF0YVtpdGVtLmRhdGFJbmRleF0gYXMgVGltZUxpbmVEYXRhKVxuICAgICAgICAgICAgICAgIC5jb2xvciEsXG4gICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogKFxuICAgICAgICAgICAgICAgIGl0ZW0uZGF0YXNldC5kYXRhW2l0ZW0uZGF0YUluZGV4XSBhcyBUaW1lTGluZURhdGFcbiAgICAgICAgICAgICAgKS5jb2xvciEsXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBmaWxsZXI6IHtcbiAgICAgICAgICBwcm9wYWdhdGU6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvclxuICAgICAgbG9jYWxlOiBudW1iZXJGb3JtYXRUb0xvY2FsZSh0aGlzLmhhc3MubG9jYWxlKSxcbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSBfZ2VuZXJhdGVEYXRhKCkge1xuICAgIGNvbnN0IGNvbXB1dGVkU3R5bGVzID0gZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzKTtcbiAgICBsZXQgc3RhdGVIaXN0b3J5ID0gdGhpcy5kYXRhO1xuXG4gICAgaWYgKCFzdGF0ZUhpc3RvcnkpIHtcbiAgICAgIHN0YXRlSGlzdG9yeSA9IFtdO1xuICAgIH1cblxuICAgIHRoaXMuX2NoYXJ0VGltZSA9IG5ldyBEYXRlKCk7XG4gICAgY29uc3Qgc3RhcnRUaW1lID0gdGhpcy5zdGFydFRpbWU7XG4gICAgY29uc3QgZW5kVGltZSA9IHRoaXMuZW5kVGltZTtcbiAgICBjb25zdCBsYWJlbHM6IHN0cmluZ1tdID0gW107XG4gICAgY29uc3QgZGF0YXNldHM6IENoYXJ0RGF0YXNldDxcInRpbWVsaW5lXCI+W10gPSBbXTtcbiAgICBjb25zdCBuYW1lcyA9IHRoaXMubmFtZXMgfHwge307XG4gICAgLy8gc3RhdGVIaXN0b3J5IGlzIGEgbGlzdCBvZiBsaXN0cyBvZiBzb3J0ZWQgc3RhdGUgb2JqZWN0c1xuICAgIHN0YXRlSGlzdG9yeS5mb3JFYWNoKChzdGF0ZUluZm8pID0+IHtcbiAgICAgIGxldCBuZXdMYXN0Q2hhbmdlZDogRGF0ZTtcbiAgICAgIGxldCBwcmV2U3RhdGU6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICAgICAgbGV0IGxvY1N0YXRlOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgICAgIGxldCBwcmV2TGFzdENoYW5nZWQgPSBzdGFydFRpbWU7XG4gICAgICBjb25zdCBlbnRpdHlEaXNwbGF5OiBzdHJpbmcgPVxuICAgICAgICBuYW1lc1tzdGF0ZUluZm8uZW50aXR5X2lkXSB8fCBzdGF0ZUluZm8ubmFtZTtcblxuICAgICAgY29uc3QgZGF0YVJvdzogVGltZUxpbmVEYXRhW10gPSBbXTtcbiAgICAgIHN0YXRlSW5mby5kYXRhLmZvckVhY2goKGVudGl0eVN0YXRlKSA9PiB7XG4gICAgICAgIGxldCBuZXdTdGF0ZTogc3RyaW5nIHwgbnVsbCA9IGVudGl0eVN0YXRlLnN0YXRlO1xuICAgICAgICBjb25zdCB0aW1lU3RhbXAgPSBuZXcgRGF0ZShlbnRpdHlTdGF0ZS5sYXN0X2NoYW5nZWQpO1xuICAgICAgICBpZiAoIW5ld1N0YXRlKSB7XG4gICAgICAgICAgbmV3U3RhdGUgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aW1lU3RhbXAgPiBlbmRUaW1lKSB7XG4gICAgICAgICAgLy8gRHJvcCBkYXRhcG9pbnRzIHRoYXQgYXJlIGFmdGVyIHRoZSByZXF1ZXN0ZWQgZW5kVGltZS4gVGhpcyBjb3VsZCBoYXBwZW4gaWZcbiAgICAgICAgICAvLyBlbmRUaW1lIGlzICdub3cnIGFuZCBjbGllbnQgdGltZSBpcyBub3QgaW4gc3luYyB3aXRoIHNlcnZlciB0aW1lLlxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJldlN0YXRlID09PSBudWxsKSB7XG4gICAgICAgICAgcHJldlN0YXRlID0gbmV3U3RhdGU7XG4gICAgICAgICAgbG9jU3RhdGUgPSBlbnRpdHlTdGF0ZS5zdGF0ZV9sb2NhbGl6ZTtcbiAgICAgICAgICBwcmV2TGFzdENoYW5nZWQgPSBuZXcgRGF0ZShlbnRpdHlTdGF0ZS5sYXN0X2NoYW5nZWQpO1xuICAgICAgICB9IGVsc2UgaWYgKG5ld1N0YXRlICE9PSBwcmV2U3RhdGUpIHtcbiAgICAgICAgICBuZXdMYXN0Q2hhbmdlZCA9IG5ldyBEYXRlKGVudGl0eVN0YXRlLmxhc3RfY2hhbmdlZCk7XG5cbiAgICAgICAgICBkYXRhUm93LnB1c2goe1xuICAgICAgICAgICAgc3RhcnQ6IHByZXZMYXN0Q2hhbmdlZCxcbiAgICAgICAgICAgIGVuZDogbmV3TGFzdENoYW5nZWQsXG4gICAgICAgICAgICBsYWJlbDogbG9jU3RhdGUsXG4gICAgICAgICAgICBjb2xvcjogY29tcHV0ZVRpbWVsaW5lQ29sb3IoXG4gICAgICAgICAgICAgIHByZXZTdGF0ZSxcbiAgICAgICAgICAgICAgY29tcHV0ZWRTdHlsZXMsXG4gICAgICAgICAgICAgIHRoaXMuaGFzcy5zdGF0ZXNbc3RhdGVJbmZvLmVudGl0eV9pZF1cbiAgICAgICAgICAgICksXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBwcmV2U3RhdGUgPSBuZXdTdGF0ZTtcbiAgICAgICAgICBsb2NTdGF0ZSA9IGVudGl0eVN0YXRlLnN0YXRlX2xvY2FsaXplO1xuICAgICAgICAgIHByZXZMYXN0Q2hhbmdlZCA9IG5ld0xhc3RDaGFuZ2VkO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgaWYgKHByZXZTdGF0ZSAhPT0gbnVsbCkge1xuICAgICAgICBkYXRhUm93LnB1c2goe1xuICAgICAgICAgIHN0YXJ0OiBwcmV2TGFzdENoYW5nZWQsXG4gICAgICAgICAgZW5kOiBlbmRUaW1lLFxuICAgICAgICAgIGxhYmVsOiBsb2NTdGF0ZSxcbiAgICAgICAgICBjb2xvcjogY29tcHV0ZVRpbWVsaW5lQ29sb3IoXG4gICAgICAgICAgICBwcmV2U3RhdGUsXG4gICAgICAgICAgICBjb21wdXRlZFN0eWxlcyxcbiAgICAgICAgICAgIHRoaXMuaGFzcy5zdGF0ZXNbc3RhdGVJbmZvLmVudGl0eV9pZF1cbiAgICAgICAgICApLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGRhdGFzZXRzLnB1c2goe1xuICAgICAgICBkYXRhOiBkYXRhUm93LFxuICAgICAgICBsYWJlbDogc3RhdGVJbmZvLmVudGl0eV9pZCxcbiAgICAgIH0pO1xuICAgICAgbGFiZWxzLnB1c2goZW50aXR5RGlzcGxheSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9jaGFydERhdGEgPSB7XG4gICAgICBsYWJlbHM6IGxhYmVscyxcbiAgICAgIGRhdGFzZXRzOiBkYXRhc2V0cyxcbiAgICB9O1xuICB9XG5cbiAgc3RhdGljIGdldCBzdHlsZXMoKTogQ1NTUmVzdWx0R3JvdXAge1xuICAgIHJldHVybiBjc3NgXG4gICAgICBoYS1jaGFydC1iYXNlIHtcbiAgICAgICAgLS1jaGFydC1tYXgtaGVpZ2h0OiBub25lO1xuICAgICAgfVxuICAgIGA7XG4gIH1cbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICBpbnRlcmZhY2UgSFRNTEVsZW1lbnRUYWdOYW1lTWFwIHtcbiAgICBcInN0YXRlLWhpc3RvcnktY2hhcnQtdGltZWxpbmVcIjogU3RhdGVIaXN0b3J5Q2hhcnRUaW1lbGluZTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/components/chart/state-history-chart-timeline.ts\n");

/***/ }),

/***/ "./src/components/chart/state-history-charts.ts":
/*!******************************************************!*\
  !*** ./src/components/chart/state-history-charts.ts ***!
  \******************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   StateHistoryCharts: () => (/* binding */ StateHistoryCharts)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_decorate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/decorate */ \"./node_modules/@babel/runtime/helpers/esm/decorate.js\");\n/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit */ \"./node_modules/lit/index.js\");\n/* harmony import */ var lit_decorators__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lit/decorators */ \"./node_modules/lit/decorators.js\");\n/* harmony import */ var _common_config_is_component_loaded__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../common/config/is_component_loaded */ \"./src/common/config/is_component_loaded.ts\");\n/* harmony import */ var _common_decorators_restore_scroll__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../common/decorators/restore-scroll */ \"./src/common/decorators/restore-scroll.ts\");\n/* harmony import */ var _resources_virtualizer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../resources/virtualizer */ \"./src/resources/virtualizer.ts\");\n/* harmony import */ var _state_history_chart_line__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./state-history-chart-line */ \"./src/components/chart/state-history-chart-line.ts\");\n/* harmony import */ var _state_history_chart_timeline__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./state-history-chart-timeline */ \"./src/components/chart/state-history-chart-timeline.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_state_history_chart_timeline__WEBPACK_IMPORTED_MODULE_7__]);\n_state_history_chart_timeline__WEBPACK_IMPORTED_MODULE_7__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n\n\n\n\nconst CANVAS_TIMELINE_ROWS_CHUNK = 10; // Split up the canvases to avoid hitting the render limit\n\nconst chunkData = (inputArray, chunks) => inputArray.reduce((results, item, idx) => {\n  const chunkIdx = Math.floor(idx / chunks);\n  if (!results[chunkIdx]) {\n    results[chunkIdx] = [];\n  }\n  results[chunkIdx].push(item);\n  return results;\n}, []);\nlet StateHistoryCharts = (0,_babel_runtime_helpers_decorate__WEBPACK_IMPORTED_MODULE_0__[\"default\"])([(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.customElement)(\"state-history-charts\")], function (_initialize, _LitElement) {\n  class StateHistoryCharts extends _LitElement {\n    constructor(...args) {\n      super(...args);\n      _initialize(this);\n    }\n  }\n  return {\n    F: StateHistoryCharts,\n    d: [{\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.property)({\n        attribute: false\n      })],\n      key: \"hass\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.property)({\n        attribute: false\n      })],\n      key: \"historyData\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.property)()],\n      key: \"narrow\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.property)()],\n      key: \"names\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.property)({\n        type: Boolean,\n        attribute: \"virtualize\",\n        reflect: true\n      })],\n      key: \"virtualize\",\n      value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.property)({\n        attribute: false\n      })],\n      key: \"endTime\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.property)({\n        type: Boolean,\n        attribute: \"up-to-now\"\n      })],\n      key: \"upToNow\",\n      value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.property)({\n        type: Boolean\n      })],\n      key: \"showNames\",\n      value() {\n        return true;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.property)({\n        type: Boolean\n      })],\n      key: \"isLoadingData\",\n      value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.state)()],\n      key: \"_computedStartTime\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.state)()],\n      key: \"_computedEndTime\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.state)()],\n      key: \"_maxYWidth\",\n      value() {\n        return 0;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.state)()],\n      key: \"_childYWidths\",\n      value() {\n        return [];\n      }\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.state)()],\n      key: \"_chartCount\",\n      value() {\n        return 0;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [(0,_common_decorators_restore_scroll__WEBPACK_IMPORTED_MODULE_4__.restoreScroll)(\".container\")],\n      key: \"_savedScrollPos\",\n      value: void 0\n    }, {\n      kind: \"method\",\n      key: \"render\",\n      value:\n      // @ts-ignore\n\n      function render() {\n        if (!(0,_common_config_is_component_loaded__WEBPACK_IMPORTED_MODULE_3__.isComponentLoaded)(this.hass, \"history\")) {\n          return lit__WEBPACK_IMPORTED_MODULE_1__.html`<div class=\"info\">\n        ${this.hass.localize(\"ui.components.history_charts.history_disabled\")}\n      </div>`;\n        }\n        if (this.isLoadingData && !this.historyData) {\n          return lit__WEBPACK_IMPORTED_MODULE_1__.html`<div class=\"info\">\n        ${this.hass.localize(\"ui.components.history_charts.loading_history\")}\n      </div>`;\n        }\n        if (this._isHistoryEmpty()) {\n          return lit__WEBPACK_IMPORTED_MODULE_1__.html`<div class=\"info\">\n        ${this.hass.localize(\"ui.components.history_charts.no_history_found\")}\n      </div>`;\n        }\n        const now = new Date();\n        this._computedEndTime = this.upToNow || !this.endTime || this.endTime > now ? now : this.endTime;\n        this._computedStartTime = new Date(this.historyData.timeline.reduce((minTime, stateInfo) => Math.min(minTime, new Date(stateInfo.data[0].last_changed).getTime()), new Date().getTime()));\n        const combinedItems = this.historyData.timeline.length ? (this.virtualize ? chunkData(this.historyData.timeline, CANVAS_TIMELINE_ROWS_CHUNK) : [this.historyData.timeline]).concat(this.historyData.line) : this.historyData.line;\n        this._chartCount = combinedItems.length;\n        return this.virtualize ? lit__WEBPACK_IMPORTED_MODULE_1__.html`<div class=\"container ha-scrollbar\" @scroll=${this._saveScrollPos}>\n          <lit-virtualizer\n            scroller\n            class=\"ha-scrollbar\"\n            .items=${combinedItems}\n            .renderItem=${this._renderHistoryItem}\n          >\n          </lit-virtualizer>\n        </div>` : lit__WEBPACK_IMPORTED_MODULE_1__.html`${combinedItems.map((item, index) => this._renderHistoryItem(item, index))}`;\n      }\n    }, {\n      kind: \"field\",\n      key: \"_renderHistoryItem\",\n      value() {\n        return (item, index) => {\n          if (!item || index === undefined) {\n            return lit__WEBPACK_IMPORTED_MODULE_1__.nothing;\n          }\n          if (!Array.isArray(item)) {\n            return lit__WEBPACK_IMPORTED_MODULE_1__.html`<div class=\"entry-container\">\n        <state-history-chart-line\n          .hass=${this.hass}\n          .unit=${item.unit}\n          .data=${item.data}\n          .identifier=${item.identifier}\n          .showNames=${this.showNames}\n          .endTime=${this._computedEndTime}\n          .paddingYAxis=${this._maxYWidth}\n          .names=${this.names}\n          .chartIndex=${index}\n          @y-width-changed=${this._yWidthChanged}\n        ></state-history-chart-line>\n      </div> `;\n          }\n          return lit__WEBPACK_IMPORTED_MODULE_1__.html`<div class=\"entry-container\">\n      <state-history-chart-timeline\n        .hass=${this.hass}\n        .data=${item}\n        .startTime=${this._computedStartTime}\n        .endTime=${this._computedEndTime}\n        .showNames=${this.showNames}\n        .names=${this.names}\n        .narrow=${this.narrow}\n        .chunked=${this.virtualize}\n        .paddingYAxis=${this._maxYWidth}\n        .chartIndex=${index}\n        @y-width-changed=${this._yWidthChanged}\n      ></state-history-chart-timeline>\n    </div> `;\n        };\n      }\n    }, {\n      kind: \"method\",\n      key: \"shouldUpdate\",\n      value: function shouldUpdate(changedProps) {\n        return !(changedProps.size === 1 && changedProps.has(\"hass\"));\n      }\n    }, {\n      kind: \"method\",\n      key: \"willUpdate\",\n      value: function willUpdate() {\n        if (!this.hasUpdated) {\n          (0,_resources_virtualizer__WEBPACK_IMPORTED_MODULE_5__.loadVirtualizer)();\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"updated\",\n      value: function updated(changedProps) {\n        if (changedProps.has(\"_chartCount\")) {\n          if (this._chartCount < this._childYWidths.length) {\n            this._childYWidths.length = this._chartCount;\n            this._maxYWidth = Math.max(...Object.values(this._childYWidths), 0);\n          }\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"_yWidthChanged\",\n      value: function _yWidthChanged(e) {\n        this._childYWidths[e.detail.chartIndex] = e.detail.value;\n        this._maxYWidth = Math.max(...Object.values(this._childYWidths), 0);\n      }\n    }, {\n      kind: \"method\",\n      key: \"_isHistoryEmpty\",\n      value: function _isHistoryEmpty() {\n        const historyDataEmpty = !this.historyData || !this.historyData.timeline || !this.historyData.line || this.historyData.timeline.length === 0 && this.historyData.line.length === 0;\n        return !this.isLoadingData && historyDataEmpty;\n      }\n    }, {\n      kind: \"method\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_2__.eventOptions)({\n        passive: true\n      })],\n      key: \"_saveScrollPos\",\n      value: function _saveScrollPos(e) {\n        this._savedScrollPos = e.target.scrollTop;\n      }\n    }, {\n      kind: \"get\",\n      static: true,\n      key: \"styles\",\n      value: function styles() {\n        return lit__WEBPACK_IMPORTED_MODULE_1__.css`\n      :host {\n        display: block;\n        /* height of single timeline chart = 60px */\n        min-height: 60px;\n      }\n\n      :host([virtualize]) {\n        height: 100%;\n      }\n\n      .info {\n        text-align: center;\n        line-height: 60px;\n        color: var(--secondary-text-color);\n      }\n\n      .container {\n        max-height: var(--history-max-height);\n      }\n\n      .entry-container {\n        width: 100%;\n      }\n\n      .entry-container:hover {\n        z-index: 1;\n      }\n\n      :host([virtualize]) .entry-container {\n        padding-left: 1px;\n        padding-right: 1px;\n      }\n\n      .container,\n      lit-virtualizer {\n        height: 100%;\n        width: 100%;\n      }\n\n      lit-virtualizer {\n        contain: size layout !important;\n      }\n\n      state-history-chart-timeline,\n      state-history-chart-line {\n        width: 100%;\n      }\n    `;\n      }\n    }]\n  };\n}, lit__WEBPACK_IMPORTED_MODULE_1__.LitElement);\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9jaGFydC9zdGF0ZS1oaXN0b3J5LWNoYXJ0cy50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFRQTtBQUNBO0FBQ0E7QUFNQTtBQUVBO0FBQ0E7QUFFQTs7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBMk5BO0FBQUE7QUFBQTtBQTNOQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBREE7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBR0E7QUFRQTtBQU9BO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFNQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ob21lLWFzc2lzdGFudC1mcm9udGVuZC8uL3NyYy9jb21wb25lbnRzL2NoYXJ0L3N0YXRlLWhpc3RvcnktY2hhcnRzLnRzP2EwZjAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgY3NzLFxuICBDU1NSZXN1bHRHcm91cCxcbiAgaHRtbCxcbiAgTGl0RWxlbWVudCxcbiAgbm90aGluZyxcbiAgUHJvcGVydHlWYWx1ZXMsXG59IGZyb20gXCJsaXRcIjtcbmltcG9ydCB7IGN1c3RvbUVsZW1lbnQsIGV2ZW50T3B0aW9ucywgcHJvcGVydHksIHN0YXRlIH0gZnJvbSBcImxpdC9kZWNvcmF0b3JzXCI7XG5pbXBvcnQgeyBpc0NvbXBvbmVudExvYWRlZCB9IGZyb20gXCIuLi8uLi9jb21tb24vY29uZmlnL2lzX2NvbXBvbmVudF9sb2FkZWRcIjtcbmltcG9ydCB7IHJlc3RvcmVTY3JvbGwgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2RlY29yYXRvcnMvcmVzdG9yZS1zY3JvbGxcIjtcbmltcG9ydCB7XG4gIEhpc3RvcnlSZXN1bHQsXG4gIExpbmVDaGFydFVuaXQsXG4gIFRpbWVsaW5lRW50aXR5LFxufSBmcm9tIFwiLi4vLi4vZGF0YS9oaXN0b3J5XCI7XG5pbXBvcnQgeyBsb2FkVmlydHVhbGl6ZXIgfSBmcm9tIFwiLi4vLi4vcmVzb3VyY2VzL3ZpcnR1YWxpemVyXCI7XG5pbXBvcnQgdHlwZSB7IEhvbWVBc3Npc3RhbnQgfSBmcm9tIFwiLi4vLi4vdHlwZXNcIjtcbmltcG9ydCBcIi4vc3RhdGUtaGlzdG9yeS1jaGFydC1saW5lXCI7XG5pbXBvcnQgXCIuL3N0YXRlLWhpc3RvcnktY2hhcnQtdGltZWxpbmVcIjtcblxuY29uc3QgQ0FOVkFTX1RJTUVMSU5FX1JPV1NfQ0hVTksgPSAxMDsgLy8gU3BsaXQgdXAgdGhlIGNhbnZhc2VzIHRvIGF2b2lkIGhpdHRpbmcgdGhlIHJlbmRlciBsaW1pdFxuXG5jb25zdCBjaHVua0RhdGEgPSAoaW5wdXRBcnJheTogYW55W10sIGNodW5rczogbnVtYmVyKSA9PlxuICBpbnB1dEFycmF5LnJlZHVjZSgocmVzdWx0cywgaXRlbSwgaWR4KSA9PiB7XG4gICAgY29uc3QgY2h1bmtJZHggPSBNYXRoLmZsb29yKGlkeCAvIGNodW5rcyk7XG4gICAgaWYgKCFyZXN1bHRzW2NodW5rSWR4XSkge1xuICAgICAgcmVzdWx0c1tjaHVua0lkeF0gPSBbXTtcbiAgICB9XG4gICAgcmVzdWx0c1tjaHVua0lkeF0ucHVzaChpdGVtKTtcbiAgICByZXR1cm4gcmVzdWx0cztcbiAgfSwgW10pO1xuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIGludGVyZmFjZSBIQVNTRG9tRXZlbnRzIHtcbiAgICBcInktd2lkdGgtY2hhbmdlZFwiOiB7IHZhbHVlOiBudW1iZXI7IGNoYXJ0SW5kZXg6IG51bWJlciB9O1xuICB9XG59XG5cbkBjdXN0b21FbGVtZW50KFwic3RhdGUtaGlzdG9yeS1jaGFydHNcIilcbmV4cG9ydCBjbGFzcyBTdGF0ZUhpc3RvcnlDaGFydHMgZXh0ZW5kcyBMaXRFbGVtZW50IHtcbiAgQHByb3BlcnR5KHsgYXR0cmlidXRlOiBmYWxzZSB9KSBwdWJsaWMgaGFzcyE6IEhvbWVBc3Npc3RhbnQ7XG5cbiAgQHByb3BlcnR5KHsgYXR0cmlidXRlOiBmYWxzZSB9KSBwdWJsaWMgaGlzdG9yeURhdGEhOiBIaXN0b3J5UmVzdWx0O1xuXG4gIEBwcm9wZXJ0eSgpIHB1YmxpYyBuYXJyb3chOiBib29sZWFuO1xuXG4gIEBwcm9wZXJ0eSgpIHB1YmxpYyBuYW1lcz86IFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG5cbiAgQHByb3BlcnR5KHsgdHlwZTogQm9vbGVhbiwgYXR0cmlidXRlOiBcInZpcnR1YWxpemVcIiwgcmVmbGVjdDogdHJ1ZSB9KVxuICBwdWJsaWMgdmlydHVhbGl6ZSA9IGZhbHNlO1xuXG4gIEBwcm9wZXJ0eSh7IGF0dHJpYnV0ZTogZmFsc2UgfSkgcHVibGljIGVuZFRpbWU/OiBEYXRlO1xuXG4gIEBwcm9wZXJ0eSh7IHR5cGU6IEJvb2xlYW4sIGF0dHJpYnV0ZTogXCJ1cC10by1ub3dcIiB9KSBwdWJsaWMgdXBUb05vdyA9IGZhbHNlO1xuXG4gIEBwcm9wZXJ0eSh7IHR5cGU6IEJvb2xlYW4gfSkgcHVibGljIHNob3dOYW1lcyA9IHRydWU7XG5cbiAgQHByb3BlcnR5KHsgdHlwZTogQm9vbGVhbiB9KSBwdWJsaWMgaXNMb2FkaW5nRGF0YSA9IGZhbHNlO1xuXG4gIEBzdGF0ZSgpIHByaXZhdGUgX2NvbXB1dGVkU3RhcnRUaW1lITogRGF0ZTtcblxuICBAc3RhdGUoKSBwcml2YXRlIF9jb21wdXRlZEVuZFRpbWUhOiBEYXRlO1xuXG4gIEBzdGF0ZSgpIHByaXZhdGUgX21heFlXaWR0aCA9IDA7XG5cbiAgQHN0YXRlKCkgcHJpdmF0ZSBfY2hpbGRZV2lkdGhzOiBudW1iZXJbXSA9IFtdO1xuXG4gIEBzdGF0ZSgpIHByaXZhdGUgX2NoYXJ0Q291bnQgPSAwO1xuXG4gIC8vIEB0cy1pZ25vcmVcbiAgQHJlc3RvcmVTY3JvbGwoXCIuY29udGFpbmVyXCIpIHByaXZhdGUgX3NhdmVkU2Nyb2xsUG9zPzogbnVtYmVyO1xuXG4gIHByb3RlY3RlZCByZW5kZXIoKSB7XG4gICAgaWYgKCFpc0NvbXBvbmVudExvYWRlZCh0aGlzLmhhc3MsIFwiaGlzdG9yeVwiKSkge1xuICAgICAgcmV0dXJuIGh0bWxgPGRpdiBjbGFzcz1cImluZm9cIj5cbiAgICAgICAgJHt0aGlzLmhhc3MubG9jYWxpemUoXCJ1aS5jb21wb25lbnRzLmhpc3RvcnlfY2hhcnRzLmhpc3RvcnlfZGlzYWJsZWRcIil9XG4gICAgICA8L2Rpdj5gO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmlzTG9hZGluZ0RhdGEgJiYgIXRoaXMuaGlzdG9yeURhdGEpIHtcbiAgICAgIHJldHVybiBodG1sYDxkaXYgY2xhc3M9XCJpbmZvXCI+XG4gICAgICAgICR7dGhpcy5oYXNzLmxvY2FsaXplKFwidWkuY29tcG9uZW50cy5oaXN0b3J5X2NoYXJ0cy5sb2FkaW5nX2hpc3RvcnlcIil9XG4gICAgICA8L2Rpdj5gO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9pc0hpc3RvcnlFbXB0eSgpKSB7XG4gICAgICByZXR1cm4gaHRtbGA8ZGl2IGNsYXNzPVwiaW5mb1wiPlxuICAgICAgICAke3RoaXMuaGFzcy5sb2NhbGl6ZShcInVpLmNvbXBvbmVudHMuaGlzdG9yeV9jaGFydHMubm9faGlzdG9yeV9mb3VuZFwiKX1cbiAgICAgIDwvZGl2PmA7XG4gICAgfVxuXG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcblxuICAgIHRoaXMuX2NvbXB1dGVkRW5kVGltZSA9XG4gICAgICB0aGlzLnVwVG9Ob3cgfHwgIXRoaXMuZW5kVGltZSB8fCB0aGlzLmVuZFRpbWUgPiBub3cgPyBub3cgOiB0aGlzLmVuZFRpbWU7XG5cbiAgICB0aGlzLl9jb21wdXRlZFN0YXJ0VGltZSA9IG5ldyBEYXRlKFxuICAgICAgdGhpcy5oaXN0b3J5RGF0YS50aW1lbGluZS5yZWR1Y2UoXG4gICAgICAgIChtaW5UaW1lLCBzdGF0ZUluZm8pID0+XG4gICAgICAgICAgTWF0aC5taW4obWluVGltZSwgbmV3IERhdGUoc3RhdGVJbmZvLmRhdGFbMF0ubGFzdF9jaGFuZ2VkKS5nZXRUaW1lKCkpLFxuICAgICAgICBuZXcgRGF0ZSgpLmdldFRpbWUoKVxuICAgICAgKVxuICAgICk7XG5cbiAgICBjb25zdCBjb21iaW5lZEl0ZW1zID0gdGhpcy5oaXN0b3J5RGF0YS50aW1lbGluZS5sZW5ndGhcbiAgICAgID8gKHRoaXMudmlydHVhbGl6ZVxuICAgICAgICAgID8gY2h1bmtEYXRhKHRoaXMuaGlzdG9yeURhdGEudGltZWxpbmUsIENBTlZBU19USU1FTElORV9ST1dTX0NIVU5LKVxuICAgICAgICAgIDogW3RoaXMuaGlzdG9yeURhdGEudGltZWxpbmVdXG4gICAgICAgICkuY29uY2F0KHRoaXMuaGlzdG9yeURhdGEubGluZSlcbiAgICAgIDogdGhpcy5oaXN0b3J5RGF0YS5saW5lO1xuXG4gICAgdGhpcy5fY2hhcnRDb3VudCA9IGNvbWJpbmVkSXRlbXMubGVuZ3RoO1xuXG4gICAgcmV0dXJuIHRoaXMudmlydHVhbGl6ZVxuICAgICAgPyBodG1sYDxkaXYgY2xhc3M9XCJjb250YWluZXIgaGEtc2Nyb2xsYmFyXCIgQHNjcm9sbD0ke3RoaXMuX3NhdmVTY3JvbGxQb3N9PlxuICAgICAgICAgIDxsaXQtdmlydHVhbGl6ZXJcbiAgICAgICAgICAgIHNjcm9sbGVyXG4gICAgICAgICAgICBjbGFzcz1cImhhLXNjcm9sbGJhclwiXG4gICAgICAgICAgICAuaXRlbXM9JHtjb21iaW5lZEl0ZW1zfVxuICAgICAgICAgICAgLnJlbmRlckl0ZW09JHt0aGlzLl9yZW5kZXJIaXN0b3J5SXRlbX1cbiAgICAgICAgICA+XG4gICAgICAgICAgPC9saXQtdmlydHVhbGl6ZXI+XG4gICAgICAgIDwvZGl2PmBcbiAgICAgIDogaHRtbGAke2NvbWJpbmVkSXRlbXMubWFwKChpdGVtLCBpbmRleCkgPT5cbiAgICAgICAgICB0aGlzLl9yZW5kZXJIaXN0b3J5SXRlbShpdGVtLCBpbmRleClcbiAgICAgICAgKX1gO1xuICB9XG5cbiAgcHJpdmF0ZSBfcmVuZGVySGlzdG9yeUl0ZW0gPSAoXG4gICAgaXRlbTogVGltZWxpbmVFbnRpdHlbXSB8IExpbmVDaGFydFVuaXQsXG4gICAgaW5kZXg6IG51bWJlclxuICApID0+IHtcbiAgICBpZiAoIWl0ZW0gfHwgaW5kZXggPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIG5vdGhpbmc7XG4gICAgfVxuICAgIGlmICghQXJyYXkuaXNBcnJheShpdGVtKSkge1xuICAgICAgcmV0dXJuIGh0bWxgPGRpdiBjbGFzcz1cImVudHJ5LWNvbnRhaW5lclwiPlxuICAgICAgICA8c3RhdGUtaGlzdG9yeS1jaGFydC1saW5lXG4gICAgICAgICAgLmhhc3M9JHt0aGlzLmhhc3N9XG4gICAgICAgICAgLnVuaXQ9JHtpdGVtLnVuaXR9XG4gICAgICAgICAgLmRhdGE9JHtpdGVtLmRhdGF9XG4gICAgICAgICAgLmlkZW50aWZpZXI9JHtpdGVtLmlkZW50aWZpZXJ9XG4gICAgICAgICAgLnNob3dOYW1lcz0ke3RoaXMuc2hvd05hbWVzfVxuICAgICAgICAgIC5lbmRUaW1lPSR7dGhpcy5fY29tcHV0ZWRFbmRUaW1lfVxuICAgICAgICAgIC5wYWRkaW5nWUF4aXM9JHt0aGlzLl9tYXhZV2lkdGh9XG4gICAgICAgICAgLm5hbWVzPSR7dGhpcy5uYW1lc31cbiAgICAgICAgICAuY2hhcnRJbmRleD0ke2luZGV4fVxuICAgICAgICAgIEB5LXdpZHRoLWNoYW5nZWQ9JHt0aGlzLl95V2lkdGhDaGFuZ2VkfVxuICAgICAgICA+PC9zdGF0ZS1oaXN0b3J5LWNoYXJ0LWxpbmU+XG4gICAgICA8L2Rpdj4gYDtcbiAgICB9XG4gICAgcmV0dXJuIGh0bWxgPGRpdiBjbGFzcz1cImVudHJ5LWNvbnRhaW5lclwiPlxuICAgICAgPHN0YXRlLWhpc3RvcnktY2hhcnQtdGltZWxpbmVcbiAgICAgICAgLmhhc3M9JHt0aGlzLmhhc3N9XG4gICAgICAgIC5kYXRhPSR7aXRlbX1cbiAgICAgICAgLnN0YXJ0VGltZT0ke3RoaXMuX2NvbXB1dGVkU3RhcnRUaW1lfVxuICAgICAgICAuZW5kVGltZT0ke3RoaXMuX2NvbXB1dGVkRW5kVGltZX1cbiAgICAgICAgLnNob3dOYW1lcz0ke3RoaXMuc2hvd05hbWVzfVxuICAgICAgICAubmFtZXM9JHt0aGlzLm5hbWVzfVxuICAgICAgICAubmFycm93PSR7dGhpcy5uYXJyb3d9XG4gICAgICAgIC5jaHVua2VkPSR7dGhpcy52aXJ0dWFsaXplfVxuICAgICAgICAucGFkZGluZ1lBeGlzPSR7dGhpcy5fbWF4WVdpZHRofVxuICAgICAgICAuY2hhcnRJbmRleD0ke2luZGV4fVxuICAgICAgICBAeS13aWR0aC1jaGFuZ2VkPSR7dGhpcy5feVdpZHRoQ2hhbmdlZH1cbiAgICAgID48L3N0YXRlLWhpc3RvcnktY2hhcnQtdGltZWxpbmU+XG4gICAgPC9kaXY+IGA7XG4gIH07XG5cbiAgcHJvdGVjdGVkIHNob3VsZFVwZGF0ZShjaGFuZ2VkUHJvcHM6IFByb3BlcnR5VmFsdWVzKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICEoY2hhbmdlZFByb3BzLnNpemUgPT09IDEgJiYgY2hhbmdlZFByb3BzLmhhcyhcImhhc3NcIikpO1xuICB9XG5cbiAgcHJvdGVjdGVkIHdpbGxVcGRhdGUoKSB7XG4gICAgaWYgKCF0aGlzLmhhc1VwZGF0ZWQpIHtcbiAgICAgIGxvYWRWaXJ0dWFsaXplcigpO1xuICAgIH1cbiAgfVxuXG4gIHByb3RlY3RlZCB1cGRhdGVkKGNoYW5nZWRQcm9wczogUHJvcGVydHlWYWx1ZXMpIHtcbiAgICBpZiAoY2hhbmdlZFByb3BzLmhhcyhcIl9jaGFydENvdW50XCIpKSB7XG4gICAgICBpZiAodGhpcy5fY2hhcnRDb3VudCA8IHRoaXMuX2NoaWxkWVdpZHRocy5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy5fY2hpbGRZV2lkdGhzLmxlbmd0aCA9IHRoaXMuX2NoYXJ0Q291bnQ7XG4gICAgICAgIHRoaXMuX21heFlXaWR0aCA9IE1hdGgubWF4KC4uLk9iamVjdC52YWx1ZXModGhpcy5fY2hpbGRZV2lkdGhzKSwgMCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfeVdpZHRoQ2hhbmdlZChlOiBDdXN0b21FdmVudDxIQVNTRG9tRXZlbnRzW1wieS13aWR0aC1jaGFuZ2VkXCJdPikge1xuICAgIHRoaXMuX2NoaWxkWVdpZHRoc1tlLmRldGFpbC5jaGFydEluZGV4XSA9IGUuZGV0YWlsLnZhbHVlO1xuICAgIHRoaXMuX21heFlXaWR0aCA9IE1hdGgubWF4KC4uLk9iamVjdC52YWx1ZXModGhpcy5fY2hpbGRZV2lkdGhzKSwgMCk7XG4gIH1cblxuICBwcml2YXRlIF9pc0hpc3RvcnlFbXB0eSgpOiBib29sZWFuIHtcbiAgICBjb25zdCBoaXN0b3J5RGF0YUVtcHR5ID1cbiAgICAgICF0aGlzLmhpc3RvcnlEYXRhIHx8XG4gICAgICAhdGhpcy5oaXN0b3J5RGF0YS50aW1lbGluZSB8fFxuICAgICAgIXRoaXMuaGlzdG9yeURhdGEubGluZSB8fFxuICAgICAgKHRoaXMuaGlzdG9yeURhdGEudGltZWxpbmUubGVuZ3RoID09PSAwICYmXG4gICAgICAgIHRoaXMuaGlzdG9yeURhdGEubGluZS5sZW5ndGggPT09IDApO1xuICAgIHJldHVybiAhdGhpcy5pc0xvYWRpbmdEYXRhICYmIGhpc3RvcnlEYXRhRW1wdHk7XG4gIH1cblxuICBAZXZlbnRPcHRpb25zKHsgcGFzc2l2ZTogdHJ1ZSB9KVxuICBwcml2YXRlIF9zYXZlU2Nyb2xsUG9zKGU6IEV2ZW50KSB7XG4gICAgdGhpcy5fc2F2ZWRTY3JvbGxQb3MgPSAoZS50YXJnZXQgYXMgSFRNTERpdkVsZW1lbnQpLnNjcm9sbFRvcDtcbiAgfVxuXG4gIHN0YXRpYyBnZXQgc3R5bGVzKCk6IENTU1Jlc3VsdEdyb3VwIHtcbiAgICByZXR1cm4gY3NzYFxuICAgICAgOmhvc3Qge1xuICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgLyogaGVpZ2h0IG9mIHNpbmdsZSB0aW1lbGluZSBjaGFydCA9IDYwcHggKi9cbiAgICAgICAgbWluLWhlaWdodDogNjBweDtcbiAgICAgIH1cblxuICAgICAgOmhvc3QoW3ZpcnR1YWxpemVdKSB7XG4gICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgIH1cblxuICAgICAgLmluZm8ge1xuICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgIGxpbmUtaGVpZ2h0OiA2MHB4O1xuICAgICAgICBjb2xvcjogdmFyKC0tc2Vjb25kYXJ5LXRleHQtY29sb3IpO1xuICAgICAgfVxuXG4gICAgICAuY29udGFpbmVyIHtcbiAgICAgICAgbWF4LWhlaWdodDogdmFyKC0taGlzdG9yeS1tYXgtaGVpZ2h0KTtcbiAgICAgIH1cblxuICAgICAgLmVudHJ5LWNvbnRhaW5lciB7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgfVxuXG4gICAgICAuZW50cnktY29udGFpbmVyOmhvdmVyIHtcbiAgICAgICAgei1pbmRleDogMTtcbiAgICAgIH1cblxuICAgICAgOmhvc3QoW3ZpcnR1YWxpemVdKSAuZW50cnktY29udGFpbmVyIHtcbiAgICAgICAgcGFkZGluZy1sZWZ0OiAxcHg7XG4gICAgICAgIHBhZGRpbmctcmlnaHQ6IDFweDtcbiAgICAgIH1cblxuICAgICAgLmNvbnRhaW5lcixcbiAgICAgIGxpdC12aXJ0dWFsaXplciB7XG4gICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICB9XG5cbiAgICAgIGxpdC12aXJ0dWFsaXplciB7XG4gICAgICAgIGNvbnRhaW46IHNpemUgbGF5b3V0ICFpbXBvcnRhbnQ7XG4gICAgICB9XG5cbiAgICAgIHN0YXRlLWhpc3RvcnktY2hhcnQtdGltZWxpbmUsXG4gICAgICBzdGF0ZS1oaXN0b3J5LWNoYXJ0LWxpbmUge1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgIH1cbiAgICBgO1xuICB9XG59XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIEhUTUxFbGVtZW50VGFnTmFtZU1hcCB7XG4gICAgXCJzdGF0ZS1oaXN0b3J5LWNoYXJ0c1wiOiBTdGF0ZUhpc3RvcnlDaGFydHM7XG4gIH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/components/chart/state-history-charts.ts\n");

/***/ }),

/***/ "./src/resources/virtualizer.ts":
/*!**************************************!*\
  !*** ./src/resources/virtualizer.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   loadVirtualizer: () => (/* binding */ loadVirtualizer)\n/* harmony export */ });\n/* harmony import */ var _resize_observer_polyfill__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./resize-observer.polyfill */ \"./src/resources/resize-observer.polyfill.ts\");\n\nconst loadVirtualizer = async () => {\n  await (0,_resize_observer_polyfill__WEBPACK_IMPORTED_MODULE_0__.loadPolyfillIfNeeded)();\n  await Promise.all(/*! import() */[__webpack_require__.e(\"vendors-node_modules_lit_directives_repeat_js\"), __webpack_require__.e(\"vendors-node_modules_lit-labs_virtualizer_Virtualizer_js\"), __webpack_require__.e(\"vendors-node_modules_lit-labs_virtualizer_lit-virtualizer_js\")]).then(__webpack_require__.bind(__webpack_require__, /*! @lit-labs/virtualizer */ \"./node_modules/@lit-labs/virtualizer/lit-virtualizer.js\"));\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcmVzb3VyY2VzL3ZpcnR1YWxpemVyLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2hvbWUtYXNzaXN0YW50LWZyb250ZW5kLy4vc3JjL3Jlc291cmNlcy92aXJ0dWFsaXplci50cz80YjA0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGxvYWRQb2x5ZmlsbElmTmVlZGVkIH0gZnJvbSBcIi4vcmVzaXplLW9ic2VydmVyLnBvbHlmaWxsXCI7XG5cbmV4cG9ydCBjb25zdCBsb2FkVmlydHVhbGl6ZXIgPSBhc3luYyAoKSA9PiB7XG4gIGF3YWl0IGxvYWRQb2x5ZmlsbElmTmVlZGVkKCk7XG4gIGF3YWl0IGltcG9ydChcIkBsaXQtbGFicy92aXJ0dWFsaXplclwiKTtcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/resources/virtualizer.ts\n");

/***/ })

}]);