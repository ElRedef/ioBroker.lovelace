"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkhome_assistant_frontend"] = self["webpackChunkhome_assistant_frontend"] || []).push([["src_panels_logbook_ha-logbook_ts-src_util_brands-url_ts"],{

/***/ "./src/common/array/ensure-array.ts":
/*!******************************************!*\
  !*** ./src/common/array/ensure-array.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ensureArray: () => (/* binding */ ensureArray)\n/* harmony export */ });\nfunction ensureArray(value) {\n  if (value === undefined || Array.isArray(value)) {\n    return value;\n  }\n  return [value];\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tbW9uL2FycmF5L2Vuc3VyZS1hcnJheS50cy5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaG9tZS1hc3Npc3RhbnQtZnJvbnRlbmQvLi9zcmMvY29tbW9uL2FycmF5L2Vuc3VyZS1hcnJheS50cz81Y2QwIl0sInNvdXJjZXNDb250ZW50IjpbInR5cGUgTm9uVW5kZWZpbmVkPFQ+ID0gVCBleHRlbmRzIHVuZGVmaW5lZCA/IG5ldmVyIDogVDtcblxuZXhwb3J0IGZ1bmN0aW9uIGVuc3VyZUFycmF5KHZhbHVlOiB1bmRlZmluZWQpOiB1bmRlZmluZWQ7XG5leHBvcnQgZnVuY3Rpb24gZW5zdXJlQXJyYXk8VD4odmFsdWU6IFQgfCBUW10pOiBOb25VbmRlZmluZWQ8VD5bXTtcbmV4cG9ydCBmdW5jdGlvbiBlbnN1cmVBcnJheTxUPih2YWx1ZTogVCB8IHJlYWRvbmx5IFRbXSk6IE5vblVuZGVmaW5lZDxUPltdO1xuZXhwb3J0IGZ1bmN0aW9uIGVuc3VyZUFycmF5KHZhbHVlKSB7XG4gIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8IEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIHJldHVybiBbdmFsdWVdO1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/common/array/ensure-array.ts\n");

/***/ }),

/***/ "./src/components/ha-circular-progress.ts":
/*!************************************************!*\
  !*** ./src/components/ha-circular-progress.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HaCircularProgress: () => (/* binding */ HaCircularProgress)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_decorate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/decorate */ \"./node_modules/@babel/runtime/helpers/esm/decorate.js\");\n/* harmony import */ var _babel_runtime_helpers_get__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/get */ \"./node_modules/@babel/runtime/helpers/esm/get.js\");\n/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/getPrototypeOf */ \"./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\");\n/* harmony import */ var _material_mwc_circular_progress__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @material/mwc-circular-progress */ \"./node_modules/@material/mwc-circular-progress/mwc-circular-progress.js\");\n/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! lit */ \"./node_modules/lit/index.js\");\n/* harmony import */ var lit_decorators__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! lit/decorators */ \"./node_modules/lit/decorators.js\");\n\n\n\n\n\n\nlet HaCircularProgress = (0,_babel_runtime_helpers_decorate__WEBPACK_IMPORTED_MODULE_0__[\"default\"])([(0,lit_decorators__WEBPACK_IMPORTED_MODULE_5__.customElement)(\"ha-circular-progress\")], function (_initialize, _CircularProgress) {\n  class HaCircularProgress extends _CircularProgress {\n    constructor(...args) {\n      super(...args);\n      _initialize(this);\n    }\n  }\n  return {\n    F: HaCircularProgress,\n    d: [{\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_5__.property)({\n        type: Boolean\n      })],\n      key: \"active\",\n      value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_5__.property)()],\n      key: \"alt\",\n      value() {\n        return \"Loading\";\n      }\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_5__.property)()],\n      key: \"size\",\n      value() {\n        return \"medium\";\n      }\n    }, {\n      kind: \"set\",\n      key: \"density\",\n      value:\n      // @ts-ignore\n      function density(_) {\n        // just a dummy\n      }\n    }, {\n      kind: \"get\",\n      key: \"density\",\n      value: function density() {\n        switch (this.size) {\n          case \"tiny\":\n            return -8;\n          case \"small\":\n            return -5;\n          case \"medium\":\n            return 0;\n          case \"large\":\n            return 5;\n          default:\n            return 0;\n        }\n      }\n\n      // @ts-ignore\n    }, {\n      kind: \"set\",\n      key: \"indeterminate\",\n      value: function indeterminate(_) {\n        // just a dummy\n      }\n    }, {\n      kind: \"get\",\n      key: \"indeterminate\",\n      value: function indeterminate() {\n        return this.active;\n      }\n    }, {\n      kind: \"get\",\n      static: true,\n      key: \"styles\",\n      value: function styles() {\n        return [(0,_babel_runtime_helpers_get__WEBPACK_IMPORTED_MODULE_1__[\"default\"])((0,_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(HaCircularProgress), \"styles\", this), lit__WEBPACK_IMPORTED_MODULE_4__.css`\n        :host {\n          overflow: hidden;\n        }\n      `];\n      }\n    }]\n  };\n}, _material_mwc_circular_progress__WEBPACK_IMPORTED_MODULE_3__.CircularProgress);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9oYS1jaXJjdWxhci1wcm9ncmVzcy50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBaURBO0FBQUE7QUFBQTtBQWpEQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaG9tZS1hc3Npc3RhbnQtZnJvbnRlbmQvLi9zcmMvY29tcG9uZW50cy9oYS1jaXJjdWxhci1wcm9ncmVzcy50cz8wNjljIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENpcmN1bGFyUHJvZ3Jlc3MgfSBmcm9tIFwiQG1hdGVyaWFsL213Yy1jaXJjdWxhci1wcm9ncmVzc1wiO1xuaW1wb3J0IHsgQ1NTUmVzdWx0R3JvdXAsIGNzcyB9IGZyb20gXCJsaXRcIjtcbmltcG9ydCB7IGN1c3RvbUVsZW1lbnQsIHByb3BlcnR5IH0gZnJvbSBcImxpdC9kZWNvcmF0b3JzXCI7XG5cbkBjdXN0b21FbGVtZW50KFwiaGEtY2lyY3VsYXItcHJvZ3Jlc3NcIilcbi8vIEB0cy1pZ25vcmVcbmV4cG9ydCBjbGFzcyBIYUNpcmN1bGFyUHJvZ3Jlc3MgZXh0ZW5kcyBDaXJjdWxhclByb2dyZXNzIHtcbiAgQHByb3BlcnR5KHsgdHlwZTogQm9vbGVhbiB9KVxuICBwdWJsaWMgYWN0aXZlID0gZmFsc2U7XG5cbiAgQHByb3BlcnR5KClcbiAgcHVibGljIGFsdCA9IFwiTG9hZGluZ1wiO1xuXG4gIEBwcm9wZXJ0eSgpXG4gIHB1YmxpYyBzaXplOiBcInRpbnlcIiB8IFwic21hbGxcIiB8IFwibWVkaXVtXCIgfCBcImxhcmdlXCIgPSBcIm1lZGl1bVwiO1xuXG4gIC8vIEB0cy1pZ25vcmVcbiAgcHVibGljIHNldCBkZW5zaXR5KF8pIHtcbiAgICAvLyBqdXN0IGEgZHVtbXlcbiAgfVxuXG4gIHB1YmxpYyBnZXQgZGVuc2l0eSgpIHtcbiAgICBzd2l0Y2ggKHRoaXMuc2l6ZSkge1xuICAgICAgY2FzZSBcInRpbnlcIjpcbiAgICAgICAgcmV0dXJuIC04O1xuICAgICAgY2FzZSBcInNtYWxsXCI6XG4gICAgICAgIHJldHVybiAtNTtcbiAgICAgIGNhc2UgXCJtZWRpdW1cIjpcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgICBjYXNlIFwibGFyZ2VcIjpcbiAgICAgICAgcmV0dXJuIDU7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gIH1cblxuICAvLyBAdHMtaWdub3JlXG4gIHB1YmxpYyBzZXQgaW5kZXRlcm1pbmF0ZShfKSB7XG4gICAgLy8ganVzdCBhIGR1bW15XG4gIH1cblxuICBwdWJsaWMgZ2V0IGluZGV0ZXJtaW5hdGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuYWN0aXZlO1xuICB9XG5cbiAgc3RhdGljIGdldCBzdHlsZXMoKTogQ1NTUmVzdWx0R3JvdXAge1xuICAgIHJldHVybiBbXG4gICAgICBzdXBlci5zdHlsZXMsXG4gICAgICBjc3NgXG4gICAgICAgIDpob3N0IHtcbiAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICB9XG4gICAgICBgLFxuICAgIF07XG4gIH1cbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICBpbnRlcmZhY2UgSFRNTEVsZW1lbnRUYWdOYW1lTWFwIHtcbiAgICBcImhhLWNpcmN1bGFyLXByb2dyZXNzXCI6IEhhQ2lyY3VsYXJQcm9ncmVzcztcbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/components/ha-circular-progress.ts\n");

/***/ }),

/***/ "./src/data/user.ts":
/*!**************************!*\
  !*** ./src/data/user.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GROUPS: () => (/* binding */ GROUPS),\n/* harmony export */   SYSTEM_GROUP_ID_ADMIN: () => (/* binding */ SYSTEM_GROUP_ID_ADMIN),\n/* harmony export */   SYSTEM_GROUP_ID_READ_ONLY: () => (/* binding */ SYSTEM_GROUP_ID_READ_ONLY),\n/* harmony export */   SYSTEM_GROUP_ID_USER: () => (/* binding */ SYSTEM_GROUP_ID_USER),\n/* harmony export */   computeUserBadges: () => (/* binding */ computeUserBadges),\n/* harmony export */   computeUserInitials: () => (/* binding */ computeUserInitials),\n/* harmony export */   createUser: () => (/* binding */ createUser),\n/* harmony export */   deleteUser: () => (/* binding */ deleteUser),\n/* harmony export */   fetchUsers: () => (/* binding */ fetchUsers),\n/* harmony export */   updateUser: () => (/* binding */ updateUser)\n/* harmony export */ });\nconst mdiCrownCircleOutline = \"M12 2C6.47 2 2 6.5 2 12C2 17.5 6.5 22 12 22S22 17.5 22 12 17.5 2 12 2M12 20C7.58 20 4 16.42 4 12C4 7.58 7.58 4 12 4S20 7.58 20 12C20 16.42 16.42 20 12 20M8 14L7 8L10 10L12 7L14 10L17 8L16 14H8M8.56 16C8.22 16 8 15.78 8 15.44V15H16V15.44C16 15.78 15.78 16 15.44 16H8.56Z\";\nconst mdiAlphaSCircleOutline = \"M11,7H15V9H11V11H13A2,2 0 0,1 15,13V15A2,2 0 0,1 13,17H9V15H13V13H11A2,2 0 0,1 9,11V9A2,2 0 0,1 11,7M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4Z\";\nconst mdiHomeCircleOutline = \"M12 20C7.6 20 4 16.4 4 12S7.6 4 12 4 20 7.6 20 12 16.4 20 12 20M12 2C6.5 2 2 6.5 2 12S6.5 22 12 22 22 17.5 22 12 17.5 2 12 2M11 14H13V17H16V12H18L12 7L6 12H8V17H11V14\";\nconst mdiCancel = \"M12 2C17.5 2 22 6.5 22 12S17.5 22 12 22 2 17.5 2 12 6.5 2 12 2M12 4C10.1 4 8.4 4.6 7.1 5.7L18.3 16.9C19.3 15.5 20 13.8 20 12C20 7.6 16.4 4 12 4M16.9 18.3L5.7 7.1C4.6 8.4 4 10.1 4 12C4 16.4 7.6 20 12 20C13.9 20 15.6 19.4 16.9 18.3Z\";\nconst SYSTEM_GROUP_ID_ADMIN = \"system-admin\";\nconst SYSTEM_GROUP_ID_USER = \"system-users\";\nconst SYSTEM_GROUP_ID_READ_ONLY = \"system-read-only\";\nconst GROUPS = [SYSTEM_GROUP_ID_USER, SYSTEM_GROUP_ID_ADMIN];\nconst fetchUsers = async hass => hass.callWS({\n  type: \"config/auth/list\"\n});\nconst createUser = async (hass, name, group_ids, local_only) => hass.callWS({\n  type: \"config/auth/create\",\n  name,\n  group_ids,\n  local_only\n});\nconst updateUser = async (hass, userId, params) => hass.callWS({\n  ...params,\n  type: \"config/auth/update\",\n  user_id: userId\n});\nconst deleteUser = async (hass, userId) => hass.callWS({\n  type: \"config/auth/delete\",\n  user_id: userId\n});\nconst computeUserInitials = name => {\n  if (!name) {\n    return \"?\";\n  }\n  return name.trim()\n  // Split by space and take first 3 words\n  .split(\" \").slice(0, 3)\n  // Of each word, take first letter\n  .map(s => s.substring(0, 1)).join(\"\");\n};\nconst OWNER_ICON = mdiCrownCircleOutline;\nconst SYSTEM_ICON = mdiAlphaSCircleOutline;\nconst LOCAL_ICON = mdiHomeCircleOutline;\nconst DISABLED_ICON = mdiCancel;\nconst computeUserBadges = (hass, user, includeSystem) => {\n  const labels = [];\n  const translate = key => hass.localize(`ui.panel.config.users.${key}`);\n  if (user.is_owner) {\n    labels.push([OWNER_ICON, translate(\"is_owner\")]);\n  }\n  if (includeSystem && user.system_generated) {\n    labels.push([SYSTEM_ICON, translate(\"is_system\")]);\n  }\n  if (user.local_only) {\n    labels.push([LOCAL_ICON, translate(\"is_local\")]);\n  }\n  if (!user.is_active) {\n    labels.push([DISABLED_ICON, translate(\"is_not_active\")]);\n  }\n  return labels;\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZGF0YS91c2VyLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBU0E7QUFDQTtBQUNBO0FBRUE7QUFxQkE7QUFFQTtBQUNBO0FBRUE7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQUE7QUFHQTtBQUFBO0FBSUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBS0E7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ob21lLWFzc2lzdGFudC1mcm9udGVuZC8uL3NyYy9kYXRhL3VzZXIudHM/ZWZiNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBtZGlDcm93bkNpcmNsZU91dGxpbmUsXG4gIG1kaUFscGhhU0NpcmNsZU91dGxpbmUsXG4gIG1kaUhvbWVDaXJjbGVPdXRsaW5lLFxuICBtZGlDYW5jZWwsXG59IGZyb20gXCJAbWRpL2pzXCI7XG5pbXBvcnQgeyBIb21lQXNzaXN0YW50LCBUcmFuc2xhdGlvbkRpY3QgfSBmcm9tIFwiLi4vdHlwZXNcIjtcbmltcG9ydCB7IENyZWRlbnRpYWwgfSBmcm9tIFwiLi9hdXRoXCI7XG5cbmV4cG9ydCBjb25zdCBTWVNURU1fR1JPVVBfSURfQURNSU4gPSBcInN5c3RlbS1hZG1pblwiO1xuZXhwb3J0IGNvbnN0IFNZU1RFTV9HUk9VUF9JRF9VU0VSID0gXCJzeXN0ZW0tdXNlcnNcIjtcbmV4cG9ydCBjb25zdCBTWVNURU1fR1JPVVBfSURfUkVBRF9PTkxZID0gXCJzeXN0ZW0tcmVhZC1vbmx5XCI7XG5cbmV4cG9ydCBjb25zdCBHUk9VUFMgPSBbU1lTVEVNX0dST1VQX0lEX1VTRVIsIFNZU1RFTV9HUk9VUF9JRF9BRE1JTl07XG5cbmV4cG9ydCBpbnRlcmZhY2UgVXNlciB7XG4gIGlkOiBzdHJpbmc7XG4gIHVzZXJuYW1lOiBzdHJpbmcgfCBudWxsO1xuICBuYW1lOiBzdHJpbmc7XG4gIGlzX293bmVyOiBib29sZWFuO1xuICBpc19hY3RpdmU6IGJvb2xlYW47XG4gIGxvY2FsX29ubHk6IGJvb2xlYW47XG4gIHN5c3RlbV9nZW5lcmF0ZWQ6IGJvb2xlYW47XG4gIGdyb3VwX2lkczogKGtleW9mIFRyYW5zbGF0aW9uRGljdFtcImdyb3Vwc1wiXSlbXTtcbiAgY3JlZGVudGlhbHM6IENyZWRlbnRpYWxbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBVcGRhdGVVc2VyUGFyYW1zIHtcbiAgbmFtZT86IFVzZXJbXCJuYW1lXCJdO1xuICBpc19hY3RpdmU/OiBVc2VyW1wiaXNfYWN0aXZlXCJdO1xuICBncm91cF9pZHM/OiBVc2VyW1wiZ3JvdXBfaWRzXCJdO1xuICBsb2NhbF9vbmx5PzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGNvbnN0IGZldGNoVXNlcnMgPSBhc3luYyAoaGFzczogSG9tZUFzc2lzdGFudCkgPT5cbiAgaGFzcy5jYWxsV1M8VXNlcltdPih7XG4gICAgdHlwZTogXCJjb25maWcvYXV0aC9saXN0XCIsXG4gIH0pO1xuXG5leHBvcnQgY29uc3QgY3JlYXRlVXNlciA9IGFzeW5jIChcbiAgaGFzczogSG9tZUFzc2lzdGFudCxcbiAgbmFtZTogc3RyaW5nLFxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmU6IHZhcmlhYmxlLW5hbWVcbiAgZ3JvdXBfaWRzPzogVXNlcltcImdyb3VwX2lkc1wiXSxcbiAgbG9jYWxfb25seT86IGJvb2xlYW5cbikgPT5cbiAgaGFzcy5jYWxsV1M8eyB1c2VyOiBVc2VyIH0+KHtcbiAgICB0eXBlOiBcImNvbmZpZy9hdXRoL2NyZWF0ZVwiLFxuICAgIG5hbWUsXG4gICAgZ3JvdXBfaWRzLFxuICAgIGxvY2FsX29ubHksXG4gIH0pO1xuXG5leHBvcnQgY29uc3QgdXBkYXRlVXNlciA9IGFzeW5jIChcbiAgaGFzczogSG9tZUFzc2lzdGFudCxcbiAgdXNlcklkOiBzdHJpbmcsXG4gIHBhcmFtczogVXBkYXRlVXNlclBhcmFtc1xuKSA9PlxuICBoYXNzLmNhbGxXUzx7IHVzZXI6IFVzZXIgfT4oe1xuICAgIC4uLnBhcmFtcyxcbiAgICB0eXBlOiBcImNvbmZpZy9hdXRoL3VwZGF0ZVwiLFxuICAgIHVzZXJfaWQ6IHVzZXJJZCxcbiAgfSk7XG5cbmV4cG9ydCBjb25zdCBkZWxldGVVc2VyID0gYXN5bmMgKGhhc3M6IEhvbWVBc3Npc3RhbnQsIHVzZXJJZDogc3RyaW5nKSA9PlxuICBoYXNzLmNhbGxXUzx2b2lkPih7XG4gICAgdHlwZTogXCJjb25maWcvYXV0aC9kZWxldGVcIixcbiAgICB1c2VyX2lkOiB1c2VySWQsXG4gIH0pO1xuXG5leHBvcnQgY29uc3QgY29tcHV0ZVVzZXJJbml0aWFscyA9IChuYW1lOiBzdHJpbmcpID0+IHtcbiAgaWYgKCFuYW1lKSB7XG4gICAgcmV0dXJuIFwiP1wiO1xuICB9XG4gIHJldHVybiAoXG4gICAgbmFtZVxuICAgICAgLnRyaW0oKVxuICAgICAgLy8gU3BsaXQgYnkgc3BhY2UgYW5kIHRha2UgZmlyc3QgMyB3b3Jkc1xuICAgICAgLnNwbGl0KFwiIFwiKVxuICAgICAgLnNsaWNlKDAsIDMpXG4gICAgICAvLyBPZiBlYWNoIHdvcmQsIHRha2UgZmlyc3QgbGV0dGVyXG4gICAgICAubWFwKChzKSA9PiBzLnN1YnN0cmluZygwLCAxKSlcbiAgICAgIC5qb2luKFwiXCIpXG4gICk7XG59O1xuXG5jb25zdCBPV05FUl9JQ09OID0gbWRpQ3Jvd25DaXJjbGVPdXRsaW5lO1xuY29uc3QgU1lTVEVNX0lDT04gPSBtZGlBbHBoYVNDaXJjbGVPdXRsaW5lO1xuY29uc3QgTE9DQUxfSUNPTiA9IG1kaUhvbWVDaXJjbGVPdXRsaW5lO1xuY29uc3QgRElTQUJMRURfSUNPTiA9IG1kaUNhbmNlbDtcblxuZXhwb3J0IGNvbnN0IGNvbXB1dGVVc2VyQmFkZ2VzID0gKFxuICBoYXNzOiBIb21lQXNzaXN0YW50LFxuICB1c2VyOiBVc2VyLFxuICBpbmNsdWRlU3lzdGVtOiBib29sZWFuXG4pID0+IHtcbiAgY29uc3QgbGFiZWxzOiBbc3RyaW5nLCBzdHJpbmddW10gPSBbXTtcbiAgY29uc3QgdHJhbnNsYXRlID0gKFxuICAgIGtleTogRXh0cmFjdDxcbiAgICAgIGtleW9mIFRyYW5zbGF0aW9uRGljdFtcInVpXCJdW1wicGFuZWxcIl1bXCJjb25maWdcIl1bXCJ1c2Vyc1wiXSxcbiAgICAgIGBpc18ke3N0cmluZ31gXG4gICAgPlxuICApID0+IGhhc3MubG9jYWxpemUoYHVpLnBhbmVsLmNvbmZpZy51c2Vycy4ke2tleX1gKTtcblxuICBpZiAodXNlci5pc19vd25lcikge1xuICAgIGxhYmVscy5wdXNoKFtPV05FUl9JQ09OLCB0cmFuc2xhdGUoXCJpc19vd25lclwiKV0pO1xuICB9XG4gIGlmIChpbmNsdWRlU3lzdGVtICYmIHVzZXIuc3lzdGVtX2dlbmVyYXRlZCkge1xuICAgIGxhYmVscy5wdXNoKFtTWVNURU1fSUNPTiwgdHJhbnNsYXRlKFwiaXNfc3lzdGVtXCIpXSk7XG4gIH1cbiAgaWYgKHVzZXIubG9jYWxfb25seSkge1xuICAgIGxhYmVscy5wdXNoKFtMT0NBTF9JQ09OLCB0cmFuc2xhdGUoXCJpc19sb2NhbFwiKV0pO1xuICB9XG4gIGlmICghdXNlci5pc19hY3RpdmUpIHtcbiAgICBsYWJlbHMucHVzaChbRElTQUJMRURfSUNPTiwgdHJhbnNsYXRlKFwiaXNfbm90X2FjdGl2ZVwiKV0pO1xuICB9XG5cbiAgcmV0dXJuIGxhYmVscztcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/data/user.ts\n");

/***/ }),

/***/ "./src/panels/logbook/ha-logbook.ts":
/*!******************************************!*\
  !*** ./src/panels/logbook/ha-logbook.ts ***!
  \******************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HaLogbook: () => (/* binding */ HaLogbook)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_decorate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/decorate */ \"./node_modules/@babel/runtime/helpers/esm/decorate.js\");\n/* harmony import */ var _babel_runtime_helpers_get__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/get */ \"./node_modules/@babel/runtime/helpers/esm/get.js\");\n/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/getPrototypeOf */ \"./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\");\n/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lit */ \"./node_modules/lit/index.js\");\n/* harmony import */ var lit_decorators__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! lit/decorators */ \"./node_modules/lit/decorators.js\");\n/* harmony import */ var _common_array_ensure_array__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../common/array/ensure-array */ \"./src/common/array/ensure-array.ts\");\n/* harmony import */ var _common_config_is_component_loaded__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../common/config/is_component_loaded */ \"./src/common/config/is_component_loaded.ts\");\n/* harmony import */ var _common_entity_compute_state_domain__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../common/entity/compute_state_domain */ \"./src/common/entity/compute_state_domain.ts\");\n/* harmony import */ var _common_util_throttle__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../common/util/throttle */ \"./src/common/util/throttle.ts\");\n/* harmony import */ var _components_ha_circular_progress__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../components/ha-circular-progress */ \"./src/components/ha-circular-progress.ts\");\n/* harmony import */ var _data_logbook__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../data/logbook */ \"./src/data/logbook.ts\");\n/* harmony import */ var _data_trace__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../data/trace */ \"./src/data/trace.ts\");\n/* harmony import */ var _data_user__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../data/user */ \"./src/data/user.ts\");\n/* harmony import */ var _ha_logbook_renderer__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./ha-logbook-renderer */ \"./src/panels/logbook/ha-logbook-renderer.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_data_logbook__WEBPACK_IMPORTED_MODULE_10__, _ha_logbook_renderer__WEBPACK_IMPORTED_MODULE_13__]);\n([_data_logbook__WEBPACK_IMPORTED_MODULE_10__, _ha_logbook_renderer__WEBPACK_IMPORTED_MODULE_13__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst findStartOfRecentTime = (now, recentTime) => new Date(now.getTime() - recentTime * 1000).getTime() / 1000;\nconst idsChanged = (oldIds, newIds) => {\n  if (oldIds === undefined && newIds === undefined) {\n    return false;\n  }\n  return !oldIds || !newIds || oldIds.length !== newIds.length || !oldIds.every(val => newIds.includes(val));\n};\nlet HaLogbook = (0,_babel_runtime_helpers_decorate__WEBPACK_IMPORTED_MODULE_0__[\"default\"])([(0,lit_decorators__WEBPACK_IMPORTED_MODULE_4__.customElement)(\"ha-logbook\")], function (_initialize, _LitElement) {\n  class HaLogbook extends _LitElement {\n    constructor(...args) {\n      super(...args);\n      _initialize(this);\n    }\n  }\n  return {\n    F: HaLogbook,\n    d: [{\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_4__.property)({\n        attribute: false\n      })],\n      key: \"hass\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_4__.property)()],\n      key: \"time\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_4__.property)()],\n      key: \"entityIds\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_4__.property)()],\n      key: \"deviceIds\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_4__.property)({\n        type: Boolean,\n        attribute: \"narrow\"\n      })],\n      key: \"narrow\",\n      value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_4__.property)({\n        type: Boolean,\n        attribute: \"virtualize\",\n        reflect: true\n      })],\n      key: \"virtualize\",\n      value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_4__.property)({\n        type: Boolean,\n        attribute: \"no-icon\"\n      })],\n      key: \"noIcon\",\n      value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_4__.property)({\n        type: Boolean,\n        attribute: \"no-name\"\n      })],\n      key: \"noName\",\n      value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_4__.property)({\n        type: Boolean,\n        attribute: \"show-indicator\"\n      })],\n      key: \"showIndicator\",\n      value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_4__.property)({\n        type: Boolean,\n        attribute: \"relative-time\"\n      })],\n      key: \"relativeTime\",\n      value() {\n        return false;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_4__.property)({\n        type: Boolean\n      })],\n      key: \"showMoreLink\",\n      value() {\n        return true;\n      }\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_4__.state)()],\n      key: \"_logbookEntries\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_4__.state)()],\n      key: \"_traceContexts\",\n      value() {\n        return {};\n      }\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_4__.state)()],\n      key: \"_userIdToName\",\n      value() {\n        return {};\n      }\n    }, {\n      kind: \"field\",\n      decorators: [(0,lit_decorators__WEBPACK_IMPORTED_MODULE_4__.state)()],\n      key: \"_error\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      key: \"_subscribed\",\n      value: void 0\n    }, {\n      kind: \"field\",\n      key: \"_liveUpdatesEnabled\",\n      value() {\n        return true;\n      }\n    }, {\n      kind: \"field\",\n      key: \"_pendingStreamMessages\",\n      value() {\n        return [];\n      }\n    }, {\n      kind: \"field\",\n      key: \"_throttleGetLogbookEntries\",\n      value() {\n        return (0,_common_util_throttle__WEBPACK_IMPORTED_MODULE_8__.throttle)(() => this._getLogBookData(), 1000);\n      }\n    }, {\n      kind: \"method\",\n      key: \"render\",\n      value: function render() {\n        if (!(0,_common_config_is_component_loaded__WEBPACK_IMPORTED_MODULE_6__.isComponentLoaded)(this.hass, \"logbook\")) {\n          return lit__WEBPACK_IMPORTED_MODULE_3__.nothing;\n        }\n        if (this._error) {\n          return lit__WEBPACK_IMPORTED_MODULE_3__.html`<div class=\"no-entries\">\n        ${`${this.hass.localize(\"ui.components.logbook.retrieval_error\")}: ${this._error}`}\n      </div>`;\n        }\n        if (this._logbookEntries === undefined) {\n          return lit__WEBPACK_IMPORTED_MODULE_3__.html`\n        <div class=\"progress-wrapper\">\n          <ha-circular-progress\n            active\n            alt=${this.hass.localize(\"ui.common.loading\")}\n          ></ha-circular-progress>\n        </div>\n      `;\n        }\n        if (this._logbookEntries.length === 0) {\n          return lit__WEBPACK_IMPORTED_MODULE_3__.html`<div class=\"no-entries\">\n        ${this.hass.localize(\"ui.components.logbook.entries_not_found\")}\n      </div>`;\n        }\n        return lit__WEBPACK_IMPORTED_MODULE_3__.html`\n      <ha-logbook-renderer\n        .hass=${this.hass}\n        .narrow=${this.narrow}\n        .virtualize=${this.virtualize}\n        .noIcon=${this.noIcon}\n        .noName=${this.noName}\n        .showIndicator=${this.showIndicator}\n        .relativeTime=${this.relativeTime}\n        .entries=${this._logbookEntries}\n        .traceContexts=${this._traceContexts}\n        .userIdToName=${this._userIdToName}\n        @hass-logbook-live=${this._handleLogbookLive}\n      ></ha-logbook-renderer>\n    `;\n      }\n    }, {\n      kind: \"method\",\n      key: \"refresh\",\n      value: async function refresh(force = false) {\n        if (!force && (this._subscribed || this._logbookEntries === undefined)) {\n          return;\n        }\n        this._unsubscribeSetLoading();\n        this._throttleGetLogbookEntries.cancel();\n        this._updateTraceContexts.cancel();\n        this._updateUsers.cancel();\n        if (\"range\" in this.time) {\n          (0,_data_logbook__WEBPACK_IMPORTED_MODULE_10__.clearLogbookCache)(this.time.range[0].toISOString(), this.time.range[1].toISOString());\n        }\n        this._throttleGetLogbookEntries();\n      }\n    }, {\n      kind: \"method\",\n      key: \"firstUpdated\",\n      value: function firstUpdated(changedProps) {\n        (0,_babel_runtime_helpers_get__WEBPACK_IMPORTED_MODULE_1__[\"default\"])((0,_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(HaLogbook.prototype), \"firstUpdated\", this).call(this, changedProps);\n      }\n    }, {\n      kind: \"method\",\n      key: \"shouldUpdate\",\n      value: function shouldUpdate(changedProps) {\n        if (changedProps.size !== 1 || !changedProps.has(\"hass\")) {\n          return true;\n        }\n        // We only respond to hass changes if the translations changed\n        const oldHass = changedProps.get(\"hass\");\n        return !oldHass || oldHass.localize !== this.hass.localize;\n      }\n    }, {\n      kind: \"method\",\n      key: \"updated\",\n      value: function updated(changedProps) {\n        let changed = changedProps.has(\"time\");\n        for (const key of [\"entityIds\", \"deviceIds\"]) {\n          if (!changedProps.has(key)) {\n            continue;\n          }\n          const oldValue = changedProps.get(key);\n          const curValue = this[key];\n\n          // If they make the filter more specific we want\n          // to change the subscription since it will reduce\n          // the overhead on the backend as the event stream\n          // can be a firehose for all state events.\n          if (idsChanged(oldValue, curValue)) {\n            changed = true;\n            break;\n          }\n        }\n        if (changed) {\n          this.refresh(true);\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"_handleLogbookLive\",\n      value: function _handleLogbookLive(ev) {\n        if (ev.detail.enable && !this._liveUpdatesEnabled) {\n          // Process everything we queued up while we were scrolled down\n          this._pendingStreamMessages.forEach(msg => this._processStreamMessage(msg));\n          this._pendingStreamMessages = [];\n        }\n        this._liveUpdatesEnabled = ev.detail.enable;\n      }\n    }, {\n      kind: \"get\",\n      key: \"_filterAlwaysEmptyResults\",\n      value: function _filterAlwaysEmptyResults() {\n        const entityIds = (0,_common_array_ensure_array__WEBPACK_IMPORTED_MODULE_5__.ensureArray)(this.entityIds);\n        const deviceIds = (0,_common_array_ensure_array__WEBPACK_IMPORTED_MODULE_5__.ensureArray)(this.deviceIds);\n\n        // If all specified filters are empty lists, we can return an empty list.\n        return (entityIds || deviceIds) && (!entityIds || entityIds.length === 0) && (!deviceIds || deviceIds.length === 0);\n      }\n    }, {\n      kind: \"method\",\n      key: \"_unsubscribe\",\n      value: function _unsubscribe() {\n        if (this._subscribed) {\n          this._subscribed.then(unsub => unsub ? unsub().catch(() => {\n            // The backend will cancel the subscription if\n            // we subscribe to entities that will all be\n            // filtered away\n          }) : undefined);\n          this._subscribed = undefined;\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"connectedCallback\",\n      value: function connectedCallback() {\n        (0,_babel_runtime_helpers_get__WEBPACK_IMPORTED_MODULE_1__[\"default\"])((0,_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(HaLogbook.prototype), \"connectedCallback\", this).call(this);\n        if (this.hasUpdated) {\n          this._subscribeLogbookPeriod(this._calculateLogbookPeriod());\n        }\n      }\n    }, {\n      kind: \"method\",\n      key: \"disconnectedCallback\",\n      value: function disconnectedCallback() {\n        (0,_babel_runtime_helpers_get__WEBPACK_IMPORTED_MODULE_1__[\"default\"])((0,_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(HaLogbook.prototype), \"disconnectedCallback\", this).call(this);\n        this._unsubscribeSetLoading();\n      }\n\n      /** Unsubscribe because we are unloading\n       * or about to resubscribe.\n       * Setting this._logbookEntries to undefined\n       * will put the page in a loading state.\n       */\n    }, {\n      kind: \"method\",\n      key: \"_unsubscribeSetLoading\",\n      value: function _unsubscribeSetLoading() {\n        this._logbookEntries = undefined;\n        this._unsubscribe();\n      }\n\n      /** Unsubscribe because there are no results.\n       * Setting this._logbookEntries to an empty\n       * list will show a no results message.\n       */\n    }, {\n      kind: \"method\",\n      key: \"_unsubscribeNoResults\",\n      value: function _unsubscribeNoResults() {\n        this._logbookEntries = [];\n        this._unsubscribe();\n      }\n    }, {\n      kind: \"method\",\n      key: \"_calculateLogbookPeriod\",\n      value: function _calculateLogbookPeriod() {\n        const now = new Date();\n        if (\"range\" in this.time) {\n          return {\n            now: now,\n            startTime: this.time.range[0],\n            endTime: this.time.range[1],\n            purgeBeforePythonTime: undefined\n          };\n        }\n        if (\"recent\" in this.time) {\n          const purgeBeforePythonTime = findStartOfRecentTime(now, this.time.recent);\n          return {\n            now: now,\n            startTime: new Date(purgeBeforePythonTime * 1000),\n            // end streaming one year from now\n            endTime: new Date(now.getTime() + 86400 * 365 * 1000),\n            purgeBeforePythonTime: findStartOfRecentTime(now, this.time.recent)\n          };\n        }\n        throw new Error(\"Unexpected time specified\");\n      }\n    }, {\n      kind: \"method\",\n      key: \"_subscribeLogbookPeriod\",\n      value: function _subscribeLogbookPeriod(logbookPeriod) {\n        if (this._subscribed) {\n          return true;\n        }\n        this._subscribed = (0,_data_logbook__WEBPACK_IMPORTED_MODULE_10__.subscribeLogbook)(this.hass, streamMessage => {\n          // \"recent\" means start time is a sliding window\n          // so we need to calculate an expireTime to\n          // purge old events\n          if (!this._subscribed) {\n            // Message came in before we had a chance to unload\n            return;\n          }\n          this._processOrQueueStreamMessage(streamMessage);\n        }, logbookPeriod.startTime.toISOString(), logbookPeriod.endTime.toISOString(), (0,_common_array_ensure_array__WEBPACK_IMPORTED_MODULE_5__.ensureArray)(this.entityIds), (0,_common_array_ensure_array__WEBPACK_IMPORTED_MODULE_5__.ensureArray)(this.deviceIds)).catch(err => {\n          this._subscribed = undefined;\n          this._error = err;\n        });\n        return true;\n      }\n    }, {\n      kind: \"method\",\n      key: \"_getLogBookData\",\n      value: async function _getLogBookData() {\n        var _this$hass$user;\n        this._error = undefined;\n        if (this._filterAlwaysEmptyResults) {\n          this._unsubscribeNoResults();\n          return;\n        }\n        const logbookPeriod = this._calculateLogbookPeriod();\n        if (logbookPeriod.startTime > logbookPeriod.now) {\n          // Time Travel not yet invented\n          this._unsubscribeNoResults();\n          return;\n        }\n        this._updateUsers();\n        if ((_this$hass$user = this.hass.user) !== null && _this$hass$user !== void 0 && _this$hass$user.is_admin) {\n          this._updateTraceContexts();\n        }\n        this._subscribeLogbookPeriod(logbookPeriod);\n      }\n    }, {\n      kind: \"field\",\n      key: \"_nonExpiredRecords\",\n      value() {\n        return purgeBeforePythonTime => !this._logbookEntries ? [] : purgeBeforePythonTime ? this._logbookEntries.filter(entry => entry.when > purgeBeforePythonTime) : this._logbookEntries;\n      }\n    }, {\n      kind: \"field\",\n      key: \"_processOrQueueStreamMessage\",\n      value() {\n        return streamMessage => {\n          if (this._liveUpdatesEnabled) {\n            this._processStreamMessage(streamMessage);\n            return;\n          }\n          this._pendingStreamMessages.push(streamMessage);\n        };\n      }\n    }, {\n      kind: \"field\",\n      key: \"_processStreamMessage\",\n      value() {\n        return streamMessage => {\n          const purgeBeforePythonTime = \"recent\" in this.time ? findStartOfRecentTime(new Date(), this.time.recent) : undefined;\n          // Put newest ones on top. Reverse works in-place so\n          // make a copy first.\n          const newEntries = [...streamMessage.events].reverse();\n          if (!this._logbookEntries || !this._logbookEntries.length) {\n            this._logbookEntries = newEntries;\n            return;\n          }\n          if (!newEntries.length) {\n            // Empty messages are still sent to\n            // indicate no more historical events\n            return;\n          }\n          const nonExpiredRecords = this._nonExpiredRecords(purgeBeforePythonTime);\n\n          // Entries are sorted in descending order with newest first.\n          if (!nonExpiredRecords.length) {\n            // We have no records left, so we can just replace the list\n            this._logbookEntries = newEntries;\n          } else if (newEntries[newEntries.length - 1].when >\n          // oldest new entry\n          nonExpiredRecords[0].when // newest old entry\n          ) {\n            // The new records are newer than the old records\n            // append the old records to the end of the new records\n            this._logbookEntries = newEntries.concat(nonExpiredRecords);\n          } else if (nonExpiredRecords[nonExpiredRecords.length - 1].when >\n          // oldest old entry\n          newEntries[0].when // newest new entry\n          ) {\n            // The new records are older than the old records\n            // append the new records to the end of the old records\n            this._logbookEntries = nonExpiredRecords.concat(newEntries);\n          } else {\n            // The new records are in the middle of the old records\n            // so we need to re-sort them\n            this._logbookEntries = nonExpiredRecords.concat(newEntries).sort((a, b) => b.when - a.when);\n          }\n        };\n      }\n    }, {\n      kind: \"field\",\n      key: \"_updateTraceContexts\",\n      value() {\n        return (0,_common_util_throttle__WEBPACK_IMPORTED_MODULE_8__.throttle)(async () => {\n          this._traceContexts = await (0,_data_trace__WEBPACK_IMPORTED_MODULE_11__.loadTraceContexts)(this.hass);\n        }, 60000);\n      }\n    }, {\n      kind: \"field\",\n      key: \"_updateUsers\",\n      value() {\n        return (0,_common_util_throttle__WEBPACK_IMPORTED_MODULE_8__.throttle)(async () => {\n          var _this$hass$user2;\n          const userIdToName = {};\n\n          // Start loading users\n          const userProm = ((_this$hass$user2 = this.hass.user) === null || _this$hass$user2 === void 0 ? void 0 : _this$hass$user2.is_admin) && (0,_data_user__WEBPACK_IMPORTED_MODULE_12__.fetchUsers)(this.hass);\n\n          // Process persons\n          for (const entity of Object.values(this.hass.states)) {\n            if (entity.attributes.user_id && (0,_common_entity_compute_state_domain__WEBPACK_IMPORTED_MODULE_7__.computeStateDomain)(entity) === \"person\") {\n              userIdToName[entity.attributes.user_id] = entity.attributes.friendly_name;\n            }\n          }\n\n          // Process users\n          if (userProm) {\n            const users = await userProm;\n            for (const user of users) {\n              if (!(user.id in userIdToName)) {\n                userIdToName[user.id] = user.name;\n              }\n            }\n          }\n          this._userIdToName = userIdToName;\n        }, 60000);\n      }\n    }, {\n      kind: \"get\",\n      static: true,\n      key: \"styles\",\n      value: function styles() {\n        return [lit__WEBPACK_IMPORTED_MODULE_3__.css`\n        :host {\n          display: block;\n        }\n\n        :host([virtualize]) {\n          height: 100%;\n        }\n\n        .no-entries {\n          text-align: center;\n          padding: 16px;\n          color: var(--secondary-text-color);\n        }\n\n        .progress-wrapper {\n          display: flex;\n          justify-content: center;\n          height: 100%;\n          align-items: center;\n        }\n      `];\n      }\n    }]\n  };\n}, lit__WEBPACK_IMPORTED_MODULE_3__.LitElement);\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcGFuZWxzL2xvZ2Jvb2svaGEtbG9nYm9vay50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUVBO0FBU0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUE4YUE7QUFBQTtBQUFBO0FBOWFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQU9BO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFJQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFLQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFJQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7O0FBRUE7QUFDQTtBQUtBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFJQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFBQTtBQUFBO0FBQUE7QUFNQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUFBO0FBQUE7QUFBQTtBQUtBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFTQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBSUE7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaG9tZS1hc3Npc3RhbnQtZnJvbnRlbmQvLi9zcmMvcGFuZWxzL2xvZ2Jvb2svaGEtbG9nYm9vay50cz9hODE0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNzcywgaHRtbCwgTGl0RWxlbWVudCwgUHJvcGVydHlWYWx1ZXMsIG5vdGhpbmcgfSBmcm9tIFwibGl0XCI7XG5pbXBvcnQgeyBjdXN0b21FbGVtZW50LCBwcm9wZXJ0eSwgc3RhdGUgfSBmcm9tIFwibGl0L2RlY29yYXRvcnNcIjtcbmltcG9ydCB7IGVuc3VyZUFycmF5IH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcnJheS9lbnN1cmUtYXJyYXlcIjtcbmltcG9ydCB7IGlzQ29tcG9uZW50TG9hZGVkIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9jb25maWcvaXNfY29tcG9uZW50X2xvYWRlZFwiO1xuaW1wb3J0IHsgY29tcHV0ZVN0YXRlRG9tYWluIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9lbnRpdHkvY29tcHV0ZV9zdGF0ZV9kb21haW5cIjtcbmltcG9ydCB7IHRocm90dGxlIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi91dGlsL3Rocm90dGxlXCI7XG5pbXBvcnQgXCIuLi8uLi9jb21wb25lbnRzL2hhLWNpcmN1bGFyLXByb2dyZXNzXCI7XG5pbXBvcnQge1xuICBjbGVhckxvZ2Jvb2tDYWNoZSxcbiAgTG9nYm9va0VudHJ5LFxuICBMb2dib29rU3RyZWFtTWVzc2FnZSxcbiAgc3Vic2NyaWJlTG9nYm9vayxcbn0gZnJvbSBcIi4uLy4uL2RhdGEvbG9nYm9va1wiO1xuaW1wb3J0IHsgbG9hZFRyYWNlQ29udGV4dHMsIFRyYWNlQ29udGV4dHMgfSBmcm9tIFwiLi4vLi4vZGF0YS90cmFjZVwiO1xuaW1wb3J0IHsgZmV0Y2hVc2VycyB9IGZyb20gXCIuLi8uLi9kYXRhL3VzZXJcIjtcbmltcG9ydCB7IEhvbWVBc3Npc3RhbnQgfSBmcm9tIFwiLi4vLi4vdHlwZXNcIjtcbmltcG9ydCBcIi4vaGEtbG9nYm9vay1yZW5kZXJlclwiO1xuXG5pbnRlcmZhY2UgTG9nYm9va1RpbWVQZXJpb2Qge1xuICBub3c6IERhdGU7XG4gIHN0YXJ0VGltZTogRGF0ZTtcbiAgZW5kVGltZTogRGF0ZTtcbiAgcHVyZ2VCZWZvcmVQeXRob25UaW1lOiBudW1iZXIgfCB1bmRlZmluZWQ7XG59XG5cbmNvbnN0IGZpbmRTdGFydE9mUmVjZW50VGltZSA9IChub3c6IERhdGUsIHJlY2VudFRpbWU6IG51bWJlcikgPT5cbiAgbmV3IERhdGUobm93LmdldFRpbWUoKSAtIHJlY2VudFRpbWUgKiAxMDAwKS5nZXRUaW1lKCkgLyAxMDAwO1xuXG5jb25zdCBpZHNDaGFuZ2VkID0gKG9sZElkcz86IHN0cmluZ1tdLCBuZXdJZHM/OiBzdHJpbmdbXSkgPT4ge1xuICBpZiAob2xkSWRzID09PSB1bmRlZmluZWQgJiYgbmV3SWRzID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIChcbiAgICAhb2xkSWRzIHx8XG4gICAgIW5ld0lkcyB8fFxuICAgIG9sZElkcy5sZW5ndGggIT09IG5ld0lkcy5sZW5ndGggfHxcbiAgICAhb2xkSWRzLmV2ZXJ5KCh2YWwpID0+IG5ld0lkcy5pbmNsdWRlcyh2YWwpKVxuICApO1xufTtcblxuQGN1c3RvbUVsZW1lbnQoXCJoYS1sb2dib29rXCIpXG5leHBvcnQgY2xhc3MgSGFMb2dib29rIGV4dGVuZHMgTGl0RWxlbWVudCB7XG4gIEBwcm9wZXJ0eSh7IGF0dHJpYnV0ZTogZmFsc2UgfSkgcHVibGljIGhhc3MhOiBIb21lQXNzaXN0YW50O1xuXG4gIEBwcm9wZXJ0eSgpIHB1YmxpYyB0aW1lITpcbiAgICB8IHsgcmFuZ2U6IFtEYXRlLCBEYXRlXSB9XG4gICAgfCB7XG4gICAgICAgIC8vIFNlY29uZHNcbiAgICAgICAgcmVjZW50OiBudW1iZXI7XG4gICAgICB9O1xuXG4gIEBwcm9wZXJ0eSgpIHB1YmxpYyBlbnRpdHlJZHM/OiBzdHJpbmdbXTtcblxuICBAcHJvcGVydHkoKSBwdWJsaWMgZGV2aWNlSWRzPzogc3RyaW5nW107XG5cbiAgQHByb3BlcnR5KHsgdHlwZTogQm9vbGVhbiwgYXR0cmlidXRlOiBcIm5hcnJvd1wiIH0pXG4gIHB1YmxpYyBuYXJyb3cgPSBmYWxzZTtcblxuICBAcHJvcGVydHkoeyB0eXBlOiBCb29sZWFuLCBhdHRyaWJ1dGU6IFwidmlydHVhbGl6ZVwiLCByZWZsZWN0OiB0cnVlIH0pXG4gIHB1YmxpYyB2aXJ0dWFsaXplID0gZmFsc2U7XG5cbiAgQHByb3BlcnR5KHsgdHlwZTogQm9vbGVhbiwgYXR0cmlidXRlOiBcIm5vLWljb25cIiB9KVxuICBwdWJsaWMgbm9JY29uID0gZmFsc2U7XG5cbiAgQHByb3BlcnR5KHsgdHlwZTogQm9vbGVhbiwgYXR0cmlidXRlOiBcIm5vLW5hbWVcIiB9KVxuICBwdWJsaWMgbm9OYW1lID0gZmFsc2U7XG5cbiAgQHByb3BlcnR5KHsgdHlwZTogQm9vbGVhbiwgYXR0cmlidXRlOiBcInNob3ctaW5kaWNhdG9yXCIgfSlcbiAgcHVibGljIHNob3dJbmRpY2F0b3IgPSBmYWxzZTtcblxuICBAcHJvcGVydHkoeyB0eXBlOiBCb29sZWFuLCBhdHRyaWJ1dGU6IFwicmVsYXRpdmUtdGltZVwiIH0pXG4gIHB1YmxpYyByZWxhdGl2ZVRpbWUgPSBmYWxzZTtcblxuICBAcHJvcGVydHkoeyB0eXBlOiBCb29sZWFuIH0pIHB1YmxpYyBzaG93TW9yZUxpbmsgPSB0cnVlO1xuXG4gIEBzdGF0ZSgpIHByaXZhdGUgX2xvZ2Jvb2tFbnRyaWVzPzogTG9nYm9va0VudHJ5W107XG5cbiAgQHN0YXRlKCkgcHJpdmF0ZSBfdHJhY2VDb250ZXh0czogVHJhY2VDb250ZXh0cyA9IHt9O1xuXG4gIEBzdGF0ZSgpIHByaXZhdGUgX3VzZXJJZFRvTmFtZSA9IHt9O1xuXG4gIEBzdGF0ZSgpIHByaXZhdGUgX2Vycm9yPzogc3RyaW5nO1xuXG4gIHByaXZhdGUgX3N1YnNjcmliZWQ/OiBQcm9taXNlPCgoKSA9PiBQcm9taXNlPHZvaWQ+KSB8IHZvaWQ+O1xuXG4gIHByaXZhdGUgX2xpdmVVcGRhdGVzRW5hYmxlZCA9IHRydWU7XG5cbiAgcHJpdmF0ZSBfcGVuZGluZ1N0cmVhbU1lc3NhZ2VzOiBMb2dib29rU3RyZWFtTWVzc2FnZVtdID0gW107XG5cbiAgcHJpdmF0ZSBfdGhyb3R0bGVHZXRMb2dib29rRW50cmllcyA9IHRocm90dGxlKFxuICAgICgpID0+IHRoaXMuX2dldExvZ0Jvb2tEYXRhKCksXG4gICAgMTAwMFxuICApO1xuXG4gIHByb3RlY3RlZCByZW5kZXIoKSB7XG4gICAgaWYgKCFpc0NvbXBvbmVudExvYWRlZCh0aGlzLmhhc3MsIFwibG9nYm9va1wiKSkge1xuICAgICAgcmV0dXJuIG5vdGhpbmc7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2Vycm9yKSB7XG4gICAgICByZXR1cm4gaHRtbGA8ZGl2IGNsYXNzPVwibm8tZW50cmllc1wiPlxuICAgICAgICAke2Ake3RoaXMuaGFzcy5sb2NhbGl6ZShcInVpLmNvbXBvbmVudHMubG9nYm9vay5yZXRyaWV2YWxfZXJyb3JcIil9OiAke1xuICAgICAgICAgIHRoaXMuX2Vycm9yXG4gICAgICAgIH1gfVxuICAgICAgPC9kaXY+YDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fbG9nYm9va0VudHJpZXMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGh0bWxgXG4gICAgICAgIDxkaXYgY2xhc3M9XCJwcm9ncmVzcy13cmFwcGVyXCI+XG4gICAgICAgICAgPGhhLWNpcmN1bGFyLXByb2dyZXNzXG4gICAgICAgICAgICBhY3RpdmVcbiAgICAgICAgICAgIGFsdD0ke3RoaXMuaGFzcy5sb2NhbGl6ZShcInVpLmNvbW1vbi5sb2FkaW5nXCIpfVxuICAgICAgICAgID48L2hhLWNpcmN1bGFyLXByb2dyZXNzPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIGA7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2xvZ2Jvb2tFbnRyaWVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIGh0bWxgPGRpdiBjbGFzcz1cIm5vLWVudHJpZXNcIj5cbiAgICAgICAgJHt0aGlzLmhhc3MubG9jYWxpemUoXCJ1aS5jb21wb25lbnRzLmxvZ2Jvb2suZW50cmllc19ub3RfZm91bmRcIil9XG4gICAgICA8L2Rpdj5gO1xuICAgIH1cblxuICAgIHJldHVybiBodG1sYFxuICAgICAgPGhhLWxvZ2Jvb2stcmVuZGVyZXJcbiAgICAgICAgLmhhc3M9JHt0aGlzLmhhc3N9XG4gICAgICAgIC5uYXJyb3c9JHt0aGlzLm5hcnJvd31cbiAgICAgICAgLnZpcnR1YWxpemU9JHt0aGlzLnZpcnR1YWxpemV9XG4gICAgICAgIC5ub0ljb249JHt0aGlzLm5vSWNvbn1cbiAgICAgICAgLm5vTmFtZT0ke3RoaXMubm9OYW1lfVxuICAgICAgICAuc2hvd0luZGljYXRvcj0ke3RoaXMuc2hvd0luZGljYXRvcn1cbiAgICAgICAgLnJlbGF0aXZlVGltZT0ke3RoaXMucmVsYXRpdmVUaW1lfVxuICAgICAgICAuZW50cmllcz0ke3RoaXMuX2xvZ2Jvb2tFbnRyaWVzfVxuICAgICAgICAudHJhY2VDb250ZXh0cz0ke3RoaXMuX3RyYWNlQ29udGV4dHN9XG4gICAgICAgIC51c2VySWRUb05hbWU9JHt0aGlzLl91c2VySWRUb05hbWV9XG4gICAgICAgIEBoYXNzLWxvZ2Jvb2stbGl2ZT0ke3RoaXMuX2hhbmRsZUxvZ2Jvb2tMaXZlfVxuICAgICAgPjwvaGEtbG9nYm9vay1yZW5kZXJlcj5cbiAgICBgO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIHJlZnJlc2goZm9yY2UgPSBmYWxzZSkge1xuICAgIGlmICghZm9yY2UgJiYgKHRoaXMuX3N1YnNjcmliZWQgfHwgdGhpcy5fbG9nYm9va0VudHJpZXMgPT09IHVuZGVmaW5lZCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl91bnN1YnNjcmliZVNldExvYWRpbmcoKTtcbiAgICB0aGlzLl90aHJvdHRsZUdldExvZ2Jvb2tFbnRyaWVzLmNhbmNlbCgpO1xuICAgIHRoaXMuX3VwZGF0ZVRyYWNlQ29udGV4dHMuY2FuY2VsKCk7XG4gICAgdGhpcy5fdXBkYXRlVXNlcnMuY2FuY2VsKCk7XG5cbiAgICBpZiAoXCJyYW5nZVwiIGluIHRoaXMudGltZSkge1xuICAgICAgY2xlYXJMb2dib29rQ2FjaGUoXG4gICAgICAgIHRoaXMudGltZS5yYW5nZVswXS50b0lTT1N0cmluZygpLFxuICAgICAgICB0aGlzLnRpbWUucmFuZ2VbMV0udG9JU09TdHJpbmcoKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICB0aGlzLl90aHJvdHRsZUdldExvZ2Jvb2tFbnRyaWVzKCk7XG4gIH1cblxuICBwcm90ZWN0ZWQgZmlyc3RVcGRhdGVkKGNoYW5nZWRQcm9wczogUHJvcGVydHlWYWx1ZXMpIHtcbiAgICBzdXBlci5maXJzdFVwZGF0ZWQoY2hhbmdlZFByb3BzKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBzaG91bGRVcGRhdGUoY2hhbmdlZFByb3BzOiBQcm9wZXJ0eVZhbHVlcyk6IGJvb2xlYW4ge1xuICAgIGlmIChjaGFuZ2VkUHJvcHMuc2l6ZSAhPT0gMSB8fCAhY2hhbmdlZFByb3BzLmhhcyhcImhhc3NcIikpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICAvLyBXZSBvbmx5IHJlc3BvbmQgdG8gaGFzcyBjaGFuZ2VzIGlmIHRoZSB0cmFuc2xhdGlvbnMgY2hhbmdlZFxuICAgIGNvbnN0IG9sZEhhc3MgPSBjaGFuZ2VkUHJvcHMuZ2V0KFwiaGFzc1wiKSBhcyBIb21lQXNzaXN0YW50IHwgdW5kZWZpbmVkO1xuICAgIHJldHVybiAhb2xkSGFzcyB8fCBvbGRIYXNzLmxvY2FsaXplICE9PSB0aGlzLmhhc3MubG9jYWxpemU7XG4gIH1cblxuICBwcm90ZWN0ZWQgdXBkYXRlZChjaGFuZ2VkUHJvcHM6IFByb3BlcnR5VmFsdWVzKTogdm9pZCB7XG4gICAgbGV0IGNoYW5nZWQgPSBjaGFuZ2VkUHJvcHMuaGFzKFwidGltZVwiKTtcblxuICAgIGZvciAoY29uc3Qga2V5IG9mIFtcImVudGl0eUlkc1wiLCBcImRldmljZUlkc1wiXSkge1xuICAgICAgaWYgKCFjaGFuZ2VkUHJvcHMuaGFzKGtleSkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG9sZFZhbHVlID0gY2hhbmdlZFByb3BzLmdldChrZXkpIGFzIHN0cmluZ1tdIHwgdW5kZWZpbmVkO1xuICAgICAgY29uc3QgY3VyVmFsdWUgPSB0aGlzW2tleV0gYXMgc3RyaW5nW10gfCB1bmRlZmluZWQ7XG5cbiAgICAgIC8vIElmIHRoZXkgbWFrZSB0aGUgZmlsdGVyIG1vcmUgc3BlY2lmaWMgd2Ugd2FudFxuICAgICAgLy8gdG8gY2hhbmdlIHRoZSBzdWJzY3JpcHRpb24gc2luY2UgaXQgd2lsbCByZWR1Y2VcbiAgICAgIC8vIHRoZSBvdmVyaGVhZCBvbiB0aGUgYmFja2VuZCBhcyB0aGUgZXZlbnQgc3RyZWFtXG4gICAgICAvLyBjYW4gYmUgYSBmaXJlaG9zZSBmb3IgYWxsIHN0YXRlIGV2ZW50cy5cbiAgICAgIGlmIChpZHNDaGFuZ2VkKG9sZFZhbHVlLCBjdXJWYWx1ZSkpIHtcbiAgICAgICAgY2hhbmdlZCA9IHRydWU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChjaGFuZ2VkKSB7XG4gICAgICB0aGlzLnJlZnJlc2godHJ1ZSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfaGFuZGxlTG9nYm9va0xpdmUoZXY6IEN1c3RvbUV2ZW50KSB7XG4gICAgaWYgKGV2LmRldGFpbC5lbmFibGUgJiYgIXRoaXMuX2xpdmVVcGRhdGVzRW5hYmxlZCkge1xuICAgICAgLy8gUHJvY2VzcyBldmVyeXRoaW5nIHdlIHF1ZXVlZCB1cCB3aGlsZSB3ZSB3ZXJlIHNjcm9sbGVkIGRvd25cbiAgICAgIHRoaXMuX3BlbmRpbmdTdHJlYW1NZXNzYWdlcy5mb3JFYWNoKChtc2cpID0+XG4gICAgICAgIHRoaXMuX3Byb2Nlc3NTdHJlYW1NZXNzYWdlKG1zZylcbiAgICAgICk7XG4gICAgICB0aGlzLl9wZW5kaW5nU3RyZWFtTWVzc2FnZXMgPSBbXTtcbiAgICB9XG4gICAgdGhpcy5fbGl2ZVVwZGF0ZXNFbmFibGVkID0gZXYuZGV0YWlsLmVuYWJsZTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0IF9maWx0ZXJBbHdheXNFbXB0eVJlc3VsdHMoKTogYm9vbGVhbiB7XG4gICAgY29uc3QgZW50aXR5SWRzID0gZW5zdXJlQXJyYXkodGhpcy5lbnRpdHlJZHMpO1xuICAgIGNvbnN0IGRldmljZUlkcyA9IGVuc3VyZUFycmF5KHRoaXMuZGV2aWNlSWRzKTtcblxuICAgIC8vIElmIGFsbCBzcGVjaWZpZWQgZmlsdGVycyBhcmUgZW1wdHkgbGlzdHMsIHdlIGNhbiByZXR1cm4gYW4gZW1wdHkgbGlzdC5cbiAgICByZXR1cm4gKFxuICAgICAgKGVudGl0eUlkcyB8fCBkZXZpY2VJZHMpICYmXG4gICAgICAoIWVudGl0eUlkcyB8fCBlbnRpdHlJZHMubGVuZ3RoID09PSAwKSAmJlxuICAgICAgKCFkZXZpY2VJZHMgfHwgZGV2aWNlSWRzLmxlbmd0aCA9PT0gMClcbiAgICApO1xuICB9XG5cbiAgcHJpdmF0ZSBfdW5zdWJzY3JpYmUoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX3N1YnNjcmliZWQpIHtcbiAgICAgIHRoaXMuX3N1YnNjcmliZWQudGhlbigodW5zdWIpID0+XG4gICAgICAgIHVuc3ViXG4gICAgICAgICAgPyB1bnN1YigpLmNhdGNoKCgpID0+IHtcbiAgICAgICAgICAgICAgLy8gVGhlIGJhY2tlbmQgd2lsbCBjYW5jZWwgdGhlIHN1YnNjcmlwdGlvbiBpZlxuICAgICAgICAgICAgICAvLyB3ZSBzdWJzY3JpYmUgdG8gZW50aXRpZXMgdGhhdCB3aWxsIGFsbCBiZVxuICAgICAgICAgICAgICAvLyBmaWx0ZXJlZCBhd2F5XG4gICAgICAgICAgICB9KVxuICAgICAgICAgIDogdW5kZWZpbmVkXG4gICAgICApO1xuICAgICAgdGhpcy5fc3Vic2NyaWJlZCA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICBpZiAodGhpcy5oYXNVcGRhdGVkKSB7XG4gICAgICB0aGlzLl9zdWJzY3JpYmVMb2dib29rUGVyaW9kKHRoaXMuX2NhbGN1bGF0ZUxvZ2Jvb2tQZXJpb2QoKSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIHN1cGVyLmRpc2Nvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgdGhpcy5fdW5zdWJzY3JpYmVTZXRMb2FkaW5nKCk7XG4gIH1cblxuICAvKiogVW5zdWJzY3JpYmUgYmVjYXVzZSB3ZSBhcmUgdW5sb2FkaW5nXG4gICAqIG9yIGFib3V0IHRvIHJlc3Vic2NyaWJlLlxuICAgKiBTZXR0aW5nIHRoaXMuX2xvZ2Jvb2tFbnRyaWVzIHRvIHVuZGVmaW5lZFxuICAgKiB3aWxsIHB1dCB0aGUgcGFnZSBpbiBhIGxvYWRpbmcgc3RhdGUuXG4gICAqL1xuICBwcml2YXRlIF91bnN1YnNjcmliZVNldExvYWRpbmcoKSB7XG4gICAgdGhpcy5fbG9nYm9va0VudHJpZXMgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fdW5zdWJzY3JpYmUoKTtcbiAgfVxuXG4gIC8qKiBVbnN1YnNjcmliZSBiZWNhdXNlIHRoZXJlIGFyZSBubyByZXN1bHRzLlxuICAgKiBTZXR0aW5nIHRoaXMuX2xvZ2Jvb2tFbnRyaWVzIHRvIGFuIGVtcHR5XG4gICAqIGxpc3Qgd2lsbCBzaG93IGEgbm8gcmVzdWx0cyBtZXNzYWdlLlxuICAgKi9cbiAgcHJpdmF0ZSBfdW5zdWJzY3JpYmVOb1Jlc3VsdHMoKSB7XG4gICAgdGhpcy5fbG9nYm9va0VudHJpZXMgPSBbXTtcbiAgICB0aGlzLl91bnN1YnNjcmliZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBfY2FsY3VsYXRlTG9nYm9va1BlcmlvZCgpIHtcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgIGlmIChcInJhbmdlXCIgaW4gdGhpcy50aW1lKSB7XG4gICAgICByZXR1cm4gPExvZ2Jvb2tUaW1lUGVyaW9kPntcbiAgICAgICAgbm93OiBub3csXG4gICAgICAgIHN0YXJ0VGltZTogdGhpcy50aW1lLnJhbmdlWzBdLFxuICAgICAgICBlbmRUaW1lOiB0aGlzLnRpbWUucmFuZ2VbMV0sXG4gICAgICAgIHB1cmdlQmVmb3JlUHl0aG9uVGltZTogdW5kZWZpbmVkLFxuICAgICAgfTtcbiAgICB9XG4gICAgaWYgKFwicmVjZW50XCIgaW4gdGhpcy50aW1lKSB7XG4gICAgICBjb25zdCBwdXJnZUJlZm9yZVB5dGhvblRpbWUgPSBmaW5kU3RhcnRPZlJlY2VudFRpbWUoXG4gICAgICAgIG5vdyxcbiAgICAgICAgdGhpcy50aW1lLnJlY2VudFxuICAgICAgKTtcbiAgICAgIHJldHVybiA8TG9nYm9va1RpbWVQZXJpb2Q+e1xuICAgICAgICBub3c6IG5vdyxcbiAgICAgICAgc3RhcnRUaW1lOiBuZXcgRGF0ZShwdXJnZUJlZm9yZVB5dGhvblRpbWUgKiAxMDAwKSxcbiAgICAgICAgLy8gZW5kIHN0cmVhbWluZyBvbmUgeWVhciBmcm9tIG5vd1xuICAgICAgICBlbmRUaW1lOiBuZXcgRGF0ZShub3cuZ2V0VGltZSgpICsgODY0MDAgKiAzNjUgKiAxMDAwKSxcbiAgICAgICAgcHVyZ2VCZWZvcmVQeXRob25UaW1lOiBmaW5kU3RhcnRPZlJlY2VudFRpbWUobm93LCB0aGlzLnRpbWUucmVjZW50KSxcbiAgICAgIH07XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcihcIlVuZXhwZWN0ZWQgdGltZSBzcGVjaWZpZWRcIik7XG4gIH1cblxuICBwcml2YXRlIF9zdWJzY3JpYmVMb2dib29rUGVyaW9kKGxvZ2Jvb2tQZXJpb2Q6IExvZ2Jvb2tUaW1lUGVyaW9kKSB7XG4gICAgaWYgKHRoaXMuX3N1YnNjcmliZWQpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICB0aGlzLl9zdWJzY3JpYmVkID0gc3Vic2NyaWJlTG9nYm9vayhcbiAgICAgIHRoaXMuaGFzcyxcbiAgICAgIChzdHJlYW1NZXNzYWdlKSA9PiB7XG4gICAgICAgIC8vIFwicmVjZW50XCIgbWVhbnMgc3RhcnQgdGltZSBpcyBhIHNsaWRpbmcgd2luZG93XG4gICAgICAgIC8vIHNvIHdlIG5lZWQgdG8gY2FsY3VsYXRlIGFuIGV4cGlyZVRpbWUgdG9cbiAgICAgICAgLy8gcHVyZ2Ugb2xkIGV2ZW50c1xuICAgICAgICBpZiAoIXRoaXMuX3N1YnNjcmliZWQpIHtcbiAgICAgICAgICAvLyBNZXNzYWdlIGNhbWUgaW4gYmVmb3JlIHdlIGhhZCBhIGNoYW5jZSB0byB1bmxvYWRcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fcHJvY2Vzc09yUXVldWVTdHJlYW1NZXNzYWdlKHN0cmVhbU1lc3NhZ2UpO1xuICAgICAgfSxcbiAgICAgIGxvZ2Jvb2tQZXJpb2Quc3RhcnRUaW1lLnRvSVNPU3RyaW5nKCksXG4gICAgICBsb2dib29rUGVyaW9kLmVuZFRpbWUudG9JU09TdHJpbmcoKSxcbiAgICAgIGVuc3VyZUFycmF5KHRoaXMuZW50aXR5SWRzKSxcbiAgICAgIGVuc3VyZUFycmF5KHRoaXMuZGV2aWNlSWRzKVxuICAgICkuY2F0Y2goKGVycikgPT4ge1xuICAgICAgdGhpcy5fc3Vic2NyaWJlZCA9IHVuZGVmaW5lZDtcbiAgICAgIHRoaXMuX2Vycm9yID0gZXJyO1xuICAgIH0pO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBfZ2V0TG9nQm9va0RhdGEoKSB7XG4gICAgdGhpcy5fZXJyb3IgPSB1bmRlZmluZWQ7XG5cbiAgICBpZiAodGhpcy5fZmlsdGVyQWx3YXlzRW1wdHlSZXN1bHRzKSB7XG4gICAgICB0aGlzLl91bnN1YnNjcmliZU5vUmVzdWx0cygpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGxvZ2Jvb2tQZXJpb2QgPSB0aGlzLl9jYWxjdWxhdGVMb2dib29rUGVyaW9kKCk7XG5cbiAgICBpZiAobG9nYm9va1BlcmlvZC5zdGFydFRpbWUgPiBsb2dib29rUGVyaW9kLm5vdykge1xuICAgICAgLy8gVGltZSBUcmF2ZWwgbm90IHlldCBpbnZlbnRlZFxuICAgICAgdGhpcy5fdW5zdWJzY3JpYmVOb1Jlc3VsdHMoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl91cGRhdGVVc2VycygpO1xuICAgIGlmICh0aGlzLmhhc3MudXNlcj8uaXNfYWRtaW4pIHtcbiAgICAgIHRoaXMuX3VwZGF0ZVRyYWNlQ29udGV4dHMoKTtcbiAgICB9XG5cbiAgICB0aGlzLl9zdWJzY3JpYmVMb2dib29rUGVyaW9kKGxvZ2Jvb2tQZXJpb2QpO1xuICB9XG5cbiAgcHJpdmF0ZSBfbm9uRXhwaXJlZFJlY29yZHMgPSAocHVyZ2VCZWZvcmVQeXRob25UaW1lOiBudW1iZXIgfCB1bmRlZmluZWQpID0+XG4gICAgIXRoaXMuX2xvZ2Jvb2tFbnRyaWVzXG4gICAgICA/IFtdXG4gICAgICA6IHB1cmdlQmVmb3JlUHl0aG9uVGltZVxuICAgICAgPyB0aGlzLl9sb2dib29rRW50cmllcy5maWx0ZXIoXG4gICAgICAgICAgKGVudHJ5KSA9PiBlbnRyeS53aGVuID4gcHVyZ2VCZWZvcmVQeXRob25UaW1lIVxuICAgICAgICApXG4gICAgICA6IHRoaXMuX2xvZ2Jvb2tFbnRyaWVzO1xuXG4gIHByaXZhdGUgX3Byb2Nlc3NPclF1ZXVlU3RyZWFtTWVzc2FnZSA9IChcbiAgICBzdHJlYW1NZXNzYWdlOiBMb2dib29rU3RyZWFtTWVzc2FnZVxuICApID0+IHtcbiAgICBpZiAodGhpcy5fbGl2ZVVwZGF0ZXNFbmFibGVkKSB7XG4gICAgICB0aGlzLl9wcm9jZXNzU3RyZWFtTWVzc2FnZShzdHJlYW1NZXNzYWdlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fcGVuZGluZ1N0cmVhbU1lc3NhZ2VzLnB1c2goc3RyZWFtTWVzc2FnZSk7XG4gIH07XG5cbiAgcHJpdmF0ZSBfcHJvY2Vzc1N0cmVhbU1lc3NhZ2UgPSAoc3RyZWFtTWVzc2FnZTogTG9nYm9va1N0cmVhbU1lc3NhZ2UpID0+IHtcbiAgICBjb25zdCBwdXJnZUJlZm9yZVB5dGhvblRpbWUgPVxuICAgICAgXCJyZWNlbnRcIiBpbiB0aGlzLnRpbWVcbiAgICAgICAgPyBmaW5kU3RhcnRPZlJlY2VudFRpbWUobmV3IERhdGUoKSwgdGhpcy50aW1lLnJlY2VudClcbiAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgLy8gUHV0IG5ld2VzdCBvbmVzIG9uIHRvcC4gUmV2ZXJzZSB3b3JrcyBpbi1wbGFjZSBzb1xuICAgIC8vIG1ha2UgYSBjb3B5IGZpcnN0LlxuICAgIGNvbnN0IG5ld0VudHJpZXMgPSBbLi4uc3RyZWFtTWVzc2FnZS5ldmVudHNdLnJldmVyc2UoKTtcbiAgICBpZiAoIXRoaXMuX2xvZ2Jvb2tFbnRyaWVzIHx8ICF0aGlzLl9sb2dib29rRW50cmllcy5sZW5ndGgpIHtcbiAgICAgIHRoaXMuX2xvZ2Jvb2tFbnRyaWVzID0gbmV3RW50cmllcztcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCFuZXdFbnRyaWVzLmxlbmd0aCkge1xuICAgICAgLy8gRW1wdHkgbWVzc2FnZXMgYXJlIHN0aWxsIHNlbnQgdG9cbiAgICAgIC8vIGluZGljYXRlIG5vIG1vcmUgaGlzdG9yaWNhbCBldmVudHNcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qgbm9uRXhwaXJlZFJlY29yZHMgPSB0aGlzLl9ub25FeHBpcmVkUmVjb3JkcyhwdXJnZUJlZm9yZVB5dGhvblRpbWUpO1xuXG4gICAgLy8gRW50cmllcyBhcmUgc29ydGVkIGluIGRlc2NlbmRpbmcgb3JkZXIgd2l0aCBuZXdlc3QgZmlyc3QuXG4gICAgaWYgKCFub25FeHBpcmVkUmVjb3Jkcy5sZW5ndGgpIHtcbiAgICAgIC8vIFdlIGhhdmUgbm8gcmVjb3JkcyBsZWZ0LCBzbyB3ZSBjYW4ganVzdCByZXBsYWNlIHRoZSBsaXN0XG4gICAgICB0aGlzLl9sb2dib29rRW50cmllcyA9IG5ld0VudHJpZXM7XG4gICAgfSBlbHNlIGlmIChcbiAgICAgIG5ld0VudHJpZXNbbmV3RW50cmllcy5sZW5ndGggLSAxXS53aGVuID4gLy8gb2xkZXN0IG5ldyBlbnRyeVxuICAgICAgbm9uRXhwaXJlZFJlY29yZHNbMF0ud2hlbiAvLyBuZXdlc3Qgb2xkIGVudHJ5XG4gICAgKSB7XG4gICAgICAvLyBUaGUgbmV3IHJlY29yZHMgYXJlIG5ld2VyIHRoYW4gdGhlIG9sZCByZWNvcmRzXG4gICAgICAvLyBhcHBlbmQgdGhlIG9sZCByZWNvcmRzIHRvIHRoZSBlbmQgb2YgdGhlIG5ldyByZWNvcmRzXG4gICAgICB0aGlzLl9sb2dib29rRW50cmllcyA9IG5ld0VudHJpZXMuY29uY2F0KG5vbkV4cGlyZWRSZWNvcmRzKTtcbiAgICB9IGVsc2UgaWYgKFxuICAgICAgbm9uRXhwaXJlZFJlY29yZHNbbm9uRXhwaXJlZFJlY29yZHMubGVuZ3RoIC0gMV0ud2hlbiA+IC8vIG9sZGVzdCBvbGQgZW50cnlcbiAgICAgIG5ld0VudHJpZXNbMF0ud2hlbiAvLyBuZXdlc3QgbmV3IGVudHJ5XG4gICAgKSB7XG4gICAgICAvLyBUaGUgbmV3IHJlY29yZHMgYXJlIG9sZGVyIHRoYW4gdGhlIG9sZCByZWNvcmRzXG4gICAgICAvLyBhcHBlbmQgdGhlIG5ldyByZWNvcmRzIHRvIHRoZSBlbmQgb2YgdGhlIG9sZCByZWNvcmRzXG4gICAgICB0aGlzLl9sb2dib29rRW50cmllcyA9IG5vbkV4cGlyZWRSZWNvcmRzLmNvbmNhdChuZXdFbnRyaWVzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVGhlIG5ldyByZWNvcmRzIGFyZSBpbiB0aGUgbWlkZGxlIG9mIHRoZSBvbGQgcmVjb3Jkc1xuICAgICAgLy8gc28gd2UgbmVlZCB0byByZS1zb3J0IHRoZW1cbiAgICAgIHRoaXMuX2xvZ2Jvb2tFbnRyaWVzID0gbm9uRXhwaXJlZFJlY29yZHNcbiAgICAgICAgLmNvbmNhdChuZXdFbnRyaWVzKVxuICAgICAgICAuc29ydCgoYSwgYikgPT4gYi53aGVuIC0gYS53aGVuKTtcbiAgICB9XG4gIH07XG5cbiAgcHJpdmF0ZSBfdXBkYXRlVHJhY2VDb250ZXh0cyA9IHRocm90dGxlKGFzeW5jICgpID0+IHtcbiAgICB0aGlzLl90cmFjZUNvbnRleHRzID0gYXdhaXQgbG9hZFRyYWNlQ29udGV4dHModGhpcy5oYXNzKTtcbiAgfSwgNjAwMDApO1xuXG4gIHByaXZhdGUgX3VwZGF0ZVVzZXJzID0gdGhyb3R0bGUoYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHVzZXJJZFRvTmFtZSA9IHt9O1xuXG4gICAgLy8gU3RhcnQgbG9hZGluZyB1c2Vyc1xuICAgIGNvbnN0IHVzZXJQcm9tID0gdGhpcy5oYXNzLnVzZXI/LmlzX2FkbWluICYmIGZldGNoVXNlcnModGhpcy5oYXNzKTtcblxuICAgIC8vIFByb2Nlc3MgcGVyc29uc1xuICAgIGZvciAoY29uc3QgZW50aXR5IG9mIE9iamVjdC52YWx1ZXModGhpcy5oYXNzLnN0YXRlcykpIHtcbiAgICAgIGlmIChcbiAgICAgICAgZW50aXR5LmF0dHJpYnV0ZXMudXNlcl9pZCAmJlxuICAgICAgICBjb21wdXRlU3RhdGVEb21haW4oZW50aXR5KSA9PT0gXCJwZXJzb25cIlxuICAgICAgKSB7XG4gICAgICAgIHVzZXJJZFRvTmFtZVtlbnRpdHkuYXR0cmlidXRlcy51c2VyX2lkXSA9XG4gICAgICAgICAgZW50aXR5LmF0dHJpYnV0ZXMuZnJpZW5kbHlfbmFtZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBQcm9jZXNzIHVzZXJzXG4gICAgaWYgKHVzZXJQcm9tKSB7XG4gICAgICBjb25zdCB1c2VycyA9IGF3YWl0IHVzZXJQcm9tO1xuICAgICAgZm9yIChjb25zdCB1c2VyIG9mIHVzZXJzKSB7XG4gICAgICAgIGlmICghKHVzZXIuaWQgaW4gdXNlcklkVG9OYW1lKSkge1xuICAgICAgICAgIHVzZXJJZFRvTmFtZVt1c2VyLmlkXSA9IHVzZXIubmFtZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuX3VzZXJJZFRvTmFtZSA9IHVzZXJJZFRvTmFtZTtcbiAgfSwgNjAwMDApO1xuXG4gIHN0YXRpYyBnZXQgc3R5bGVzKCkge1xuICAgIHJldHVybiBbXG4gICAgICBjc3NgXG4gICAgICAgIDpob3N0IHtcbiAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgfVxuXG4gICAgICAgIDpob3N0KFt2aXJ0dWFsaXplXSkge1xuICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgfVxuXG4gICAgICAgIC5uby1lbnRyaWVzIHtcbiAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgICAgcGFkZGluZzogMTZweDtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tc2Vjb25kYXJ5LXRleHQtY29sb3IpO1xuICAgICAgICB9XG5cbiAgICAgICAgLnByb2dyZXNzLXdyYXBwZXIge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIH1cbiAgICAgIGAsXG4gICAgXTtcbiAgfVxufVxuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIGludGVyZmFjZSBIVE1MRWxlbWVudFRhZ05hbWVNYXAge1xuICAgIFwiaGEtbG9nYm9va1wiOiBIYUxvZ2Jvb2s7XG4gIH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/panels/logbook/ha-logbook.ts\n");

/***/ }),

/***/ "./src/util/brands-url.ts":
/*!********************************!*\
  !*** ./src/util/brands-url.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   brandsUrl: () => (/* binding */ brandsUrl),\n/* harmony export */   extractDomainFromBrandUrl: () => (/* binding */ extractDomainFromBrandUrl),\n/* harmony export */   hardwareBrandsUrl: () => (/* binding */ hardwareBrandsUrl),\n/* harmony export */   isBrandUrl: () => (/* binding */ isBrandUrl)\n/* harmony export */ });\nconst brandsUrl = options => `https://brands.home-assistant.io/${options.brand ? \"brands/\" : \"\"}${options.useFallback ? \"_/\" : \"\"}${options.domain}/${options.darkOptimized ? \"dark_\" : \"\"}${options.type}.png`;\nconst hardwareBrandsUrl = options => `https://brands.home-assistant.io/hardware/${options.category}/${options.darkOptimized ? \"dark_\" : \"\"}${options.manufacturer}${options.model ? `_${options.model}` : \"\"}.png`;\nconst extractDomainFromBrandUrl = url => url.split(\"/\")[4];\nconst isBrandUrl = thumbnail => thumbnail.startsWith(\"https://brands.home-assistant.io/\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdXRpbC9icmFuZHMtdXJsLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFlQTtBQU9BO0FBS0E7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL2hvbWUtYXNzaXN0YW50LWZyb250ZW5kLy4vc3JjL3V0aWwvYnJhbmRzLXVybC50cz9iMjk5Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBpbnRlcmZhY2UgQnJhbmRzT3B0aW9ucyB7XG4gIGRvbWFpbjogc3RyaW5nO1xuICB0eXBlOiBcImljb25cIiB8IFwibG9nb1wiIHwgXCJpY29uQDJ4XCIgfCBcImxvZ29AMnhcIjtcbiAgdXNlRmFsbGJhY2s/OiBib29sZWFuO1xuICBkYXJrT3B0aW1pemVkPzogYm9vbGVhbjtcbiAgYnJhbmQ/OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEhhcmR3YXJlQnJhbmRzT3B0aW9ucyB7XG4gIGNhdGVnb3J5OiBzdHJpbmc7XG4gIG1vZGVsPzogc3RyaW5nO1xuICBtYW51ZmFjdHVyZXI6IHN0cmluZztcbiAgZGFya09wdGltaXplZD86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBjb25zdCBicmFuZHNVcmwgPSAob3B0aW9uczogQnJhbmRzT3B0aW9ucyk6IHN0cmluZyA9PlxuICBgaHR0cHM6Ly9icmFuZHMuaG9tZS1hc3Npc3RhbnQuaW8vJHtvcHRpb25zLmJyYW5kID8gXCJicmFuZHMvXCIgOiBcIlwifSR7XG4gICAgb3B0aW9ucy51c2VGYWxsYmFjayA/IFwiXy9cIiA6IFwiXCJcbiAgfSR7b3B0aW9ucy5kb21haW59LyR7b3B0aW9ucy5kYXJrT3B0aW1pemVkID8gXCJkYXJrX1wiIDogXCJcIn0ke1xuICAgIG9wdGlvbnMudHlwZVxuICB9LnBuZ2A7XG5cbmV4cG9ydCBjb25zdCBoYXJkd2FyZUJyYW5kc1VybCA9IChvcHRpb25zOiBIYXJkd2FyZUJyYW5kc09wdGlvbnMpOiBzdHJpbmcgPT5cbiAgYGh0dHBzOi8vYnJhbmRzLmhvbWUtYXNzaXN0YW50LmlvL2hhcmR3YXJlLyR7b3B0aW9ucy5jYXRlZ29yeX0vJHtcbiAgICBvcHRpb25zLmRhcmtPcHRpbWl6ZWQgPyBcImRhcmtfXCIgOiBcIlwiXG4gIH0ke29wdGlvbnMubWFudWZhY3R1cmVyfSR7b3B0aW9ucy5tb2RlbCA/IGBfJHtvcHRpb25zLm1vZGVsfWAgOiBcIlwifS5wbmdgO1xuXG5leHBvcnQgY29uc3QgZXh0cmFjdERvbWFpbkZyb21CcmFuZFVybCA9ICh1cmw6IHN0cmluZykgPT4gdXJsLnNwbGl0KFwiL1wiKVs0XTtcblxuZXhwb3J0IGNvbnN0IGlzQnJhbmRVcmwgPSAodGh1bWJuYWlsOiBzdHJpbmcgfCBcIlwiKTogYm9vbGVhbiA9PlxuICB0aHVtYm5haWwuc3RhcnRzV2l0aChcImh0dHBzOi8vYnJhbmRzLmhvbWUtYXNzaXN0YW50LmlvL1wiKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/util/brands-url.ts\n");

/***/ })

}]);